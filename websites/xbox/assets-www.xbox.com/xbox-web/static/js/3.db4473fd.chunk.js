/*! For license information please see 3.db4473fd.chunk.js.LICENSE.txt */
(window.__LOADABLE_LOADED_CHUNKS__=window.__LOADABLE_LOADED_CHUNKS__||[]).push([[3],{"/D66":function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.XboxProfileBuilder=void 0;const o=r("u7eo"),n=r("q6rY"),i=r("0fd2"),a=r("lzrI");t.XboxProfileBuilder=class{constructor(e){this.xuid=e,this.gamertag={legacyGamertag:"",base:"",uniqueGamertag:""},this.expiryMs=6e5}withExpiry(e){return this.expiryMs=60*e*1e3,this}withGamertag(e){return this.gamertag="string"===typeof e?{legacyGamertag:e,base:e,uniqueGamertag:e}:e,this}buildDataModel(){return{xuid:this.xuid,realName:"Real Name",gamerpicUrl:"",gamertag:this.gamertag,gamerscore:0,preferredColors:o.lceContent({primaryColor:new n.Color(""),secondaryColor:new n.Color(""),tertiaryColor:new n.Color("")}),presence:o.lceContent({presenceState:i.PresenceState.Offline,presenceText:"",presenceIsGame:!1}),detail:o.lceContent({isBlocked:!1,isMuted:!1,followerCount:0,followingCount:0,hasGamePass:!1,bio:"",location:"",tenure:0,watermarks:[]}),multiplayerSummary:o.lceNotRequested(),recommendation:o.lceNotRequested(),recentPlayerInfo:o.lceNotRequested(),titleHistory:o.lceNotRequested(),isCloaked:void 0,isIdentityShared:!1,isFriend:!1,followedDate:void 0,isFollower:!1,isFavorite:!1,isBroadcasting:!1,preferredPlatforms:[],linkedAccounts:[]}}buildProfile(){return{xuid:this.xuid,realName:"Real Name",gamerpicUrl:"",gamertag:this.gamertag,gamerscore:0,multiplayerSummary:void 0,preferredColors:{primaryColor:new n.Color(""),secondaryColor:new n.Color(""),tertiaryColor:new n.Color("")},presence:{presenceState:i.PresenceState.Offline,presenceText:"",presenceIsGame:!1},detail:{isBlocked:!1,isMuted:!1,followerCount:0,followingCount:0,hasGamePass:!1,bio:"",location:"",tenure:0,watermarks:[]},recommendation:void 0,recentPlayerInfo:void 0,titleHistory:void 0,isCloaked:void 0,isIdentityShared:!1,isFriend:!1,followedDate:void 0,isFollower:!1,isFavorite:!1,isBroadcasting:!1,preferredPlatforms:[],linkedAccounts:[],themeId:a.DEFAULT_THEME_ID}}buildDataModelLce(){return o.lceContent(this.buildDataModel(),this.expiryMs)}buildProfileLce(){return o.lceContent(this.buildProfile(),this.expiryMs)}}},"0fd2":function(e,t,r){"use strict";var o;Object.defineProperty(t,"__esModule",{value:!0}),t.PresenceDeviceType=t.NormalizedPresenceDeviceMap=t.PresenceDevice=t.PresenceState=void 0,function(e){e.Online="online",e.Offline="offline"}(t.PresenceState||(t.PresenceState={})),function(e){e.Unknown="Unknown",e.Android="Android",e.iOS="iOS",e.PC="PC",e.Win32="Win32",e.WindowsOneCore="WindowsOneCore",e.Xbox360="Xbox360",e.XboxOne="XboxOne",e.Scarlett="Scarlett"}(o=t.PresenceDevice||(t.PresenceDevice={})),t.NormalizedPresenceDeviceMap={unknown:o.Unknown,android:o.Android,ios:o.iOS,pc:o.PC,win32:o.Win32,windowsonecore:o.WindowsOneCore,xbox360:o.Xbox360,xboxone:o.XboxOne,scarlett:o.Scarlett},function(e){e.Unknown="Unknown",e.Mobile="Mobile",e.PC="PC",e.Console="Console"}(t.PresenceDeviceType||(t.PresenceDeviceType={}))},"0kO4":function(e,t,r){"use strict";r("kYxP"),r("sZjt"),r("udXp"),r("HBCE"),r("6pI8"),r("ReG1"),r("4QA/index.html"),r("OVwY"),r("gpa9"),r("tclo"),r("m6pu"),r("MyZA"),r("3e/+"),r("jeUp"),r("JlMe"),r("dv4H"),r("uYDL"),r("IAdD"),r("x4t0"),Object.defineProperty(t,"__esModule",{value:!0}),t.peopleReducer=t.friendsWhoPlayReducer=t.colorsReducer=t.themesReducer=t.platformReducer=t.gamerpicLibraryReducer=t.linkableAccountsReducer=t.externalProviderMetadataReducer=t.failedRequestReducer=t.followersReducer=t.recentPlayersReducer=t.suggestedFriendsReducer=t.friendsReducer=t.peopleMapReducer=t.handlePeopleHubUpdate=t.replaceLceData=t.mergePerson=t.initialState=void 0;const o=r("7DJB"),n=r("9OUN"),i=r("u7eo"),a=r("mvmj"),s=r("W/w3"),c=r("o92q"),l=r("F7Lo"),d=r("S2Wi");t.initialState={peopleMap:{},friends:i.lceNotRequested(),suggestedFriends:i.lceNotRequested(),recentPlayers:i.lceNotRequested(),followers:i.lceNotRequested(),externalProviderMetadata:i.lceNotRequested(),linkableAccounts:i.lceNotRequested(),gamerpicLibrary:i.lceNotRequested(),approvedPlatformData:i.lceNotRequested(),profileThemes:i.lceNotRequested(),supportedColors:i.lceNotRequested(),friendsWhoPlay:{},failedRequests:{}};t.mergePerson=(e,t)=>{var r,o,n,a,s,c,l,d,p,g,m,f,h,y;const P=i.getDataOrPrevious(e),v=i.getDataOrPrevious(t);if(P&&v)return{xuid:P.xuid,gamertag:null!==(r=v.gamertag)&&void 0!==r?r:P.gamertag,realName:null!==(o=v.realName)&&void 0!==o?o:P.realName,gamerscore:null!==(n=v.gamerscore)&&void 0!==n?n:P.gamerscore,isCloaked:null!==(a=v.isCloaked)&&void 0!==a?a:P.isCloaked,isIdentityShared:null!==(s=v.isIdentityShared)&&void 0!==s?s:P.isIdentityShared,gamerpicUrl:null!==(c=v.gamerpicUrl)&&void 0!==c?c:P.gamerpicUrl,isFriend:null!==(l=v.isFriend)&&void 0!==l?l:P.isFriend,isFollower:null!==(d=v.isFollower)&&void 0!==d?d:P.isFollower,followedDate:null!==(p=v.followedDate)&&void 0!==p?p:P.followedDate,isFavorite:null!==(g=v.isFavorite)&&void 0!==g?g:P.isFavorite,isBroadcasting:null!==(m=v.isBroadcasting)&&void 0!==m?m:P.isBroadcasting,multiplayerSummary:i.isContent(v.multiplayerSummary)?i.lceTransform(v.multiplayerSummary,e=>u(e,P.multiplayerSummary)):P.multiplayerSummary,preferredColors:i.isContent(v.preferredColors)?v.preferredColors:P.preferredColors,presence:i.isContent(v.presence)?v.presence:P.presence,detail:i.isContent(v.detail)?v.detail:P.detail,recommendation:i.isContent(v.recommendation)?v.recommendation:P.recommendation,recentPlayerInfo:i.isContent(v.recentPlayerInfo)?v.recentPlayerInfo:P.recentPlayerInfo,titleHistory:i.isContent(v.titleHistory)?v.titleHistory:P.titleHistory,preferredPlatforms:null!==(f=v.preferredPlatforms)&&void 0!==f?f:P.preferredPlatforms,linkedAccounts:null!==(h=v.linkedAccounts)&&void 0!==h?h:P.linkedAccounts,themeId:null!==(y=v.themeId)&&void 0!==y?y:P.themeId}};const u=(e,t)=>{var r;if(i.isContent(t)){const o=t.data,n=e.party?e.party===c.EmptyParty?void 0:e.party:o.party;let i;if(e.joinableActivities){i=[];for(const t of e.joinableActivities){const e=null===(r=o.joinableActivities)||void 0===r?void 0:r.find(e=>e.titleId===t.titleId);e?i.push(t.sequenceNumber>e.sequenceNumber?t:e):i.push(t)}}else i=o.joinableActivities;return{party:n,joinableActivities:i}}return e},p=(e,t)=>{const r=new Set(e);for(const o of t)r.add(o);return[...r]};t.replaceLceData=(e,r)=>{if(!r.xuid||!e[r.xuid])return e;const n=e,i=r.xuid,a=n[i],s=o.__rest(n,["symbol"===typeof i?i:i+""]);if("data"in a){const o=t.mergePerson(a,d.getLCEContentWithCacheTime(r));return o?Object.assign(Object.assign({},s),{[r.xuid]:Object.assign(Object.assign({},a),{data:o})}):e}if("previousContent"in a&&a.previousContent){const o=t.mergePerson(a,d.getLCEContentWithCacheTime(r));return o?Object.assign(Object.assign({},s),{[r.xuid]:Object.assign(Object.assign({},a),{previousContent:Object.assign(Object.assign({},a.previousContent),{data:o})})}):e}return e};t.handlePeopleHubUpdate=(e,r)=>{if(!e)return r;if("data"in e||"previousContent"in e&&e.previousContent){const o=t.mergePerson(e,r);if(o)return Object.assign(Object.assign({},r),{data:o})}return r};const g=e=>"".concat(e.type,"-").concat(e.currentXuid,"-").concat(e.targetXuid),m=e=>{var t;return"".concat(e.type,"-").concat((null!==(t=e.xuids)&&void 0!==t?t:[]).join("-"))},f=e=>{const t="".concat(e.type,"-").concat(e.targetUser);switch(e.type){case l.PeopleActionType.SetUserMuteState:return"".concat(t,"-").concat(e.shouldMute?"Mute":"Unmute");case l.PeopleActionType.SetUserBlockState:return"".concat(t,"-").concat(e.shouldBlock?"Block":"Unblock");default:return t}},h=e=>"".concat(e.type,"-").concat(e.shouldCloak?"Cloak_Presence":"Uncloak_Presence"),y=(e,r)=>Object.entries(e).reduce((e,o)=>{let[n,a]=o;return a?Object.assign(Object.assign({},e),{[n]:i.isError(a)?i.lceError(a.error,r[n]):t.handlePeopleHubUpdate(r[n],a)}):e},r);t.peopleMapReducer=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:t.initialState.peopleMap,r=arguments.length>1?arguments[1]:void 0;switch(r.type){case l.PeopleActionType.GetPeople:case l.PeopleActionType.GetPeopleAndAddToLocalFriends:return r.xuids.reduce((t,r)=>Object.assign(Object.assign({},t),{[r]:i.lceFetching(e[r])}),e);case l.PeopleActionType.GetPeopleCompleted:case l.PeopleActionType.GetPeopleAndAddToLocalFriendsCompleted:return a.isErrorAction(r)?r.xuids.reduce((t,o)=>Object.assign(Object.assign({},t),{[o]:i.lceError(r.error,e[o])}),e):y(r.people,e);case l.PeopleActionType.GetRecommendationsCompleted:case l.PeopleActionType.GetRecentPlayersCompleted:case l.PeopleActionType.GetFriendsCompleted:case l.PeopleActionType.GetFollowersCompleted:case l.PeopleActionType.GetFriendsWhoPlayCompleted:return a.isErrorAction(r)?e:y(r.people,e);case l.PeopleActionType.GetPerson:return Object.assign(Object.assign({},e),{[r.xuid]:i.lceFetching(e[r.xuid])});case l.PeopleActionType.GetPersonCompleted:return a.isErrorAction(r)?Object.assign(Object.assign({},e),{[r.xuid]:i.lceError(r.error,e[r.xuid])}):Object.assign(Object.assign({},e),{[r.xuid]:i.isError(r.person)?i.lceError(r.person.error,e[r.xuid]):t.handlePeopleHubUpdate(e[r.xuid],r.person)});case l.PeopleActionType.UpdatePeople:return r.profiles.reduce((e,r)=>Object.assign(Object.assign({},e),t.replaceLceData(e,r)),e);case l.PeopleActionType.CachePeople:return r.profiles.reduce((r,o)=>{var n,a,s,c,l,u,p,g,m;return e[o.xuid]?Object.assign(Object.assign({},r),t.replaceLceData(r,o)):Object.assign(Object.assign({},r),{[o.xuid]:d.getLCEContentWithCacheTime(Object.assign(Object.assign({},o),{multiplayerSummary:null!==(n=o.multiplayerSummary)&&void 0!==n?n:i.lceNotRequested(),presence:null!==(a=o.presence)&&void 0!==a?a:i.lceNotRequested(),preferredColors:null!==(s=o.preferredColors)&&void 0!==s?s:i.lceNotRequested(),detail:null!==(c=o.detail)&&void 0!==c?c:i.lceNotRequested(),recommendation:null!==(l=o.recommendation)&&void 0!==l?l:i.lceNotRequested(),recentPlayerInfo:null!==(u=o.recentPlayerInfo)&&void 0!==u?u:i.lceNotRequested(),titleHistory:null!==(p=o.titleHistory)&&void 0!==p?p:i.lceNotRequested(),preferredPlatforms:null!==(g=o.preferredPlatforms)&&void 0!==g?g:[],linkedAccounts:null!==(m=o.linkedAccounts)&&void 0!==m?m:[]}))})},e);case l.PeopleActionType.FollowUserCompleted:if(!a.isErrorAction(r)){if(i.getDataOrPrevious(e[r.xuid])){const o={xuid:r.xuid,isFriend:!0};return t.replaceLceData(e,o)}}return e;case l.PeopleActionType.FollowUsersCompleted:if(!a.isErrorAction(r)){let o=e;for(const n of r.xuids){if(i.getDataOrPrevious(e[n])){const e={xuid:n,isFriend:!0};o=t.replaceLceData(o,e)}}return o}return e;case l.PeopleActionType.UnfollowUserCompleted:if(!a.isErrorAction(r)){if(i.getDataOrPrevious(e[r.xuid])){const o={xuid:r.xuid,isFriend:!1};return t.replaceLceData(e,o)}}return e;case l.PeopleActionType.FavoriteUserCompleted:if(!a.isErrorAction(r)){if(i.getDataOrPrevious(e[r.xuid])){const o={xuid:r.xuid,isFavorite:!0};return t.replaceLceData(e,o)}}return e;case l.PeopleActionType.UnfavoriteUserCompleted:if(!a.isErrorAction(r)){if(i.getDataOrPrevious(e[r.xuid])){const o={xuid:r.xuid,isFavorite:!1};return t.replaceLceData(e,o)}}return e;case l.PeopleActionType.SetUserBlockStateCompleted:{if(a.isErrorAction(r))return e;const o=i.getDataOrPrevious(e[r.xuid]);if(o){const n=i.getDataOrPrevious(o.detail);if(n){const o={xuid:r.xuid,isFriend:!r.shouldBlock,detail:d.getLCEContentWithCacheTime(Object.assign(Object.assign({},n),{isBlocked:r.shouldBlock}))};return t.replaceLceData(e,o)}}return e}case l.PeopleActionType.SetUserMuteStateCompleted:{if(a.isErrorAction(r))return e;const o=i.getDataOrPrevious(e[r.xuid]);if(o){const n=i.getDataOrPrevious(o.detail);if(n){const o={xuid:r.xuid,detail:d.getLCEContentWithCacheTime(Object.assign(Object.assign({},n),{isMuted:r.shouldMute}))};return t.replaceLceData(e,o)}}return e}case l.PeopleActionType.SetCurrentUserCloakStateCompleted:if(a.isErrorAction(r))return e;if(i.getDataOrPrevious(e[r.currentUserXuid])){const o={xuid:r.currentUserXuid,isCloaked:r.shouldCloak};return t.replaceLceData(e,o)}return e;case l.PeopleActionType.RemovePeopleFromLocalFriends:return r.xuids.reduce((e,r)=>{if(i.getDataOrPrevious(e[r])){const o={xuid:r,isFriend:!1};return t.replaceLceData(e,o)}return e},e);case s.CommonActionType.UserSignedOut:return t.initialState.peopleMap;default:return e}};t.friendsReducer=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:t.initialState.friends,r=arguments.length>1?arguments[1]:void 0;switch(r.type){case l.PeopleActionType.GetFriends:return i.lceFetching(e);case l.PeopleActionType.GetFriendsCompleted:return a.isErrorAction(r)?i.lceError(r.error,e):i.lceContent(Object.keys(r.people));case l.PeopleActionType.FollowUserCompleted:return a.isErrorAction(r)?e:i.lceTransform(e,e=>p(e,[r.xuid]));case l.PeopleActionType.FollowUsersCompleted:return a.isErrorAction(r)?e:i.lceTransform(e,e=>p(e,r.xuids));case l.PeopleActionType.GetPeopleAndAddToLocalFriendsCompleted:return a.isErrorAction(r)?e:i.lceTransform(e,e=>p(e,Object.keys(r.people)));case l.PeopleActionType.UnfollowUserCompleted:return a.isErrorAction(r)?e:i.lceTransform(e,e=>e.filter(e=>e!==r.xuid));case l.PeopleActionType.RemovePeopleFromLocalFriends:return i.lceTransform(e,e=>e.filter(e=>!r.xuids.includes(e)));case l.PeopleActionType.SetUserBlockStateCompleted:return a.isErrorAction(r)?e:r.shouldBlock?i.lceTransform(e,e=>e.filter(e=>e!==r.xuid)):e;case s.CommonActionType.UserSignedOut:return t.initialState.friends;default:return e}};const P=(e,t)=>"previousContent"in e&&e.previousContent?Object.assign(Object.assign({},e),{previousContent:Object.assign(Object.assign({},e.previousContent),{data:e.previousContent.data.filter(e=>e!==t)})}):"data"in e?Object.assign(Object.assign({},e),{data:e.data.filter(e=>e!==t)}):e;t.suggestedFriendsReducer=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:t.initialState.suggestedFriends,r=arguments.length>1?arguments[1]:void 0;var o;switch(r.type){case l.PeopleActionType.FollowUserCompleted:return!a.isErrorAction(r)&&(null===(o=r.options)||void 0===o?void 0:o.removeFromRecommendations)?P(e,r.xuid):e;case l.PeopleActionType.GetRecommendations:return i.lceFetching(e);case l.PeopleActionType.GetRecommendationsCompleted:return a.isErrorAction(r)?i.lceError(r.error,e):r.xuids;case l.PeopleActionType.RemoveRecommendationCompleted:return P(e,r.xuid);case s.CommonActionType.UserSignedOut:return t.initialState.suggestedFriends;default:return e}};t.recentPlayersReducer=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:t.initialState.recentPlayers,r=arguments.length>1?arguments[1]:void 0;switch(r.type){case l.PeopleActionType.GetRecentPlayers:return i.lceFetching(e);case l.PeopleActionType.GetRecentPlayersCompleted:return a.isErrorAction(r)?i.lceError(r.error,e):r.xuids;case s.CommonActionType.UserSignedOut:return t.initialState.recentPlayers;default:return e}};t.followersReducer=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:t.initialState.followers,r=arguments.length>1?arguments[1]:void 0;switch(r.type){case l.PeopleActionType.GetFollowers:return i.lceFetching(e);case l.PeopleActionType.GetFollowersCompleted:return a.isErrorAction(r)?i.lceError(r.error,e):r.xuids;case s.CommonActionType.UserSignedOut:return t.initialState.followers;default:return e}};t.failedRequestReducer=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:t.initialState.failedRequests,r=arguments.length>1?arguments[1]:void 0;switch(r.type){case l.PeopleActionType.FollowUserCompleted:case l.PeopleActionType.UnfollowUserCompleted:case l.PeopleActionType.FavoriteUserCompleted:case l.PeopleActionType.UnfavoriteUserCompleted:return a.isErrorAction(r)?Object.assign(Object.assign({},e),{[g(r.failedAction)]:Object.assign({},r.failedAction)}):e;case l.PeopleActionType.FollowUsersCompleted:return a.isErrorAction(r)?Object.assign(Object.assign({},e),{[m(r.failedAction)]:Object.assign({},r.failedAction)}):e;case l.PeopleActionType.SetUserBlockStateCompleted:case l.PeopleActionType.SetUserMuteStateCompleted:return a.isErrorAction(r)?Object.assign(Object.assign({},e),{[f(r.failedAction)]:Object.assign({},r.failedAction)}):e;case l.PeopleActionType.SetCurrentUserCloakStateCompleted:return a.isErrorAction(r)?Object.assign(Object.assign({},e),{[h(r.failedAction)]:Object.assign({},r.failedAction)}):e;case l.PeopleActionType.UpdateProfileSettingsCompleted:return a.isErrorAction(r)?Object.assign(Object.assign({},e),{["".concat(r.type)]:Object.assign({},r.failedAction)}):e;case l.PeopleActionType.ClearFailedRequest:{const t=e,n=r.failedActionId,i=(t[n],o.__rest(t,["symbol"===typeof n?n:n+""]));return Object.assign({},i)}case s.CommonActionType.UserSignedOut:return t.initialState.failedRequests;default:return e}};t.externalProviderMetadataReducer=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:i.lceNotRequested(),t=arguments.length>1?arguments[1]:void 0;switch(t.type){case l.PeopleActionType.GetExternalProviderMetadata:return i.lceFetching(e);case l.PeopleActionType.GetExternalProviderMetadataCompleted:return a.isErrorAction(t)?i.lceError(t.error,e):t.metadata;default:return e}};t.linkableAccountsReducer=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:i.lceNotRequested(),r=arguments.length>1?arguments[1]:void 0;var o;switch(r.type){case l.PeopleActionType.GetLinkableAccounts:return i.lceFetching(e);case l.PeopleActionType.GetLinkableAccountsCompleted:return a.isErrorAction(r)?i.lceError(r.error,e):r.accounts;case l.PeopleActionType.UpdateShowLinkedAccount:return(null===(o=i.getDataOrPrevious(e))||void 0===o?void 0:o[r.networkName])?i.lceTransform(e,e=>Object.assign(Object.assign({},e),{[r.networkName]:Object.assign(Object.assign({},e[r.networkName]),{showOnProfile:r.showOnProfile})})):e;case s.CommonActionType.UserSignedOut:return t.initialState.linkableAccounts;default:return e}};t.gamerpicLibraryReducer=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:i.lceNotRequested(),t=arguments.length>1?arguments[1]:void 0;switch(t.type){case l.PeopleActionType.GetGamerpicLibrary:return i.lceFetching(e);case l.PeopleActionType.GetGamerpicLibraryCompleted:return a.isErrorAction(t)?i.lceError(t.error,e):t.gamerpicLibrary;default:return e}};t.platformReducer=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:i.lceNotRequested(),t=arguments.length>1?arguments[1]:void 0;switch(t.type){case l.PeopleActionType.GetApprovedPlatformData:return i.lceFetching(e);case l.PeopleActionType.GetApprovedPlatformDataCompleted:return a.isErrorAction(t)?i.lceError(t.error,e):t.approvedPlatformData;default:return e}};t.themesReducer=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:i.lceNotRequested(),t=arguments.length>1?arguments[1]:void 0;switch(t.type){case l.PeopleActionType.GetProfileThemes:return i.lceFetching(e);case l.PeopleActionType.GetProfileThemesCompleted:return a.isErrorAction(t)?i.lceError(t.error,e):i.lceContent({profileThemes:t.profileThemes,locale:t.locale});default:return e}};t.colorsReducer=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:i.lceNotRequested(),t=arguments.length>1?arguments[1]:void 0;switch(t.type){case l.PeopleActionType.GetSupportedColors:return i.lceFetching(e);case l.PeopleActionType.GetSupportedColorsCompleted:return a.isErrorAction(t)?i.lceError(t.error,e):t.supportedColors;default:return e}};t.friendsWhoPlayReducer=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:t.initialState.friendsWhoPlay,r=arguments.length>1?arguments[1]:void 0;switch(r.type){case l.PeopleActionType.GetFriendsWhoPlay:return Object.assign(Object.assign({},e),{[r.titleId]:i.lceFetching(e[r.titleId])});case l.PeopleActionType.GetFriendsWhoPlayCompleted:return a.isErrorAction(r)?Object.assign(Object.assign({},e),{[r.titleId]:i.lceError(r.error,e[r.titleId])}):Object.assign(Object.assign({},e),{[r.titleId]:r.xuids});case s.CommonActionType.UserSignedOut:return t.initialState.friendsWhoPlay;default:return e}},t.peopleReducer=n.combineReducers({peopleMap:t.peopleMapReducer,friends:t.friendsReducer,externalProviderMetadata:t.externalProviderMetadataReducer,linkableAccounts:t.linkableAccountsReducer,suggestedFriends:t.suggestedFriendsReducer,recentPlayers:t.recentPlayersReducer,followers:t.followersReducer,gamerpicLibrary:t.gamerpicLibraryReducer,failedRequests:t.failedRequestReducer,approvedPlatformData:t.platformReducer,profileThemes:t.themesReducer,supportedColors:t.colorsReducer,friendsWhoPlay:t.friendsWhoPlayReducer})},"1lEP":function(e,t,r){"use strict";var o;r("JtPf"),Object.defineProperty(t,"__esModule",{value:!0}),t.XblSocialService=void 0;const n=r("7DJB"),i=r("s6Xb"),a=r("E0xh"),s=r("rzN3"),c=r("9v3z");let l=o=class{constructor(e,t,r,o){this.httpClient=(new a.HttpClientBuilder).authenticator(new s.TokenAuthenticator(e)).requestInterceptor(new c.AcceptLanguageInterceptor(t)).requestInterceptor(new c.CorrelationVectorInterceptor(r)).interceptors(o).build(),this.requestFactory=a.RequestFactory.withBaseUrl("https://social.xboxlive.com/users").setCommonHeaders({[a.HttpHeader.XXBLContractVersion]:"2",[a.HttpHeader.Accept]:"application/json"})}async followUser(e,t){await this.httpClient.execute(this.requestFactory.put(o.getUsersPath("xuid(".concat(e,")"),"xuid(".concat(t,")"))))}async followUsers(e){await this.httpClient.execute(this.requestFactory.post(o.getUsersPath("me","xuids",["method=add"]),{xuids:e}))}async unfollowUser(e,t){await this.httpClient.execute(this.requestFactory.delete(o.getUsersPath("xuid(".concat(e,")"),"xuid(".concat(t,")"))))}async favoriteUser(e,t){await this.httpClient.execute(this.requestFactory.post(o.getUsersPath("xuid(".concat(e,")"),"favorites/xuids",["method=add"]),JSON.stringify({xuids:[t]}),{headers:{[a.HttpHeader.ContentType]:"application/json"}}))}async unfavoriteUser(e,t){await this.httpClient.execute(this.requestFactory.post(o.getUsersPath("xuid(".concat(e,")"),"favorites/xuids",["method=remove"]),JSON.stringify({xuids:[t]}),{headers:{[a.HttpHeader.ContentType]:"application/json"}}))}async removeRecommendation(e){await this.httpClient.execute(this.requestFactory.setCommonHeaders({[a.HttpHeader.XXBLContractVersion]:"1"}).delete("me/suggestions/xuid(".concat(e,")")))}static getUsersPath(e,t,r){const o="/".concat(e,"https://www.xbox.com/people/").concat(t);return r&&0!==r.length?"".concat(o,"?").concat(r.join("&")):o}};l=o=n.__decorate([i.injectable(),n.__param(0,i.inject(s.TokenProvider)),n.__param(1,i.inject(c.AcceptableLanguageProvider)),n.__param(2,i.inject(c.CorrelationVectorProvider)),n.__param(3,i.inject(a.InterceptorCollection)),n.__metadata("design:paramtypes",[Object,Function,Function,Object])],l),t.XblSocialService=l},"4liS":function(e,t,r){"use strict";r("JtPf"),r("x4t0"),r("kYxP"),Object.defineProperty(t,"__esModule",{value:!0}),t.XblProfileAssetsService=void 0;const o=r("7DJB"),n=r("s6Xb"),i=r("CT5i"),a=r("E0xh"),s=r("rzN3"),c=r("9v3z"),l=r("DfD7"),d=r("u4R7"),u="https://dlassets-ssl.xboxlive.com/public/content/ppl",p="".concat(u,"/platforms"),g="".concat(p,"https://www.xbox.com/").concat("1.0","/PlatformsManifest.json"),m="".concat(u,"/colors"),f="".concat(m,"/colorsmanifest.json"),h="".concat(u,"/profilethemes/v1/ThemesManifest.json");let y=class{constructor(e,t,r,o,n){this.acceptLanguageProvider=t,this.logger=n,this.httpClient=(new a.HttpClientBuilder).authenticator(new s.TokenAuthenticator(e)).requestInterceptor(new c.AcceptLanguageInterceptor(t)).requestInterceptor(new c.CorrelationVectorInterceptor(r)).interceptors(o).build()}async getApprovedPlatforms(){const e=(await this.httpClient.execute({url:g,method:"get"})).data,t=await this.getAppLocales();let r;for(let a=0;a<t.length;a++){const o=e.localizedTextManifests.find(e=>e.supportedLocales.includes(t[a]));if(null===o||void 0===o?void 0:o.manifestLocale){r=null===o||void 0===o?void 0:o.manifestLocale;break}}const o=null!==r&&void 0!==r?r:"en-US",n="".concat(p,"/LocalizationStrings_").concat(encodeURIComponent(o),".json"),i=(await this.httpClient.execute({url:n,method:"get"})).data;return d.mapPlatformManifestToApprovedPlatformData(e,i)}async getProfileThemeData(){const e=(await this.httpClient.execute({url:h,method:"get"})).data,t=await this.getAppLocales();let r,o="en-US";for(let i=0;i<t.length;i++)if(t[i]in e.localizationManifestsMap){r=e.localizationManifestsMap[t[i]],o=t[i];break}const n=null!==r&&void 0!==r?r:i.asString(e.fallbackManifestUrl),a=(await this.httpClient.execute({url:n,method:"get"})).data;return{profileThemes:d.mapThemesManifestToProfileThemes(e,a),locale:o}}async getSupportedColors(){const e=[],t=(await this.httpClient.execute({url:f,method:"get"})).data,r=d.mapColorsManifestToColorIds(t);for(const n of r)try{const t="".concat(m,"https://www.xbox.com/").concat(encodeURIComponent(n),".json"),r=(await this.httpClient.execute({url:t,method:"get"})).data,o=d.mapColorAssetToPreferredColor(r);e.push({id:n,manifestUrl:t,color:o})}catch(o){this.logger.log("getSupportedColors",l.LogLevel.Warn,"Experienced an error while fetching a specific color: colorId: ".concat(n," error: ").concat(o))}return e}async getAppLocales(){let e=[];const t=await this.acceptLanguageProvider();return"string"===typeof t?e=[t]:t&&(e=t),e}};y=o.__decorate([n.injectable(),o.__param(0,n.inject(s.TokenProvider)),o.__param(1,n.inject(c.AcceptableLanguageProvider)),o.__param(2,n.inject(c.CorrelationVectorProvider)),o.__param(3,n.inject(a.InterceptorCollection)),o.__param(4,n.inject(l.Logger)),o.__metadata("design:paramtypes",[Object,Function,Function,Object,Object])],y),t.XblProfileAssetsService=y},"5Nj6":function(e,t,r){"use strict";r("jQ/y"),Object.defineProperty(t,"__esModule",{value:!0}),t.ProfileService=void 0,t.ProfileService=Symbol("ProfileService")},"5yXe":function(e,t,r){"use strict";r("IAdD"),Object.defineProperty(t,"__esModule",{value:!0}),t.ServiceAccountProfile=t.ServiceAccount=void 0;const o=r("o92q");t.ServiceAccount={xuid:"0",gamertag:{legacyGamertag:"Xbox",base:"Xbox",uniqueGamertag:"Xbox"},gamerpicUrl:"https://dlassets-ssl.xboxlive.com/public/content/ppl/gamerpics/xbox-lg.png",preferredColors:{primaryColor:new o.Color("#107c10"),secondaryColor:new o.Color("#102b14"),tertiaryColor:new o.Color("#155715")}},t.ServiceAccountProfile=Object.assign(Object.assign({},t.ServiceAccount),{gamerscore:0,isFavorite:!1,isFollower:!1,isFriend:!1,isIdentityShared:!1,isBroadcasting:!1,preferredPlatforms:[],linkedAccounts:[],themeId:o.DEFAULT_THEME_ID})},"695E":function(e,t,r){"use strict";r.d(t,"b",(function(){return o})),r.d(t,"a",(function(){return n}));const o="people",n="people"},"6rQw":function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});r("7DJB").__exportStar(r("dyO0"),t)},"7DJB":function(e,t,r){"use strict";r.r(t),r.d(t,"__extends",(function(){return n})),r.d(t,"__assign",(function(){return i})),r.d(t,"__rest",(function(){return a})),r.d(t,"__decorate",(function(){return s})),r.d(t,"__param",(function(){return c})),r.d(t,"__metadata",(function(){return l})),r.d(t,"__awaiter",(function(){return d})),r.d(t,"__generator",(function(){return u})),r.d(t,"__createBinding",(function(){return p})),r.d(t,"__exportStar",(function(){return g})),r.d(t,"__values",(function(){return m})),r.d(t,"__read",(function(){return f})),r.d(t,"__spread",(function(){return h})),r.d(t,"__spreadArrays",(function(){return y})),r.d(t,"__spreadArray",(function(){return P})),r.d(t,"__await",(function(){return v})),r.d(t,"__asyncGenerator",(function(){return S})),r.d(t,"__asyncDelegator",(function(){return b})),r.d(t,"__asyncValues",(function(){return C})),r.d(t,"__makeTemplateObject",(function(){return A})),r.d(t,"__importStar",(function(){return w})),r.d(t,"__importDefault",(function(){return O})),r.d(t,"__classPrivateFieldGet",(function(){return T})),r.d(t,"__classPrivateFieldSet",(function(){return E}));r("IAdD"),r("M3Ze"),r("JtPf"),r("jQ/y"),r("kYxP"),r("PqcW");var o=function(e,t){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])})(e,t)};function n(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function r(){this.constructor=e}o(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)}var i=function(){return(i=Object.assign||function(e){for(var t,r=1,o=arguments.length;r<o;r++)for(var n in t=arguments[r])Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e}).apply(this,arguments)};function a(e,t){var r={};for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&t.indexOf(o)<0&&(r[o]=e[o]);if(null!=e&&"function"===typeof Object.getOwnPropertySymbols){var n=0;for(o=Object.getOwnPropertySymbols(e);n<o.length;n++)t.indexOf(o[n])<0&&Object.prototype.propertyIsEnumerable.call(e,o[n])&&(r[o[n]]=e[o[n]])}return r}function s(e,t,r,o){var n,i=arguments.length,a=i<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,r):o;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)a=Reflect.decorate(e,t,r,o);else for(var s=e.length-1;s>=0;s--)(n=e[s])&&(a=(i<3?n(a):i>3?n(t,r,a):n(t,r))||a);return i>3&&a&&Object.defineProperty(t,r,a),a}function c(e,t){return function(r,o){t(r,o,e)}}function l(e,t){if("object"===typeof Reflect&&"function"===typeof Reflect.metadata)return Reflect.metadata(e,t)}function d(e,t,r,o){return new(r||(r=Promise))((function(n,i){function a(e){try{c(o.next(e))}catch(t){i(t)}}function s(e){try{c(o.throw(e))}catch(t){i(t)}}function c(e){var t;e.done?n(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(a,s)}c((o=o.apply(e,t||[])).next())}))}function u(e,t){var r,o,n,i,a={label:0,sent:function(){if(1&n[0])throw n[1];return n[1]},trys:[],ops:[]};return i={next:s(0),throw:s(1),return:s(2)},"function"===typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function s(i){return function(s){return function(i){if(r)throw new TypeError("Generator is already executing.");for(;a;)try{if(r=1,o&&(n=2&i[0]?o.return:i[0]?o.throw||((n=o.return)&&n.call(o),0):o.next)&&!(n=n.call(o,i[1])).done)return n;switch(o=0,n&&(i=[2&i[0],n.value]),i[0]){case 0:case 1:n=i;break;case 4:return a.label++,{value:i[1],done:!1};case 5:a.label++,o=i[1],i=[0];continue;case 7:i=a.ops.pop(),a.trys.pop();continue;default:if(!(n=(n=a.trys).length>0&&n[n.length-1])&&(6===i[0]||2===i[0])){a=0;continue}if(3===i[0]&&(!n||i[1]>n[0]&&i[1]<n[3])){a.label=i[1];break}if(6===i[0]&&a.label<n[1]){a.label=n[1],n=i;break}if(n&&a.label<n[2]){a.label=n[2],a.ops.push(i);break}n[2]&&a.ops.pop(),a.trys.pop();continue}i=t.call(e,a)}catch(s){i=[6,s],o=0}finally{r=n=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,s])}}}var p=Object.create?function(e,t,r,o){void 0===o&&(o=r),Object.defineProperty(e,o,{enumerable:!0,get:function(){return t[r]}})}:function(e,t,r,o){void 0===o&&(o=r),e[o]=t[r]};function g(e,t){for(var r in e)"default"===r||Object.prototype.hasOwnProperty.call(t,r)||p(t,e,r)}function m(e){var t="function"===typeof Symbol&&Symbol.iterator,r=t&&e[t],o=0;if(r)return r.call(e);if(e&&"number"===typeof e.length)return{next:function(){return e&&o>=e.length&&(e=void 0),{value:e&&e[o++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")}function f(e,t){var r="function"===typeof Symbol&&e[Symbol.iterator];if(!r)return e;var o,n,i=r.call(e),a=[];try{for(;(void 0===t||t-- >0)&&!(o=i.next()).done;)a.push(o.value)}catch(s){n={error:s}}finally{try{o&&!o.done&&(r=i.return)&&r.call(i)}finally{if(n)throw n.error}}return a}function h(){for(var e=[],t=0;t<arguments.length;t++)e=e.concat(f(arguments[t]));return e}function y(){for(var e=0,t=0,r=arguments.length;t<r;t++)e+=arguments[t].length;var o=Array(e),n=0;for(t=0;t<r;t++)for(var i=arguments[t],a=0,s=i.length;a<s;a++,n++)o[n]=i[a];return o}function P(e,t){for(var r=0,o=t.length,n=e.length;r<o;r++,n++)e[n]=t[r];return e}function v(e){return this instanceof v?(this.v=e,this):new v(e)}function S(e,t,r){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var o,n=r.apply(e,t||[]),i=[];return o={},a("next"),a("throw"),a("return"),o[Symbol.asyncIterator]=function(){return this},o;function a(e){n[e]&&(o[e]=function(t){return new Promise((function(r,o){i.push([e,t,r,o])>1||s(e,t)}))})}function s(e,t){try{(r=n[e](t)).value instanceof v?Promise.resolve(r.value.v).then(c,l):d(i[0][2],r)}catch(o){d(i[0][3],o)}var r}function c(e){s("next",e)}function l(e){s("throw",e)}function d(e,t){e(t),i.shift(),i.length&&s(i[0][0],i[0][1])}}function b(e){var t,r;return t={},o("next"),o("throw",(function(e){throw e})),o("return"),t[Symbol.iterator]=function(){return this},t;function o(o,n){t[o]=e[o]?function(t){return(r=!r)?{value:v(e[o](t)),done:"return"===o}:n?n(t):t}:n}}function C(e){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var t,r=e[Symbol.asyncIterator];return r?r.call(e):(e=m(e),t={},o("next"),o("throw"),o("return"),t[Symbol.asyncIterator]=function(){return this},t);function o(r){t[r]=e[r]&&function(t){return new Promise((function(o,n){(function(e,t,r,o){Promise.resolve(o).then((function(t){e({value:t,done:r})}),t)})(o,n,(t=e[r](t)).done,t.value)}))}}}function A(e,t){return Object.defineProperty?Object.defineProperty(e,"raw",{value:t}):e.raw=t,e}var _=Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t};function w(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)"default"!==r&&Object.prototype.hasOwnProperty.call(e,r)&&p(t,e,r);return _(t,e),t}function O(e){return e&&e.__esModule?e:{default:e}}function T(e,t,r,o){if("a"===r&&!o)throw new TypeError("Private accessor was defined without a getter");if("function"===typeof t?e!==t||!o:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===r?o:"a"===r?o.call(e):o?o.value:t.get(e)}function E(e,t,r,o,n){if("m"===o)throw new TypeError("Private method is not writable");if("a"===o&&!n)throw new TypeError("Private accessor was defined without a setter");if("function"===typeof t?e!==t||!n:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return"a"===o?n.call(e,r):n?n.value=r:t.set(e,r),r}},"847H":function(e,t,r){"use strict";r.d(t,"a",(function(){return c}));var o=r("OrNH"),n=r("/arO"),i=r("Xapl"),a=r("LYhU");const s=new n.a("XboxSocialClient/BasePlugin");class c{constructor(e,t,r){this.reduxEnvironment=e,this.name=t,this.telemetryDelegator=r,this.hasConsumedSignInAction=!1}registerSaga(e){const t=this.name,r=this.createEffectMiddlewares(),n=this.telemetryDelegator;return this.reduxEnvironment.sagaMiddleware.registerSaga(t,(function*(){for(;;)try{yield Object(o.call)(e),s.warn("Action handler for '".concat(t,"' completed execution - Typically action handlers will run \n                            indefinitely so this may indicate there's a bug in the saga"));break}catch(r){const e=Object(i.a)(r);s.error("Action handler for '".concat(t,"' plugin threw an error during execution - Restarting saga"),e),n.logEvent({xboxSocialClientEvent:a.a.SagaErrorEvent,pluginName:t,error:e})}}),r)}dispatchSignInAction(e){this.hasConsumedSignInAction||(this.reduxEnvironment.sagaMiddleware.dispatchActionToPlugin(this.name,e),this.hasConsumedSignInAction=!0)}dispatchSignOutAction(e){this.hasConsumedSignInAction&&(this.reduxEnvironment.sagaMiddleware.dispatchActionToPlugin(this.name,e),this.hasConsumedSignInAction=!1)}createEffectMiddlewares(){}}},"Bk/B":function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0})},EDn9:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.EmptyParty=t.SessionJoinRestriction=void 0,function(e){e.Unknown="Unknown",e.Public="Public",e.InviteOnly="InviteOnly",e.Followed="Followed"}(t.SessionJoinRestriction||(t.SessionJoinRestriction={})),t.EmptyParty={memberCount:0,sessionRef:{scid:"0",templateName:"0",name:"0"},joinable:!1}},ENAq:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.mapSettingItemsToBatchRequest=t.mapGamerpicLibraryResponseToArray=t.mapGamerpicResponseItemToMetadata=void 0;const o=r("CT5i");function n(e){const t=e,r=o.asString(t.id);if(r.length<1)throw new o.ValidationError("item's id had length < 1");return{id:r,altText:o.asString(t.AltText),imageUri:"https://dlassets-ssl.xboxlive.com/public/content/ppl/gamerpics/".concat(r,"-md.html")}}t.mapGamerpicResponseItemToMetadata=n,t.mapGamerpicLibraryResponseToArray=function(e){return o.asOptionalCompactArray(null===e||void 0===e?void 0:e.gamerpics,n)},t.mapSettingItemsToBatchRequest=function(e){const t=[];for(const r in e){const o=r,n=e[o];void 0!==n&&t.push({userSetting:{id:o,value:n}})}return{settings:t}}},F7Lo:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.PeopleAction=t.PeopleActionType=void 0;const o=r("mvmj");var n;!function(e){e.GetFriends="@gaming/xbl-people/GetFriends",e.GetFriendsCompleted="@gaming/xbl-people/GetFriendsCompleted",e.GetRecommendations="@gaming/xbl-people/GetRecommendations",e.GetRecommendationsCompleted="@gaming/xbl-people/GetRecommendationsCompleted",e.RemoveRecommendation="@gaming/xbl-people/RemoveRecommendation",e.RemoveRecommendationCompleted="@gaming/xbl-people/RemoveRecommendationCompleted",e.GetRecentPlayers="@gaming/xbl-people/GetRecentPlayers",e.GetRecentPlayersCompleted="@gaming/xbl-people/GetRecentPlayersCompleted",e.GetPeople="@gaming/xbl-people/GetPeople",e.GetPeopleCompleted="@gaming/xbl-people/GetPeopleCompleted",e.GetPerson="@gaming/xbl-people/GetPerson",e.GetPersonCompleted="@gaming/xbl-people/GetPersonCompleted",e.GetFollowers="@gaming/xbl-people/GetFollowers",e.GetFollowersCompleted="@gaming/xbl-people/GetFollowersCompleted",e.UpdatePeople="@gaming/xbl-people/UpdatePeople",e.CachePeople="@gaming/xbl-people/CachePeople",e.FollowUser="@gaming/xbl-people/FollowUser",e.FollowUserCompleted="@gaming/xbl-people/FollowUserCompleted",e.FollowUsers="@gaming/xbl-people/FollowUsers",e.FollowUsersCompleted="@gaming/xbl-people/FollowUsersCompleted",e.UnfollowUser="@gaming/xbl-people/UnfollowUser",e.UnfollowUserCompleted="@gaming/xbl-people/UnfollowUserCompleted",e.FavoriteUser="@gaming/xbl-people/FavoriteUser",e.FavoriteUserCompleted="@gaming/xbl-people/FavoriteUserCompleted",e.UnfavoriteUser="@gaming/xbl-people/UnfavoriteUser",e.UnfavoriteUserCompleted="@gaming/xbl-people/UnfavoriteUserCompleted",e.SetUserBlockState="@gaming/xbl-people/SetUserBlockState",e.SetUserBlockStateCompleted="@gaming/xbl-people/SetUserBlockStateCompleted",e.SetUserMuteState="@gaming/xbl-people/SetUserMuteState",e.SetUserMuteStateCompleted="@gaming/xbl-people/SetUserMuteStateCompleted",e.SetCurrentUserCloakState="@gaming/xbl-people/SetCurrentUserCloakState",e.SetCurrentUserCloakStateCompleted="@gaming/xbl-people/SetCurrentUserCloakStateCompleted",e.GetExternalProviderMetadata="@gaming/xbl-people/GetProviders",e.GetExternalProviderMetadataCompleted="@gaming/xbl-people/GetProvidersCompleted",e.GetLinkableAccounts="@gaming/xbl-people/GetLinkableAccounts",e.GetLinkableAccountsCompleted="@gaming/xbl-people/GetLinkableAccountsCompleted",e.GetGamerpicLibrary="@gaming/xbl-people/GetGamerpicLibrary",e.GetGamerpicLibraryCompleted="@gaming/xbl-people/GetGamerpicLibraryComplete",e.UpdateProfileSettings="@gaming/xbl-people/UpdateProfileSettings",e.UpdateProfileSettingsCompleted="@gaming/xbl-people/UpdateProfileSettingsCompleted",e.UpdateShowLinkedAccount="@gaming/xbl-people/UpdateShowLinkedAccount",e.ClearFailedRequest="@gaming/xbl-people/ClearFailedRequest",e.GetApprovedPlatformData="@gaming/xbl-people/GetApprovedPlatformData",e.GetApprovedPlatformDataCompleted="@gaming/xbl-people/GetApprovedPlatformDataCompleted",e.GetProfileThemes="@gaming/xbl-people/GetProfileThemes",e.GetProfileThemesCompleted="@gaming/xbl-people/GetProfileThemesCompleted",e.GetSupportedColors="@gaming/xbl-people/GetSupportedColors",e.GetSupportedColorsCompleted="@gaming/xbl-people/GetSupportedColorsCompleted",e.GetPeopleAndAddToLocalFriends="@gaming/xbl-people/GetPeopleAndAddToLocalFriends",e.GetPeopleAndAddToLocalFriendsCompleted="@gaming/xbl-people/GetPeopleAndAddToLocalFriendsCompleted",e.GetFriendsWhoPlay="@gaming/xbl-people/GetFriendsWhoPlay",e.GetFriendsWhoPlayCompleted="@gaming/xbl-people/GetFriendsWhoPlayCompleted",e.RemovePeopleFromLocalFriends="@gaming/xbl-people/RemovePeopleFromLocalFriends"}(n=t.PeopleActionType||(t.PeopleActionType={})),t.PeopleAction={getFriends:o.createAsyncAction(n.GetFriends,n.GetFriendsCompleted,()=>({type:n.GetFriends}),e=>({type:n.GetFriendsCompleted,people:e}),e=>({type:n.GetFriendsCompleted,error:e})),getRecommendations:o.createAsyncAction(n.GetRecommendations,n.GetRecommendationsCompleted,()=>({type:n.GetRecommendations}),(e,t)=>({type:n.GetRecommendationsCompleted,xuids:e,people:t}),e=>({type:n.GetRecommendationsCompleted,error:e})),removeRecommendation:o.createAsyncAction(n.RemoveRecommendation,n.RemoveRecommendationCompleted,e=>({type:n.RemoveRecommendation,xuid:e}),e=>({type:n.RemoveRecommendationCompleted,xuid:e}),(e,t)=>({type:n.RemoveRecommendationCompleted,xuid:e,error:t})),getRecentPlayers:o.createAsyncAction(n.GetRecentPlayers,n.GetRecentPlayersCompleted,()=>({type:n.GetRecentPlayers}),(e,t)=>({type:n.GetRecentPlayersCompleted,xuids:e,people:t}),e=>({type:n.GetRecentPlayersCompleted,error:e})),getPerson:o.createAsyncAction(n.GetPerson,n.GetPersonCompleted,(e,t,r)=>({type:n.GetPerson,xuid:e,forceRefresh:t,additionalDecorations:r}),(e,t)=>({type:n.GetPersonCompleted,xuid:e,person:t}),(e,t)=>({type:n.GetPersonCompleted,xuid:e,error:t})),getPeople:o.createAsyncAction(n.GetPeople,n.GetPeopleCompleted,(e,t)=>({type:n.GetPeople,xuids:e,additionalDecorations:t}),e=>({type:n.GetPeopleCompleted,people:e}),(e,t)=>({type:n.GetPeopleCompleted,xuids:e,error:t})),getFollowers:o.createAsyncAction(n.GetFollowers,n.GetFollowersCompleted,()=>({type:n.GetFollowers}),(e,t)=>({type:n.GetFollowersCompleted,xuids:e,people:t}),e=>({type:n.GetFollowersCompleted,error:e})),updatePerson:o.createAction(n.UpdatePeople,e=>({type:n.UpdatePeople,profiles:[e]})),updatePeople:o.createAction(n.UpdatePeople,e=>({type:n.UpdatePeople,profiles:e})),cachePerson:o.createAction(n.CachePeople,e=>({type:n.CachePeople,profiles:[e]})),cachePeople:o.createAction(n.CachePeople,e=>({type:n.CachePeople,profiles:e})),followUser:o.createAsyncAction(n.FollowUser,n.FollowUserCompleted,(e,t,r)=>({type:n.FollowUser,currentXuid:e,targetXuid:t,options:r}),(e,t)=>({type:n.FollowUserCompleted,xuid:e,options:t}),(e,t)=>({type:n.FollowUserCompleted,failedAction:e,error:t})),followUsers:o.createAsyncAction(n.FollowUsers,n.FollowUsersCompleted,e=>({type:n.FollowUsers,xuids:e}),e=>({type:n.FollowUsersCompleted,xuids:e}),(e,t)=>({type:n.FollowUsersCompleted,failedAction:e,error:t})),unfollowUser:o.createAsyncAction(n.UnfollowUser,n.UnfollowUserCompleted,(e,t)=>({type:n.UnfollowUser,currentXuid:e,targetXuid:t}),e=>({type:n.UnfollowUserCompleted,xuid:e}),(e,t)=>({type:n.UnfollowUserCompleted,failedAction:e,error:t})),favoriteUser:o.createAsyncAction(n.FavoriteUser,n.FavoriteUserCompleted,(e,t)=>({type:n.FavoriteUser,currentXuid:e,targetXuid:t}),e=>({type:n.FavoriteUserCompleted,xuid:e}),(e,t)=>({type:n.FavoriteUserCompleted,failedAction:e,error:t})),unfavoriteUser:o.createAsyncAction(n.UnfavoriteUser,n.UnfavoriteUserCompleted,(e,t)=>({type:n.UnfavoriteUser,currentXuid:e,targetXuid:t}),e=>({type:n.UnfavoriteUserCompleted,xuid:e}),(e,t)=>({type:n.UnfavoriteUserCompleted,failedAction:e,error:t})),setUserBlockState:o.createAsyncAction(n.SetUserBlockState,n.SetUserBlockStateCompleted,(e,t)=>({type:n.SetUserBlockState,targetUser:e,shouldBlock:t}),(e,t)=>({type:n.SetUserBlockStateCompleted,xuid:e,shouldBlock:t}),(e,t)=>({type:n.SetUserBlockStateCompleted,failedAction:e,error:t})),setUserMuteState:o.createAsyncAction(n.SetUserMuteState,n.SetUserMuteStateCompleted,(e,t)=>({type:n.SetUserMuteState,targetUser:e,shouldMute:t}),(e,t)=>({type:n.SetUserMuteStateCompleted,xuid:e,shouldMute:t}),(e,t)=>({type:n.SetUserMuteStateCompleted,failedAction:e,error:t})),setCurrentUserCloakState:o.createAsyncAction(n.SetCurrentUserCloakState,n.SetCurrentUserCloakStateCompleted,e=>({type:n.SetCurrentUserCloakState,shouldCloak:e}),(e,t)=>({type:n.SetCurrentUserCloakStateCompleted,currentUserXuid:e,shouldCloak:t}),(e,t)=>({type:n.SetCurrentUserCloakStateCompleted,failedAction:e,error:t})),getExternalAccountProviders:o.createAsyncAction(n.GetExternalProviderMetadata,n.GetExternalProviderMetadataCompleted,(function(){let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];return{type:n.GetExternalProviderMetadata,forceRefresh:e}}),e=>({type:n.GetExternalProviderMetadataCompleted,metadata:e}),e=>({type:n.GetExternalProviderMetadataCompleted,error:e})),getLinkableAccounts:o.createAsyncAction(n.GetLinkableAccounts,n.GetLinkableAccountsCompleted,(function(){let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];return{type:n.GetLinkableAccounts,forceRefresh:e}}),e=>({type:n.GetLinkableAccountsCompleted,accounts:e}),e=>({type:n.GetLinkableAccountsCompleted,error:e})),getGamerpicLibrary:o.createAsyncAction(n.GetGamerpicLibrary,n.GetGamerpicLibraryCompleted,(function(){let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];return{type:n.GetGamerpicLibrary,forceRefresh:e}}),e=>({type:n.GetGamerpicLibraryCompleted,gamerpicLibrary:e}),e=>({type:n.GetGamerpicLibraryCompleted,error:e})),updateProfileSettings:o.createAsyncAction(n.UpdateProfileSettings,n.UpdateProfileSettingsCompleted,e=>({type:n.UpdateProfileSettings,settings:e}),(e,t)=>({type:n.UpdateProfileSettingsCompleted,xuid:e,settings:t}),(e,t)=>({type:n.UpdateProfileSettingsCompleted,failedAction:e,error:t})),updateShowLinkedAccount:o.createAction(n.UpdateShowLinkedAccount,(e,t)=>({type:n.UpdateShowLinkedAccount,networkName:e,showOnProfile:t})),clearFailedRequest:o.createAction(n.ClearFailedRequest,e=>({type:n.ClearFailedRequest,failedActionId:e})),getApprovedPlatformData:o.createAsyncAction(n.GetApprovedPlatformData,n.GetApprovedPlatformDataCompleted,()=>({type:n.GetApprovedPlatformData}),e=>({type:n.GetApprovedPlatformDataCompleted,approvedPlatformData:e}),e=>({type:n.GetApprovedPlatformDataCompleted,error:e})),getProfileThemes:o.createAsyncAction(n.GetProfileThemes,n.GetProfileThemesCompleted,()=>({type:n.GetProfileThemes}),(e,t)=>({type:n.GetProfileThemesCompleted,profileThemes:e,locale:t}),e=>({type:n.GetProfileThemesCompleted,error:e})),getSupportedColors:o.createAsyncAction(n.GetSupportedColors,n.GetSupportedColorsCompleted,()=>({type:n.GetSupportedColors}),e=>({type:n.GetSupportedColorsCompleted,supportedColors:e}),e=>({type:n.GetSupportedColorsCompleted,error:e})),getPeopleAndAddToLocalFriends:o.createAsyncAction(n.GetPeopleAndAddToLocalFriends,n.GetPeopleAndAddToLocalFriendsCompleted,e=>({type:n.GetPeopleAndAddToLocalFriends,xuids:e}),e=>({type:n.GetPeopleAndAddToLocalFriendsCompleted,people:e}),(e,t)=>({type:n.GetPeopleAndAddToLocalFriendsCompleted,xuids:e,error:t})),removePeopleFromLocalFriends:o.createAction(n.RemovePeopleFromLocalFriends,e=>({type:n.RemovePeopleFromLocalFriends,xuids:e})),getFriendsWhoPlay:o.createAsyncAction(n.GetFriendsWhoPlay,n.GetFriendsWhoPlayCompleted,(e,t)=>({type:n.GetFriendsWhoPlay,titleId:e,additionalDecorations:t}),(e,t,r)=>({type:n.GetFriendsWhoPlayCompleted,titleId:e,xuids:t,people:r}),(e,t)=>({type:n.GetFriendsWhoPlayCompleted,titleId:e,error:t}))}},G4Om:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.LinkedAccountTokenStatus=t.LinkedAccountOptInStatus=void 0,function(e){e.Unknown="Unknown",e.ShowPrompt="ShowPrompt",e.OptedIn="OptedIn",e.OptedOut="OptedOut",e.Excluded="Excluded"}(t.LinkedAccountOptInStatus||(t.LinkedAccountOptInStatus={})),function(e){e.Unknown="Unknown",e.OK="OK",e.TokenRenewalRequired="TokenRenewalRequired",e.NotRequired="NotRequired"}(t.LinkedAccountTokenStatus||(t.LinkedAccountTokenStatus={}))},I50b:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0})},"JCe+":function(e,t,r){"use strict";var o,n,i;r("DZ+c"),r("JtPf"),r("P2R4"),r("kYxP"),Object.defineProperty(t,"__esModule",{value:!0}),t.MediaHubService=t.uploadFile=void 0;const a=r("7DJB"),s=a.__importStar(r("REnL")),c=r("s6Xb"),l=r("CT5i"),d=r("E0xh"),u=r("rzN3"),p=r("9v3z"),g=r("DfD7"),m="MediaHubService";function f(e,t){const r=s.encode("BlockId"+(t+1).toString().padStart(7,"0"));return"".concat(e).concat("&comp=block&blockId=").concat(r)}async function h(e,t,r,o){const n=r.length;null===o||void 0===o||o.log(m,g.LogLevel.Info,"Uploading ".concat(n," bytes to blob storage"));const i=Math.ceil(n/524288);for(let a=0;a<i;a++){null===o||void 0===o||o.log(m,g.LogLevel.Debug,"Uploading block ".concat(a+1," of ").concat(i," to blob storage"));const s=524288*a,c=r.slice(s,Math.min(s+524288,n));await e.execute({url:f(t,a),headers:{[d.HttpHeader.Accept]:"application/json",[d.HttpHeader.ContentType]:"xblc-binary","x-ms-blob-type":"BlockBlob"},data:c,method:"put"})}}t.uploadFile=h;let y=class{constructor(e,t,r,s,c){this.logger=c,o.set(this,void 0),n.set(this,void 0),i.set(this,void 0),a.__classPrivateFieldSet(this,o,(new d.HttpClientBuilder).interceptors(s).build()),a.__classPrivateFieldSet(this,n,(new d.HttpClientBuilder).authenticator(new u.TokenAuthenticator(e)).requestInterceptor(new p.AcceptLanguageInterceptor(t)).requestInterceptor(new p.CorrelationVectorInterceptor(r)).interceptors(s).build()),a.__classPrivateFieldSet(this,i,d.RequestFactory.withBaseUrl("https://mediahub.xboxlive.com/").setCommonHeaders({[d.HttpHeader.XXBLContractVersion]:"3",Accept:"application/json"}))}async uploadCustomPic(e,t,r){const o=await this.createCustomPicStorage(e,t,r.length);l.asString(o.contentUploadUri),l.asString(o.publishUri),await this.uploadFile(o.contentUploadUri,r),await this.publishUploadComplete(o.publishUri)}async createCustomPicStorage(e,t,r){var o;null===(o=this.logger)||void 0===o||o.log(m,g.LogLevel.Info,"Requesting custom pic creation urls");return(await a.__classPrivateFieldGet(this,n).execute(a.__classPrivateFieldGet(this,i).post("customPics/create",JSON.stringify({FileSize:r,ExpectedBlocks:Math.ceil(r/524288),InitialMetadata:{CustomPicType:e,AssociationId:t}}),{headers:{[d.HttpHeader.ContentType]:"application/json"}}))).data}async uploadFile(e,t){await h(a.__classPrivateFieldGet(this,o),e,t,this.logger)}async publishUploadComplete(e){var t;null===(t=this.logger)||void 0===t||t.log(m,g.LogLevel.Info,"Publishing upload complete"),await a.__classPrivateFieldGet(this,n).execute({url:e,headers:{[d.HttpHeader.Accept]:"application/json"},method:"post"})}};o=new WeakMap,n=new WeakMap,i=new WeakMap,y=a.__decorate([c.injectable(),a.__param(0,c.inject(u.TokenProvider)),a.__param(1,c.inject(p.AcceptableLanguageProvider)),a.__param(2,c.inject(p.CorrelationVectorProvider)),a.__param(3,c.inject(d.InterceptorCollection)),a.__param(4,c.inject(g.Logger)),a.__metadata("design:paramtypes",[Object,Function,Function,Object,Object])],y),t.MediaHubService=y},JFUl:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.RelationshipType=void 0,function(e){e.Follower="Follower",e.FriendOfFriend="FriendOfFriend",e.RecentPlayer="RecentPlayer",e.VIP="VIP"}(t.RelationshipType||(t.RelationshipType={}))},KIXF:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o=r("dy+k0");function n(e,t,r){if(!e)throw new Error("isActionOf failed. actionCreatorOrCreators is undefined");var o=Array.isArray(e)?e:[e],n=function(e){return o.some((function(t){return!!t&&!!t.getType&&"function"===typeof t.getType&&e.type===t.getType()&&(!r||r(e))}))};return void 0===t?n:n(t)}t.isActionOf=function(e,t){return n(e,t)},t.isSuccessActionOf=function(e,t){return n(e,t,(function(e){return!o.isErrorAction(e)}))},t.isErrorActionOf=function(e,t){return n(e,t,o.isErrorAction)}},KwPE:function(e,t,r){"use strict";r("x4t0"),Object.defineProperty(t,"__esModule",{value:!0}),t.isPersonCurrent=void 0;const o=r("u7eo");t.isPersonCurrent=function(e,t){const r=o.getUnexpiredDataOrPrevious(e);return void 0!==r&&(0===t.length||!(t.includes("detail")&&!o.getUnexpiredDataOrPrevious(r.detail))&&(!(t.includes("preferredColor")&&!o.getUnexpiredDataOrPrevious(r.preferredColors))&&(!(t.includes("presenceDetail")&&!o.getUnexpiredDataOrPrevious(r.presence))&&(!(t.includes("recommendation")&&!o.getUnexpiredDataOrPrevious(r.recommendation))&&(!(t.includes("multiplayerSummary")&&!o.getUnexpiredDataOrPrevious(r.multiplayerSummary))&&!(t.includes("recentPlayer")&&!o.getUnexpiredDataOrPrevious(r.recentPlayerInfo)))))))}},LsRi:function(e,t,r){"use strict";r("kYxP"),Object.defineProperty(t,"__esModule",{value:!0}),t.createArrayOutputSelector=t.outputCacheMemoize=void 0;const o=r("+l7i");function n(e,t){return e===t}function i(e,t){let r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:n;if(n(e,t))return!0;if(e.length!==t.length)return!1;for(let o=0;o<e.length;o++)if(!r(e[o],t[o]))return!1;return!0}function a(e,t){let r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:n;return Array.isArray(e)&&Array.isArray(t)?i(e,t,r):r(e,t)}function s(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:n,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:a,o=null,i=null;return function(){for(var n=arguments.length,s=new Array(n),c=0;c<n;c++)s[c]=arguments[c];if(a(o,s,t))return i;o=s;const l=e(...s);return r(l,i)?i:(i=l,l)}}t.outputCacheMemoize=s,t.createArrayOutputSelector=o.createSelectorCreator(s,n,a)},MEwa:function(e,t,r){"use strict";var o,n,i;r("P2R4"),r("kYxP"),Object.defineProperty(t,"__esModule",{value:!0}),t.AccountLinkingSagaManager=t.LINKED_ACCOUNT_CACHE_TIME_MS=t.ACCOUNT_PROVIDER_CDN_CACHE_TIME_MS=void 0;const a=r("7DJB"),s=r("s6Xb"),c=r("OrNH"),l=r("CT5i"),d=r("u7eo"),u=r("DfD7"),p=r("dbIz"),g=r("F7Lo"),m=r("gZQb"),f="AccountLinkingSagaManager";t.ACCOUNT_PROVIDER_CDN_CACHE_TIME_MS=72e5,t.LINKED_ACCOUNT_CACHE_TIME_MS=9e5;let h=class{constructor(e,t,r){o.set(this,void 0),n.set(this,void 0),i.set(this,void 0),a.__classPrivateFieldSet(this,o,e),a.__classPrivateFieldSet(this,n,t),a.__classPrivateFieldSet(this,i,r),this.watchForActions=this.watchForActions.bind(this)}*watchForActions(){yield c.all([c.takeLatest(g.PeopleActionType.GetExternalProviderMetadata,this.handleGetProviderMetadata.bind(this)),c.takeLatest(g.PeopleActionType.GetLinkableAccounts,this.handleGetLinkableAccounts.bind(this))])}*handleGetProviderMetadata(e){if(!e.forceRefresh){const e=yield c.select(a.__classPrivateFieldGet(this,n).getExternalAccountProviderLCE);if(d.getUnexpiredDataOrPrevious(e))return a.__classPrivateFieldGet(this,i).log(f,u.LogLevel.Info,"Aborting update of account provider metadata as it's not expired"),void(yield c.put(g.PeopleAction.getExternalAccountProviders.success(d.completeFetchWithPrevious(e))))}try{const e=yield c.call([a.__classPrivateFieldGet(this,o),a.__classPrivateFieldGet(this,o).getProviders]);a.__classPrivateFieldGet(this,i).log(f,u.LogLevel.Info,"Got metadata about ".concat(e.length," external account providers from the CDN")),yield c.put(g.PeopleAction.getExternalAccountProviders.success(d.lceContent(e,t.ACCOUNT_PROVIDER_CDN_CACHE_TIME_MS)))}catch(r){const e=l.asError(r);a.__classPrivateFieldGet(this,i).log(f,u.LogLevel.Error,"Failed to update account provider metadata: ".concat(e)),yield c.put(g.PeopleAction.getExternalAccountProviders.error(e))}}*handleGetLinkableAccounts(e){if(!e.forceRefresh){const e=yield c.select(a.__classPrivateFieldGet(this,n).getLinkableAccountsLCE);if(d.getUnexpiredDataOrPrevious(e))return a.__classPrivateFieldGet(this,i).log(f,u.LogLevel.Info,"Aborting update of user's linked accounts they're not expired"),void(yield c.put(g.PeopleAction.getLinkableAccounts.success(d.completeFetchWithPrevious(e))))}try{const e=yield c.call([a.__classPrivateFieldGet(this,o),a.__classPrivateFieldGet(this,o).getLinkableAccounts]);a.__classPrivateFieldGet(this,i).log(f,u.LogLevel.Info,"Got information about ".concat(e.length," linkable accounts from PeopleHub"));const r=e.reduce((e,t)=>(e[t.networkName]=t,e),{});yield c.put(g.PeopleAction.getLinkableAccounts.success(d.lceContent(r,t.LINKED_ACCOUNT_CACHE_TIME_MS)))}catch(r){const e=l.asError(r);a.__classPrivateFieldGet(this,i).log(f,u.LogLevel.Error,"Failed to update linked accounts: ".concat(e)),yield c.put(g.PeopleAction.getLinkableAccounts.error(e))}}};o=new WeakMap,n=new WeakMap,i=new WeakMap,h=a.__decorate([s.injectable(),a.__param(0,s.inject(p.AccountLinkingService)),a.__param(1,s.inject(m.PeopleSelectors)),a.__param(2,s.inject(u.Logger)),a.__metadata("design:paramtypes",[Object,Object,Object])],h),t.AccountLinkingSagaManager=h},MFxj:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.bindPeopleDependencies=t.peopleContainerModule=void 0;const o=r("s6Xb"),n=r("vm4W"),i=r("jzUs");t.peopleContainerModule=new o.ContainerModule((e,t,r,o)=>{r(i.PeopleService)||e(i.PeopleService).to(i.XblPeopleService),r(i.SocialService)||e(i.SocialService).to(i.XblSocialService),r(i.PrivacyService)||e(i.PrivacyService).to(i.XblPrivacyService),r(i.PresenceService)||e(i.PresenceService).to(i.XblPresenceService),r(i.AccountLinkingService)||e(i.AccountLinkingService).to(i.XblAccountLinkingClient),r(i.ProfileService)||e(i.ProfileService).to(i.XblProfileService),r(i.MediaService)||e(i.MediaService).to(i.MediaHubService),r(i.ProfileAssetsService)||e(i.ProfileAssetsService).to(i.XblProfileAssetsService),r(n.AccountLinkingSagaManager)||e(n.AccountLinkingSagaManager).toSelf(),r(n.PeopleSagaManager)||e(n.PeopleSagaManager).toSelf(),r(n.GamerpicLibrarySagaManager)||e(n.GamerpicLibrarySagaManager).toSelf(),r(n.ProfileAssetsSagaManager)||e(n.ProfileAssetsSagaManager).toSelf()}),t.bindPeopleDependencies=function(e,r){e.load(t.peopleContainerModule),e.isBound(n.PeopleSelectors)||e.bind(n.PeopleSelectors).toConstantValue(r)}},NwOv:function(e,t,r){"use strict";var o;r("JtPf"),r("qK/h"),r("hQIz"),r("9QGs"),r("uuHm"),r("5Z+y"),r("hBgl"),r("8H/u"),r("0NZM"),r("AkTu"),r("pbH6"),r("zZCX"),r("tVjb"),r("AUjp"),r("kYxP"),r("sZjt"),r("udXp"),r("HBCE"),r("6pI8"),r("ReG1"),r("4QA/index.html"),r("OVwY"),r("gpa9"),r("tclo"),r("m6pu"),r("MyZA"),r("3e/+"),r("jeUp"),r("JlMe"),r("dv4H"),r("uYDL"),Object.defineProperty(t,"__esModule",{value:!0}),t.XblPeopleService=void 0;const n=r("7DJB"),i=r("s6Xb"),a=r("E0xh"),s=r("rzN3"),c=r("9v3z"),l=r("DfD7"),d=r("o92q"),u=r("XcDk"),p=r("u4R7");let g=o=class{constructor(e,t,r,o,n){this.logger=n,this.httpClient=(new a.HttpClientBuilder).authenticator(new s.TokenAuthenticator(e)).requestInterceptor(new c.AcceptLanguageInterceptor(t)).requestInterceptor(new c.CorrelationVectorInterceptor(r)).interceptors(o).build(),this.requestFactory=a.RequestFactory.withBaseUrl("https://peoplehub.xboxlive.com/users").setCommonHeaders({[a.HttpHeader.XXBLContractVersion]:"5",[a.HttpHeader.Accept]:"application/json"})}async getFriends(e){const t=await this.httpClient.execute(this.requestFactory.get(o.getPeoplePath("social",d.DEFAULT_FRIEND_DECORATIONS,e)));if(t.status>=300||!t.data)throw new Error("Failed to get friends: status ".concat(t.status,", text ").concat(t.statusText));return p.mapResponseToMap(t.data,d.DEFAULT_FRIEND_DECORATIONS,this.logger)}async getRecommendations(){const e=await this.httpClient.execute(this.requestFactory.get(o.getPeoplePath("recommendations")));if(e.status>=300||!e.data)throw new Error("Failed to get recommendations: status ".concat(e.status,", text ").concat(e.statusText));return p.mapResponseToMap(e.data,["recommendation"],this.logger)}async getRecentPlayers(){const e=await this.httpClient.execute(this.requestFactory.get(o.getPeoplePath("recentplayers")));return p.mapResponseToMap(e.data,["recentPlayer"],this.logger)}async getPeople(e,t){const r=new Map;if(0===e.length)return r;let n=0;for(;e.length-n>0;){const i=await this._getPeople(e.slice(n,n+o.MAX_XUIDS_PER_BATCH),t);for(const[e,t]of i.entries())r.has(e)&&void 0!==r.get(e)||r.set(e,t);n+=o.MAX_XUIDS_PER_BATCH}return r}async getPerson(e,t){const r=new Set(d.DEFAULT_SINGLE_USER_DECORATIONS);null===t||void 0===t||t.forEach(e=>{r.add(e)});const n=await this.httpClient.execute(this.requestFactory.get(o.getPeoplePath("xuids(".concat(e,")"),[...r])));if(n.status>=300||!n.data)throw new Error("Failed to get person: status ".concat(n.status,", text ").concat(n.statusText));const i=p.mapPersonToDomain(n.data.people[0],[...r],this.logger);if(!i)throw new Error("Failed to convert response to an XboxProfile");return i}async search(e,t){if(t<=0)throw new Error("Max results must be > 0. Received value: ".concat(t));const r=o.getPeoplePath("search",d.DEFAULT_BATCH_DECORATIONS),n={q:encodeURIComponent(e),maxItems:Math.min(t,o.MAX_SEARCH_RESULTS)},i=await this.httpClient.execute(this.requestFactory.get(r,{params:n}));if(i.status>=300||!i.data)throw new Error("Failed to get requested people: status ".concat(i.status,", text ").concat(i.statusText));return p.mapResponseToArray(i.data,d.DEFAULT_BATCH_DECORATIONS,this.logger)}async getFollowers(){const e=o.getPeoplePath("followers"),t=await this.httpClient.execute(this.requestFactory.get(e));if(t.status>=300||!t.data)throw new Error("Failed to get followers: status ".concat(t.status,", text ").concat(t.statusText));return p.mapResponseToArray(t.data,[],this.logger)}async getFriendsWhoPlayTitle(e,t){const r=new Set(u.DEFAULT_FRIENDS_WHO_PLAY_DECORATIONS);null===t||void 0===t||t.forEach(e=>{r.add(e)});const n=o.getPeoplePath("playedTitle(".concat(e,")"),[...r]),i=await this.httpClient.execute(this.requestFactory.get(n));if(i.status>=300||!i.data)throw new Error("Failed to get friends who play: status ".concat(i.status,", text ").concat(i.statusText));return p.mapResponseToMap(i.data,["titleHistory"],this.logger)}async _getPeople(e,t){if(e.length>o.MAX_XUIDS_PER_BATCH)throw new Error("Batch requests are limited to ".concat(o.MAX_XUIDS_PER_BATCH," XUIDs at once"));if(0===e.length)return new Map;const r=new Set(d.DEFAULT_BATCH_DECORATIONS);null===t||void 0===t||t.forEach(e=>{r.add(e)});const n=await this.httpClient.execute(this.requestFactory.post(o.getPeoplePath("batch",[...r]),JSON.stringify({xuids:e}),{headers:{[a.HttpHeader.ContentType]:"application/json"}}));if(n.status>=300||!n.data)throw new Error("Failed to get requested people: status ".concat(n.status,", text ").concat(n.statusText));const i=p.mapResponseToMap(n.data,[...r],this.logger);for(const o of e)o&&!i.has(o)&&i.set(o,void 0);return i}static getPeoplePath(e,t,r){const o=r?"xuid(".concat(r,")"):"me",n="".concat(o,"https://www.xbox.com/people/").concat(e);return t&&0!==t.length?"".concat(n,"https://www.xbox.com/decoration/").concat(t.join(",")):n}};g.MAX_XUIDS_PER_BATCH=500,g.MAX_SEARCH_RESULTS=100,g=o=n.__decorate([i.injectable(),n.__param(0,i.inject(s.TokenProvider)),n.__param(1,i.inject(c.AcceptableLanguageProvider)),n.__param(2,i.inject(c.CorrelationVectorProvider)),n.__param(3,i.inject(a.InterceptorCollection)),n.__param(4,i.inject(l.Logger)),n.__metadata("design:paramtypes",[Object,Function,Function,Object,Object])],g),t.XblPeopleService=g},OlTB:function(e,t,r){"use strict";r("JtPf"),Object.defineProperty(t,"__esModule",{value:!0}),t.XblPrivacyService=void 0;const o=r("7DJB"),n=r("s6Xb"),i=r("E0xh"),a=r("rzN3"),s=r("9v3z");let c=class{constructor(e,t,r){this.httpClient=(new i.HttpClientBuilder).authenticator(new a.TokenAuthenticator(e)).requestInterceptor(new s.CorrelationVectorInterceptor(t)).interceptors(r).build(),this.requestFactory=i.RequestFactory.withBaseUrl("https://privacy.xboxlive.com/users").setCommonHeaders({[i.HttpHeader.XXBLContractVersion]:"2",[i.HttpHeader.Accept]:"application/json",[i.HttpHeader.ContentType]:"application/json"})}async blockUser(e){const t=await this.httpClient.execute(this.requestFactory.put("me/people/never",JSON.stringify({xuid:e})));if(t.status>=300)throw new Error("Failed to block user: status ".concat(t.status,", text ").concat(t.statusText))}async unblockUser(e){const t=await this.httpClient.execute(this.requestFactory.delete("me/people/never",JSON.stringify({xuid:e}),{headers:{[i.HttpHeader.XXBLContractVersion]:"4"}}));if(t.status>=300)throw new Error("Failed to unblock user: status ".concat(t.status,", text ").concat(t.statusText))}async muteUser(e){const t=await this.httpClient.execute(this.requestFactory.put("me/people/mute",JSON.stringify({xuid:e})));if(t.status>=300)throw new Error("Failed to mute user: status ".concat(t.status,", text ").concat(t.statusText))}async unmuteUser(e){const t=await this.httpClient.execute(this.requestFactory.delete("me/people/mute",JSON.stringify({xuid:e})));if(t.status>=300)throw new Error("Failed to unmute user: status ".concat(t.status,", text ").concat(t.statusText))}};c=o.__decorate([n.injectable(),o.__param(0,n.inject(a.TokenProvider)),o.__param(1,n.inject(s.CorrelationVectorProvider)),o.__param(2,n.inject(i.InterceptorCollection)),o.__metadata("design:paramtypes",[Object,Function,Object])],c),t.XblPrivacyService=c},PjKV:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const o=r("7DJB");o.__exportStar(r("RdDK"),t),o.__exportStar(r("caCW"),t)},Ppht:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.V5=t.V4=t.V3=void 0;const o=r("7DJB");o.__exportStar(r("nVpS"),t),o.__exportStar(r("G4Om"),t),t.V3=o.__importStar(r("6rQw")),t.V4=o.__importStar(r("SXmG")),t.V5=o.__importStar(r("ctJW")),o.__exportStar(r("PjKV"),t)},REnL:function(e,t,r){(function(e,o){var n;!function(i){var a=t,s=(e&&e.exports,"object"==typeof o&&o);s.global!==s&&s.window;var c=function(e){this.message=e};(c.prototype=new Error).name="InvalidCharacterError";var l=function(e){throw new c(e)},d="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789%2b/index.html",u=/[\t\n\f\r ]/g,p={encode:function(e){e=String(e),/[^\0-\xFF]/.test(e)&&l("The string to be encoded contains characters outside of the Latin1 range.");for(var t,r,o,n,i=e.length%3,a="",s=-1,c=e.length-i;++s<c;)t=e.charCodeAt(s)<<16,r=e.charCodeAt(++s)<<8,o=e.charCodeAt(++s),a+=d.charAt((n=t+r+o)>>18&63)+d.charAt(n>>12&63)+d.charAt(n>>6&63)+d.charAt(63&n);return 2==i?(t=e.charCodeAt(s)<<8,r=e.charCodeAt(++s),a+=d.charAt((n=t+r)>>10)+d.charAt(n>>4&63)+d.charAt(n<<2&63)+"="):1==i&&(n=e.charCodeAt(s),a+=d.charAt(n>>2)+d.charAt(n<<4&63)+"=="),a},decode:function(e){var t=(e=String(e).replace(u,"")).length;t%4==0&&(t=(e=e.replace(/==?$/,"")).length),(t%4==1||/[^+a-zA-Z0-9/]/.test(e))&&l("Invalid character: the string to be decoded is not correctly encoded.");for(var r,o,n=0,i="",a=-1;++a<t;)o=d.indexOf(e.charAt(a)),r=n%4?64*r+o:o,n++%4&&(i+=String.fromCharCode(255&r>>(-2*n&6)));return i},version:"0.1.0"};void 0===(n=function(){return p}.call(t,r,t,e))||(e.exports=n)}()}).call(this,r("aYSr")(e),r("fRV1"))},RdDK:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.CustomPicType=void 0,function(e){e.Unknown="Unknown",e.Gamerpic="Gamerpic",e.ClubLogo="ClubLogo",e.ClubBackground="ClubBackground"}(t.CustomPicType||(t.CustomPicType={}))},S2Wi:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getLCEContentWithCacheTime=t.PERSON_CACHE_TIME_IN_MS=void 0;const o=r("u7eo");t.PERSON_CACHE_TIME_IN_MS=18e5,t.getLCEContentWithCacheTime=function(e){return o.lceContent(e,t.PERSON_CACHE_TIME_IN_MS)}},SXmG:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});r("7DJB").__exportStar(r("bdWV"),t)},SYol:function(e,t,r){"use strict";r("sZjt"),r("udXp"),r("HBCE"),r("6pI8"),r("ReG1"),r("4QA/index.html"),r("OVwY"),r("gpa9"),r("tclo"),r("m6pu"),r("MyZA"),r("3e/+"),r("jeUp"),r("JlMe"),r("dv4H"),r("uYDL"),r("kYxP"),r("tQbP"),Object.defineProperty(t,"__esModule",{value:!0}),t.peopleActionCoalescer=void 0;const o=r("o92q"),n=r("F7Lo");function i(e){let{type:t,additionalDecorations:r=[]}=e;const i=new Set(t===n.PeopleActionType.GetPerson?o.DEFAULT_SINGLE_USER_DECORATIONS:o.DEFAULT_BATCH_DECORATIONS);for(const o of r)i.add(o);return i}t.peopleActionCoalescer={isCoalescable:function(e){const t=e;return(null===t||void 0===t?void 0:t.type)===n.PeopleActionType.GetPerson&&"string"===typeof t.xuid||(null===t||void 0===t?void 0:t.type)===n.PeopleActionType.GetPeople&&Array.isArray(t.xuids)},getRequestQueueKey:function(e){const t=[...i(e)].sort();return"peopleByXuid:".concat(t.join(","))},coalesceRequests:function(e,t){if(0===t.length)return n.PeopleAction.getPeople.start([]);if(1===t.length)return t[0];const r=[...i(t[0])],o=t.reduce((e,t)=>{if(t.type===n.PeopleActionType.GetPerson)e.add(t.xuid);else for(const r of t.xuids)e.add(r);return e},new Set);return n.PeopleAction.getPeople.start([...o],r)}}},SwXm:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.createAsyncAction=function(e,t,r,o,n){var i=r;i.getType=function(){return e};var a=o;a.getType=function(){return t};var s=n;return s.getType=function(){return t},{start:i,success:a,error:s}}},ULmP:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getType=function(e){if(!e)throw new Error("Argument 'actionCreator' is null");if("function"!==typeof e||!("getType"in e)||"function"!==typeof e.getType)throw new Error("Invalid action creator does not have 'getType'");return e.getType()}},VWoD:function(e,t,r){"use strict";r("JtPf"),Object.defineProperty(t,"__esModule",{value:!0}),t.XblPresenceService=void 0;const o=r("7DJB"),n=r("s6Xb"),i=r("E0xh"),a=r("rzN3"),s=r("9v3z"),c=r("qXk8");let l=class{constructor(e,t,r){this.httpClient=(new i.HttpClientBuilder).authenticator(new a.TokenAuthenticator(e)).requestInterceptor(new s.CorrelationVectorInterceptor(t)).interceptors(r).build(),this.requestFactory=i.RequestFactory.withBaseUrl("https://userpresence.xboxlive.com/users").setCommonHeaders({[i.HttpHeader.XXBLContractVersion]:"3",[i.HttpHeader.Accept]:"application/json",[i.HttpHeader.ContentType]:"application/json"})}async cloakUserPresence(e){const t=await this.httpClient.execute(this.requestFactory.put("xuid(".concat(e,")/state"),JSON.stringify({state:c.CloakState.Cloaked})));if(t.status>=300)throw new Error("Failed to cloak user: status ".concat(t.status,", text ").concat(t.statusText))}async uncloakUserPresence(e){const t=await this.httpClient.execute(this.requestFactory.put("xuid(".concat(e,")/state"),JSON.stringify({state:c.CloakState.Active})));if(t.status>=300)throw new Error("Failed to uncloak user: status ".concat(t.status,", text ").concat(t.statusText))}async isUserPresenceCloaked(e){const t=await this.httpClient.execute(this.requestFactory.get("xuid(".concat(e,")/state")));if(t.status>=300)throw new Error("Failed to retrive user cloak state: status ".concat(t.status,", text ").concat(t.statusText));return t.data.state===c.CloakState.Cloaked}};l=o.__decorate([n.injectable(),o.__param(0,n.inject(a.TokenProvider)),o.__param(1,n.inject(s.CorrelationVectorProvider)),o.__param(2,n.inject(i.InterceptorCollection)),o.__metadata("design:paramtypes",[Object,Function,Object])],l),t.XblPresenceService=l},XAMn:function(e,t,r){"use strict";r("jQ/y"),Object.defineProperty(t,"__esModule",{value:!0}),t.PeopleService=void 0,t.PeopleService=Symbol("PeopleService")},XcDk:function(e,t,r){"use strict";r("kYxP"),Object.defineProperty(t,"__esModule",{value:!0}),t.DEFAULT_FRIENDS_WHO_PLAY_DECORATIONS=t.DEFAULT_BATCH_DECORATIONS=t.DEFAULT_FRIEND_DECORATIONS=t.DEFAULT_SINGLE_USER_DECORATIONS=void 0,t.DEFAULT_SINGLE_USER_DECORATIONS=["detail","preferredColor","presenceDetail"],t.DEFAULT_FRIEND_DECORATIONS=[...t.DEFAULT_SINGLE_USER_DECORATIONS,"multiplayerSummary"],t.DEFAULT_BATCH_DECORATIONS=["detail","preferredColor"],t.DEFAULT_FRIENDS_WHO_PLAY_DECORATIONS=["presenceDetail","titleHistory"]},YaaU:function(e,t,r){"use strict";r("qK/h"),r("hQIz"),r("9QGs"),r("uuHm"),r("5Z+y"),r("hBgl"),r("8H/u"),r("0NZM"),r("AkTu"),r("pbH6"),r("zZCX"),r("tVjb"),r("AUjp"),r("kYxP"),r("KqXw"),r("IAdD"),r("sZjt"),r("udXp"),r("HBCE"),r("6pI8"),r("ReG1"),r("4QA/index.html"),r("OVwY"),r("gpa9"),r("tclo"),r("m6pu"),r("MyZA"),r("3e/+"),r("jeUp"),r("JlMe"),r("dv4H"),r("uYDL"),Object.defineProperty(t,"__esModule",{value:!0}),t.PeopleSagaManager=void 0;const o=r("7DJB"),n=r("s6Xb"),i=r("OrNH"),a=r("CT5i"),s=r("u7eo"),c=r("DfD7"),l=r("W/w3"),d=r("o92q"),u=r("jzUs"),p=r("qBa5"),g=r("F7Lo"),m=r("gZQb"),f=r("S2Wi"),h="PeopleSagaManager";let y=class{constructor(e,t,r,o,n,i,a,s){this.peopleService=e,this.socialService=t,this.privacyService=r,this.presenceService=o,this.profileService=n,this.selectors=i,this.commonSelectors=a,this.logger=s,this.watchForActions=this.watchForActions.bind(this),this._handleSignIn=this._handleSignIn.bind(this),this._handleGetFriends=this._handleGetFriends.bind(this),this._handleGetPerson=this._handleGetPerson.bind(this),this._handleGetPeople=this._handleGetPeople.bind(this),this._handleGetFollowers=this._handleGetFollowers.bind(this),this._handleFollowUser=this._handleFollowUser.bind(this),this._handleFollowUsers=this._handleFollowUsers.bind(this),this._handleUnfollowUser=this._handleUnfollowUser.bind(this),this._handleFavoriteUser=this._handleFavoriteUser.bind(this),this._handleUnfavoriteUser=this._handleUnfavoriteUser.bind(this),this._handleSetUserBlockState=this._handleSetUserBlockState.bind(this),this._handleSetUserMuteState=this._handleSetUserMuteState.bind(this),this._handleSetCurrentUserCloakState=this._handleSetCurrentUserCloakState.bind(this),this._handleGetRecommendations=this._handleGetRecommendations.bind(this),this._handleRemoveRecommendation=this._handleRemoveRecommendation.bind(this),this._handleUpdateProfileSettings=this._handleUpdateProfileSettings.bind(this),this._handleGetRecentPlayers=this._handleGetRecentPlayers.bind(this),this._handleGetPeopleAndAddToLocalFriends=this._handleGetPeopleAndAddToLocalFriends.bind(this),this._handleGetFriendsWhoPlay=this._handleGetFriendsWhoPlay.bind(this)}*watchForActions(){yield i.all([i.takeEvery(l.CommonActionType.UserSignedIn,this._handleSignIn),i.takeEvery(g.PeopleActionType.GetFriends,this._handleGetFriends),i.takeEvery(g.PeopleActionType.GetPerson,this._handleGetPerson),i.takeEvery(g.PeopleActionType.GetPeople,this._handleGetPeople),i.takeEvery(g.PeopleActionType.GetFollowers,this._handleGetFollowers),i.takeEvery(g.PeopleActionType.FollowUser,this._handleFollowUser),i.takeEvery(g.PeopleActionType.FollowUsers,this._handleFollowUsers),i.takeEvery(g.PeopleActionType.UnfollowUser,this._handleUnfollowUser),i.takeEvery(g.PeopleActionType.FavoriteUser,this._handleFavoriteUser),i.takeEvery(g.PeopleActionType.UnfavoriteUser,this._handleUnfavoriteUser),i.takeEvery(g.PeopleActionType.SetUserBlockState,this._handleSetUserBlockState),i.takeEvery(g.PeopleActionType.SetUserMuteState,this._handleSetUserMuteState),i.takeEvery(g.PeopleActionType.SetCurrentUserCloakState,this._handleSetCurrentUserCloakState),i.takeEvery(g.PeopleActionType.GetRecommendations,this._handleGetRecommendations),i.takeEvery(g.PeopleActionType.RemoveRecommendation,this._handleRemoveRecommendation),i.takeEvery(g.PeopleActionType.GetRecentPlayers,this._handleGetRecentPlayers),i.takeEvery(g.PeopleActionType.UpdateProfileSettings,this._handleUpdateProfileSettings),i.takeEvery(g.PeopleActionType.GetPeopleAndAddToLocalFriends,this._handleGetPeopleAndAddToLocalFriends),i.takeEvery(g.PeopleActionType.GetFriendsWhoPlay,this._handleGetFriendsWhoPlay)])}*_handleSignIn(){yield i.put(g.PeopleAction.getFriends.start()),yield i.put(g.PeopleAction.getFollowers.start())}*_handleGetFriends(){const e="".concat(h,"-handleGetFriends");try{this.logger.log(e,c.LogLevel.Debug,"Requesting current user's friends");const t=yield i.call([this.peopleService,this.peopleService.getFriends]);this.logger.log(e,c.LogLevel.Info,"Success! Found ".concat(t.size," friends")),yield i.put(g.PeopleAction.getFriends.success(this._getPeopleDictionary(t)))}catch(t){const r=a.toError(t);this.logger.log(e,c.LogLevel.Error,"Error: ".concat(r.message)),yield i.put(g.PeopleAction.getFriends.error(r))}}*_handleGetRecommendations(){const e="".concat(h,"-handleGetRecommendations");try{this.logger.log(e,c.LogLevel.Debug,"Requesting recommended friends");const t=yield i.call([this.peopleService,this.peopleService.getRecommendations]);this.logger.log(e,c.LogLevel.Info,"Success! Found ".concat(t.size," recommended friends"));const r=this._getPeopleDictionary(t),o=f.getLCEContentWithCacheTime(Object.keys(r));yield i.put(g.PeopleAction.getRecommendations.success(o,r))}catch(t){const r=a.toError(t);this.logger.log(e,c.LogLevel.Error,"Error: ".concat(r.message)),yield i.put(g.PeopleAction.getRecommendations.error(r))}}*_handleGetRecentPlayers(){const e="".concat(h,"-handleGetRecentPlayers");try{this.logger.log(e,c.LogLevel.Debug,"Requesting recent players");const t=yield i.call([this.peopleService,this.peopleService.getRecentPlayers]);this.logger.log(e,c.LogLevel.Info,"Success! Found ".concat(t.size," recent players"));const r=new Map;t.forEach((e,t)=>{if(e){/[\w ]+\((?:1[0-5]|[1-9])\)/.test(e.gamertag.legacyGamertag)||r.set(t,Object.assign(Object.assign({},e),{isFavorite:void 0,isFollower:void 0,isFriend:void 0}))}});const o=this._getPeopleDictionary(r),n=f.getLCEContentWithCacheTime(Object.keys(o));yield i.put(g.PeopleAction.getRecentPlayers.success(n,o))}catch(t){const r=a.toError(t);this.logger.log(e,c.LogLevel.Error,"Error: ".concat(r.message)),yield i.put(g.PeopleAction.getRecentPlayers.error(r))}}*_handleGetPerson(e){const t="".concat(h,"-handleGetPerson");if(this.logger.log(t,c.LogLevel.Debug,"Processing request for provided XUID"),!e.forceRefresh){if(yield i.select(this.selectors.isPersonUpToDate,e.xuid,e.additionalDecorations)){this.logger.log(t,c.LogLevel.Debug,"User will not be refreshed as there is cached data for xuid: ".concat(e.xuid));const r=yield i.select(this.selectors.getPersonDataModelLCE,e.xuid);return void(yield i.put(g.PeopleAction.getPerson.success(e.xuid,s.completeFetchWithPrevious(r))))}}try{const r=yield i.call([this.peopleService,this.peopleService.getPerson],e.xuid,e.additionalDecorations);if(r)this.logger.log(t,c.LogLevel.Info,"Success! User was requested and was successfully hydrated."),yield i.put(g.PeopleAction.getPerson.success(e.xuid,f.getLCEContentWithCacheTime(r)));else{const r=a.toError(new Error("Could not hydrate user"));this.logger.log(t,c.LogLevel.Error,"Error: ".concat(r.message)),yield i.put(g.PeopleAction.getPerson.success(e.xuid,s.lceError(r)))}}catch(r){const o=a.toError(r);this.logger.log(t,c.LogLevel.Error,"Error: ".concat(o.message)),yield i.put(g.PeopleAction.getPerson.error(e.xuid,a.toError(o)))}}*_handleGetPeople(e){const t="".concat(h,"-handleGetPeople");this.logger.log(t,c.LogLevel.Debug,"Processing request for ".concat(e.xuids.length," XUIDs"));const r=new Set,o={},n=yield i.select();for(const i of e.xuids){if(this.selectors.isPersonUpToDate(n,i,e.additionalDecorations)){const e=this.selectors.getPersonDataModelLCE(n,i);o[i]=s.completeFetchWithPrevious(e)}else r.add(i)}if(Object.keys(o).length>0&&(yield i.put(g.PeopleAction.getPeople.success(o))),0!==r.size){this.logger.log(t,c.LogLevel.Debug,"Reduced request down to ".concat(r.size," XUIDs after filtering cached data"));try{const o=yield i.call([this.peopleService,this.peopleService.getPeople],[...r],e.additionalDecorations);this.logger.log(t,c.LogLevel.Info,"Success! Of ".concat(e.xuids.length," desired XUIDs, ").concat(r.size," were requested, ").concat(o.size," were hydrated and ").concat(r.size-o.size," were dropped")),yield i.put(g.PeopleAction.getPeople.success(this._getPeopleDictionary(o)))}catch(l){const e=a.toError(l);this.logger.log(t,c.LogLevel.Error,"Error: ".concat(e.message)),yield i.put(g.PeopleAction.getPeople.error([...r],e))}}}*_handleGetFollowers(e){const t="".concat(h,"-handleGetFollowers");this.logger.log(t,c.LogLevel.Debug,"Processing request to get followers");try{const e=yield i.call([this.peopleService,this.peopleService.getFollowers]),r=new Map;e.forEach(e=>r.set(e.xuid,Object.assign(Object.assign({},e),{isFavorite:void 0,isIdentityShared:void 0}))),this.logger.log(t,c.LogLevel.Info,"Got ".concat(r.size," followers"));const o=this._getPeopleDictionary(r),n=f.getLCEContentWithCacheTime(Object.keys(o));yield i.put(g.PeopleAction.getFollowers.success(n,o))}catch(r){const e=a.toError(r);this.logger.log(t,c.LogLevel.Error,"Error: ".concat(e.message)),yield i.put(g.PeopleAction.getFollowers.error(e))}}*_handleFollowUser(e){const t="".concat(h,"-handleFollowUser");this.logger.log(t,c.LogLevel.Debug,"Processing request to follow target user");try{yield i.call([this.socialService,this.socialService.followUser],e.currentXuid,e.targetXuid),yield i.put(g.PeopleAction.followUser.success(e.targetXuid,e.options))}catch(r){const o=a.toError(r);this.logger.log(t,c.LogLevel.Error,"Error: ".concat(o.message)),yield i.put(g.PeopleAction.followUser.error(e,o))}}*_handleFollowUsers(e){const t="".concat(h,"-handleFollowUsers");this.logger.log(t,c.LogLevel.Debug,"Processing request to batch follow users");try{if(!e.xuids||0===e.xuids.length)throw new Error("FollowUsers: XUID list must be present and non-empty");yield i.call([this.socialService,this.socialService.followUsers],e.xuids),yield i.put(g.PeopleAction.followUsers.success(e.xuids))}catch(r){const o=a.toError(r);this.logger.log(t,c.LogLevel.Error,"Error: ".concat(o.message)),yield i.put(g.PeopleAction.followUsers.error(e,o))}}*_handleUnfollowUser(e){const t="".concat(h,"-handleUnfollowUser");this.logger.log(t,c.LogLevel.Debug,"Processing request to unfollow target user");try{yield i.call([this.socialService,this.socialService.unfollowUser],e.currentXuid,e.targetXuid),yield i.put(g.PeopleAction.unfollowUser.success(e.targetXuid))}catch(r){const o=a.toError(r);this.logger.log(t,c.LogLevel.Error,"Error: ".concat(o.message)),yield i.put(g.PeopleAction.unfollowUser.error(e,o))}}*_handleFavoriteUser(e){const t="".concat(h,"-handleFavoriteUser");this.logger.log(t,c.LogLevel.Debug,"Processing request to favorite target user");try{yield i.call([this.socialService,this.socialService.favoriteUser],e.currentXuid,e.targetXuid),yield i.put(g.PeopleAction.favoriteUser.success(e.targetXuid))}catch(r){const o=a.toError(r);this.logger.log(t,c.LogLevel.Error,"Error: ".concat(o.message)),yield i.put(g.PeopleAction.favoriteUser.error(e,o))}}*_handleUnfavoriteUser(e){const t="".concat(h,"-handleUnfavoriteUser");this.logger.log(t,c.LogLevel.Debug,"Processing request to unfavorite target user");try{yield i.call([this.socialService,this.socialService.unfavoriteUser],e.currentXuid,e.targetXuid),yield i.put(g.PeopleAction.unfavoriteUser.success(e.targetXuid))}catch(r){const o=a.toError(r);this.logger.log(t,c.LogLevel.Error,"Error: ".concat(o.message)),yield i.put(g.PeopleAction.unfavoriteUser.error(e,o))}}*_handleSetUserBlockState(e){const t="".concat(h,"-handleSetUserBlockState");this.logger.log(t,c.LogLevel.Debug,"Processing request to ".concat(e.shouldBlock?"block":"unblock"," user"));try{e.shouldBlock?yield i.call([this.privacyService,this.privacyService.blockUser],e.targetUser):yield i.call([this.privacyService,this.privacyService.unblockUser],e.targetUser),yield i.put(g.PeopleAction.setUserBlockState.success(e.targetUser,e.shouldBlock))}catch(r){const o=a.toError(r);this.logger.log(t,c.LogLevel.Error,"Error: ".concat(o.message)),yield i.put(g.PeopleAction.setUserBlockState.error(e,o))}}*_handleSetUserMuteState(e){const t="".concat(h,"-handleSetUserMuteState");this.logger.log(t,c.LogLevel.Debug,"Processing request to ".concat(e.shouldMute?"mute":"unmute"," user"));try{e.shouldMute?yield i.call([this.privacyService,this.privacyService.muteUser],e.targetUser):yield i.call([this.privacyService,this.privacyService.unmuteUser],e.targetUser),yield i.put(g.PeopleAction.setUserMuteState.success(e.targetUser,e.shouldMute))}catch(r){const o=a.toError(r);this.logger.log(t,c.LogLevel.Error,"Error: ".concat(o.message)),yield i.put(g.PeopleAction.setUserMuteState.error(e,o))}}*_handleSetCurrentUserCloakState(e){const t="".concat(h,"-handleSetCurrentUserCloakState");this.logger.log(t,c.LogLevel.Debug,"Processing request to ".concat(e.shouldCloak?"cloak":"uncloak"," current user's presence"));try{const t=yield i.select(this.commonSelectors.getCurrentUser);if(!t)throw new Error("Could not get current XUID");e.shouldCloak?yield i.call([this.presenceService,this.presenceService.cloakUserPresence],t.xuid):yield i.call([this.presenceService,this.presenceService.uncloakUserPresence],t.xuid),yield i.put(g.PeopleAction.setCurrentUserCloakState.success(t.xuid,e.shouldCloak))}catch(r){const o=a.toError(r);this.logger.log(t,c.LogLevel.Error,"Error: ".concat(o.message)),yield i.put(g.PeopleAction.setCurrentUserCloakState.error(e,o))}}*_handleRemoveRecommendation(e){const t="".concat(h,"-handleRemoveRecommendation");this.logger.log(t,c.LogLevel.Debug,"Processing request to remove recommended friend");try{yield i.call([this.socialService,this.socialService.removeRecommendation],e.xuid),yield i.put(g.PeopleAction.removeRecommendation.success(e.xuid))}catch(r){const o=a.toError(r);this.logger.log(t,c.LogLevel.Error,"Error: ".concat(o.message)),yield i.put(g.PeopleAction.removeRecommendation.error(e.xuid,o))}}*_handleUpdateProfileSettings(e){const t="".concat(h,"-handleUpdateProfileSettings");this.logger.log(t,c.LogLevel.Debug,"Processing request to update profile settings");try{const t=yield i.select(this.commonSelectors.getCurrentUser);if(!t)throw new Error("Could not get current XUID");yield i.call([this.profileService,this.profileService.setProfileSettings],e.settings),yield i.put(g.PeopleAction.getPerson.start(t.xuid,!0)),yield i.put(g.PeopleAction.updateProfileSettings.success(t.xuid,e.settings))}catch(r){const o=a.toError(r);this.logger.log(t,c.LogLevel.Error,"Error: ".concat(o.message)),yield i.put(g.PeopleAction.updateProfileSettings.error(e,o))}}*_handleGetPeopleAndAddToLocalFriends(e){const t="".concat(h,"-handleGetPersonAndGetToLocalFriendsAction");this.logger.log(t,c.LogLevel.Debug,"Processing request for provided XUIDS");try{let r;if(1===e.xuids.length){r=new Map;const t=yield i.call([this.peopleService,this.peopleService.getPerson],e.xuids[0],d.DEFAULT_FRIEND_DECORATIONS);t&&r.set(e.xuids[0],t)}else r=yield i.call([this.peopleService,this.peopleService.getPeople],e.xuids,d.DEFAULT_FRIEND_DECORATIONS);this.logger.log(t,c.LogLevel.Info,"Success! People were requested and was successfully hydrated."),yield i.put(g.PeopleAction.getPeopleAndAddToLocalFriends.success(this._getPeopleDictionary(r)))}catch(r){const o=a.toError(r);this.logger.log(t,c.LogLevel.Error,"Error: ".concat(o.message)),yield i.put(g.PeopleAction.getPeopleAndAddToLocalFriends.error(e.xuids,a.toError(o)))}}*_handleGetFriendsWhoPlay(e){const t="".concat(h,"-handleGetFriendsWhoPlay");this.logger.log(t,c.LogLevel.Debug,"Processing request for provided title ID");try{const r=yield i.call([this.peopleService,this.peopleService.getFriendsWhoPlayTitle],e.titleId,e.additionalDecorations);this.logger.log(t,c.LogLevel.Info,"Got ".concat(r.size," friends who play"));const o=this._getPeopleDictionary(r),n=f.getLCEContentWithCacheTime(Object.keys(o));yield i.put(g.PeopleAction.getFriendsWhoPlay.success(e.titleId,n,o))}catch(r){const o=a.toError(r);this.logger.log(t,c.LogLevel.Error,"Error: ".concat(o.message)),yield i.put(g.PeopleAction.getFriendsWhoPlay.error(e.titleId,o))}}_getPeopleDictionary(e){const t={};for(const[r,o]of e.entries())t[r]=o?f.getLCEContentWithCacheTime(o):s.lceError(new Error("Could not hydrate user"));return t}};y=o.__decorate([n.injectable(),o.__param(0,n.inject(u.PeopleService)),o.__param(1,n.inject(u.SocialService)),o.__param(2,n.inject(p.PrivacyService)),o.__param(3,n.inject(u.PresenceService)),o.__param(4,n.inject(u.ProfileService)),o.__param(5,n.inject(m.PeopleSelectors)),o.__param(6,n.inject(l.CommonSelectors)),o.__param(7,n.inject(c.Logger)),o.__metadata("design:paramtypes",[Object,Object,Object,Object,Object,Object,Object,Object])],y),t.PeopleSagaManager=y},a5u3:function(e,t,r){"use strict";r("jQ/y"),Object.defineProperty(t,"__esModule",{value:!0}),t.ProfileAssetsService=void 0,t.ProfileAssetsService=Symbol("ProfileAssetsService")},bJBi:function(e,t,r){"use strict";var o,n,i;r("P2R4"),r("kYxP"),Object.defineProperty(t,"__esModule",{value:!0}),t.GamerpicLibrarySagaManager=void 0;const a=r("7DJB"),s=r("s6Xb"),c=r("OrNH"),l=r("CT5i"),d=r("u7eo"),u=r("DfD7"),p=r("jzUs"),g=r("F7Lo"),m=r("gZQb"),f="GamerpicLibrarySagaManager";let h=class{constructor(e,t,r){o.set(this,void 0),n.set(this,void 0),i.set(this,void 0),a.__classPrivateFieldSet(this,o,e),a.__classPrivateFieldSet(this,n,t),a.__classPrivateFieldSet(this,i,r),this.watchForActions=this.watchForActions.bind(this)}*watchForActions(){yield c.all([c.takeLatest(g.PeopleActionType.GetGamerpicLibrary,this.handleGetGamerpicLibrary.bind(this))])}*handleGetGamerpicLibrary(e){if(!e.forceRefresh){const e=yield c.select(a.__classPrivateFieldGet(this,o).getGamerpicLibraryLCE);if(d.getDataOrPrevious(e))return a.__classPrivateFieldGet(this,i).log(f,u.LogLevel.Info,"Cancelling update of gamerpic library metadata because data already exists"),void(yield c.put(g.PeopleAction.getGamerpicLibrary.success(d.completeFetchWithPrevious(e))))}try{const e=yield c.call([a.__classPrivateFieldGet(this,n),a.__classPrivateFieldGet(this,n).getGamerpicLibrary]);a.__classPrivateFieldGet(this,i).log(f,u.LogLevel.Info,"Got metadata about ".concat(e.length," gamerpics from editorial service")),yield c.put(g.PeopleAction.getGamerpicLibrary.success(d.lceContent(e)))}catch(t){const e=l.toError(t);a.__classPrivateFieldGet(this,i).log(f,u.LogLevel.Error,"Failed to update gamerpic library metadata: ".concat(e)),yield c.put(g.PeopleAction.getGamerpicLibrary.error(e))}}};o=new WeakMap,n=new WeakMap,i=new WeakMap,h=a.__decorate([s.injectable(),a.__param(0,s.inject(m.PeopleSelectors)),a.__param(1,s.inject(p.ProfileService)),a.__param(2,s.inject(u.Logger)),a.__metadata("design:paramtypes",[Object,Object,Object])],h),t.GamerpicLibrarySagaManager=h},bN76:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.createAction=function(e,t){var r=t;return r||(r=function(){return{type:e}}),r.getType=function(){return e},r}},bdWV:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0})},caCW:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0})},ctJW:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});r("7DJB").__exportStar(r("Bk/B"),t)},"dLd+":function(e,t,r){var o=r("ax0f"),n=r("QkOM");o({target:"Number",stat:!0,forced:Number.parseInt!=n},{parseInt:n})},dbIz:function(e,t,r){"use strict";r("jQ/y"),Object.defineProperty(t,"__esModule",{value:!0}),t.AccountLinkingService=void 0,t.AccountLinkingService=Symbol("AccountLinkingService")},"dy+k0":function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.isErrorAction=function(e){return!!(e&&e.type&&e.error)}},dyO0:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0})},fD64:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ProfileAssetsSagaManager=void 0;const o=r("7DJB"),n=r("s6Xb"),i=r("OrNH"),a=r("CT5i"),s=r("u7eo"),c=r("DfD7"),l=r("a5u3"),d=r("F7Lo"),u="ProfileAssetsSagaManager";let p=class{constructor(e,t){this.service=e,this.logger=t,this.watchForActions=this.watchForActions.bind(this),this._handleGetApprovedPlatformData=this._handleGetApprovedPlatformData.bind(this),this._handleGetProfileThemes=this._handleGetProfileThemes.bind(this),this._handleGetSupportedColors=this._handleGetSupportedColors.bind(this)}*watchForActions(){yield i.all([i.takeLatest(d.PeopleActionType.GetApprovedPlatformData,this._handleGetApprovedPlatformData),i.takeLatest(d.PeopleActionType.GetProfileThemes,this._handleGetProfileThemes),i.takeLatest(d.PeopleActionType.GetSupportedColors,this._handleGetSupportedColors)])}*_handleGetApprovedPlatformData(e){const t="".concat(u,"-handleGetApprovedPlatformData");try{this.logger.log(t,c.LogLevel.Debug,"Requesting platforms manifest");const e=yield i.call([this.service,this.service.getApprovedPlatforms]);yield i.put(d.PeopleAction.getApprovedPlatformData.success(s.lceContent(e)))}catch(r){const e=a.toError(r);this.logger.log(t,c.LogLevel.Error,"Error: ".concat(e)),yield i.put(d.PeopleAction.getApprovedPlatformData.error(e))}}*_handleGetProfileThemes(e){const t="".concat(u,"-handleGetProfileThemes");try{this.logger.log(t,c.LogLevel.Debug,"Requesting profile theme manifest");const e=yield i.call([this.service,this.service.getProfileThemeData]);yield i.put(d.PeopleAction.getProfileThemes.success(e.profileThemes,e.locale))}catch(r){const e=a.toError(r);this.logger.log(t,c.LogLevel.Error,"Error: ".concat(e)),yield i.put(d.PeopleAction.getProfileThemes.error(e))}}*_handleGetSupportedColors(e){const t="".concat(u,"-handleGetSupportedColors");try{this.logger.log(t,c.LogLevel.Debug,"Requesting supported callers");const e=yield i.call([this.service,this.service.getSupportedColors]);yield i.put(d.PeopleAction.getSupportedColors.success(s.lceContent(e)))}catch(r){const e=a.toError(r);this.logger.log(t,c.LogLevel.Error,"Error: ".concat(e)),yield i.put(d.PeopleAction.getProfileThemes.error(e))}}};p=o.__decorate([n.injectable(),o.__param(0,n.inject(l.ProfileAssetsService)),o.__param(1,n.inject(c.Logger)),o.__metadata("design:paramtypes",[Object,Object])],p),t.ProfileAssetsSagaManager=p},gZQb:function(e,t,r){"use strict";r("jQ/y"),r("kYxP"),r("IAdD"),Object.defineProperty(t,"__esModule",{value:!0}),t.makePeopleSelectors=t.promotePeopleSelectors=t.PeopleSelectors=void 0;const o=r("+l7i"),n=r("u7eo"),i=r("W/w3"),a=r("o92q"),s=r("5yXe"),c=r("LsRi"),l=r("hlm1"),d=r("KwPE"),u={id:"gamerpicblur",category:"",assets:{iconUrl:"",backgroundUrl:"",backgroundGradientUrl:"",backgroundSideGradientUrl:"",cardBackgroundUrl:"",cardGradientUrl:""},colors:{background:"#18161DFF",text:"#FFFFFFFF",buttonBackground:"#00000099",buttonBackgroundHover:"#00000080",buttonBackgroundPress:"#000000B3",buttonBorder:"#FFFFFF1A",buttonText:"#FFFFFF"},canSelect:!1},p=n.lceNotRequested(),g={getPersonDataModelLCE:(e,t)=>{const r=e.peopleMap[t];return void 0===r?p:r},isPersonUpToDate:function(e,t){let r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[];if(t===s.ServiceAccount.xuid)return!0;const o=e.peopleMap[t];return void 0!==o&&d.isPersonCurrent(o,r)},getFriendXuids:e=>e.friends,getExternalAccountProviderLCE:e=>e.externalProviderMetadata,getLinkableAccountsLCE:e=>e.linkableAccounts,getPlatformDataLCE:e=>e.approvedPlatformData,getProfileThemesLCE:e=>e.profileThemes,getSupportedColorsLCE:e=>e.supportedColors,getSuggestedFriendXuids:e=>e.suggestedFriends,getRecentPlayerXuids:e=>e.recentPlayers,getFollowerXuids:e=>e.followers,getFriendsWhoPlayXuids:(e,t)=>{var r;return null!==(r=e.friendsWhoPlay[t])&&void 0!==r?r:p},getGamerpicLibraryLCE:e=>e.gamerpicLibrary,getMostRecentError:e=>{const t=Object.entries(e.failedRequests);if(t.length>0)return t[t.length-1]},getAllErrors:e=>{const t=Object.entries(e.failedRequests);if(t.length>0)return t}};function m(e){const t=i.promoteSelectors(g,e);const r=o.createSelector([e=>e],e=>{var r;const o=t.getFriendXuids(e);return null!==(r=n.lceTransform(o,r=>{const o=[];for(const i of r){const r=t.getPersonDataModelLCE(e,i),a=n.getDataOrPrevious(l.transformPersonLCE(r,l.Decoration.Presence|l.Decoration.MultiplayerSummary));a&&o.push(a)}return o}))&&void 0!==r?r:p}),s=o.createSelector([e=>e],e=>{var r;const o=t.getSuggestedFriendXuids(e);return null!==(r=n.lceTransform(o,r=>{const o=[];for(const i of r){const r=t.getPersonDataModelLCE(e,i),a=n.getDataOrPrevious(l.transformPersonLCE(r,l.Decoration.Recommendation));a&&o.push(a)}return o}))&&void 0!==r?r:p}),d=o.createSelector([e=>e],e=>{var r;const o=t.getRecentPlayerXuids(e);return null!==(r=n.lceTransform(o,r=>{const o=[];for(const i of r){const r=t.getPersonDataModelLCE(e,i),a=n.getDataOrPrevious(l.transformPersonLCE(r,l.Decoration.RecentPlayer));a&&o.push(a)}return o}))&&void 0!==r?r:p}),m=o.createSelector([e=>e],e=>{var r;const o=t.getFollowerXuids(e);return null!==(r=n.lceTransform(o,r=>{const o=[];for(const i of r){const r=t.getPersonDataModelLCE(e,i),a=n.getDataOrPrevious(l.transformPersonLCE(r));a&&o.push(a)}return o}))&&void 0!==r?r:p}),f=o.createSelector([(e,r)=>{var o;return null===(o=n.getDataOrPrevious(t.getPersonDataModelLCE(e,r)))||void 0===o?void 0:o.themeId},t.getProfileThemesLCE],(e,t)=>{var r;const o=null===(r=n.getDataOrPrevious(t))||void 0===r?void 0:r.profileThemes;return!!e&&(null===o||void 0===o?void 0:o.find(t=>t.id===e))||(null===o||void 0===o?void 0:o.find(e=>e.id===a.DEFAULT_THEME_ID))||u});return Object.assign(Object.assign({},t),{makePersonSelectors:e=>l.makePersonSelectors(e,t.getPersonDataModelLCE),makeGroupSelectors:function(e){const r=c.createArrayOutputSelector(e=>e,r=>e.map(e=>t.getPersonDataModelLCE(r,e)));return{getProfiles:o.createSelector([r,function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:l.Decoration.None;return t}],(e,t)=>e.map(e=>n.isNotRequested(e)?p:l.transformPersonLCE(e,t))),getProfileDataModels:r}},getFriendsLCE:r,getFollowersLCE:m,getSuggestedFriendsLCE:s,getRecentPlayersLCE:d,getUserProfileTheme:f,getFriendsWhoPlayLCE:function(e,r){let o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:l.Decoration.Presence|l.Decoration.TitleHistory;var i;const a=t.getFriendsWhoPlayXuids(e,r);return null!==(i=n.lceTransform(a,r=>{const i=[];for(const a of r){const r=t.getPersonDataModelLCE(e,a),s=n.getDataOrPrevious(l.transformPersonLCE(r,o));s&&i.push(s)}return i}))&&void 0!==i?i:p}})}t.PeopleSelectors=Symbol("PeopleSelectors"),t.promotePeopleSelectors=m,t.makePeopleSelectors=function(){return m(e=>e.people)}},hlm1:function(e,t,r){"use strict";r("IAdD"),Object.defineProperty(t,"__esModule",{value:!0}),t.makePersonSelectors=t.transformPersonLCE=t.Decoration=void 0;const o=r("+l7i"),n=r("u7eo"),i=r("o92q"),a=r("5yXe");var s;!function(e){e[e.None=0]="None",e[e.Presence=1]="Presence",e[e.PreferredColors=2]="PreferredColors",e[e.Detail=4]="Detail",e[e.Recommendation=16]="Recommendation",e[e.MultiplayerSummary=32]="MultiplayerSummary",e[e.RecentPlayer=64]="RecentPlayer",e[e.TitleHistory=128]="TitleHistory"}(s=t.Decoration||(t.Decoration={}));const c=n.lceNotRequested();t.transformPersonLCE=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:s.None;var r;return n.isNotRequested(e)?c:null!==(r=n.lceTransform(e,e=>{var r,o,a,c,l,d,u;return Object.assign(Object.assign({},e),{gamertag:e.gamertag,realName:e.realName||void 0,gamerscore:e.gamerscore||0,isCloaked:e.isCloaked,isIdentityShared:null!==(r=e.isIdentityShared)&&void 0!==r&&r,gamerpicUrl:null!==(o=e.gamerpicUrl)&&void 0!==o?o:"",isFriend:null!==(a=e.isFriend)&&void 0!==a&&a,isFollower:null!==(c=e.isFollower)&&void 0!==c&&c,isFavorite:null!==(l=e.isFavorite)&&void 0!==l&&l,isBroadcasting:null!==(d=e.isBroadcasting)&&void 0!==d&&d,followedDate:e.followedDate,multiplayerSummary:t&s.MultiplayerSummary?n.getDataOrPrevious(e.multiplayerSummary):void 0,preferredColors:t&s.PreferredColors?n.getDataOrPrevious(e.preferredColors):void 0,presence:t&s.Presence?n.getDataOrPrevious(e.presence):void 0,detail:t&s.Detail?n.getDataOrPrevious(e.detail):void 0,recommendation:t&s.Recommendation?n.getDataOrPrevious(e.recommendation):void 0,recentPlayerInfo:t&s.RecentPlayer?n.getDataOrPrevious(e.recentPlayerInfo):void 0,titleHistory:t&s.TitleHistory?n.getDataOrPrevious(e.titleHistory):void 0,preferredPlatforms:null!==(u=e.preferredPlatforms)&&void 0!==u?u:[],themeId:e.themeId||i.DEFAULT_THEME_ID})}))&&void 0!==r?r:c};const l=n.lceContent(a.ServiceAccountProfile,Number.MAX_SAFE_INTEGER);t.makePersonSelectors=function(e,r){function i(t){return r(t,e)}return{getProfileLCE:o.createSelector([i,function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:s.None;return t}],(r,o)=>e===a.ServiceAccount.xuid?l:n.isNotRequested(r)?c:t.transformPersonLCE(r,o)),getDataModel:i}}},hpd7:function(e,t,r){"use strict";r("JtPf"),Object.defineProperty(t,"__esModule",{value:!0}),t.XblProfileService=void 0;const o=r("7DJB"),n=r("s6Xb"),i=r("E0xh"),a=r("rzN3"),s=r("9v3z"),c=r("ENAq");let l=class{constructor(e,t,r,o){this.httpClient=(new i.HttpClientBuilder).authenticator(new a.TokenAuthenticator(e)).requestInterceptor(new s.AcceptLanguageInterceptor(t)).requestInterceptor(new s.CorrelationVectorInterceptor(r)).interceptors(o).build(),this.editorialRequestFactory=i.RequestFactory.withBaseUrl("https://editorial.xboxlive.com/").setCommonHeaders({[i.HttpHeader.Accept]:"application/json"}),this.profileRequestFactory=i.RequestFactory.withBaseUrl("https://profile.xboxlive.com/").setCommonHeaders({[i.HttpHeader.XXBLContractVersion]:"2"})}async getGamerpicLibrary(){const e=await this.httpClient.execute(this.editorialRequestFactory.get("Site/XboxLiveFeeds/Content/gamerpics/gamerpics_selection/gamerpicsSelection"));if(!e.data)throw new Error("Failed to get gamerpics: status ".concat(e.status,", text ").concat(e.statusText));return c.mapGamerpicLibraryResponseToArray(e.data)}async setProfileSettings(e){const t=c.mapSettingItemsToBatchRequest(e);await this.httpClient.execute(this.profileRequestFactory.post("users/me/profile/settings/batch",JSON.stringify(t),{headers:{[i.HttpHeader.ContentType]:"application/json"}}))}async setShowLinkedAccount(e,t){const r={network:e,showLinkedAccount:t,modifiedFields:["showLinkedAccount"]};await this.httpClient.execute(this.profileRequestFactory.put("users/me/profile/linkedaccounts",JSON.stringify(r),{headers:{[i.HttpHeader.XXBLContractVersion]:"3",[i.HttpHeader.ContentType]:"application/json"}}))}};l=o.__decorate([n.injectable(),o.__param(0,n.inject(a.TokenProvider)),o.__param(1,n.inject(s.AcceptableLanguageProvider)),o.__param(2,n.inject(s.CorrelationVectorProvider)),o.__param(3,n.inject(i.InterceptorCollection)),o.__metadata("design:paramtypes",[Object,Function,Function,Object])],l),t.XblProfileService=l},i0GD:function(e,t,r){"use strict";r("jQ/y"),Object.defineProperty(t,"__esModule",{value:!0}),t.MediaService=void 0,t.MediaService=Symbol("MediaService")},iTc8:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.watchAllPeopleActions=void 0;const o=r("OrNH");t.watchAllPeopleActions=function*(e,t,r,n){yield o.all([e.watchForActions(),t.watchForActions(),r.watchForActions(),n.watchForActions()])}},ieIT:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.peopleContainerModule=t.bindPeopleDependencies=t.CustomPicType=t.MediaHubService=t.MediaService=t.XblProfileService=t.ProfileService=t.XblPresenceService=t.PresenceService=t.XblPrivacyService=t.PrivacyService=t.XblSocialService=t.SocialService=t.XblPeopleService=t.PeopleService=t.XblAccountLinkingClient=t.AccountLinkingService=t.getPresenceDeviceInfo=void 0;const o=r("7DJB");o.__exportStar(r("o92q"),t),o.__exportStar(r("vm4W"),t);var n=r("jzUs");Object.defineProperty(t,"getPresenceDeviceInfo",{enumerable:!0,get:function(){return n.getPresenceDeviceInfo}}),Object.defineProperty(t,"AccountLinkingService",{enumerable:!0,get:function(){return n.AccountLinkingService}}),Object.defineProperty(t,"XblAccountLinkingClient",{enumerable:!0,get:function(){return n.XblAccountLinkingClient}}),Object.defineProperty(t,"PeopleService",{enumerable:!0,get:function(){return n.PeopleService}}),Object.defineProperty(t,"XblPeopleService",{enumerable:!0,get:function(){return n.XblPeopleService}}),Object.defineProperty(t,"SocialService",{enumerable:!0,get:function(){return n.SocialService}}),Object.defineProperty(t,"XblSocialService",{enumerable:!0,get:function(){return n.XblSocialService}}),Object.defineProperty(t,"PrivacyService",{enumerable:!0,get:function(){return n.PrivacyService}}),Object.defineProperty(t,"XblPrivacyService",{enumerable:!0,get:function(){return n.XblPrivacyService}}),Object.defineProperty(t,"PresenceService",{enumerable:!0,get:function(){return n.PresenceService}}),Object.defineProperty(t,"XblPresenceService",{enumerable:!0,get:function(){return n.XblPresenceService}}),Object.defineProperty(t,"ProfileService",{enumerable:!0,get:function(){return n.ProfileService}}),Object.defineProperty(t,"XblProfileService",{enumerable:!0,get:function(){return n.XblProfileService}}),Object.defineProperty(t,"MediaService",{enumerable:!0,get:function(){return n.MediaService}}),Object.defineProperty(t,"MediaHubService",{enumerable:!0,get:function(){return n.MediaHubService}});var i=r("Ppht");Object.defineProperty(t,"CustomPicType",{enumerable:!0,get:function(){return i.CustomPicType}});var a=r("MFxj");Object.defineProperty(t,"bindPeopleDependencies",{enumerable:!0,get:function(){return a.bindPeopleDependencies}}),Object.defineProperty(t,"peopleContainerModule",{enumerable:!0,get:function(){return a.peopleContainerModule}})},ipyU:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o=r("7DJB");o.__exportStar(r("bN76"),t),o.__exportStar(r("SwXm"),t),o.__exportStar(r("ULmP"),t),o.__exportStar(r("KIXF"),t),o.__exportStar(r("dy+k0"),t)},jzUs:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getPresenceDeviceInfo=t.XblProfileAssetsService=t.XblSocialService=t.XblProfileService=t.XblPrivacyService=t.XblPresenceService=t.XblPeopleService=t.MediaHubService=t.XblAccountLinkingClient=void 0;const o=r("7DJB");o.__exportStar(r("dbIz"),t);var n=r("kdyW");Object.defineProperty(t,"XblAccountLinkingClient",{enumerable:!0,get:function(){return n.XblAccountLinkingClient}}),o.__exportStar(r("i0GD"),t);var i=r("JCe+");Object.defineProperty(t,"MediaHubService",{enumerable:!0,get:function(){return i.MediaHubService}}),o.__exportStar(r("XAMn"),t);var a=r("NwOv");Object.defineProperty(t,"XblPeopleService",{enumerable:!0,get:function(){return a.XblPeopleService}}),o.__exportStar(r("mpGi"),t);var s=r("VWoD");Object.defineProperty(t,"XblPresenceService",{enumerable:!0,get:function(){return s.XblPresenceService}}),o.__exportStar(r("qBa5"),t);var c=r("OlTB");Object.defineProperty(t,"XblPrivacyService",{enumerable:!0,get:function(){return c.XblPrivacyService}}),o.__exportStar(r("5Nj6"),t);var l=r("hpd7");Object.defineProperty(t,"XblProfileService",{enumerable:!0,get:function(){return l.XblProfileService}}),o.__exportStar(r("s4QV"),t);var d=r("1lEP");Object.defineProperty(t,"XblSocialService",{enumerable:!0,get:function(){return d.XblSocialService}}),o.__exportStar(r("a5u3"),t);var u=r("4liS");Object.defineProperty(t,"XblProfileAssetsService",{enumerable:!0,get:function(){return u.XblProfileAssetsService}});var p=r("u4R7");Object.defineProperty(t,"getPresenceDeviceInfo",{enumerable:!0,get:function(){return p.getPresenceDeviceInfo}})},kdyW:function(e,t,r){"use strict";r("JtPf"),Object.defineProperty(t,"__esModule",{value:!0}),t.XblAccountLinkingClient=void 0;const o=r("7DJB"),n=r("s6Xb"),i=r("CT5i"),a=r("E0xh"),s=r("rzN3"),c=r("9v3z"),l=r("DfD7"),d=r("u4R7");let u=class{constructor(e,t,r,o,n){this.logger=n;const i=new c.CorrelationVectorInterceptor(r),l=new c.AcceptLanguageInterceptor(t);this.xblHttpClient=(new a.HttpClientBuilder).authenticator(new s.TokenAuthenticator(e)).requestInterceptor(i).requestInterceptor(l).interceptors(o).build(),this.cdnHttpClient=(new a.HttpClientBuilder).interceptors(o).build()}async getProviders(){const e=await this.cdnHttpClient.execute({method:"get",url:"https://dlassets-ssl.xboxlive.com/public/content/social/linking/3.0/providers.json",headers:{[a.HttpHeader.Accept]:"application/json"}});if(e.status>=300||!e.data)throw new Error("Failed to get account provider target assets: status ".concat(e.status,", text ").concat(e.statusText));return d.mapAccountProviderResponse(e.data)}async getLinkableAccounts(){const e=await this.xblHttpClient.execute({method:"get",url:"https://peoplehub.xboxlive.com/users/me/accountlink",headers:{[a.HttpHeader.Accept]:"application/json",[a.HttpHeader.XXBLContractVersion]:"1"}});if(e.status>=300||!e.data)throw new Error("Failed to get linked account info from PeopleHub: status ".concat(e.status,", text ").concat(e.statusText));const t=i.asArray(e.data);return d.mapLinkedAccountsResponse(t,this.logger)}async unlinkAccount(e){const t=await this.xblHttpClient.execute({method:"delete",url:"https://thirdpartytokens.xboxlive.com/users/me/networks/".concat(e,"/link"),headers:{[a.HttpHeader.Accept]:"application/json",[a.HttpHeader.XXBLContractVersion]:"1"}});if(204!==t.status)throw new Error("Expected 204 No Content when unlinking an account, got ".concat(t.status,"; ").concat(t.statusText))}async createOAuthSession(e,t){const r=await this.xblHttpClient.execute({method:"post",url:"https://sisu.xboxlive.com/connect/".concat(e),headers:{[a.HttpHeader.Accept]:"application/json",[a.HttpHeader.XXBLContractVersion]:"1",[a.HttpHeader.ContentType]:"application/json; charset=utf-8"},data:JSON.stringify({ReturnUri:t})});if(r.status>=300||!r.data)throw new Error("Failed to get expected response from SISU: status ".concat(r.status,", text ").concat(r.statusText));return{url:i.asString(r.data.RedirectTo),sessionId:i.asString(r.data.SessionId)}}};u=o.__decorate([n.injectable(),o.__param(0,n.inject(s.TokenProvider)),o.__param(1,n.inject(c.AcceptableLanguageProvider)),o.__param(2,n.inject(c.CorrelationVectorProvider)),o.__param(3,n.inject(a.InterceptorCollection)),o.__param(4,n.inject(l.Logger)),o.__metadata("design:paramtypes",[Object,Function,Function,Object,Object])],u),t.XblAccountLinkingClient=u},lzrI:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.DEFAULT_THEME_ID=void 0,t.DEFAULT_THEME_ID="gamerpicblur"},mpGi:function(e,t,r){"use strict";r("jQ/y"),Object.defineProperty(t,"__esModule",{value:!0}),t.PresenceService=void 0,t.PresenceService=Symbol("PresenceService")},mvmj:function(e,t,r){"use strict";e.exports=r("ipyU")},nVpS:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0})},o92q:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.DEFAULT_THEME_ID=t.XboxProfileBuilder=t.RelationshipType=t.ProfileSettingKey=t.PresenceDeviceType=t.PresenceDevice=t.PresenceState=t.DEFAULT_BATCH_DECORATIONS=t.DEFAULT_FRIEND_DECORATIONS=t.DEFAULT_SINGLE_USER_DECORATIONS=t.EmptyParty=t.SessionJoinRestriction=t.Color=void 0;const o=r("7DJB");var n=r("q6rY");Object.defineProperty(t,"Color",{enumerable:!0,get:function(){return n.Color}}),o.__exportStar(r("ubM4"),t);var i=r("EDn9");Object.defineProperty(t,"SessionJoinRestriction",{enumerable:!0,get:function(){return i.SessionJoinRestriction}}),Object.defineProperty(t,"EmptyParty",{enumerable:!0,get:function(){return i.EmptyParty}});var a=r("XcDk");Object.defineProperty(t,"DEFAULT_SINGLE_USER_DECORATIONS",{enumerable:!0,get:function(){return a.DEFAULT_SINGLE_USER_DECORATIONS}}),Object.defineProperty(t,"DEFAULT_FRIEND_DECORATIONS",{enumerable:!0,get:function(){return a.DEFAULT_FRIEND_DECORATIONS}}),Object.defineProperty(t,"DEFAULT_BATCH_DECORATIONS",{enumerable:!0,get:function(){return a.DEFAULT_BATCH_DECORATIONS}});var s=r("0fd2");Object.defineProperty(t,"PresenceState",{enumerable:!0,get:function(){return s.PresenceState}}),Object.defineProperty(t,"PresenceDevice",{enumerable:!0,get:function(){return s.PresenceDevice}}),Object.defineProperty(t,"PresenceDeviceType",{enumerable:!0,get:function(){return s.PresenceDeviceType}});var c=r("ulLs");Object.defineProperty(t,"ProfileSettingKey",{enumerable:!0,get:function(){return c.ProfileSettingKey}});var l=r("JFUl");Object.defineProperty(t,"RelationshipType",{enumerable:!0,get:function(){return l.RelationshipType}});var d=r("/D66");Object.defineProperty(t,"XboxProfileBuilder",{enumerable:!0,get:function(){return d.XboxProfileBuilder}});var u=r("lzrI");Object.defineProperty(t,"DEFAULT_THEME_ID",{enumerable:!0,get:function(){return u.DEFAULT_THEME_ID}})},q6rY:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Color=void 0;t.Color=class{constructor(e){if(!e)return this.isValid=!1,void(this.hexString="");this.isValid=!0,"#"===e[0]?this.hexString=e:this.hexString="#".concat(e)}toString(e){return this.isValid?this.hexString:e||"#000000"}}},qBa5:function(e,t,r){"use strict";r("jQ/y"),Object.defineProperty(t,"__esModule",{value:!0}),t.PrivacyService=void 0,t.PrivacyService=Symbol("PrivacyService")},qXk8:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const o=r("7DJB");o.__exportStar(r("sJVd"),t),o.__exportStar(r("I50b"),t)},s4QV:function(e,t,r){"use strict";r("jQ/y"),Object.defineProperty(t,"__esModule",{value:!0}),t.SocialService=void 0,t.SocialService=Symbol("SocialService")},sJVd:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.CloakState=void 0,function(e){e.Active="Active",e.Cloaked="Cloaked"}(t.CloakState||(t.CloakState={}))},tujq:function(e,t,r){"use strict";function o(e,t){const r=e[t];if(!r)throw new Error("Attempted to access state for an unregistered namespace at key ".concat(t,". Please make sure\n            a reducer for this state was registered via a plugin."));return r}r.d(t,"a",(function(){return o}))},u4R7:function(e,t,r){"use strict";r("IAdD"),r("kYxP"),r("DZ+c"),r("dLd+"),r("Blm6"),r("x4t0"),r("qK/h"),r("hQIz"),r("9QGs"),r("uuHm"),r("5Z+y"),r("hBgl"),r("8H/u"),r("0NZM"),r("AkTu"),r("pbH6"),r("zZCX"),r("tVjb"),r("AUjp"),r("jQ/y"),Object.defineProperty(t,"__esModule",{value:!0}),t.mapColorAssetToPreferredColor=t.mapColorsManifestToColorIds=t.mapThemesManifestToProfileThemes=t.mapPlatformManifestToApprovedPlatformData=t.mapResponseToArray=t.mapResponseToMap=t.mapPersonToDomain=t.getTitleHistoryForPerson=t.getLinkedAccountsForPerson=t.getFollowedDateForPerson=t.getRecommendationInfoForPerson=t.getRecentPlayerInfoForPerson=t.getMultiplayerSummaryForPerson=t.getDetailForPerson=t.getPresenceForPerson=t.getPresenceDeviceInfo=t.getGamertagForPerson=t.getColorsForPerson=t.mapLinkedAccountsResponse=t.mapLinkedAccount=t.mapAccountProviderResponse=t.mapAccountProvider=t.NormalizedRelationshipTypeMap=void 0;const o=r("7DJB"),n=r("CT5i"),i=r("u7eo"),a=r("DfD7"),s=r("o92q"),c=r("EDn9"),l=r("0fd2"),d=r("S2Wi"),u=o.__importStar(r("Ppht"));t.NormalizedRelationshipTypeMap={follower:s.RelationshipType.Follower,friendoffriend:s.RelationshipType.FriendOfFriend,recentplayer:s.RelationshipType.RecentPlayer,vip:s.RelationshipType.VIP};const p=n.createStringEnumMatcher(c.SessionJoinRestriction,"SessionJoinRestriction",n.EnumMatchBehavior.CaseInsensitive);function g(e){const t=n.asObjectWithSchema(e,{networkName:n.asString,displayName:n.asString,iconUri:n.asString,iconUri256:n.asString,color:()=>new s.Color(n.asString(e.color)),friendFindingSupported:n.asBool,showOnProfileSupported:n.asBool,liveStreamingProvider:()=>e.livestreamDetails?n.asObjectWithSchema(e.livestreamDetails,{displayName:n.asString,iconUri:n.asString}):void 0});return t.friendFindingSupported?Object.assign(Object.assign({},t),{recommendationType:n.asString(e.recommendationType)}):Object.assign(Object.assign({},t),{friendFindingSupported:!1})}function m(e,t){const r=n.asString(e.networkName);let o;switch(e.optInStatus){case u.LinkedAccountOptInStatus.ShowPrompt:o=s.LinkedAccountStatus.Unlinked;break;case u.LinkedAccountOptInStatus.OptedIn:o=s.LinkedAccountStatus.Linked;break;case u.LinkedAccountOptInStatus.OptedOut:o="Facebook"===r?s.LinkedAccountStatus.Unlinked:s.LinkedAccountStatus.Linked;break;case u.LinkedAccountOptInStatus.Unknown:case u.LinkedAccountOptInStatus.Excluded:o=s.LinkedAccountStatus.Hidden;break;default:{const r=e.optInStatus;null===t||void 0===t||t.log("mapLinkedAccount",a.LogLevel.Warn,"Unexpected OptInStatus, treating as hidden: ".concat(r)),o=s.LinkedAccountStatus.Hidden}}if(o===s.LinkedAccountStatus.Linked){let o;switch(e.tokenStatus){case u.LinkedAccountTokenStatus.NotRequired:case u.LinkedAccountTokenStatus.Unknown:case u.LinkedAccountTokenStatus.OK:o=s.TokenStatus.OK;break;case u.LinkedAccountTokenStatus.TokenRenewalRequired:o=s.TokenStatus.RenewalRequired;break;default:{const r=e.tokenStatus;o=s.TokenStatus.OK,null===t||void 0===t||t.log("mapLinkedAccount",a.LogLevel.Warn,"Unknown tokenStatus for linked account; treating as OK: ".concat(r))}}return{networkName:r,linkStatus:s.LinkedAccountStatus.Linked,tokenStatus:o,userDisplayName:n.asOptionalString(e.displayName)||"",deeplink:n.asOptionalString(e.deeplink)||void 0,showOnProfile:n.asBool(e.showOnProfile)}}return{networkName:r,linkStatus:o}}function f(e){if(!e.preferredColor)return i.lceError(new Error("Failed to retrieve PreferredColor decoration"));const t={primaryColor:new s.Color(e.preferredColor.primaryColor),secondaryColor:new s.Color(e.preferredColor.secondaryColor),tertiaryColor:new s.Color(e.preferredColor.tertiaryColor)};return Object.values(t).every(e=>e.isValid)?d.getLCEContentWithCacheTime(t):i.lceError(new Error("Failed to parse PreferredColor values"))}function h(e){return{legacyGamertag:e.gamertag||"",base:e.modernGamertag||"",suffix:e.modernGamertagSuffix||void 0,uniqueGamertag:e.uniqueModernGamertag||""}}function y(e){const t=l.NormalizedPresenceDeviceMap[e.toLowerCase()];switch(t){case s.PresenceDevice.Android:case s.PresenceDevice.iOS:return{type:s.PresenceDeviceType.Mobile,deviceName:t};case s.PresenceDevice.PC:case s.PresenceDevice.Win32:case s.PresenceDevice.WindowsOneCore:return{type:s.PresenceDeviceType.PC,deviceName:t};case s.PresenceDevice.Scarlett:case s.PresenceDevice.Xbox360:case s.PresenceDevice.XboxOne:return{type:s.PresenceDeviceType.Console,deviceName:t};case s.PresenceDevice.Unknown:default:return{type:s.PresenceDeviceType.Unknown,deviceName:s.PresenceDevice.Unknown}}}function P(e){var t;if(!e.presenceDetails)return i.lceError(new Error("Failed to retrieve PresenceDetails decoration"));const r=e.presenceDetails.find(e=>e.IsPrimary);if(!r||!r.Device)return i.lceError(new Error("Failed to find primary presence in PresenceDetails"));const o="ONLINE"===(null===(t=e.presenceState)||void 0===t?void 0:t.toUpperCase())?s.PresenceState.Online:s.PresenceState.Offline;try{const t={presenceState:o,presenceText:e.presenceText||"",presenceDevice:y(r.Device||""),presenceTitleId:n.asOptionalString(r.TitleId),presenceIsGame:n.asOptionalBool(r.IsGame)||!1};return d.getLCEContentWithCacheTime(t)}catch(a){const e=n.asError(a);return i.lceError(new n.ValidationError("Failed to map presence decoration; ".concat(e.toString())))}}function v(e){var t,r,o,a,s,c,l,u;if(!e.detail)return i.lceError(new Error("Failed to retrieve Detail decoration"));try{return d.getLCEContentWithCacheTime({isBlocked:null!==(t=n.asOptionalBool(e.detail.blocked))&&void 0!==t&&t,isMuted:null!==(r=n.asOptionalBool(e.detail.mute))&&void 0!==r&&r,bio:null!==(o=n.asOptionalString(e.detail.bio))&&void 0!==o?o:"",location:null!==(a=n.asOptionalString(e.detail.location))&&void 0!==a?a:"",tenure:Number.parseInt(n.asOptionalString(e.detail.tenure)||"0"),watermarks:null!==(s=n.asOptionalArray(e.detail.watermarks,n.asString))&&void 0!==s?s:[],followerCount:null!==(c=n.asOptionalNumber(e.detail.followerCount))&&void 0!==c?c:0,followingCount:null!==(l=n.asOptionalNumber(e.detail.followingCount))&&void 0!==l?l:0,hasGamePass:null!==(u=n.asOptionalBool(e.detail.hasGamePass))&&void 0!==u&&u})}catch(p){const e=n.asError(p);return i.lceError(new n.ValidationError("Failed to map detail decoration; ".concat(e.toString())))}}function S(e,t){var r;if(!e.multiplayerSummary)return i.lceError(new Error("Failed to retrieve MultiplayerSummary decoration"));if(!("partyDetails"in e.multiplayerSummary))return i.lceError(new Error("Decoration was missing expected partyDetails field; are you using contract v4 or newer?"));try{const o=n.asArray(e.multiplayerSummary.partyDetails),i=n.asArray(e.multiplayerSummary.joinableActivities);let s,c=[];if(o.length>0){const e=o[0];o.length>1&&(null===t||void 0===t||t.log("getMultiplayerSummaryForPerson",a.LogLevel.Warn,"Expected only one party, found ".concat(o.length)));const i=n.asNumber(e.accepted),c=n.asString(null===(r=e.sessionRef)||void 0===r?void 0:r.scid),l=n.asString(e.sessionRef.templateName);s={memberCount:i,sessionRef:{scid:c,templateName:l,name:n.asString(e.sessionRef.name)},joinable:"followed"===e.joinRestriction||"public"===e.joinRestriction}}return i.length>0&&(c=i.map(e=>n.asObjectWithSchema(e,{joinRestriction:p,sequenceNumber:e=>n.asNumber(parseInt(n.asString(e))),titleId:n.asNumber}))),d.getLCEContentWithCacheTime({party:s,joinableActivities:c})}catch(o){const e=n.asError(o);return i.lceError(new n.ValidationError("Failed to map MultiplayerSummary decoration; ".concat(e.toString())))}}function b(e){if(!e.recentPlayer)return i.lceError(new Error("Failed to retrieve RecentPlayer decoration"));try{return d.getLCEContentWithCacheTime({titles:e.recentPlayer.titles.map(e=>n.asObjectWithSchema(e,{titleId:n.asString,titleName:n.asString,lastPlayedWithDateTime:n.asDate})),text:n.asString(e.recentPlayer.text)})}catch(t){const e=n.asError(t);return i.lceError(new n.ValidationError("Failed to map RecentPlayer decoration; ".concat(e.toString())))}}function C(e){if(!e.recommendation)return i.lceError(new Error("Failed to retrieve Recommendation decoration"));try{const r=t.NormalizedRelationshipTypeMap[n.asString(e.recommendation.Type).toLowerCase()];return d.getLCEContentWithCacheTime({type:null!==r&&void 0!==r?r:e.recommendation.Type,reasons:n.asArray(e.recommendation.Reasons,n.asString)})}catch(r){const e=n.asError(r);return i.lceError(new n.ValidationError("Failed to map Recommendation decoration; ".concat(e.toString())))}}function A(e){if(e.follower&&null!==e.follower)return n.asOptionalDate(e.follower.followedDateTime)}function _(e){return e.linkedAccounts?n.asCompactArray(e.linkedAccounts,e=>{const t=e;return n.asObjectWithSchema(t,{networkName:n.asString,userDisplayName:()=>n.asOptionalString(t.displayName)||"",deeplink:n.asOptionalString,showOnProfile:n.asBool})}):[]}function w(e){if(!e.titleHistory)return i.lceError(new Error("Failed to retrieve TitleHistory decoration"));try{return d.getLCEContentWithCacheTime({titleId:n.asString(e.titleHistory.titleId),lastTimePlayedDateMS:n.asDate(e.titleHistory.lastTimePlayed).getTime(),lastTimePlayedText:n.asString(e.titleHistory.lastTimePlayedText)})}catch(t){const e=n.toError(t);return i.lceError(new n.ValidationError("Failed to map TitleHistory decoration; ".concat(e.toString())))}}function O(e,t,r){var o;if(e&&e.xuid&&e.gamertag&&e.modernGamertag&&e.uniqueModernGamertag)try{return{xuid:n.asString(e.xuid),gamertag:h(e),realName:n.asOptionalString(e.realName),gamerscore:e.gamerScore?Number.parseInt(e.gamerScore,10):void 0,isIdentityShared:n.asOptionalBool(e.isIdentityShared),gamerpicUrl:n.asOptionalString(e.displayPicRaw),isFriend:n.asOptionalBool(e.isFollowedByCaller),isFollower:n.asOptionalBool(e.isFollowingCaller),followedDate:A(e),isFavorite:n.asOptionalBool(e.isFavorite),isCloaked:n.asOptionalBool(e.isCloaked),isBroadcasting:n.asOptionalBool(e.isBroadcasting),linkedAccounts:_(e),multiplayerSummary:t.includes("multiplayerSummary")?S(e,r):i.lceNotRequested(),preferredColors:t.includes("preferredColor")?f(e):i.lceNotRequested(),presence:t.includes("presenceDetail")?P(e):i.lceNotRequested(),detail:t.includes("detail")?v(e):i.lceNotRequested(),recentPlayerInfo:t.includes("recentPlayer")?b(e):i.lceNotRequested(),recommendation:t.includes("recommendation")?C(e):i.lceNotRequested(),titleHistory:t.includes("titleHistory")?w(e):i.lceNotRequested(),preferredPlatforms:null!==(o=n.asOptionalArray(e.preferredPlatforms,n.asString))&&void 0!==o?o:[],themeId:n.asOptionalString(e.colorTheme)}}catch(s){return void(null===r||void 0===r||r.log("mapPersonToDomain",a.LogLevel.Warn,"Error mapping person for XUID ".concat(e.xuid,", error: ").concat(n.asError(s).message)))}else null===r||void 0===r||r.log("mapPersonToDomain",a.LogLevel.Warn,"Error mapping person for XUID ".concat(e.xuid))}t.mapAccountProvider=g,t.mapAccountProviderResponse=function(e){const t=n.asArray(e.providers);return n.asCompactArray(t,e=>g(e))},t.mapLinkedAccount=m,t.mapLinkedAccountsResponse=function(e,t){const r=[];for(const i of e)try{r.push(m(i,t))}catch(o){const e=n.asError(o);null===t||void 0===t||t.log("mapLinkedAccountsResponse",a.LogLevel.Warn,"Failed to map PeopleHub response to an account: ".concat(e))}return r},t.getColorsForPerson=f,t.getGamertagForPerson=h,t.getPresenceDeviceInfo=y,t.getPresenceForPerson=P,t.getDetailForPerson=v,t.getMultiplayerSummaryForPerson=S,t.getRecentPlayerInfoForPerson=b,t.getRecommendationInfoForPerson=C,t.getFollowedDateForPerson=A,t.getLinkedAccountsForPerson=_,t.getTitleHistoryForPerson=w,t.mapPersonToDomain=O,t.mapResponseToMap=function(e,t,r){const o=new Map,i=n.asOptionalArray(null===e||void 0===e?void 0:e.people);if(!i)return o;for(const n of i)n.xuid&&o.set(n.xuid,O(n,t,r));return o},t.mapResponseToArray=function(e,t,r){const o=[],i=n.asOptionalArray(null===e||void 0===e?void 0:e.people);if(!i)return o;for(const n of i){const e=O(n,t,r);e&&o.push(e)}return o},t.mapPlatformManifestToApprovedPlatformData=function(e,t){const r=[],o=n.asObject(e),i=n.asObject(t);return n.asArray(o.contentManifest).forEach(e=>{try{const t=n.asString(i.localizedStrings.find(t=>t.id===e.id).description);r.push({id:n.asString(e.id),icon:n.asString(e.icon),iconPath:n.asString(e.iconPath),description:t})}catch(t){return}}),r},t.mapThemesManifestToProfileThemes=function(e,t){const r=n.asObject(e),o=n.asObject(t),i=n.asArray(r.contentManifest);n.asArray(o.localizedStrings,n.asObject);const a=Object.assign({},...o.localizedStrings.map(e=>({[e.id]:e.description})));return n.asCompactArray(i,e=>{const t=n.asObject(e),r=n.asObjectWithSchema(t,{id:n.asString,category:n.asString,assets:()=>n.asObjectWithSchema(t,{iconUrl:()=>n.asString(t.iconAssetUrl),backgroundUrl:()=>n.asString(t.backgroundAssetUrl),backgroundGradientUrl:()=>n.asString(t.backgroundGradientAssetUrl),backgroundSideGradientUrl:()=>n.asString(t.backgroundSideGradientAssetUrl),cardBackgroundUrl:()=>n.asString(t.playerCardBackgroundAssetUrl),cardGradientUrl:()=>n.asString(t.playerCardBackgroundGradientAssetUrl)}),colors:()=>n.asObjectWithSchema(t,{background:()=>new s.Color(n.asString(t.gradientColor)).toString(),text:()=>new s.Color(n.asString(t.headerColor)).toString(),buttonBackground:()=>new s.Color(n.asString(t.primaryButtonColor)).toString(),buttonBackgroundHover:()=>new s.Color(n.asString(t.primaryButtonColorOnHover)).toString(),buttonBackgroundPress:()=>new s.Color(n.asString(t.primaryButtonColorOnPress)).toString(),buttonBorder:()=>new s.Color(t.primaryButtonBorderColor?n.asString(t.primaryButtonBorderColor):"00000000").toString(),buttonText:()=>new s.Color(n.asString(t.primaryButtonTextColor)).toString()})}),o=n.asOptionalString(a[r.id]);return o?Object.assign(Object.assign({},r),{canSelect:!0,description:o}):Object.assign(Object.assign({},r),{canSelect:!1})})},t.mapColorsManifestToColorIds=function(e){return n.asObjectWithSchema(e,{version:n.asNumber,colors:e=>n.asCompactArray(e,e=>n.asObjectWithSchema(e,{id:n.asString}))}).colors.map(e=>e.id)},t.mapColorAssetToPreferredColor=function(e){return n.asObjectWithSchema(e,{primaryColor:()=>new s.Color(n.asString(e.primaryColor)),secondaryColor:()=>new s.Color(n.asString(e.secondaryColor)),tertiaryColor:()=>new s.Color(n.asString(e.tertiaryColor))})}},ubM4:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.TokenStatus=t.LinkedAccountStatus=void 0,function(e){e.Hidden="hidden",e.Linked="linked",e.Unlinked="unlinked"}(t.LinkedAccountStatus||(t.LinkedAccountStatus={})),function(e){e.OK="ok",e.RenewalRequired="renewalRequired"}(t.TokenStatus||(t.TokenStatus={}))},ulLs:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ProfileSettingKey=void 0,function(e){e.Bio="Bio",e.Location="Location",e.PublicGamerpic="PublicGamerpic",e.PreferredColor="PreferredColor",e.WebColorTheme="WebColorTheme",e.PreferredPlatforms="PreferredPlatforms",e.PreferredFlag="PreferredFlag"}(t.ProfileSettingKey||(t.ProfileSettingKey={}))},vm4W:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.watchAllPeopleActions=t.ProfileAssetsSagaManager=t.GamerpicLibrarySagaManager=t.ServiceAccountProfile=t.ServiceAccount=t.peopleReducer=t.PeopleSagaManager=t.AccountLinkingSagaManager=t.PeopleActionType=t.PeopleAction=void 0;const o=r("7DJB");var n=r("F7Lo");Object.defineProperty(t,"PeopleAction",{enumerable:!0,get:function(){return n.PeopleAction}}),Object.defineProperty(t,"PeopleActionType",{enumerable:!0,get:function(){return n.PeopleActionType}}),o.__exportStar(r("SYol"),t);var i=r("MEwa");Object.defineProperty(t,"AccountLinkingSagaManager",{enumerable:!0,get:function(){return i.AccountLinkingSagaManager}});var a=r("YaaU");Object.defineProperty(t,"PeopleSagaManager",{enumerable:!0,get:function(){return a.PeopleSagaManager}});var s=r("0kO4");Object.defineProperty(t,"peopleReducer",{enumerable:!0,get:function(){return s.peopleReducer}});var c=r("5yXe");Object.defineProperty(t,"ServiceAccount",{enumerable:!0,get:function(){return c.ServiceAccount}}),Object.defineProperty(t,"ServiceAccountProfile",{enumerable:!0,get:function(){return c.ServiceAccountProfile}}),o.__exportStar(r("gZQb"),t),o.__exportStar(r("hlm1"),t);var l=r("bJBi");Object.defineProperty(t,"GamerpicLibrarySagaManager",{enumerable:!0,get:function(){return l.GamerpicLibrarySagaManager}});var d=r("fD64");Object.defineProperty(t,"ProfileAssetsSagaManager",{enumerable:!0,get:function(){return d.ProfileAssetsSagaManager}});var u=r("iTc8");Object.defineProperty(t,"watchAllPeopleActions",{enumerable:!0,get:function(){return u.watchAllPeopleActions}})}}]);
//# sourceMappingURL=3.db4473fd.chunk.js.map