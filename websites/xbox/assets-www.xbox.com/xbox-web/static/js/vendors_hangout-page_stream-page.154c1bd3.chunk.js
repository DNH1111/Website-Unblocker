(window.__LOADABLE_LOADED_CHUNKS__=window.__LOADABLE_LOADED_CHUNKS__||[]).push([[2],{"60YN":function(e,t,n){"use strict";n.d(t,"a",(function(){return r}));class r{static isNotStartedState(e){return e instanceof r}NotStatedState(){}}},DG6S:function(e,t,n){"use strict";n.d(t,"a",(function(){return s}));var r=n("uDfI"),a=n("PTl6"),o=n("uiwv"),c=n("ru7O");function s(e){const t=Object(c.b)("StreamPage/useAreGameStreamRequirementsMet"),n=Object(r.useSelector)(o.r);return null==e?(t.debug("Waiting for user to be defined"),!1):n===a.a.Login||(t.debug("Waiting for user to login rather than using the hydrated User"),!1)}},IUhv:function(e,t,n){"use strict";n.d(t,"a",(function(){return s}));n("JtPf"),n("kYxP");var r=n("ERkP"),a=n("/arO"),o=n("Xapl"),c=n("ZiW8");const s=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new a.a("StreamPage/useGameStreamClass");return Object(c.a)(Object(r.useCallback)(async()=>{try{const{GameStream:e}=await Promise.all([n.e(158),n.e(0),n.e(14),n.e(5),n.e(38)]).then(n.bind(null,"Dx8+"));return e}catch(t){const n=Object(o.a)(t);return void(null===e||void 0===e||e.error("An error occurred while loading the GameStream class - ".concat(n.message),n))}},[e]))}},Tbpf:function(e,t,n){"use strict";n.d(t,"a",(function(){return a}));var r=n("+vWn");const a=e=>{let{children:t}=e;var n;return Object(r.a)()?null:null!==(n=t)&&void 0!==n?n:null}},VUpA:function(e,t,n){"use strict";n.d(t,"a",(function(){return j}));n("kYxP"),n("JtPf");var r=n("OK0k"),a=n("ERkP"),o=n("lO1O"),c=n("rcbA"),s=n("u6gr"),i=n("Pygg"),u=n("/arO"),l=n("Xapl"),d=n("7gcR"),b=n("60YN");var f=n("ZYNy"),g=n("7YiD"),O=n("gjrr"),m=n("VTTY"),S=n("Uxzf");function j(e,t,n,j,v,p,h,C){const w=Object(i.a)(()=>new u.a("GameStreamBootstrapper/useSessionConnect")),P=Object(a.useRef)(!1),[k]=Object(m.a)("enableNarrator"),[y]=Object(m.a)("highContrastModeInGame"),T=function(){const{1:e}=Object(a.useState)();return Object(a.useCallback)(t=>{e(()=>{throw t})},[])}(),R=Object(c.a)(),{stickyQueryStrings:x}=Object(O.a)(),{isTizen:E,isMacOS:U,isSafari:D}=Object(f.a)(),G=Object(g.a)(s.a.EnableLowerMaxBufferLimit),I=Object(g.a)(s.a.StoreFullSessionStats),L=Object(g.b)(s.a.StatsEventFrequencySec),M=Object(g.a)(s.a.StringifyStatUponCollect),A=Object(g.a)(s.a.Remove78FPSHack),B=Object(g.a)(s.a.UseRainwaySdkNext),N=Object(g.a)(s.a.UseWebCodecsByDefault),F=Object(g.b)(s.a.VideoLatencyPreset),H=Object(g.a)(s.a.UseNexusPressWorkaround)&&E,_=Object(g.a)(s.a.UseSetTimeoutPolling),q=Object(g.a)(s.a.UseIntervalWorkerForInput)&&U&&D,W=Object(g.a)(s.a.SetCodecPreferences),z=Object(g.a)(s.a.UseTizenH264MainSdpHack),Y=function(){const{isTV:e}=Object(f.a)();if(!e)return;const t=Object(g.a)(s.a.EnableMicToggleForTV),[n]=Object(S.a)("enableStreamMicrophone");return t?n:void 0}();Object(a.useEffect)(()=>{!P.current&&e&&b.a.isNotStartedState(e.state)&&(P.current=!0,(async()=>{var a;try{const a={},c={enableMicrophone:Y},s={},i={};let u,l="",b=B?r.ReleaseChannel.Next:r.ReleaseChannel.Release;if(N&&(a.videoDecoderType=o.RainwayVideoDecoder.WebCodecs),null!=F&&(a.latencyPreset=F),R){l=x.getString(d.a.Session.systemUpdateGroup,""),i.useOrdered=x.getBoolean(d.a.Session.inputOrdered),i.maxPacketLifeTime=x.getInteger(d.a.Session.inputMaxPacketLifeTime),i.maxRetransmits=x.getInteger(d.a.Session.inputMaxRetransmits);const e=x.getBoolean(d.a.Session.showStreamStatisticsOverlay),t=x.getBoolean(d.a.Session.useSoftwareRendering),n=x.getInteger(d.a.Session.videoDecoderType),r=x.getInteger(d.a.Session.videoLatencyPreset);null!=r&&(a.latencyPreset=r);const s=x.getBoolean(d.a.Session.enableHevc),f=x.getBoolean(d.a.Session.useHardwareAudioDecoding);b=x.getInteger(d.a.Session.releaseChannel,b);const g=x.getInteger(d.a.StreamClient.streamType);u=void 0!==g?g:void 0;const O=x.getBoolean(d.a.Session.useSetTimeoutPolling);null!=e&&(a.showStreamStatisticsOverlay=e),null!=n&&(a.videoDecoderType=n),null!=t&&!0===t&&(a.videoDecoderType=o.RainwayVideoDecoder.Software),null!=s&&(a.enableHevc=s),null!=f&&(c.useHardwareAudioDecoding=f),i.useSetTimeoutPolling=O}if(s.statsCollectionDurationMins=3,s.statsPollingIntervalMs=1e3,s.statsEventFrequencySec=null!==L&&void 0!==L?L:0,s.storeFullSessionStats=I,s.stringifyStatUponCollect=M,a.perfTrackerProfile=G?o.PerfTrackerProfile.LowerMaxBufferLimit:o.PerfTrackerProfile.Default,a.remove78FPSHack=A,a.setCodecPreferences=W,a.useTizenH264MainSdpHack=z,i.useNexusPressWorkaround=H,i.useIntervalWorkerThreadForInput=q,null==i.useSetTimeoutPolling&&(i.useSetTimeoutPolling=_),n&&"cloud-connect"!==n||null==t)if("xhome-connect"===n&&j)await e.homeConsoleConnect(j,{options:{enableNarrator:k,highContrastMode:y,releaseChannel:b,systemUpdateGroup:l},videoConfiguration:a,audioConfiguration:c,statisticsConfiguration:s,inputConfiguration:i},u,C);else{if("ip-connect"!==n)throw new Error("An unexpected state was reached - Neither Cloud Connect, Remote Play nor Ip-Connect requirements were satisfied by the passed in arguments");{if(!p)throw new Error('Required prop "ipAddress" was not specified');e.updateFeatureGates({ShowNotStartedRocket:!1});const t=h,n=p,r="";await e.directConnect(n,r,{options:{enableNarrator:k,highContrastMode:y,releaseChannel:b,systemUpdateGroup:l},videoConfiguration:a,audioConfiguration:c,statisticsConfiguration:s,inputConfiguration:i},t,u,C)}}else await e.cloudConnect(t,{options:{enableNarrator:k,highContrastMode:y,releaseChannel:b,systemUpdateGroup:l},videoConfiguration:a,audioConfiguration:c,statisticsConfiguration:s,inputConfiguration:i},u,v,C)}catch(c){const e=Object(l.a)(c);return null===(a=w.current)||void 0===a||a.warn("An error occurred while connecting via GameStream - ".concat(e.message),e),void T(e)}finally{P.current=!1}})())},[p,n,k,e,y,R,w,j,x,T,t,v,G,L,I,M,h,A,B,Y,N,F,H,_,q,W,z,C])}},bTHF:function(e,t,n){"use strict";n.d(t,"a",(function(){return s}));var r=n("OK0k"),a=n("ERkP"),o=n("/arO"),c=n("gjrr");function s(){const e=new o.a("StreamPage/useCaptureOnUnmount"),{sdkLogs:t}=Object(c.a)(),n=Object(a.useRef)({});n.current.sdkLogs=t,n.current.logger=e,Object(a.useEffect)(()=>()=>{const{sdkLogs:e,logger:t}=n.current;e&&r.StreamLogger.getLogs().then(t=>e.streamSessionLogs=t).catch(e=>{null===t||void 0===t||t.error("Failed to retrieve GameStream Logs",e)})},[])}},lOyr:function(e,t,n){"use strict";n.d(t,"a",(function(){return i}));var r=n("ERkP"),a=n("+fqW"),o=n("3rq1"),c=n("S1cK"),s=n("5At6");const i=()=>{const e=Object(c.a)(),{attemptAndroidExitFullscreen:t}=Object(o.a)(),n=Object(a.a)(s.a.GamepassUpsell);return Object(r.useCallback)(r=>{!1!==(null===r||void 0===r?void 0:r.shouldNavigate)&&e(),t(),!0===(null===r||void 0===r?void 0:r.openUpsellModal)&&n()},[t,e,n])}},losS:function(e,t,n){"use strict";n.d(t,"a",(function(){return f}));n("kYxP");var r=n("u7eo"),a=n("ERkP"),o=n("uDfI"),c=n("TL0h"),s=n("Dy4k");var i=n("0B+P"),u=n("jdKi"),l=n("8DaC"),d=n("RPGs");const b=e=>Object(s.c)(e);function f(){const[,e]=function(){const e=Object(u.a)(),t=Object(a.useMemo)(()=>e?l.a.start():void 0,[e]);return Object(d.a)(b,t)}(),t=Object(o.useSelector)(s.i),n=Object(a.useMemo)(()=>Object(r.lceTransform)(e,e=>e?e.map(e=>((e,t)=>{const n=e[t];return n?Object(r.getDataOrPrevious)(n):void 0})(t,e)).filter(c.a).map(e=>e.details.productId):[]),[t,e]);return Object(i.b)(n)}},tBH0:function(e,t,n){"use strict";n.d(t,"a",(function(){return s}));var r=n("Czhu"),a=(n("kYxP"),n("uDfI")),o=n("uiwv"),c=n("0B+P");function s(){const e=Object(a.useSelector)(o.u),[t,n]=Object(c.b)(e),s=Object(a.useSelector)(o.j);return[t,Object(r.a)(Object(r.a)({},n),{},{isHydrating:s})]}},yzf4:function(e,t,n){"use strict";n.d(t,"a",(function(){return T}));n("kYxP");var r=n("sZmG"),a=n("ERkP"),o=n("uDfI"),c=n("rcbA"),s=n("Pygg"),i=n("/arO"),u=n("Xapl"),l=n("m4Ul"),d=n("fb7v"),b=n("RPGs"),f=n("gjrr"),g=n("Z4B9"),O=n("NUn1"),m=n("7etj"),S=(n("fmYM"),n("mlET"),n("ij1g"));function j(e){var t,n,r;let a=(null===(t=globalThis.location)||void 0===t?void 0:t.origin)||"https://www.xbox.com";return(null===(n=globalThis.location)||void 0===n?void 0:n.hostname)&&(null===(r=globalThis.location)||void 0===r?void 0:r.hostname.endsWith("xbox.com"))||(a="https://www.xbox.com/"),"".concat(a,"https://www.xbox.com/").concat(S.ShareStateTestHarness.getLink(e))}var v=n("lOyr"),p=n("Czhu"),h=n("6n5z"),C=n("84id"),w=n("hx5j");n("KqXw"),n("LJOr"),n("JtPf"),n("x4t0");var P=n("zCf4"),k=n("99tp"),y=n("znXB");function T(e,t,n,S,T){const R=Object(s.a)(()=>new i.a("GameStreamBootstrapper/useGameStream")),x=Object(d.b)(),E=Object(v.a)(),U=Object(o.useSelector)(r.getMarketInfo),{audioContextBootstrapper:D,telemetryProvider:G}=Object(f.a)(),I=Object(g.b)(),L=(()=>{const e=Object(a.useRef)(),t=Object(a.useRef)(),n=Object(c.a)(),s=Object(o.useSelector)(w.b),i=Object(C.a)(),u=Object(o.useSelector)(n=>{const a=Object(r.getFeatureGates)(n);return t.current&&e.current===a||(t.current=Object.entries(h.a).reduce((e,t)=>{let[n,r]=t;const o=a[r.toLowerCase()];return null!=o&&(e[n]=o),e},{})),t.current}),l=u.CollectUserEmail||n||s,d=u.EnableInternalFeedback||i||s;return Object(a.useMemo)(()=>Object(p.a)({CollectUserEmail:l,EnableInternalFeedback:d},u),[u,l,d])})(),M=Object(l.a)(),A=function(){const e=Object(s.a)(()=>new i.a("GameStreamBootstrapper/useTransferTokenCallback")),{msaService:t}=Object(f.a)(),{pathname:n,search:r}=Object(P.l)(),o=Object(y.b)();return Object(a.useCallback)(async()=>{var a,c;try{return await t.getAccessToken(k.a.XCloudTransferToken)}catch(s){const i=Object(u.a)(s);let l;throw i.message.includes("login_required")?(l="Unable to acquire transfer token due to a required login (Reason: ".concat(i.message,") - Redirecting to MSA login"),null===(a=e.current)||void 0===a||a.warn(l,i)):(l="Unable to acquire transfer token (Reason: ".concat(i.message,") - Redirecting to MSA login"),null===(c=e.current)||void 0===c||c.error(l,i)),await t.loginRedirect(o(n+r)),new Error(l)}},[e,t,n,o,r])}(),B=Object(c.a)(),N=Object(o.useDispatch)(),[F,{loading:H,error:_}]=Object(b.a)(m.b),{userSettingsStore:q}=Object(f.a)();Object(a.useEffect)(()=>{var r,a,o,c;if(!F&&!H){if(_)throw _;try{null===(r=R.current)||void 0===r||r.debug("Instantiating GameStream instance"),e.current||null===(a=R.current)||void 0===a||a.warn("Unexpected state reached - Parameter 'gameStreamContainerRef.current' was undefined"),t.current||null===(o=R.current)||void 0===o||o.warn("Unexpected state reached - Parameter 'purchaseUIRef.current' was undefined"),N(O.a.start(e.current,{audioContext:D.audioContext,client:n,featureGateConfig:L,marketInfo:U,purchaseUI:t.current,strings:I,telemetryProvider:G,user:S,navigateBack:T||(()=>E()),fullscreenElement:document.documentElement,isChildAccount:M,isDeveloperMode:B,playSound:x,getTransferToken:A,persistentSettingsStore:q,createEncapsulatedStateShareUrl:j}))}catch(s){const e=Object(u.a)(s);null===(c=R.current)||void 0===c||c.error("An error occurred while initializing GameStream - ".concat(e.message),e)}}},[D.audioContext,N,_,E,L,F,e,A,M,B,H,R,U,x,t,n,I,G,S,q,T]),Object(a.useEffect)(()=>{F&&F.user!==S&&(F.user=S)},[F,S]),Object(a.useEffect)(()=>{F&&L&&F.updateFeatureGates(L)},[F,L]);const W=Object(a.useRef)({});return W.current.gameStream=F,Object(a.useEffect)(()=>()=>{const{gameStream:e}=W.current;null!=e&&N(Object(O.b)(e))},[N]),F}}}]);
//# sourceMappingURL=vendors~hangout-page~stream-page.154c1bd3.chunk.js.map