/*! For license information please see vendors~dev-tools~game-stream.7162b773.chunk.js.LICENSE.txt */
(window.__LOADABLE_LOADED_CHUNKS__=window.__LOADABLE_LOADED_CHUNKS__||[]).push([[14],{"++aF":function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ErgoAdjustorStyleManager=void 0;const o=i("JM/N"),n=i("ULLa");t.ErgoAdjustorStyleManager=class{getInnerRingColor(e){switch(e){case o.ErgoAdjustorState.SinglePointerMove:case o.ErgoAdjustorState.TwoPointers:return n.DefaultActiveInnerRingColor;default:return n.DefaultPassiveInnerRingColor}}getOuterRingColor(){return n.DefaultOuterRingColor}getOuterRingOpacity(e){switch(e){case o.ErgoAdjustorState.None:return.5;case o.ErgoAdjustorState.SinglePointerMove:return.6;default:return.9}}getOriginIndicatorColor(e){switch(e){case o.ErgoAdjustorState.None:case o.ErgoAdjustorState.SinglePointerMove:return n.DefaultNonRotatingOriginIndicatorColor;default:return n.DefaultRotatingOriginIndicatorColor}}getOriginIndicatorOpacity(e){switch(e){case o.ErgoAdjustorState.None:case o.ErgoAdjustorState.SinglePointerMove:return 1;default:return.5}}getRotationIndicatorColor(e){switch(e){case o.ErgoAdjustorState.None:case o.ErgoAdjustorState.SinglePointerMove:return n.DefaultNonRotatingRotationIndicatorColor;default:return n.DefaultRotatingRotationIndicatorColor}}}},"+ph6":function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.PerStateOpacityMultiplierModifier=t.OpacityMultiplierModifier=void 0;const o=i("kU1o"),n=i("ttr4");class r extends n.Modifier{constructor(){super(...arguments),this._value=r.DefaultValue,this._unmodifiedResult={value:1,energy:o.AnimationEnergy.Instant},this._modifiedResult={value:1,energy:o.AnimationEnergy.Instant},this.targetEnergy=r.DefaultEnergy}get modifiedResult(){return this._modifiedResult.energy!==this.targetEnergy&&(this._modifiedResult.energy=this.targetEnergy),this._modifiedResult}get unmodifiedResult(){return this._unmodifiedResult}updateEnergy(e){this.targetEnergy=e}calculateModifiedResult(){this._modifiedResult.value=this.unmodifiedResult.value*this._value}}t.OpacityMultiplierModifier=r,r.DefaultEnergy=o.AnimationEnergy.Slowest,r.DefaultValue=1;t.PerStateOpacityMultiplierModifier=class{constructor(){this.value=1,this.energy=o.AnimationEnergy.Slowest,this.modifierMap=new Map}updateUnmodifiedResult(e,t){this.getOrCreateModifier(e).updateUnmodifiedResult(t)}getUnmodifiedResult(e){return this.getOrCreateModifier(e).unmodifiedResult}getModifiedResult(e){const t=this.getOrCreateModifier(e);return t.updateValue(this.value),t.updateEnergy(this.energy),t.modifiedResult}getOrCreateModifier(e){let t=this.modifierMap.get(e);return t||(t=new r,this.modifierMap.set(e,t)),t}}},"+x4O":function(e,t,i){"use strict";e.exports=function(e,t,i){var o,n=" ",r=e.level,a=e.dataLevel,s=e.schema[t],c=e.schemaPath+e.util.getProperty(t),l=e.errSchemaPath+"/"+t,u=!e.opts.allErrors,d="data"+(a||""),p=e.opts.$data&&s&&s.$data;if(p?(n+=" var schema"+r+" = "+e.util.getData(s.$data,a,e.dataPathArr)+"; ",o="schema"+r):o=s,!p&&"number"!=typeof s)throw new Error(t+" must be number");var h="maxLength"==t?">":"<";n+="if ( ",p&&(n+=" ("+o+" !== undefined && typeof "+o+" != 'number') || "),!1===e.opts.unicode?n+=" "+d+".length ":n+=" ucs2length("+d+") ",n+=" "+h+" "+o+") { ";var f=t,y=y||[];y.push(n),n="",!1!==e.createErrors?(n+=" { keyword: '"+(f||"_limitLength")+"' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(l)+" , params: { limit: "+o+" } ",!1!==e.opts.messages&&(n+=" , message: 'should NOT be ",n+="maxLength"==t?"longer":"shorter",n+=" than ",n+=p?"' + "+o+" + '":""+s,n+=" characters' "),e.opts.verbose&&(n+=" , schema:  ",n+=p?"validate.schema"+c:""+s,n+="         , parentSchema: validate.schema"+e.schemaPath+" , data: "+d+" "),n+=" } "):n+=" {} ";var g=n;return n=y.pop(),!e.compositeRule&&u?e.async?n+=" throw new ValidationError(["+g+"]); ":n+=" validate.errors = ["+g+"]; return false; ":n+=" var err = "+g+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",n+="} ",u&&(n+=" else { "),n}},"/2Ai":function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.InputMappingType=t.InputAccumulationType=void 0,function(e){e[e.None=0]="None",e[e.Joystick=1]="Joystick",e[e.Mouse=2]="Mouse",e[e.JoystickAndMouse=3]="JoystickAndMouse"}(t.InputAccumulationType||(t.InputAccumulationType={})),function(e){e[e.Joystick=0]="Joystick",e[e.Mouse=1]="Mouse",e[e.JoystickAxial=2]="JoystickAxial",e[e.MouseAxial=3]="MouseAxial",e[e.JoystickAxialPolar=4]="JoystickAxialPolar",e[e.MouseAxialPolar=5]="MouseAxialPolar"}(t.InputMappingType||(t.InputMappingType={}))},"/Qos":function(e,t,i){(function(e){var o="undefined"!==typeof e&&e||"undefined"!==typeof self&&self||window,n=Function.prototype.apply;function r(e,t){this._id=e,this._clearFn=t}t.setTimeout=function(){return new r(n.call(setTimeout,o,arguments),clearTimeout)},t.setInterval=function(){return new r(n.call(setInterval,o,arguments),clearInterval)},t.clearTimeout=t.clearInterval=function(e){e&&e.close()},r.prototype.unref=r.prototype.ref=function(){},r.prototype.close=function(){this._clearFn.call(o,this._id)},t.enroll=function(e,t){clearTimeout(e._idleTimeoutId),e._idleTimeout=t},t.unenroll=function(e){clearTimeout(e._idleTimeoutId),e._idleTimeout=-1},t._unrefActive=t.active=function(e){clearTimeout(e._idleTimeoutId);var t=e._idleTimeout;t>=0&&(e._idleTimeoutId=setTimeout((function(){e._onTimeout&&e._onTimeout()}),t))},i("gIIS"),t.setImmediate="undefined"!==typeof self&&self.setImmediate||"undefined"!==typeof e&&e.setImmediate||this&&this.setImmediate,t.clearImmediate="undefined"!==typeof self&&self.clearImmediate||"undefined"!==typeof e&&e.clearImmediate||this&&this.clearImmediate}).call(this,i("fRV1"))},"/R13":function(e,t,i){"use strict";i.d(t,"a",(function(){return a}));var o=i("ERkP"),n=i("ahum");var r=i("wIlS");function a(e,t,i){return function(e,t,i){const r=Object(n.a)(),{0:a,1:s}=Object(o.useState)();return Object(o.useEffect)(()=>{function o(e){null!=i&&i(e),s(e)}return e.addEventListener(t,o),()=>{e.removeEventListener(t,o)}},[e,t,i]),[a,Object(o.useCallback)(()=>{r.current&&s(void 0)},[r])]}(Object(r.a)(i),e,t)}},"/d9p":function(e,t,i){"use strict";var o=this&&this.__decorate||function(e,t,i,o){var n,r=arguments.length,a=r<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,i):o;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)a=Reflect.decorate(e,t,i,o);else for(var s=e.length-1;s>=0;s--)(n=e[s])&&(a=(r<3?n(a):r>3?n(t,i,a):n(t,i))||a);return r>3&&a&&Object.defineProperty(t,i,a),a},n=this&&this.__metadata||function(e,t){if("object"===typeof Reflect&&"function"===typeof Reflect.metadata)return Reflect.metadata(e,t)},r=this&&this.__param||function(e,t){return function(i,o){t(i,o,e)}};Object.defineProperty(t,"__esModule",{value:!0}),t.DirectionalPadControl=void 0;const a=i("s6Xb"),s=i("2ZOr"),c=i("cvzu"),l=i("Oojg"),u=i("LKBR"),d=i("fUIH"),p=i("q19Y");let h=class extends c.LatestPointerRenderControl{constructor(e,t){var i;super((i=e.getProps(),{value:d.DirectionalPadDirection.None,interactionState:!1===i.visible?d.DirectionalPadState.Hidden:!1===i.enabled?d.DirectionalPadState.Disabled:d.DirectionalPadState.Idle}),e,t),this.previousDirection=d.DirectionalPadDirection.None,this.nonVisualDPadState=d.DirectionalPadState.Idle;const o=this.model.getProps(),n=this.getState();this.renderPropertyManager=new u.DirectionalPadRenderPropertyManager(o,n),this.nonVisualDPadState=!1===o.visible?d.DirectionalPadState.Hidden:d.DirectionalPadState.Idle}onPropsChangedInternal([e,t]){var i,o;const n=this.getState();e&&(this.nonVisualDPadState!==d.DirectionalPadState.Activated||e.deadzone===t.deadzone&&(null===(i=e.interaction)||void 0===i?void 0:i.activationType)===(null===(o=t.interaction)||void 0===o?void 0:o.activationType)&&e.scale===t.scale||this.model.resetAnalogInput());const r=!1!==t.enabled,a=!1!==t.visible;if(a?r?a&&n.interactionState===d.DirectionalPadState.Hidden?(this.nonVisualDPadState=d.DirectionalPadState.Idle,this.setState({interactionState:r?this.nonVisualDPadState:d.DirectionalPadState.Disabled,value:d.DirectionalPadDirection.None})):r&&n.interactionState===d.DirectionalPadState.Disabled&&this.setState({interactionState:this.nonVisualDPadState,value:n.value}):n.interactionState!==d.DirectionalPadState.Disabled&&(this.nonVisualDPadState=this.nonVisualDPadState===d.DirectionalPadState.Hidden?d.DirectionalPadState.Idle:this.nonVisualDPadState,this.setState({interactionState:d.DirectionalPadState.Disabled,value:n.value})):n.interactionState!==d.DirectionalPadState.Hidden&&(this.nonVisualDPadState=d.DirectionalPadState.Hidden,this.setState({interactionState:this.nonVisualDPadState,value:d.DirectionalPadDirection.None})),this.nonVisualDPadState===d.DirectionalPadState.Activated){const e=this.latestPointer,t=null===e||void 0===e?void 0:e.position;t&&this.setState({interactionState:this.getState().interactionState,value:this.calculateDirection(t)})}}onStateChangedInternal(e){switch(this.nonVisualDPadState){case d.DirectionalPadState.Activated:{const{value:t}=e,i=(0,p.directionToDPadValue)(this.previousDirection,!1),o=(0,p.directionToDPadValue)(t,!0),n=Object.assign(Object.assign({},i),o);this.model.setAnalogInput(n),this.previousDirection=t;break}default:this.model.resetAnalogInput(),this.previousDirection=d.DirectionalPadDirection.None}}onPointerStart(e){switch(this.nonVisualDPadState){case d.DirectionalPadState.Idle:case d.DirectionalPadState.Activated:{this.nonVisualDPadState=d.DirectionalPadState.Activated;const{interactionState:t}=this.getState();this.setState({interactionState:t!==d.DirectionalPadState.Disabled?this.nonVisualDPadState:t,value:this.calculateDirection(e.initialPosition)});break}}return!0}onPointerMove(e){switch(this.nonVisualDPadState){case d.DirectionalPadState.Activated:{const{interactionState:t}=this.getState();this.setState({interactionState:t!==d.DirectionalPadState.Disabled?this.nonVisualDPadState:t,value:this.calculateDirection(e.position)});break}}return!0}onPointerEnd(){switch(this.nonVisualDPadState){case d.DirectionalPadState.Activated:{this.nonVisualDPadState=d.DirectionalPadState.Idle;const{interactionState:e}=this.getState();this.setState({interactionState:e!==d.DirectionalPadState.Disabled?this.nonVisualDPadState:e,value:d.DirectionalPadDirection.None});break}}return!0}getIsStateUndimmable({interactionState:e}){return e===d.DirectionalPadState.Activated}calculateDirection(e){var t,i,o;const n=this.model.getProps(),{scale:r=1,x:a,y:s,colliderRadius:c,baseSize:u}=n,p=u/2*r,h=(null!==(t=n.deadzone)&&void 0!==t?t:.5)*p,f={x:e.x-a,y:e.y-s},y=Math.sqrt(f.x*f.x+f.y*f.y);if(y<.5*h)return d.DirectionalPadDirection.None;{const e=y<c?{x:f.x,y:f.y}:{x:1*f.x/y*c,y:1*f.y/y*c},t=e.x>=0?Math.atan(e.y/e.x)*(180/Math.PI)+90:Math.atan(e.y/e.x)*(180/Math.PI)+180+90;let r=-1;switch(null!==(o=null===(i=n.interaction)||void 0===i?void 0:i.activationType)&&void 0!==o?o:l.DirectionalPadInteractionActivationType.AllowNeighboring){case l.DirectionalPadInteractionActivationType.Exclusive:r=2*Math.round(t/90);break;case l.DirectionalPadInteractionActivationType.AllowNeighboring:default:r=Math.round(t/45)}switch(r){case 0:case 8:return d.DirectionalPadDirection.Up;case 1:return d.DirectionalPadDirection.UpAndRight;case 2:return d.DirectionalPadDirection.Right;case 3:return d.DirectionalPadDirection.RightAndDown;case 4:return d.DirectionalPadDirection.Down;case 5:return d.DirectionalPadDirection.DownAndLeft;case 6:return d.DirectionalPadDirection.Left;case 7:return d.DirectionalPadDirection.LeftAndUp;default:return d.DirectionalPadDirection.None}}}};h=o([(0,a.injectable)(),r(0,(0,a.inject)(s.SERVICE_TYPES.VirtualControl)),r(1,(0,a.inject)(s.SERVICE_TYPES.UserInterface)),n("design:paramtypes",[Object,Function])],h),t.DirectionalPadControl=h},"0PxE":function(e,t,i){"use strict";var o=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.normalizePath=void 0;const n=o(i("B2dP"));t.normalizePath=function(e){const t=(0,n.default)(e),i=[];return t.split("https://www.xbox.com/").forEach(e=>{if(".."===e){if(0===i.length)throw new Error("Invalid path, cannot normalize");i.pop()}else"."!==e&&i.push(e)}),i.join("https://www.xbox.com/")}},"0meX":function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.CircularBuffer=void 0;t.CircularBuffer=class{constructor(e,t){this._items=new Array(e),this._size=0,this._capacity=e,this._writeIndex=0,this._comparator=null!==t&&void 0!==t?t:(e,t)=>e===t}get size(){return this._size}get isEmpty(){return 0===this._size}clear(){this._items=new Array(this._capacity),this._size=0}enqueue(e){const t=void 0!==this._items[this._writeIndex];this._items[this._writeIndex]=e,t||(this._size+=1),this._writeIndex=(this._writeIndex+1)%this._capacity}contains(e){return void 0!==this.get(e)}get(e){return this.find(t=>this._comparator(t,e))}find(e){for(let t=0;t<this._capacity;t++){const i=this._items[t];if(void 0!==i&&e(i))return this._items[t]}}}},"1/s2":function(e,t,i){"use strict";var o=e.exports=function(){this._cache={}};o.prototype.put=function(e,t){this._cache[e]=t},o.prototype.get=function(e){return this._cache[e]},o.prototype.del=function(e){delete this._cache[e]},o.prototype.clear=function(){this._cache={}}},"10bi":function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.gyroMappingUtils=void 0;t.gyroMappingUtils={constants:{internal:{min:.1,max:2},displayed:{min:0,max:10}},converters:{internalToDisplayed:e=>e<=.1?0:e>=2?10:Math.round(5*e),displayedToInternal:e=>e<=0?.1:e>=10?2:e/5}}},"1Gbd":function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getDefaultTouchpadBackground=t.getDefaultTouchpadFaceImage=t.DefaultTouchpadOpacity=t.DefaultTouchpadAnimationEnergy=void 0;const o=i("Zd/9"),n=i("kU1o"),r=i("PFUz"),a=i("yi9v");t.DefaultTouchpadAnimationEnergy=n.AnimationEnergy.Instant,t.DefaultTouchpadOpacity=1,t.getDefaultTouchpadFaceImage=function(e){return{type:"icon",value:e,scale:1,color:{r:1,g:1,b:1,a:1,string:o.WHITE_ALPHA_100},animationEnergy:n.AnimationEnergy.Instant,opacity:1,displayShadow:!1,label:{type:r.FaceImageLabelRenderType.None,value:a.EmptyIcon,fillType:r.FaceImageLabelRenderFillType.None,color:{r:1,g:1,b:1,a:1,string:o.WHITE_ALPHA_100},offset:{x:0,y:0}},offset:{x:0,y:0}}},t.getDefaultTouchpadBackground=function(){return{type:"color",value:{r:1,g:1,b:1,a:.15,string:"#ffffff26"},opacity:1}}},"2++W":function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ScreenOrientation=t.DeviceSensorOrientation=void 0,function(e){e[e.Clockwise0=0]="Clockwise0",e[e.Clockwise90=90]="Clockwise90",e[e.Clockwise180=180]="Clockwise180",e[e.Clockwise270=270]="Clockwise270"}(t.DeviceSensorOrientation||(t.DeviceSensorOrientation={})),function(e){e[e.LandscapeLeft=0]="LandscapeLeft",e[e.LandscapeRight=1]="LandscapeRight",e[e.PortraitUp=2]="PortraitUp",e[e.PortraitUpsideDown=3]="PortraitUpsideDown"}(t.ScreenOrientation||(t.ScreenOrientation={}))},"25ZR":function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ValueRenderPropertyManager=t.RenderPropertyManager=void 0;const o=i("kU1o"),n=i("IuIz"),r=i("p08B"),a={isDimmable:!0};class s{constructor(e,t,i,o){this.props=e,this.state=t,this.opacityMultiplierModifier=new r.PerStateOpacityMultiplierModifier,this.isDimmed=!0,this.firstFetchCompleted=!1,this.undimRefCount=0,this.previousState=this.state,this.renderPropertyMemoizer=new n.LazyMemoizedConverter(this.cache.bind(this),i),this.options=Object.assign(Object.assign({},a),o)}get isDimmable(){return this.options.isDimmable}getRenderProperties(){return this.prepare(),this._renderProperties}updateProps(e){e!==this.props&&(this.props=e,this.renderPropertyMemoizer.clear())}updateState(e){this.state!==e&&(this.previousState=this.state,this.state=e)}undim(){this.options.isDimmable&&(this.undimRefCount++,this.isDimmed=!1)}dim(){this.options.isDimmable&&(this.undimRefCount=Math.max(0,this.undimRefCount-1),0===this.undimRefCount&&(this.isDimmed=!0))}willOpacityMultiplierChangesCauseUpdates(e){return this.isDimmable&&(!this.firstFetchCompleted||this.opacityMultiplierModifier.value!==e.value||this.opacityMultiplierModifier.energy!==e.energy)}updateOpacityMultiplier(e){this.opacityMultiplierModifier.value=e.value,this.opacityMultiplierModifier.energy=e.energy}prepare(){if(this._renderProperties=this.renderPropertyMemoizer.convert(this.state.interactionState),this.completeCache(this.state,this.previousState),this.options.isDimmable)if(this.isDimmed){const e=this.opacityMultiplierModifier.getModifiedResult(this.state.interactionState);this.firstFetchCompleted?this._renderProperties.opacity=e:this._renderProperties.opacity={value:e.value,energy:o.AnimationEnergy.Instant}}else this._renderProperties.opacity=this.opacityMultiplierModifier.getUnmodifiedResult(this.state.interactionState);this._renderProperties.x=this.props.x,this._renderProperties.y=this.props.y,this.firstFetchCompleted||(this.firstFetchCompleted=!0)}cache(){const e=this.primeCache(this.state,this.previousState);return this.options.isDimmable&&this.opacityMultiplierModifier.updateUnmodifiedResult(this.state.interactionState,e.opacity),e}}t.RenderPropertyManager=s;t.ValueRenderPropertyManager=class extends s{}},"2Gx9":function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.loadAssetFilesInRenderer=t.addAllAssetsFromLocaleDir=void 0;const o=i("DfD7"),n=i("RDdo"),r="AssetManager";t.addAllAssetsFromLocaleDir=async function(e,t,i,a,s,c,l){if(await a.exists(e)){if(s.log(r,o.LogLevel.Debug,"Finding asset dpi dirs for locale dir "+e),null===l||void 0===l?void 0:l())return;const u=await a.readDir(e);await Promise.all(u.filter(e=>e.isDirectory&&n.AcceptedAssetDpis.includes(e.name.toLowerCase())).sort((e,t)=>(0,n.getDpiValueFromDirName)(e.name)-(0,n.getDpiValueFromDirName)(t.name)).map(async e=>{if(null===l||void 0===l?void 0:l())return;const u=(0,n.getDpiValueFromDirName)(e.name);if(-1!==u)await async function(e,t,i,a,s,c){if(await s.exists(e)){c.log(r,o.LogLevel.Debug,"Adding assets from dpi dir "+e);const l=await s.readDir(e),u=l.filter(e=>e.isFile&&(0,n.assetFileHasAcceptedImageExtension)(e.name)).map(e=>{const t=(0,n.getSpritesheetAssetAtlas)(e.name,l);return{image:{name:e.name,path:e.path},atlas:void 0!==t?{name:t.name,path:t.path}:void 0}});(await Promise.all(u.map(async e=>{const t=await s.readFile(e.image.path,"base64");if(e.atlas){const i=JSON.parse((await s.readFile(e.atlas.path)).trim());return{image:Object.assign(Object.assign({},e.image),{data:t}),atlas:Object.assign(Object.assign({},e.atlas),{data:i})}}return{image:Object.assign(Object.assign({},e.image),{data:t})}}))).map(s=>{if(s){const l=(0,n.getAssetNameFromFileName)(s.image.name),u=t.get(l);if(!u||u&&!u.hasBestDpi)if(c.log(r,o.LogLevel.Debug,`Adding asset "${l}" from ${e}.`),s.atlas){const e={id:l,content:{uri:"data:image/png;base64,"+s.image.data},atlas:s.atlas.data,dpi:a,hasBestDpi:a>=i};t.set(l,e)}else{const e={id:l,content:{uri:"data:image/png;base64,"+s.image.data},dpi:a,hasBestDpi:a>=i};t.set(l,e)}else c.log(r,o.LogLevel.Debug,`Skipped asset "${l}" from ${e} as a more suitable version is already found.`)}})}}(e.path,t,i,u,a,s);else{const t="Could not get DPI value from folder name: "+e.name;s.log(r,o.LogLevel.Error,t),c(t)}})),t.forEach(e=>{e.hasBestDpi=!1})}else s.log(r,o.LogLevel.Info,"Unable to read from layout dir: "+e)},t.loadAssetFilesInRenderer=async function(e,t,i,n,a,s){let c=[];const l=Array.from(t.values()),u=[];if(await Promise.all(l.map(async t=>{if(null===s||void 0===s?void 0:s())return;const a=await n(e,t);a?(i.log(r,o.LogLevel.Debug,`Successfully received ${a.length} asset render data entry for asset file ${t.id}`),c=c.concat(a)):u.push(t.id)})),u.length>0){const e=`Did not receive asset render data from the renderer for the following assets: [${u.join(", ")}]`;i.log(r,o.LogLevel.Error,e),a(e)}return c}},"2ZOr":function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.CONFIG_TYPES=t.SERVICE_TYPES=t.CONSTANT_TYPES=t.STROKE_WIDTH=t.KNOB_SIZE=t.ICON_SIZE=void 0,t.ICON_SIZE=28,t.KNOB_SIZE=28,t.STROKE_WIDTH=2,t.CONSTANT_TYPES={RootContainer:"RootContainer",ControlConfig:"ControlConfig"},t.SERVICE_TYPES={ScreenDisplay:"ScreenDisplay",VirtualControl:"VirtualControl",Rumble:"Rumble",SensorStore:"SensorStore",Settings:"Settings",SettingsProvider:"SettingsProvider",InputProvider:"InputProvider",RenderFrameManager:"RenderFrameManager",InputCompositor:"InputCompositor",TouchManager:"TouchManager",ControlRepository:"ControlRepository",VirtualController:"VirtualController",LayerManager:"LayerManager",LayoutController:"LayoutController",LayoutCoordinator:"LayoutCoordinator",UserInterface:"UserInterface",RuntimeOptions:"RuntimeOptions",BundleLoader:"BundleLoader",BundleProcessor:"BundleProcessor",Logger:"Logger",HitTester:"HitTester"},t.CONFIG_TYPES={ScreenPropsBase:"ScreenPropsBase",TAKBridge:"TAKBridge"}},"3/FZ":function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getBrightenedActionColorRgb=t.getActionColorRgb=t.getActionColor=t.getBrightenedButtonColorRgb=t.getDefaultButtonColorRgb=t.getDefaultButtonColorRgbString=void 0;const o=i("yi9v"),n=i("kEja");function r(e){switch(e){case"gamepadA":return"#7eb902ff";case"gamepadB":return"#f25127ff";case"gamepadX":return"#00a2eeff";case"gamepadY":return"#ffb807ff";default:return"#ffffffff"}}function a(e){switch(e){case"gamepadA":return{r:.4941,g:.7255,b:.0078,a:1,string:"#7eb902ff"};case"gamepadB":return{r:.949,g:.3176,b:.1529,a:1,string:"#f25127ff"};case"gamepadX":return{r:0,g:.6353,b:.9334,a:1,string:"#00a2eeff"};case"gamepadY":return{r:1,g:.7216,b:.0275,a:1,string:"#ffb807ff"};default:return{r:1,g:1,b:1,a:1,string:"#ffffffff"}}}function s(e){switch(e){case"gamepadA":return{r:.5922,g:.8235,b:.1059,a:.55,string:"#97d21b8c"};case"gamepadB":return{r:1,g:.4157,b:.251,a:.55,string:"#ff6a408c"};case"gamepadX":return{r:.098,g:.7333,b:1,a:.55,string:"#19bbff8c"};case"gamepadY":return{r:1,g:.8196,b:.1255,a:.55,string:"#ffd1208c"};default:return{r:1,g:1,b:1,a:.55,string:"#ffffff8c"}}}t.getDefaultButtonColorRgbString=r,t.getDefaultButtonColorRgb=a,t.getBrightenedButtonColorRgb=s,t.getActionColor=function(e){return e?(0,n.isTurboAction)(e)?r(e.action):(0,n.isLayoutAction)(e)?r():r(e):"#ffffffff"},t.getActionColorRgb=function(e){return e&&e!==o.EmptyIcon?(0,n.isTurboAction)(e)?a(e.action):(0,n.isLayoutAction)(e)?a():a(e):{r:1,g:1,b:1,a:1,string:"#ffffffff"}},t.getBrightenedActionColorRgb=function(e){return e&&e!==o.EmptyIcon?(0,n.isTurboAction)(e)?s(e.action):(0,n.isLayoutAction)(e)?s():s(e):{r:1,g:1,b:1,a:.55,string:"#ffffff8c"}}},"3O3G":function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.BASE_RADIUS=t.BASE_JOYSTICK_SIZE=t.BASE_BUTTON_SIZE=void 0,t.BASE_BUTTON_SIZE=60,t.BASE_JOYSTICK_SIZE=30,t.BASE_RADIUS=.33*t.BASE_BUTTON_SIZE-5},"3ggl":function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.MemoizedConverter=void 0;const o=i("wV8u");t.MemoizedConverter=class{constructor(e,t,i=1){this._buffer=new o.CircularBuffer(i>=1?i:1),this._convert=t,this._lastResult=this.convertInternal(e)}get lastResult(){return this._lastResult}convert(e){const t=this._buffer.find(t=>t.input===e);return void 0!==t?(this._lastResult=t.result,t.result):this.convertInternal(e)}clear(){this._buffer.clear()}convertInternal(e){const t=this._convert(e);return this._buffer.enqueue({input:e,result:t}),this._lastResult=t,t}}},"3v10":function(e,t,i){"use strict";e.exports=function(e,t,i){var o=" ",n=e.level,r=e.dataLevel,a=e.schema[t],s=e.schemaPath+e.util.getProperty(t),c=e.errSchemaPath+"/"+t,l=!e.opts.allErrors,u="data"+(r||""),d="valid"+n,p="errs__"+n,h=e.util.copy(e),f="";h.level++;var y="valid"+h.level;if(a.every((function(t){return e.opts.strictKeywords?"object"==typeof t&&Object.keys(t).length>0||!1===t:e.util.schemaHasRules(t,e.RULES.all)}))){var g=h.baseId;o+=" var "+p+" = errors; var "+d+" = false;  ";var m=e.compositeRule;e.compositeRule=h.compositeRule=!0;var v=a;if(v)for(var b,S=-1,k=v.length-1;S<k;)b=v[S+=1],h.schema=b,h.schemaPath=s+"["+S+"]",h.errSchemaPath=c+"/"+S,o+="  "+e.validate(h)+" ",h.baseId=g,o+=" "+d+" = "+d+" || "+y+"; if (!"+d+") { ",f+="}";e.compositeRule=h.compositeRule=m,o+=" "+f+" if (!"+d+") {   var err =   ",!1!==e.createErrors?(o+=" { keyword: 'anyOf' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(c)+" , params: {} ",!1!==e.opts.messages&&(o+=" , message: 'should match some schema in anyOf' "),e.opts.verbose&&(o+=" , schema: validate.schema"+s+" , parentSchema: validate.schema"+e.schemaPath+" , data: "+u+" "),o+=" } "):o+=" {} ",o+=";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",!e.compositeRule&&l&&(e.async?o+=" throw new ValidationError(vErrors); ":o+=" validate.errors = vErrors; return false; "),o+=" } else {  errors = "+p+"; if (vErrors !== null) { if ("+p+") vErrors.length = "+p+"; else vErrors = null; } ",e.opts.allErrors&&(o+=" } ")}else l&&(o+=" if (true) { ");return o}},"3y5O":function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.DefaultRuntimeOptions=t.RuntimeOptionsService=void 0;var o=i("B0kg");Object.defineProperty(t,"RuntimeOptionsService",{enumerable:!0,get:function(){return o.RuntimeOptionsService}});var n=i("Qmag");Object.defineProperty(t,"DefaultRuntimeOptions",{enumerable:!0,get:function(){return n.DefaultRuntimeOptions}})},"46nG":function(e,t,i){"use strict";e.exports=function(e,t,i){var o,n=" ",r=e.level,a=e.dataLevel,s=e.schema[t],c=e.schemaPath+e.util.getProperty(t),l=e.errSchemaPath+"/"+t,u=!e.opts.allErrors,d="data"+(a||""),p=e.opts.$data&&s&&s.$data;if(p?(n+=" var schema"+r+" = "+e.util.getData(s.$data,a,e.dataPathArr)+"; ",o="schema"+r):o=s,!p&&"number"!=typeof s)throw new Error(t+" must be number");n+="if ( ",p&&(n+=" ("+o+" !== undefined && typeof "+o+" != 'number') || "),n+=" "+d+".length "+("maxItems"==t?">":"<")+" "+o+") { ";var h=t,f=f||[];f.push(n),n="",!1!==e.createErrors?(n+=" { keyword: '"+(h||"_limitItems")+"' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(l)+" , params: { limit: "+o+" } ",!1!==e.opts.messages&&(n+=" , message: 'should NOT have ",n+="maxItems"==t?"more":"fewer",n+=" than ",n+=p?"' + "+o+" + '":""+s,n+=" items' "),e.opts.verbose&&(n+=" , schema:  ",n+=p?"validate.schema"+c:""+s,n+="         , parentSchema: validate.schema"+e.schemaPath+" , data: "+d+" "),n+=" } "):n+=" {} ";var y=n;return n=f.pop(),!e.compositeRule&&u?e.async?n+=" throw new ValidationError(["+y+"]); ":n+=" validate.errors = ["+y+"]; return false; ":n+=" var err = "+y+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",n+="} ",u&&(n+=" else { "),n}},"4HWf":function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ThrottleStyleManager=void 0;const o=i("IuIz"),n=i("pL49"),r=i("l1ss"),a=i("mlq5");t.ThrottleStyleManager=class{constructor(e=3){this.knobBackgroundColorMemo=new o.LazyMemoizedConverter(n.convertStringToColor,e),this.knobStrokeColorMemo=new o.LazyMemoizedConverter(n.convertStringToColor,e),this.indicatorColorMemo=new o.LazyMemoizedConverter(n.convertStringToColor,e),this.axisUpCapColorMemo=new o.LazyMemoizedConverter(n.convertStringToColor,e),this.axisUpStrokeColorMemo=new o.LazyMemoizedConverter(n.convertStringToColor,e),this.axisDownCapColorMemo=new o.LazyMemoizedConverter(n.convertStringToColor,e),this.axisDownStrokeColorMemo=new o.LazyMemoizedConverter(n.convertStringToColor,e)}getAxesStyle(e,t){const i=(0,a.getDefaultThrottleAxesStyle)(e);switch(this.extractThrottleAxesCustomStyles(i,null===t||void 0===t?void 0:t.default),e){case r.ThrottleState.Hidden:break;case r.ThrottleState.Disabled:this.extractThrottleAxesCustomStyles(i,null===t||void 0===t?void 0:t.disabled);break;case r.ThrottleState.Idle:this.extractThrottleAxesCustomStyles(i,null===t||void 0===t?void 0:t.idle);break;case r.ThrottleState.IdleUp:this.extractThrottleAxesCustomStyles(i,null===t||void 0===t?void 0:t.idleUp);break;case r.ThrottleState.Activated:this.extractThrottleAxesCustomStyles(i,null===t||void 0===t?void 0:t.activated);break;case r.ThrottleState.ActivatedUp:this.extractThrottleAxesCustomStyles(i,null===t||void 0===t?void 0:t.activatedUp);break;case r.ThrottleState.ActivatedDown:this.extractThrottleAxesCustomStyles(i,null===t||void 0===t?void 0:t.activatedDown)}return i}getIndicatorStyle(e,t){var i,o,n,s,c,l,u;const d=(0,a.getDefaultThrottleIndicatorStyle)();switch(this.extractThrottleIndicatorCustomStyles(d,null===(i=null===t||void 0===t?void 0:t.default)||void 0===i?void 0:i.indicator),e){case r.ThrottleState.Hidden:break;case r.ThrottleState.Disabled:this.extractThrottleIndicatorCustomStyles(d,null===(o=null===t||void 0===t?void 0:t.disabled)||void 0===o?void 0:o.indicator);break;case r.ThrottleState.Idle:this.extractThrottleIndicatorCustomStyles(d,null===(n=null===t||void 0===t?void 0:t.idle)||void 0===n?void 0:n.indicator);break;case r.ThrottleState.IdleUp:this.extractThrottleIndicatorCustomStyles(d,null===(s=null===t||void 0===t?void 0:t.idleUp)||void 0===s?void 0:s.indicator);break;case r.ThrottleState.Activated:this.extractThrottleIndicatorCustomStyles(d,null===(c=null===t||void 0===t?void 0:t.activated)||void 0===c?void 0:c.indicator);break;case r.ThrottleState.ActivatedUp:this.extractThrottleIndicatorCustomStyles(d,null===(l=null===t||void 0===t?void 0:t.activatedUp)||void 0===l?void 0:l.indicator);break;case r.ThrottleState.ActivatedDown:this.extractThrottleIndicatorCustomStyles(d,null===(u=null===t||void 0===t?void 0:t.activatedDown)||void 0===u?void 0:u.indicator)}return d}getKnobStyle(e,t){var i,o,n,s,c,l,u;const d=(0,a.getDefaultThrottleKnobStyle)(e);switch(this.extractThrottleKnobCustomStyles(d,null===(i=null===t||void 0===t?void 0:t.default)||void 0===i?void 0:i.knob),e){case r.ThrottleState.Hidden:break;case r.ThrottleState.Disabled:this.extractThrottleKnobCustomStyles(d,null===(o=null===t||void 0===t?void 0:t.disabled)||void 0===o?void 0:o.knob);break;case r.ThrottleState.Idle:this.extractThrottleKnobCustomStyles(d,null===(n=null===t||void 0===t?void 0:t.idle)||void 0===n?void 0:n.knob);break;case r.ThrottleState.IdleUp:this.extractThrottleKnobCustomStyles(d,null===(s=null===t||void 0===t?void 0:t.idleUp)||void 0===s?void 0:s.knob);break;case r.ThrottleState.Activated:this.extractThrottleKnobCustomStyles(d,null===(c=null===t||void 0===t?void 0:t.activated)||void 0===c?void 0:c.knob);break;case r.ThrottleState.ActivatedUp:this.extractThrottleKnobCustomStyles(d,null===(l=null===t||void 0===t?void 0:t.activatedUp)||void 0===l?void 0:l.knob);break;case r.ThrottleState.ActivatedDown:this.extractThrottleKnobCustomStyles(d,null===(u=null===t||void 0===t?void 0:t.activatedDown)||void 0===u?void 0:u.knob)}return d}getOpacity(e,t){var i,o,n,a,s,c,l,u,d,p,h,f,y,g;let m=1;switch(m=null!==(o=null===(i=null===t||void 0===t?void 0:t.default)||void 0===i?void 0:i.opacity)&&void 0!==o?o:m,e){case r.ThrottleState.Hidden:m=0;break;case r.ThrottleState.Disabled:m*=.33,m=null!==(a=null===(n=null===t||void 0===t?void 0:t.disabled)||void 0===n?void 0:n.opacity)&&void 0!==a?a:m;break;case r.ThrottleState.Idle:m=null!==(c=null===(s=null===t||void 0===t?void 0:t.idle)||void 0===s?void 0:s.opacity)&&void 0!==c?c:m;break;case r.ThrottleState.IdleUp:m=null!==(u=null===(l=null===t||void 0===t?void 0:t.idleUp)||void 0===l?void 0:l.opacity)&&void 0!==u?u:m;break;case r.ThrottleState.Activated:m=null!==(p=null===(d=null===t||void 0===t?void 0:t.activated)||void 0===d?void 0:d.opacity)&&void 0!==p?p:m;break;case r.ThrottleState.ActivatedUp:m=null!==(f=null===(h=null===t||void 0===t?void 0:t.activatedUp)||void 0===h?void 0:h.opacity)&&void 0!==f?f:m;break;case r.ThrottleState.ActivatedDown:m=null!==(g=null===(y=null===t||void 0===t?void 0:t.activatedDown)||void 0===y?void 0:y.opacity)&&void 0!==g?g:m}return m}extractThrottleKnobCustomStyles(e,t){var i;t&&(this.extractThrottleKnobBackgroundCustomStyles(e,t.background),this.extractThrottleKnobFaceImageCustomStyles(e,t.faceImage),this.extractThrottleKnobStrokeCustomStyles(e,t.stroke),e.opacity=null!==(i=t.opacity)&&void 0!==i?i:e.opacity)}extractThrottleKnobBackgroundCustomStyles(e,t){var i;t&&(e.background.type=t.type,e.background.value="color"===t.type?this.knobBackgroundColorMemo.convert(t.value):t.value,e.background.opacity=null!==(i=t.opacity)&&void 0!==i?i:e.background.opacity)}extractThrottleKnobFaceImageCustomStyles(e,t){var i;t&&(e.faceImage.type=t.type,e.faceImage.value=t.value,e.faceImage.opacity=null!==(i=t.opacity)&&void 0!==i?i:e.faceImage.opacity)}extractThrottleKnobStrokeCustomStyles(e,t){var i;t&&(e.stroke.color=t.color?this.knobStrokeColorMemo.convert(t.color):e.stroke.color,e.stroke.opacity=null!==(i=t.opacity)&&void 0!==i?i:e.stroke.opacity)}extractThrottleIndicatorCustomStyles(e,t){var i;t&&(e.color=t.color?this.indicatorColorMemo.convert(t.color):e.color,e.opacity=null!==(i=t.opacity)&&void 0!==i?i:e.opacity)}extractThrottleAxesCustomStyles(e,t){var i,o,n,r;if(t){if(t.axisUp){const n=t.axisUp;n.cap&&(e.axisUp.cap.value=this.axisUpCapColorMemo.convert(n.cap.value),e.axisUp.cap.opacity=null!==(i=n.cap.opacity)&&void 0!==i?i:e.axisUp.cap.opacity),n.stroke&&(e.axisUp.stroke.color=n.stroke.color?this.axisUpStrokeColorMemo.convert(n.stroke.color):e.axisUp.stroke.color,e.axisUp.stroke.opacity=null!==(o=n.stroke.opacity)&&void 0!==o?o:e.axisDown.cap.opacity)}if(t.axisDown){const i=t.axisDown;i.cap&&(e.axisDown.cap.value=this.axisDownCapColorMemo.convert(i.cap.value),e.axisDown.cap.opacity=null!==(n=i.cap.opacity)&&void 0!==n?n:e.axisDown.cap.opacity),i.stroke&&(e.axisDown.stroke.color=i.stroke.color?this.axisDownStrokeColorMemo.convert(i.stroke.color):e.axisDown.stroke.color,e.axisDown.stroke.opacity=null!==(r=i.stroke.opacity)&&void 0!==r?r:e.axisDown.cap.opacity)}}}}},"4KZH":function(e,t,i){"use strict";var o=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.TakxVersion=t.TakxInternalConstants=t.TakxConstants=void 0;const n=i("MsEf"),r=o(i("I73t")),a=o(i("Nz3K")),s=o(i("Z085")),c=o(i("7Dxu")),l=o(i("63Ow")),u=o(i("Y6hi")),d=o(i("r6NY")),p=o(i("ZGze")),h=o(i("Ks3E"));t.TakxConstants={ManifestVersion:"2.0.0.0",LayoutVersion:"3.4.1.0"};t.TakxInternalConstants={SchemaAlternateNames:(e=>{const t=new Map;return e.forEach(e=>{const i=e[0];e[1].forEach(e=>{t.set(e,i)})}),t})([["https://raw.githubusercontent.com/microsoft/xbox-game-streaming-tools/main/touch-adaptation-kit/schemas/manifest/v1.1/manifest.json",["https://raw.githubusercontent.com/microsoft/xbox-game-streaming-tools/main/touch-adaptation-kit/schemas/manifest","https://raw.githubusercontent.com/microsoft/xbox-game-streaming-tools/master/touch-adaptation-kit/schemas/manifest/v1.1/manifest.json","https://raw.githubusercontent.com/microsoft/xbox-game-streaming-tools/master/touch-adaptation-kit/schemas/manifest/v1/manifest.json","https://raw.githubusercontent.com/microsoft/xbox-game-streaming-tools/main/touch-adaptation-kit/schemas/manifest/v1.1/manifest.json","https://raw.githubusercontent.com/microsoft/xbox-game-streaming-tools/main/touch-adaptation-kit/schemas/manifest/v1/manifest.json"]],["https://raw.githubusercontent.com/microsoft/xbox-game-streaming-tools/main/touch-adaptation-kit/schemas/manifest/latest/manifest.json",["https://raw.githubusercontent.com/microsoft/xbox-game-streaming-tools/master/touch-adaptation-kit/schemas/manifest/latest/manifest.json","https://raw.githubusercontent.com/microsoft/xbox-game-streaming-tools/master/touch-adaptation-kit/schemas/manifest/v2.0/manifest.json","https://raw.githubusercontent.com/microsoft/xbox-game-streaming-tools/main/touch-adaptation-kit/schemas/manifest/latest/manifest.json","https://raw.githubusercontent.com/microsoft/xbox-game-streaming-tools/main/touch-adaptation-kit/schemas/manifest/v2.0/manifest.json"]],["https://raw.githubusercontent.com/microsoft/xbox-game-streaming-tools/main/touch-adaptation-kit/schemas/context/latest/context.json",["https://raw.githubusercontent.com/microsoft/xbox-game-streaming-tools/main/touch-adaptation-kit/schemas/context","https://raw.githubusercontent.com/microsoft/xbox-game-streaming-tools/master/touch-adaptation-kit/schemas/context/latest/context.json","https://raw.githubusercontent.com/microsoft/xbox-game-streaming-tools/master/touch-adaptation-kit/schemas/context/v3.0/context.json","https://raw.githubusercontent.com/microsoft/xbox-game-streaming-tools/master/touch-adaptation-kit/schemas/context/v3.1/context.json","https://raw.githubusercontent.com/microsoft/xbox-game-streaming-tools/master/touch-adaptation-kit/schemas/context/v3.2/context.json","https://raw.githubusercontent.com/microsoft/xbox-game-streaming-tools/master/touch-adaptation-kit/schemas/context/v3.3/context.json","https://raw.githubusercontent.com/microsoft/xbox-game-streaming-tools/master/touch-adaptation-kit/schemas/context/v3.4/context.json","https://raw.githubusercontent.com/microsoft/xbox-game-streaming-tools/master/touch-adaptation-kit/schemas/context/v3.4.1/context.json","https://raw.githubusercontent.com/microsoft/xbox-game-streaming-tools/main/touch-adaptation-kit/schemas/context/latest/context.json","https://raw.githubusercontent.com/microsoft/xbox-game-streaming-tools/main/touch-adaptation-kit/schemas/context/v3.0/context.json","https://raw.githubusercontent.com/microsoft/xbox-game-streaming-tools/main/touch-adaptation-kit/schemas/context/v3.1/context.json","https://raw.githubusercontent.com/microsoft/xbox-game-streaming-tools/main/touch-adaptation-kit/schemas/context/v3.2/context.json","https://raw.githubusercontent.com/microsoft/xbox-game-streaming-tools/main/touch-adaptation-kit/schemas/context/v3.3/context.json","https://raw.githubusercontent.com/microsoft/xbox-game-streaming-tools/main/touch-adaptation-kit/schemas/context/v3.4/context.json","https://raw.githubusercontent.com/microsoft/xbox-game-streaming-tools/main/touch-adaptation-kit/schemas/context/v3.4.1/context.json"]],["https://raw.githubusercontent.com/microsoft/xbox-game-streaming-tools/main/touch-adaptation-kit/schemas/layout/v1.2/layout.json",["https://raw.githubusercontent.com/microsoft/xbox-game-streaming-tools/main/touch-adaptation-kit/schemas/layout","https://raw.githubusercontent.com/microsoft/xbox-game-streaming-tools/master/touch-adaptation-kit/schemas/layout/v1/layout.json","https://raw.githubusercontent.com/microsoft/xbox-game-streaming-tools/master/touch-adaptation-kit/schemas/layout/v1.1/layout.json","https://raw.githubusercontent.com/microsoft/xbox-game-streaming-tools/master/touch-adaptation-kit/schemas/layout/v1.2/layout.json","https://raw.githubusercontent.com/microsoft/xbox-game-streaming-tools/main/touch-adaptation-kit/schemas/layout/v1/layout.json","https://raw.githubusercontent.com/microsoft/xbox-game-streaming-tools/main/touch-adaptation-kit/schemas/layout/v1.1/layout.json","https://raw.githubusercontent.com/microsoft/xbox-game-streaming-tools/main/touch-adaptation-kit/schemas/layout/v1.2/layout.json"]],["https://raw.githubusercontent.com/microsoft/xbox-game-streaming-tools/main/touch-adaptation-kit/schemas/layout/v2.0/layout.json",["https://raw.githubusercontent.com/microsoft/xbox-game-streaming-tools/master/touch-adaptation-kit/schemas/layout/v2.0/layout.json","https://raw.githubusercontent.com/microsoft/xbox-game-streaming-tools/main/touch-adaptation-kit/schemas/layout/v2.0/layout.json"]],["https://raw.githubusercontent.com/microsoft/xbox-game-streaming-tools/main/touch-adaptation-kit/schemas/layout/latest/layout.json",["https://raw.githubusercontent.com/microsoft/xbox-game-streaming-tools/master/touch-adaptation-kit/schemas/layout/latest/layout.json","https://raw.githubusercontent.com/microsoft/xbox-game-streaming-tools/master/touch-adaptation-kit/schemas/layout/v3.0/layout.json","https://raw.githubusercontent.com/microsoft/xbox-game-streaming-tools/master/touch-adaptation-kit/schemas/layout/v3.1/layout.json","https://raw.githubusercontent.com/microsoft/xbox-game-streaming-tools/master/touch-adaptation-kit/schemas/layout/v3.2/layout.json","https://raw.githubusercontent.com/microsoft/xbox-game-streaming-tools/master/touch-adaptation-kit/schemas/layout/v3.3/layout.json","https://raw.githubusercontent.com/microsoft/xbox-game-streaming-tools/master/touch-adaptation-kit/schemas/layout/v3.4/layout.json","https://raw.githubusercontent.com/microsoft/xbox-game-streaming-tools/master/touch-adaptation-kit/schemas/layout/v3.4.1/layout.json","https://raw.githubusercontent.com/microsoft/xbox-game-streaming-tools/main/touch-adaptation-kit/schemas/layout/latest/layout.json","https://raw.githubusercontent.com/microsoft/xbox-game-streaming-tools/main/touch-adaptation-kit/schemas/layout/v3.0/layout.json","https://raw.githubusercontent.com/microsoft/xbox-game-streaming-tools/main/touch-adaptation-kit/schemas/layout/v3.1/layout.json","https://raw.githubusercontent.com/microsoft/xbox-game-streaming-tools/main/touch-adaptation-kit/schemas/layout/v3.2/layout.json","https://raw.githubusercontent.com/microsoft/xbox-game-streaming-tools/main/touch-adaptation-kit/schemas/layout/v3.3/layout.json","https://raw.githubusercontent.com/microsoft/xbox-game-streaming-tools/main/touch-adaptation-kit/schemas/layout/v3.4/layout.json","https://raw.githubusercontent.com/microsoft/xbox-game-streaming-tools/main/touch-adaptation-kit/schemas/layout/v3.4.1/layout.json"]]]),Schemas:[r.default,a.default,s.default,c.default,l.default,u.default,d.default,p.default,h.default],LayoutConverters:new Map([["https://raw.githubusercontent.com/microsoft/xbox-game-streaming-tools/main/touch-adaptation-kit/schemas/layout/latest/layout.json",n.defaultLayoutConverter],["https://raw.githubusercontent.com/microsoft/xbox-game-streaming-tools/main/touch-adaptation-kit/schemas/layout/v1/layout.json",n.v1LayoutConverter],["https://raw.githubusercontent.com/microsoft/xbox-game-streaming-tools/main/touch-adaptation-kit/schemas/layout/v1.1/layout.json",n.v1LayoutConverter],["https://raw.githubusercontent.com/microsoft/xbox-game-streaming-tools/main/touch-adaptation-kit/schemas/layout/v1.2/layout.json",n.v1LayoutConverter],["https://raw.githubusercontent.com/microsoft/xbox-game-streaming-tools/main/touch-adaptation-kit/schemas/layout/v2.0/layout.json",n.v2LayoutConverter],["https://raw.githubusercontent.com/microsoft/xbox-game-streaming-tools/main/touch-adaptation-kit/schemas/layout/v3.0/layout.json",n.v3_3LayoutConverter],["https://raw.githubusercontent.com/microsoft/xbox-game-streaming-tools/main/touch-adaptation-kit/schemas/layout/v3.1/layout.json",n.v3_3LayoutConverter],["https://raw.githubusercontent.com/microsoft/xbox-game-streaming-tools/main/touch-adaptation-kit/schemas/layout/v3.2/layout.json",n.v3_3LayoutConverter],["https://raw.githubusercontent.com/microsoft/xbox-game-streaming-tools/main/touch-adaptation-kit/schemas/layout/v3.3/layout.json",n.v3_3LayoutConverter],["https://raw.githubusercontent.com/microsoft/xbox-game-streaming-tools/main/touch-adaptation-kit/schemas/layout/v3.4/layout.json",n.defaultLayoutConverter]])};class f{constructor(e){const t=e.split(".");if(t.length>4||t.length<2)throw new Error(e+" does not have required number of components to be a valid version.");if(this.major=parseInt(t[0],10),isNaN(this.major)||this.major<0)throw new Error(e+" does not have a valid major version component.");if(this.minor=parseInt(t[1],10),isNaN(this.minor)||this.minor<0)throw new Error(e+" does not have a valid minor version component.");if(t.length>2&&(this.build=parseInt(t[2],10),isNaN(this.build)||this.build<0))throw new Error(e+" does not have a valid build version component.");if(t.length>3&&(this.revision=parseInt(t[3],10),isNaN(this.revision)||this.revision<0))throw new Error(e+" does not have a valid revision version component.")}static compareAsTakxVersions(e,t){return e===t?0:void 0===e?-1:void 0===t?1:f.compare(f.tryCreateVersion(e),f.tryCreateVersion(t))}static tryCreateVersion(e){try{return new f(e)}catch(t){return}}static compare(e,t){return e===t?0:void 0===e?-1:void 0===t?1:f.compareVersionComponent(e.major,t.major)||f.compareVersionComponent(e.minor,t.minor)||f.compareVersionComponent(e.build,t.build)||f.compareVersionComponent(e.revision,t.revision)}static compareVersionComponent(e,t){return e===t?0:void 0===e?-1:void 0===t?1:e<t?-1:1}}t.TakxVersion=f},"4P5o":function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.version=void 0,t.version="42.0.10"},"5F1E":function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.copyDirectionalPadRenderProps=t.areDirectionalPadRenderPropsEqual=t.copyDirectionalPadStyleRenderProps=t.areDirectionalPadStyleRenderPropsEqual=void 0;const o=i("iZJm"),n=i("V2pq"),r=i("SqAV"),a=i("gfMA");function s(e,t){return!!(e===t||e&&t&&(0,o.areBackgroundRenderPropsEqual)(e.background,t.background)&&(0,n.areColorsEqual)(e.fill,t.fill)&&(0,n.areColorsEqual)(e.gradient,t.gradient)&&(0,r.areStrokeRenderPropsEqual)(e.stroke,t.stroke))}function c(e){return{background:(0,o.copyBackgroundRenderProps)(e.background),fill:(0,n.copyColor)(e.fill),gradient:(0,n.copyColor)(e.gradient),stroke:(0,r.copyStrokeRenderProps)(e.stroke)}}t.areDirectionalPadStyleRenderPropsEqual=s,t.copyDirectionalPadStyleRenderProps=c,t.areDirectionalPadRenderPropsEqual=function(e,t){return!!(e===t||e&&t&&(0,a.areRenderControlRenderPropsEqual)(e,t)&&e.direction===t.direction&&e.radius===t.radius&&e.scale===t.scale&&e.spokeWidth===t.spokeWidth&&s(e.styleProps,t.styleProps))},t.copyDirectionalPadRenderProps=function(e){return Object.assign(Object.assign({},(0,a.copyRenderControlRenderProps)(e)),{direction:e.direction,radius:e.radius,scale:e.scale,spokeWidth:e.spokeWidth,styleProps:c(e.styleProps),type:e.type})}},"63Ow":function(e){e.exports=JSON.parse('{"$id":"https://raw.githubusercontent.com/microsoft/xbox-game-streaming-tools/main/touch-adaptation-kit/schemas/layout/v2.0/layout.json","$schema":"http://json-schema.org/draft-07/schema#","additionalProperties":false,"definitions":{"Accelerometer":{"additionalProperties":false,"description":"Accelerometer","properties":{"axis":{"anyOf":[{"$ref":"#/definitions/InputMappingZY"},{"items":{"$ref":"#/definitions/InputMapping2D"},"type":"array"}],"description":"Map input axis (touch) to output axis (joystick, mouse, or touch)."},"type":{"description":"Control type identifier.","const":"accelerometer","type":"string"}},"required":["type","axis"],"type":"object"},"ActionType":{"anyOf":[{"$ref":"#/definitions/ButtonMappableType"},{"items":{"$ref":"#/definitions/ButtonMappableType"},"type":"array"}],"description":"Actions able to be invoked by various controls (Joystick, Button, and Touchpad)."},"ArcadeButton":{"additionalProperties":false,"properties":{"action":{"$ref":"#/definitions/ControllerInput"},"icon":{"$ref":"#/definitions/GameIcon"}},"required":["action"],"type":"object"},"ArcadeButtons":{"additionalProperties":false,"description":"Fighting Buttons\\n\\nA grouping of buttons arranged based on common 6 or 8 button arcade controllers. This is most commonly\\nthe preferred button arrangement to play fighting games. Touching between buttons allows the player to press multiple buttons at once.\\nTouching above the button group will activate all 3 punch buttons silmutaneously, and touching below will activate all 3 kick buttons.","properties":{"heavyKick":{"$ref":"#/definitions/ArcadeButton","description":"Action to be invoked when a user touches the large kick button."},"heavyPunch":{"$ref":"#/definitions/ArcadeButton","description":"Action to be invoked when a user touches the large punch button."},"lightKick":{"$ref":"#/definitions/ArcadeButton","description":"Action to be invoked when a user touches the small kick button."},"lightPunch":{"$ref":"#/definitions/ArcadeButton","description":"Action to be invoked when a user touches the small punch button."},"mediumKick":{"$ref":"#/definitions/ArcadeButton","description":"Action to be invoked when a user touches the medium kick button."},"mediumPunch":{"$ref":"#/definitions/ArcadeButton","description":"Action to be invoked when a user touches the medium punch button."},"specialKick":{"$ref":"#/definitions/ArcadeButton","description":"Action to be invoked when a user touches the special kick button."},"specialPunch":{"$ref":"#/definitions/ArcadeButton","description":"Action to be invoked when a user touches the special punch button."},"type":{"description":"Control type identifier.","const":"arcadeButtons","type":"string"}},"required":["type","lightKick","mediumKick","heavyKick","lightPunch","mediumPunch","heavyPunch"],"type":"object"},"Background":{"oneOf":[{"$ref":"#/definitions/BackgroundColor"},{"$ref":"#/definitions/BackgroundAsset"}]},"BackgroundAsset":{"additionalProperties":false,"description":"Assigns a custom asset to the background element of the control","properties":{"type":{"description":"Background type identifier","const":"asset","type":"string"},"value":{"description":"The file name (without extension) of the asset file to reference.","type":"string","examples":["FancyImage"]},"opacity":{"description":"The opacity of the background","$ref":"#/definitions/Opacity"}},"required":["type","value"],"type":"object"},"BackgroundColor":{"additionalProperties":false,"description":"Assigns the specified color to the background element of the control","properties":{"type":{"description":"Background type identifier","const":"color","type":"string"},"value":{"description":"The color to apply to the background","$ref":"#/definitions/HexColor"},"opacity":{"description":"The opacity of the background","$ref":"#/definitions/Opacity"}},"required":["type","value"],"type":"object"},"Blank":{"additionalProperties":false,"description":"Blank\\n\\nWhen creating a layout that uses control layering, the blank control is used exclusively to\\noverride existing controls on previous control layers.\\nThe blank control does not contain any functionality and does not have any renderable properties.","properties":{"type":{"description":"Control type identifier.","const":"blank","type":"string"}},"required":["type"],"type":"object"},"Button":{"additionalProperties":false,"description":"Button\\n\\nThe most basic of all control types. The button enables an action on touch start, and disables the action on touch end.\\nIf toggle is set to true, the button will alternate between enabling and disabling the action on touch start.","properties":{"action":{"$ref":"#/definitions/ActionType","description":"Action to be invoked when a user touches the button."},"pullAction":{"$ref":"#/definitions/ActionType","description":"Action to be invoked when a user pulls button during a touch."},"toggle":{"description":"Makes the button toggleable.","type":"boolean"},"styles":{"$ref":"#/definitions/ButtonStyles"},"type":{"description":"Control type identifier.","const":"button","type":"string"}},"required":["type","action"],"type":"object"},"ButtonStyles":{"additionalProperties":false,"description":"Styling to be applied to the button.\\nFor each state the button can be in, each styleable component can be customized.","properties":{"default":{"$ref":"#/definitions/ButtonDefaultStyle"},"idle":{"$ref":"#/definitions/ButtonIdleStyle"},"activated":{"$ref":"#/definitions/ButtonActivatedStyle"},"disabled":{"$ref":"#/definitions/ButtonDisabledStyle"},"toggled":{"$ref":"#/definitions/ButtonToggledStyle"},"pulled":{"$ref":"#/definitions/ButtonPulledStyle"}},"type":"object"},"ButtonActivatedStyle":{"additionalProperties":false,"description":"Styling to be applied to the button\'s components while the button is in the activated state.\\nThe activated state is when the button is being interacted with (i.e. tapped) and the action being executed.","properties":{"background":{"$ref":"#/definitions/Background","description":"Background styling to be used on the button when it is in the activated state."},"faceImage":{"$ref":"#/definitions/FaceImage","description":"Face Image to be used on the button when it is in the activated state."},"opacity":{"$ref":"#/definitions/Opacity","description":"The opacity of the button when it is in the activated state."},"pullIndicator":{"$ref":"#/definitions/PullIndicator","description":"Pull action indicator styling to be applied when the button is in the activated state.\\nThe indicator is displayed when the button is in the activated or pulled state."}},"type":"object"},"ButtonDefaultStyle":{"additionalProperties":false,"description":"Default styling parameters to be applied to the button.\\nWhen a specific state\'s styling is not provided, parameters fallback to their equivalents in default.\\nIf default styling is not provided, internal defaults are used instead.","properties":{"background":{"$ref":"#/definitions/Background","description":"Default background styling to be used on the button."},"faceImage":{"$ref":"#/definitions/FaceImage","description":"Default face image to be used on the button."},"opacity":{"$ref":"#/definitions/Opacity","description":"Default opacity to set the button to."},"pullIndicator":{"$ref":"#/definitions/PullIndicator","description":"Default pull action indicator styling to be applied.\\nThe indicator is displayed when the button is in the activated or pulled state."}},"type":"object"},"ButtonDisabledStyle":{"additionalProperties":false,"description":"Styling to be applied to the button\'s components while the button is in the disabled state.\\nThe button cannot be interacted with in this state, but it still exists.","properties":{"background":{"$ref":"#/definitions/Background","description":"Background styling to be used on the button when it is in the disabled state."},"faceImage":{"$ref":"#/definitions/FaceImage","description":"Face Image to be used on the button when it is in the disabled stated."},"opacity":{"$ref":"#/definitions/Opacity","description":"The opacity of the button when it is in the disabled state."}},"type":"object"},"ButtonIdleStyle":{"additionalProperties":false,"description":"Styling to be applied to the button\'s components while it is in the idle state.\\nThe idle state is defined as when the button is not yet interacted with (i.e. not tapped).","properties":{"background":{"$ref":"#/definitions/Background","description":"Background styling to be used on the button when it is in the idle state."},"faceImage":{"$ref":"#/definitions/FaceImage","description":"Face image to be used on the button when it is in the idle state."},"opacity":{"$ref":"#/definitions/Opacity","description":"The opacity of the button when it is in the idle state."}},"type":"object"},"ButtonToggledStyle":{"additionalProperties":false,"description":"Styling to be applied to the button\'s components while the button is in the toggled state.\\nThe toggled state is when the button is defined to be a toggle button, and it is toggled.","properties":{"background":{"$ref":"#/definitions/Background","description":"Background styling to be used on the button when it is in the toggled state."},"faceImage":{"$ref":"#/definitions/FaceImage","description":"Face Image to be used on the button when it is in the toggled state."},"opacity":{"$ref":"#/definitions/Opacity","description":"The opacity of the button when it is in the toggled state."}},"type":"object"},"ButtonPulledStyle":{"additionalProperties":false,"description":"Styling to be applied to the button\'s components while the button is in the pulled state.\\nThe pulled state is when the button has a pull action defined, and the player has pulled the button to execute the pull action.","properties":{"background":{"$ref":"#/definitions/Background","description":"Background color to be used on the button when it is pulled."},"faceImage":{"$ref":"#/definitions/FaceImage","description":"Face Image to be used on the button when it is pulled."},"opacity":{"$ref":"#/definitions/Opacity","description":"The opacity of the button when it is in the pulled state."},"pullIndicator":{"$ref":"#/definitions/PullIndicator","description":"Pull action indicator styling to be applied when the button is in the pulled state.\\nThe indicator is displayed when the button is in the activated or pulled state."}},"type":"object"},"ButtonMappableType":{"anyOf":[{"$ref":"#/definitions/ControllerInput"},{"$ref":"#/definitions/LayoutAction"},{"$ref":"#/definitions/TurboAction"}]},"ButtonType":{"enum":["guide","gamepadA","gamepadB","gamepadX","gamepadY","view","menu","leftBumper","rightBumper","dPadLeft","dPadRight","dPadUp","dPadDown","leftThumb","rightThumb"],"type":"string"},"Control":{"anyOf":[{"$ref":"#/definitions/Throttle"},{"$ref":"#/definitions/Touchpad"},{"$ref":"#/definitions/Button"},{"$ref":"#/definitions/Joystick"},{"$ref":"#/definitions/DirectionalPad"},{"$ref":"#/definitions/ArcadeButtons"}]},"ControlGroup<Control>":{"items":{"anyOf":[{"$ref":"#/definitions/Control"},{"type":"null"}]},"maxItems":4,"minItems":1,"type":"array"},"ControlGroup<LayerControl>":{"items":{"anyOf":[{"$ref":"#/definitions/LayerControl"},{"type":"null"}]},"maxItems":4,"minItems":1,"type":"array"},"ControllerInput":{"anyOf":[{"$ref":"#/definitions/ButtonType"},{"$ref":"#/definitions/TriggerType"},{"$ref":"#/definitions/JoystickPolarAxisType"}]},"Deadzone":{"additionalProperties":false,"properties":{"threshold":{"type":"number"}},"required":["threshold"],"type":"object"},"Deadzone2D":{"additionalProperties":false,"properties":{"radial":{"type":"boolean"},"threshold":{"type":"number"}},"required":["threshold","radial"],"type":"object"},"DirectionalPad":{"additionalProperties":false,"description":"Directional Pad typically used by 2D platformer and fighting games.","properties":{"deadzone":{"description":"Normalized size of the the directional pad inner region that will ignore touch input.\\nValue must be a number 0 and 1, with a default value of 0.5.","type":"number"},"scale":{"description":"Size multiplier of the directional pad control. Default value of 1.","type":"number"},"type":{"description":"Control type identifier.","const":"directionalPad","type":"string"}},"required":["type"],"type":"object"},"FaceImage":{"oneOf":[{"$ref":"#/definitions/FaceImageIcon"},{"$ref":"#/definitions/FaceImageAsset"}]},"FaceImageAsset":{"additionalProperties":false,"description":"Used to create a reference to a custom asset.","properties":{"type":{"description":"Face Image type identifier","const":"asset","type":"string"},"value":{"description":"The file name (without extension) of the asset file to reference.","type":"string","examples":["FancyImage"]}},"type":"object","required":["type","value"]},"FaceImageIcon":{"additionalProperties":false,"description":"Used to create a reference to a built-in icon.","properties":{"type":{"description":"Face Image type identifier","const":"icon","type":"string"},"value":{"description":"The name of the icon to use.","$ref":"#/definitions/GameIcon"}},"type":"object","required":["type","value"]},"GameIcon":{"enum":["placeholder","walk","enterCar","jump","punch","weaponSelect","stealth","exitCar","handbrake","fire","aim","crouch","dPad","steering","upChevron","downChevron","leftChevron","rightChevron","gasPedal","brakePedal","reload","characterSelect","ability","lightKick","mediumKick","heavyKick","lightPunch","mediumPunch","heavyPunch","lookBehind","leftArrow","rightArrow","upArrow","downArrow","brightness","phone","close","look","smallGridView","largeGridView","interact","rewind","move","titleMenu","internet","specialAbility","leftRightArrows","sync","repeatRefresh","select","leftArrow2","rightArrow2","upArrow2","downArrow2","parameters","handbrake2","ability2","character","characterSelect2","lookBehind2","run","sprint","ram","dodge","block","cover","climbStairs","add","subtract","hourglass","stopwatch","move2","touch","lightSword","mediumSword","heavySword","lightSword2","mediumSword2","heavySword2","sword","sword2","lightKick2","mediumKick2","heavyKick2","lightKick3","mediumKick3","heavyKick3","lightKick4","mediumKick4","heavyKick4","capture","exit","lightPunch2","mediumPunch2","heavyPunch2","lightPunch3","mediumPunch3","heavyPunch3","dash","zoomIn","zoomOut","map","map2","inventory","emotes","slide","medical","armor","radio","enterDoor","exitDoor","chat","bomb","grenade","flag","waypoint","horn","selectAll","switchCamera","arrowReload","arrow","bow"],"type":"string"},"Gyroscope":{"additionalProperties":false,"description":"Gyroscope\\n\\nLike the touchpad, the gyroscope is most typically used in first/third-person perspective games to control the player look camera.\\nWith proper axis tuning (deadzone removal and linearization of response-curves),\\nusing the gyroscope can bring mouse-like precision to the player\'s control\\n(especially when used in combination with touchpad or joystick.","properties":{"axis":{"anyOf":[{"$ref":"#/definitions/InputMappingZY"},{"items":{"$ref":"#/definitions/InputMapping2D"},"type":"array"}],"description":"Map input axis (touch) to output axis (joystick, mouse, or touch)."},"type":{"description":"Control type identifier.","const":"gyroscope","type":"string"}},"required":["type","axis"],"type":"object"},"HexColor":{"description":"Hexadecimal representation of RGBA color values.","pattern":"^#([a-fA-F0-9]{6}|[a-fA-F0-9]{8}|[a-fA-F0-9]{4}|[a-fA-F0-9]{3})$","examples":["#0099ff","#0099ffaa","#09f","#09fa"],"type":"string"},"InnerWheel<Control>":{"items":{"$ref":"#/definitions/Control"},"maxItems":4,"minItems":1,"type":"array"},"InnerWheel<LayerControl>":{"items":{"$ref":"#/definitions/LayerControl"},"maxItems":4,"minItems":1,"type":"array"},"InputAxisPolar":{"anyOf":[{"enum":["axisRight","axisLeft"],"type":"string"},{"enum":["axisUp","axisDown"],"type":"string"}]},"InputCurveType":{"anyOf":[{"additionalProperties":false,"description":"Circular response curve shape that widens input resolution near lower range values (0)\\nand condenses resolution near higher range values (1)","properties":{"range":{"description":"Start and end values for input curve range.","items":{"type":"number"},"maxItems":2,"minItems":2,"type":"array"},"type":{"const":"circular","type":"string"}},"required":["range","type"],"type":"object"},{"additionalProperties":false,"description":"Circular response curve shape that condenses input resolution near lower range values (0)\\nand widens resolution near higher range values (1)","properties":{"range":{"description":"Start and end values for input curve range.","items":{"type":"number"},"maxItems":2,"minItems":2,"type":"array"},"type":{"const":"circular-inverse","type":"string"}},"required":["range","type"],"type":"object"}]},"InputMapping2D":{"anyOf":[{"$ref":"#/definitions/JoystickInputMapping2D"},{"$ref":"#/definitions/MouseInputMapping2D"}]},"InputMappingZY":{"anyOf":[{"$ref":"#/definitions/InputMapping2D"},{"$ref":"#/definitions/SensorZYInputConfig"}]},"Joystick":{"additionalProperties":false,"description":"Joystick\\n\\nPrimarily used across games for player locomotion, the joystick is able to use either a single-axis, or dual-axis configuration.\\nOptional actions can be set to activate either on touch start (and release on touch end),\\nor when the user has moved the joystick to a position that meets a specified minimum threshold.","properties":{"action":{"$ref":"#/definitions/ActionType","description":"Action to be invoked while the user is touching the joystick."},"axis":{"anyOf":[{"$ref":"#/definitions/InputMapping2D"},{"items":{"$ref":"#/definitions/InputMapping2D"},"type":"array"}],"description":"Map input axis (touch) to output axis (joystick, mouse, or touch)."},"expand":{"description":"Expand joystick range to match user ergonomic preferences when placed in a center control socket.\\nSet to false to use a standardized fixed joystick size. Default value of true.","type":"boolean"},"icon":{"anyOf":[{"$ref":"#/definitions/GameIcon"},{"$ref":"#/definitions/ControllerInput"}],"description":"Icon to be displayed on the joystick."},"relative":{"description":"By default, the joystick will calculate its value using a relative calculation based on user\'s initial touch.\\nSetting this value to false will instead calculate its value based on the center point of the control.","type":"boolean"},"threshold":{"description":"Normalized minimum joystick value (radial) required to invoke the action. Default value of 0.","type":"number"},"type":{"description":"Control type identifier.","const":"joystick","type":"string"}},"required":["type","axis"],"type":"object"},"JoystickAxisType":{"enum":["leftJoystickX","leftJoystickY","rightJoystickX","rightJoystickY"],"type":"string"},"JoystickInputConfig2D":{"additionalProperties":false,"properties":{"deadzone":{"$ref":"#/definitions/Deadzone2D","description":"Normalized radius of the inner region that will ignore touch input. Value must be a number 0 and 1, with a default value of 0.5."},"input":{"description":"Touch Axis, X and Y","const":"axisXY","type":"string"},"output":{"anyOf":[{"$ref":"#/definitions/JoystickType"},{"const":"relativeMouse","type":"string"}],"description":"Axis to be mapped to virtual input device."},"responseCurve":{"$ref":"#/definitions/InputCurveType","description":"Shape of the response curve."},"sensitivity":{"description":"Value multiplier applied after deadzone and response curve calculation.","type":"number"}},"required":["input","output"],"type":"object"},"JoystickInputConfigAxial":{"additionalProperties":false,"properties":{"deadzone":{"$ref":"#/definitions/Deadzone"},"input":{"anyOf":[{"const":"axisX","type":"string"},{"const":"axisY","type":"string"}],"description":"Touch Axis, X or Y"},"output":{"$ref":"#/definitions/JoystickAxisType","description":"Axis to be mapped to virtual input device."},"responseCurve":{"$ref":"#/definitions/InputCurveType","description":"Shape of the response curve."},"sensitivity":{"description":"Value multiplier applied after deadzone and response curve calculation.","type":"number"}},"required":["input","output"],"type":"object"},"JoystickInputConfigAxialPolar":{"additionalProperties":false,"properties":{"deadzone":{"$ref":"#/definitions/Deadzone"},"input":{"$ref":"#/definitions/InputAxisPolar","description":"Touch Axis, Right, Left, Up, or Down"},"output":{"anyOf":[{"$ref":"#/definitions/JoystickPolarAxisType"},{"$ref":"#/definitions/TriggerType"}],"description":"Axis to be mapped to virtual input device."},"responseCurve":{"$ref":"#/definitions/InputCurveType","description":"Shape of the response curve."},"sensitivity":{"description":"Value multiplier applied after deadzone and response curve calculation.","type":"number"}},"required":["input","output"],"type":"object"},"JoystickInputMapping1D":{"anyOf":[{"$ref":"#/definitions/JoystickInputConfigAxial"},{"$ref":"#/definitions/JoystickInputConfigAxialPolar"}]},"JoystickInputMapping2D":{"anyOf":[{"$ref":"#/definitions/JoystickInputConfig2D"},{"$ref":"#/definitions/JoystickInputMapping1D"}]},"JoystickPolarAxisType":{"enum":["leftJoystickRight","leftJoystickLeft","leftJoystickUp","leftJoystickDown","rightJoystickRight","rightJoystickLeft","rightJoystickUp","rightJoystickDown"],"type":"string"},"JoystickType":{"enum":["rightJoystick","leftJoystick"],"type":"string"},"Layer":{"additionalProperties":false,"properties":{"center":{"$ref":"#/definitions/Wheel<LayerControl>"},"left":{"$ref":"#/definitions/Wheel<LayerControl>"},"lower":{"additionalProperties":false,"properties":{"center":{"$ref":"#/definitions/LayerControl"},"leftCenter":{"items":{"$ref":"#/definitions/LayerControl"},"type":"array"},"rightCenter":{"items":{"$ref":"#/definitions/LayerControl"},"type":"array"}},"type":"object"},"right":{"$ref":"#/definitions/Wheel<LayerControl>"},"sensors":{"items":{"$ref":"#/definitions/SensorControl"},"type":"array"},"upper":{"additionalProperties":false,"properties":{"left":{"items":{"$ref":"#/definitions/LayerControl"},"type":"array"},"leftCenter":{"items":{"$ref":"#/definitions/LayerControl"},"type":"array"},"right":{"items":{"$ref":"#/definitions/LayerControl"},"type":"array"},"rightCenter":{"items":{"$ref":"#/definitions/LayerControl"},"type":"array"}},"type":"object"}},"type":"object"},"LayerControl":{"anyOf":[{"$ref":"#/definitions/Control"},{"$ref":"#/definitions/Blank"}]},"Layout":{"additionalProperties":false,"properties":{"center":{"$ref":"#/definitions/Wheel<Control>"},"layers":{"additionalProperties":{"$ref":"#/definitions/Layer"},"description":"Construct a type with a set of properties K of type T","type":"object"},"left":{"$ref":"#/definitions/Wheel<Control>"},"lower":{"additionalProperties":false,"properties":{"center":{"$ref":"#/definitions/Control"},"leftCenter":{"items":{"$ref":"#/definitions/Control"},"type":"array"},"rightCenter":{"items":{"$ref":"#/definitions/Control"},"type":"array"}},"type":"object"},"right":{"$ref":"#/definitions/Wheel<Control>"},"sensors":{"items":{"$ref":"#/definitions/SensorControl"},"type":"array"},"upper":{"additionalProperties":false,"properties":{"left":{"items":{"$ref":"#/definitions/Control"},"type":"array"},"leftCenter":{"items":{"$ref":"#/definitions/Control"},"type":"array"},"right":{"items":{"$ref":"#/definitions/Control"},"type":"array"},"rightCenter":{"items":{"$ref":"#/definitions/Control"},"type":"array"}},"type":"object"}},"type":"object"},"LayoutAction":{"additionalProperties":false,"properties":{"target":{"type":"string"},"type":{"const":"layer","type":"string"}},"required":["type","target"],"type":"object"},"LayoutOrientation":{"enum":["landscape-left","landscape-right","landscape","portrait-up","portrait"],"type":"string"},"MouseInputConfig2D":{"additionalProperties":false,"properties":{"input":{"const":"axisXY","type":"string"},"output":{"const":"relativeMouse","type":"string"},"sensitivity":{"type":"number"}},"required":["input","output"],"type":"object"},"MouseInputConfigAxial":{"additionalProperties":false,"properties":{"input":{"anyOf":[{"const":"axisX","type":"string"},{"const":"axisY","type":"string"}]},"output":{"enum":["relativeMouseX","relativeMouseY"],"type":"string"},"sensitivity":{"type":"number"}},"required":["input","output"],"type":"object"},"MouseInputConfigAxialPolar":{"additionalProperties":false,"properties":{"input":{"$ref":"#/definitions/InputAxisPolar"},"output":{"$ref":"#/definitions/MousePolarAxisType"},"sensitivity":{"type":"number"}},"required":["input","output"],"type":"object"},"MouseInputMapping1D":{"anyOf":[{"$ref":"#/definitions/MouseInputConfigAxial"},{"$ref":"#/definitions/MouseInputConfigAxialPolar"}]},"MouseInputMapping2D":{"anyOf":[{"$ref":"#/definitions/MouseInputConfig2D"},{"$ref":"#/definitions/MouseInputMapping1D"}]},"MousePolarAxisType":{"enum":["relativeMouseUp","relativeMouseDown","relativeMouseLeft","relativeMouseRight"],"type":"string"},"Opacity":{"description":"Opacity to be used on a control when styled in a specific state.","type":"number","minimum":0,"maximum":1},"OuterWheel<Control>":{"items":{"anyOf":[{"$ref":"#/definitions/Control"},{"$ref":"#/definitions/ControlGroup<Control>"},{"type":"null"}]},"maxItems":8,"minItems":1,"type":"array"},"OuterWheel<LayerControl>":{"items":{"anyOf":[{"$ref":"#/definitions/LayerControl"},{"$ref":"#/definitions/ControlGroup<LayerControl>"},{"type":"null"}]},"maxItems":8,"minItems":1,"type":"array"},"PullIndicator":{"additionalProperties":false,"description":"Styling options for pull action indicators on controls that support it.","properties":{"background":{"description":"Styling to be applied to the background of the pull indicator","$ref":"#/definitions/BackgroundColor"}},"type":"object"},"SensorControl":{"anyOf":[{"$ref":"#/definitions/Gyroscope"},{"$ref":"#/definitions/Accelerometer"}]},"SensorZYInputConfig":{"additionalProperties":false,"properties":{"deadzone":{"$ref":"#/definitions/Deadzone2D","description":"Normalized radius of the inner region that will ignore touch input. Value must be a number 0 and 1, with a default value of 0.5."},"input":{"description":"Touch Axis, X and Y","const":"axisZY","type":"string"},"output":{"anyOf":[{"$ref":"#/definitions/JoystickType"},{"const":"relativeMouse","type":"string"}],"description":"Axis to be mapped to virtual input device."},"responseCurve":{"$ref":"#/definitions/InputCurveType","description":"Shape of the response curve."},"sensitivity":{"description":"Value multiplier applied after deadzone and response curve calculation.","type":"number"}},"required":["input","output"],"type":"object"},"Throttle":{"additionalProperties":false,"description":"Throttle\\n\\nSimilar to a y-axis only joystick, but tuned specifically to control gas/brake in racing games.","properties":{"axisDown":{"$ref":"#/definitions/TriggerType","description":"Map input axis (touch negative y-axis) to output axis."},"axisUp":{"$ref":"#/definitions/TriggerType","description":"Map input axis (touch positive y-axis) to output axis."},"icon":{"$ref":"#/definitions/GameIcon","description":"Icon to be displayed on the throttle knob."},"relative":{"description":"By default, the throttle will calculate its value using a relative calculation based on user\'s initial touch.\\nSetting this value to false will instead calculate its value based on the center point of the control.","type":"boolean"},"sticky":{"description":"By default, when the user stops touching the control, the axisDown and axisRight values reset back to 0.\\nWhen set to true, the values will instead remain unchanged. This is commonly used to implement \\"cruise control\\" in driving games.","type":"boolean"},"type":{"description":"Control type identifier.","const":"throttle","type":"string"}},"required":["type","axisDown","axisUp"],"type":"object"},"Touchpad":{"additionalProperties":false,"description":"Touchpad\\n\\nPrimarily used in FPS/TPS titles to control the player\'s look camera. Ideally this should be mapped to an event driven\\noutput type (touch or mouse) but it can also be used to drive joystick output (with a couple caveats).\\nFor non-cloud aware titles mapping to joystick output, it is absolutely critical to zero out the deadzone.\\nIn these situations (non-cloud aware) it is also important for the player to set their camera settings to max sensitivity in-game\\nOptional actions can be set to activate on touch start (and release on touch end).","properties":{"action":{"$ref":"#/definitions/ActionType","description":"Action to be invoked while the user is touching the touchpad."},"axis":{"anyOf":[{"$ref":"#/definitions/InputMapping2D"},{"items":{"$ref":"#/definitions/InputMapping2D"},"type":"array"}],"description":"Map input axis (touch) to output axis (joystick, mouse, or touch)."},"icon":{"$ref":"#/definitions/GameIcon","description":"Icon to be displayed on the touchpad."},"renderAsButton":{"description":"Render the touchpad to appear visually as a button.","type":"boolean"},"type":{"description":"Control type identifier.","const":"touchpad","type":"string"}},"required":["type","axis"],"type":"object"},"TriggerType":{"enum":["leftTrigger","rightTrigger"],"type":"string"},"TurboAction":{"additionalProperties":false,"properties":{"action":{"$ref":"#/definitions/ControllerInput"},"interval":{"type":"number"},"type":{"const":"turbo","type":"string"}},"required":["type","action","interval"],"type":"object"},"Wheel<Control>":{"additionalProperties":false,"properties":{"inner":{"$ref":"#/definitions/InnerWheel<Control>"},"outer":{"$ref":"#/definitions/OuterWheel<Control>"}},"type":"object"},"Wheel<LayerControl>":{"additionalProperties":false,"properties":{"inner":{"$ref":"#/definitions/InnerWheel<LayerControl>"},"outer":{"$ref":"#/definitions/OuterWheel<LayerControl>"}},"type":"object"}},"properties":{"$schema":{"type":"string"},"content":{"$ref":"#/definitions/Layout"},"orientation":{"$ref":"#/definitions/LayoutOrientation"}},"required":["content"],"type":"object"}')},"65S6":function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.applyInput2D=t.buildInputMapConfig=t.buildPipes=t.sensitivityPipe=t.hasMouseOutputType=t.isMouseOutputType=t.isMouseInputConfigAxialPolar=t.isMouseInputConfigAxial=t.isMouseInputConfig=t.hasJoystickOutputType=t.isJoystickOutputType=t.isJoystickInputConfigAxialPolar=t.isJoystickInputConfigAxial=t.isJoystickInputConfig=void 0;const o=i("uWzJ"),n=i("/2Ai"),r=i("a79a"),a=i("g5Cp");function s(e){return e.hasOwnProperty("input")&&("axisXY"===e.input||"axisZY"===e.input)&&("leftJoystick"===e.output||"rightJoystick"===e.output)}function c(e){return e.hasOwnProperty("input")&&("axisX"===e.input||"axisY"===e.input)&&("rightJoystickX"===e.output||"rightJoystickY"===e.output||"leftJoystickX"===e.output||"leftJoystickY"===e.output)}function l(e){return e.hasOwnProperty("input")&&("axisRight"===e.input||"axisLeft"===e.input||"axisUp"===e.input||"axisDown"===e.input)&&("rightJoystickLeft"===e.output||"rightJoystickRight"===e.output||"rightJoystickUp"===e.output||"rightJoystickDown"===e.output||"leftJoystickLeft"===e.output||"leftJoystickRight"===e.output||"leftJoystickUp"===e.output||"leftJoystickDown"===e.output||"rightTrigger"===e.output||"leftTrigger"===e.output)}function u(e){return s(e)||c(e)||l(e)}function d(e){return e.hasOwnProperty("input")&&("axisXY"===e.input||"axisZY"===e.input)&&"relativeMouse"===e.output}function p(e){return e.hasOwnProperty("input")&&("axisX"===e.input||"axisY"===e.input)&&("relativeMouseX"===e.output||"relativeMouseY"===e.output)}function h(e){return e.hasOwnProperty("input")&&("axisRight"===e.input||"axisLeft"===e.input||"axisUp"===e.input||"axisDown"===e.input)&&("relativeMouseRight"===e.output||"relativeMouseLeft"===e.output||"relativeMouseDown"===e.output||"relativeMouseUp"===e.output)}function f(e){return d(e)||p(e)||h(e)}function y(e){const{type:t,range:i}=e;return"circular"===t?(0,o.wrapStandardCurve)(i):(0,o.wrapInverseCurve)(i)}function g(e,t,i){return e<0?(e+t)*i-t:e>0?(e-t)*i+t:e}function m(e,t){switch(e){case"axisLeft":return t.x<0?-t.x:0;case"axisRight":return t.x<0?0:t.x;case"axisUp":return t.y<0?-t.y:0;case"axisDown":return t.y<0?0:t.y}}t.isJoystickInputConfig=s,t.isJoystickInputConfigAxial=c,t.isJoystickInputConfigAxialPolar=l,t.isJoystickOutputType=u,t.hasJoystickOutputType=function(e){return e.reduce((e,t)=>e||u(t.map),!1)},t.isMouseInputConfig=d,t.isMouseInputConfigAxial=p,t.isMouseInputConfigAxialPolar=h,t.isMouseOutputType=f,t.hasMouseOutputType=function(e){return e.reduce((e,t)=>e||f(t.map),!1)},t.sensitivityPipe=g,t.buildPipes=function(e,t){const i=[];if(s(e)){const{deadzone:n,responseCurve:r,sensitivity:a}=e,s=n?n.threshold:0;n&&i.push(function(e){const{radial:t,threshold:i}=e;return e=>t?(0,o.correctRadialDeadzone)(e,i,1):{x:(0,o.correctDeadzone)(e.x,i,1),y:(0,o.correctDeadzone)(e.y,i,1)}}(n)),r&&i.push(function(e){const t=y(e);return e=>({x:t(e.x),y:t(e.y)})}(r)),a&&i.push(e=>({x:g(e.x,s,a),y:g(e.y,s,a)})),t&&!isNaN(t)&&i.push(e=>({x:g(e.x,s,t),y:g(e.y,s,t)}))}else if(d(e)){const{sensitivity:o}=e;o&&i.push(e=>({x:e.x*o,y:e.y*o})),t&&!isNaN(t)&&i.push(e=>({x:e.x*t,y:e.y*t}))}else if(c(e)||l(e)){const{deadzone:n,responseCurve:r,sensitivity:a}=e,s=n?n.threshold:0;n&&i.push(function(e){const{threshold:t}=e;return e=>(0,o.correctDeadzone)(e,t,1)}(n)),r&&i.push(y(r)),a&&i.push(e=>g(e,s,a)),t&&!isNaN(t)&&i.push(e=>g(e,s,t))}else if(p(e)||h(e)){const{sensitivity:o}=e;o&&i.push(e=>e*o),t&&!isNaN(t)&&i.push(e=>e*t)}return i},t.buildInputMapConfig=function(e){const t=Array.isArray(e)?e:[e],i=[];for(let o=0;o<t.length;o++)s(t[o])?i.push({type:n.InputMappingType.Joystick,map:t[o]}):d(t[o])?i.push({type:n.InputMappingType.Mouse,map:t[o]}):c(t[o])?i.push({type:n.InputMappingType.JoystickAxial,map:t[o]}):p(t[o])?i.push({type:n.InputMappingType.MouseAxial,map:t[o]}):l(t[o])?i.push({type:n.InputMappingType.JoystickAxialPolar,map:t[o]}):h(t[o])&&i.push({type:n.InputMappingType.MouseAxialPolar,map:t[o]});return i},t.applyInput2D=function(e,t,i,o,s){i.reduce((i,c,l)=>{const{analogMap:u,mouseMap:d}=o,p=t[l];if(c.type===n.InputMappingType.Joystick&&r.Flags.IsFlagSet(s,n.InputAccumulationType.Joystick)){!function(e,t,i){const{x:o,y:n}=e,{output:r}=t;switch(r){case"leftJoystick":i.leftJoystickX=(0,a.clamp)(o,-1,1),i.leftJoystickY=(0,a.clamp)(n,-1,1);break;case"rightJoystick":i.rightJoystickX=(0,a.clamp)(o,-1,1),i.rightJoystickY=(0,a.clamp)(n,-1,1)}}(p.reduce((e,t)=>t(e),e),c.map,u)}else if(c.type===n.InputMappingType.Mouse&&r.Flags.IsFlagSet(s,n.InputAccumulationType.Mouse)){!function(e,t,i){const{x:o,y:n}=e,{output:r}=t;"relativeMouse"===r&&(i.relativeMouseX=o,i.relativeMouseY=n)}(p.reduce((e,t)=>t(e),e),c.map,d)}else if(c.type===n.InputMappingType.JoystickAxial&&r.Flags.IsFlagSet(s,n.InputAccumulationType.Joystick)){const t="axisX"===c.map.input?e.x:e.y;!function(e,t,i){const{output:o}=t;switch(o){case"leftJoystickX":i.leftJoystickX=(0,a.clamp)(e,-1,1);break;case"leftJoystickY":i.leftJoystickY=(0,a.clamp)(e,-1,1);break;case"rightJoystickX":i.rightJoystickX=(0,a.clamp)(e,-1,1);break;case"rightJoystickY":i.rightJoystickY=(0,a.clamp)(e,-1,1)}}(p.reduce((e,t)=>t(e),t),c.map,u)}else if(c.type===n.InputMappingType.MouseAxial&&r.Flags.IsFlagSet(s,n.InputAccumulationType.Mouse)){const t="axisX"===c.map.input?e.x:e.y;!function(e,t,i){const{output:o}=t;switch(o){case"relativeMouseX":i.relativeMouseX=e;break;case"relativeMouseY":i.relativeMouseY=e}}(p.reduce((e,t)=>t(e),t),c.map,d)}else if(c.type===n.InputMappingType.JoystickAxialPolar&&r.Flags.IsFlagSet(s,n.InputAccumulationType.Joystick)){const t=m(c.map.input,e);!function(e,t,i){var o,n,r,s,c,l,u,d,p,h;switch(t.output){case"leftJoystickLeft":i.leftJoystickX=-(0,a.clamp)(e-(null!==(o=i.leftJoystickX)&&void 0!==o?o:0),0,1);break;case"leftJoystickRight":i.leftJoystickX=(0,a.clamp)(e+(null!==(n=i.leftJoystickX)&&void 0!==n?n:0),0,1);break;case"leftJoystickDown":i.leftJoystickY=(0,a.clamp)(e+(null!==(r=i.leftJoystickY)&&void 0!==r?r:0),0,1);break;case"leftJoystickUp":i.leftJoystickY=-(0,a.clamp)(e-(null!==(s=i.leftJoystickY)&&void 0!==s?s:0),0,1);break;case"rightJoystickLeft":i.rightJoystickX=-(0,a.clamp)(e-(null!==(c=i.rightJoystickX)&&void 0!==c?c:0),0,1);break;case"rightJoystickRight":i.rightJoystickX=(0,a.clamp)(e+(null!==(l=i.rightJoystickX)&&void 0!==l?l:0),0,1);break;case"rightJoystickDown":i.rightJoystickY=(0,a.clamp)(e+(null!==(u=i.rightJoystickY)&&void 0!==u?u:0),0,1);break;case"rightJoystickUp":i.rightJoystickY=-(0,a.clamp)(e-(null!==(d=i.rightJoystickY)&&void 0!==d?d:0),0,1);break;case"leftTrigger":i.leftTrigger=(0,a.clamp)(Math.abs(e)+(null!==(p=i.leftTrigger)&&void 0!==p?p:0),0,1);break;case"rightTrigger":i.rightTrigger=(0,a.clamp)(Math.abs(e)+(null!==(h=i.rightTrigger)&&void 0!==h?h:0),0,1)}}(p.reduce((e,t)=>t(e),t),c.map,u)}else if(c.type===n.InputMappingType.MouseAxialPolar&&r.Flags.IsFlagSet(s,n.InputAccumulationType.Mouse)){const t=m(c.map.input,e);!function(e,t,i){var o,n,r,a;switch(t.output){case"relativeMouseLeft":i.relativeMouseX=-(e-(null!==(o=i.relativeMouseX)&&void 0!==o?o:0));break;case"relativeMouseRight":i.relativeMouseX=e+(null!==(n=i.relativeMouseX)&&void 0!==n?n:0);break;case"relativeMouseDown":i.relativeMouseY=e+(null!==(r=i.relativeMouseY)&&void 0!==r?r:0);break;case"relativeMouseUp":i.relativeMouseY=-(e-(null!==(a=i.relativeMouseY)&&void 0!==a?a:0))}}(p.reduce((e,t)=>t(e),t),c.map,d)}return i},o)}},"7Dxu":function(e){e.exports=JSON.parse('{"$id":"https://raw.githubusercontent.com/microsoft/xbox-game-streaming-tools/main/touch-adaptation-kit/schemas/layout/v1.2/layout.json","$schema":"http://json-schema.org/draft-07/schema#","additionalProperties":false,"definitions":{"Accelerometer":{"additionalProperties":false,"description":"Accelerometer","properties":{"axis":{"anyOf":[{"$ref":"#/definitions/InputMappingZY"},{"items":{"$ref":"#/definitions/InputMapping2D"},"type":"array"}],"description":"Map input axis (touch) to output axis (joystick, mouse, or touch)."},"type":{"description":"Control type identifier.","const":"accelerometer","type":"string"}},"required":["type","axis"],"type":"object"},"ActionType":{"anyOf":[{"$ref":"#/definitions/ButtonMappableType"},{"items":{"$ref":"#/definitions/ButtonMappableType"},"type":"array"}],"description":"Actions able to be invoked by various controls (Joystick, Button, and Touchpad)."},"ArcadeButton":{"additionalProperties":false,"properties":{"action":{"$ref":"#/definitions/ControllerInput"},"icon":{"$ref":"#/definitions/GameIcon"}},"required":["action"],"type":"object"},"ArcadeButtons":{"additionalProperties":false,"description":"Fighting Buttons\\n\\nA grouping of buttons arranged based on common 6 or 8 button arcade controllers. This is most commonly\\nthe preferred button arrangement to play fighting games. Touching between buttons allows the player to press multiple buttons at once.\\nTouching above the button group will activate all 3 punch buttons silmutaneously, and touching below will activate all 3 kick buttons.","properties":{"heavyKick":{"$ref":"#/definitions/ArcadeButton","description":"Action to be invoked when a user touches the large kick button."},"heavyPunch":{"$ref":"#/definitions/ArcadeButton","description":"Action to be invoked when a user touches the large punch button."},"lightKick":{"$ref":"#/definitions/ArcadeButton","description":"Action to be invoked when a user touches the small kick button."},"lightPunch":{"$ref":"#/definitions/ArcadeButton","description":"Action to be invoked when a user touches the small punch button."},"mediumKick":{"$ref":"#/definitions/ArcadeButton","description":"Action to be invoked when a user touches the medium kick button."},"mediumPunch":{"$ref":"#/definitions/ArcadeButton","description":"Action to be invoked when a user touches the medium punch button."},"specialKick":{"$ref":"#/definitions/ArcadeButton","description":"Action to be invoked when a user touches the special kick button."},"specialPunch":{"$ref":"#/definitions/ArcadeButton","description":"Action to be invoked when a user touches the special punch button."},"type":{"description":"Control type identifier.","const":"arcadeButtons","type":"string"}},"required":["type","lightKick","mediumKick","heavyKick","lightPunch","mediumPunch","heavyPunch"],"type":"object"},"Blank":{"additionalProperties":false,"description":"Blank\\n\\nWhen creating a layout that uses control layering, the blank control is used exclusively to\\noverride existing controls on previous control layers.\\nThe blank control does not contain any functionality and does not have any renderable properties.","properties":{"type":{"description":"Control type identifier.","const":"blank","type":"string"}},"required":["type"],"type":"object"},"Button":{"additionalProperties":false,"description":"Button\\n\\nThe most basic of all control types. The button enables an action on touch start, and disables the action on touch end.\\nIf toggle is set to true, the button will alternate between enabling and disabling the action on touch start.","properties":{"action":{"$ref":"#/definitions/ActionType","description":"Action to be invoked when a user touches the button."},"icon":{"$ref":"#/definitions/GameIcon","description":"Icon to be displayed on the button.\\nWill default to displaying an icon that corresponds to the required configured action if none is provided.\\nCan be provided an array to map multiple actions to a single button press."},"pullAction":{"$ref":"#/definitions/ActionType","description":"Action to be invoked when a user pulls button during a touch."},"toggle":{"description":"Makes the button toggleable.","type":"boolean"},"type":{"description":"Control type identifier.","const":"button","type":"string"}},"required":["type","action"],"type":"object"},"ButtonMappableType":{"anyOf":[{"$ref":"#/definitions/ControllerInput"},{"$ref":"#/definitions/LayoutAction"},{"$ref":"#/definitions/TurboAction"}]},"ButtonType":{"enum":["guide","gamepadA","gamepadB","gamepadX","gamepadY","view","menu","leftBumper","rightBumper","dPadLeft","dPadRight","dPadUp","dPadDown","leftThumb","rightThumb"],"type":"string"},"Control":{"anyOf":[{"$ref":"#/definitions/Throttle"},{"$ref":"#/definitions/Touchpad"},{"$ref":"#/definitions/Button"},{"$ref":"#/definitions/Joystick"},{"$ref":"#/definitions/DirectionalPad"},{"$ref":"#/definitions/ArcadeButtons"}]},"ControlGroup<Control>":{"items":{"anyOf":[{"$ref":"#/definitions/Control"},{"type":"null"}]},"maxItems":4,"minItems":1,"type":"array"},"ControlGroup<LayerControl>":{"items":{"anyOf":[{"$ref":"#/definitions/LayerControl"},{"type":"null"}]},"maxItems":4,"minItems":1,"type":"array"},"ControllerInput":{"anyOf":[{"$ref":"#/definitions/ButtonType"},{"$ref":"#/definitions/TriggerType"},{"$ref":"#/definitions/JoystickPolarAxisType"}]},"Deadzone":{"additionalProperties":false,"properties":{"threshold":{"type":"number"}},"required":["threshold"],"type":"object"},"Deadzone2D":{"additionalProperties":false,"properties":{"radial":{"type":"boolean"},"threshold":{"type":"number"}},"required":["threshold","radial"],"type":"object"},"DirectionalPad":{"additionalProperties":false,"description":"Directional Pad typically used by 2D platformer and fighting games.","properties":{"deadzone":{"description":"Normalized size of the the directional pad inner region that will ignore touch input.\\nValue must be a number 0 and 1, with a default value of 0.5.","type":"number"},"scale":{"description":"Size multiplier of the directional pad control. Default value of 1.","type":"number"},"type":{"description":"Control type identifier.","const":"directionalPad","type":"string"}},"required":["type"],"type":"object"},"GameIcon":{"enum":["placeholder","walk","enterCar","jump","punch","weaponSelect","stealth","exitCar","handbrake","fire","aim","crouch","dPad","steering","upChevron","downChevron","leftChevron","rightChevron","gasPedal","brakePedal","reload","characterSelect","ability","lightKick","mediumKick","heavyKick","lightPunch","mediumPunch","heavyPunch","lookBehind","leftArrow","rightArrow","upArrow","downArrow","brightness","phone","close","look","smallGridView","largeGridView","interact","rewind","move","titleMenu","internet","specialAbility","leftRightArrows","sync","repeatRefresh","select","leftArrow2","rightArrow2","upArrow2","downArrow2","parameters","handbrake2","ability2","character","characterSelect2","lookBehind2","run","sprint","ram","dodge","block","cover","climbStairs","add","subtract","hourglass","stopwatch","move2","touch","lightSword","mediumSword","heavySword","lightSword2","mediumSword2","heavySword2","sword","sword2","lightKick2","mediumKick2","heavyKick2","lightKick3","mediumKick3","heavyKick3","lightKick4","mediumKick4","heavyKick4","capture","exit","lightPunch2","mediumPunch2","heavyPunch2","lightPunch3","mediumPunch3","heavyPunch3","dash","zoomIn","zoomOut","map","map2","inventory","emotes","slide","medical","armor","radio","enterDoor","exitDoor","chat","bomb","grenade","flag","waypoint","horn","selectAll","switchCamera","arrowReload","arrow","bow"],"type":"string"},"Gyroscope":{"additionalProperties":false,"description":"Gyroscope\\n\\nLike the touchpad, the gyroscope is most typically used in first/third-person perspective games to control the player look camera.\\nWith proper axis tuning (deadzone removal and linearization of response-curves),\\nusing the gyroscope can bring mouse-like precision to the player\'s control\\n(especially when used in combination with touchpad or joystick.","properties":{"axis":{"anyOf":[{"$ref":"#/definitions/InputMappingZY"},{"items":{"$ref":"#/definitions/InputMapping2D"},"type":"array"}],"description":"Map input axis (touch) to output axis (joystick, mouse, or touch)."},"type":{"description":"Control type identifier.","const":"gyroscope","type":"string"}},"required":["type","axis"],"type":"object"},"InnerWheel<Control>":{"items":{"$ref":"#/definitions/Control"},"maxItems":4,"minItems":1,"type":"array"},"InnerWheel<LayerControl>":{"items":{"$ref":"#/definitions/LayerControl"},"maxItems":4,"minItems":1,"type":"array"},"InputAxisPolar":{"anyOf":[{"enum":["axisRight","axisLeft"],"type":"string"},{"enum":["axisUp","axisDown"],"type":"string"}]},"InputCurveType":{"anyOf":[{"additionalProperties":false,"description":"Circular response curve shape that widens input resolution near lower range values (0)\\nand condenses resolution near higher range values (1)","properties":{"range":{"description":"Start and end values for input curve range.","items":{"type":"number"},"maxItems":2,"minItems":2,"type":"array"},"type":{"const":"circular","type":"string"}},"required":["range","type"],"type":"object"},{"additionalProperties":false,"description":"Circular response curve shape that condenses input resolution near lower range values (0)\\nand widens resolution near higher range values (1)","properties":{"range":{"description":"Start and end values for input curve range.","items":{"type":"number"},"maxItems":2,"minItems":2,"type":"array"},"type":{"const":"circular-inverse","type":"string"}},"required":["range","type"],"type":"object"}]},"InputMapping2D":{"anyOf":[{"$ref":"#/definitions/JoystickInputMapping2D"},{"$ref":"#/definitions/MouseInputMapping2D"}]},"InputMappingZY":{"anyOf":[{"$ref":"#/definitions/InputMapping2D"},{"$ref":"#/definitions/SensorZYInputConfig"}]},"Joystick":{"additionalProperties":false,"description":"Joystick\\n\\nPrimarily used across games for player locomotion, the joystick is able to use either a single-axis, or dual-axis configuration.\\nOptional actions can be set to activate either on touch start (and release on touch end),\\nor when the user has moved the joystick to a position that meets a specified minimum threshold.","properties":{"action":{"$ref":"#/definitions/ActionType","description":"Action to be invoked while the user is touching the joystick."},"axis":{"anyOf":[{"$ref":"#/definitions/InputMapping2D"},{"items":{"$ref":"#/definitions/InputMapping2D"},"type":"array"}],"description":"Map input axis (touch) to output axis (joystick, mouse, or touch)."},"expand":{"description":"Expand joystick range to match user ergonomic preferences when placed in a center control socket.\\nSet to false to use a standardized fixed joystick size. Default value of true.","type":"boolean"},"icon":{"anyOf":[{"$ref":"#/definitions/GameIcon"},{"$ref":"#/definitions/ControllerInput"}],"description":"Icon to be displayed on the joystick."},"relative":{"description":"By default, the joystick will calculate its value using a relative calculation based on user\'s initial touch.\\nSetting this value to false will instead calculate its value based on the center point of the control.","type":"boolean"},"threshold":{"description":"Normalized minimum joystick value (radial) required to invoke the action. Default value of 0.","type":"number"},"type":{"description":"Control type identifier.","const":"joystick","type":"string"}},"required":["type","axis"],"type":"object"},"JoystickAxisType":{"enum":["leftJoystickX","leftJoystickY","rightJoystickX","rightJoystickY"],"type":"string"},"JoystickInputConfig2D":{"additionalProperties":false,"properties":{"deadzone":{"$ref":"#/definitions/Deadzone2D","description":"Normalized radius of the inner region that will ignore touch input. Value must be a number 0 and 1, with a default value of 0.5."},"input":{"description":"Touch Axis, X and Y","const":"axisXY","type":"string"},"output":{"anyOf":[{"$ref":"#/definitions/JoystickType"},{"const":"relativeMouse","type":"string"}],"description":"Axis to be mapped to virtual input device."},"responseCurve":{"$ref":"#/definitions/InputCurveType","description":"Shape of the response curve."},"sensitivity":{"description":"Value multiplier applied after deadzone and response curve calculation.","type":"number"}},"required":["input","output"],"type":"object"},"JoystickInputConfigAxial":{"additionalProperties":false,"properties":{"deadzone":{"$ref":"#/definitions/Deadzone"},"input":{"anyOf":[{"const":"axisX","type":"string"},{"const":"axisY","type":"string"}],"description":"Touch Axis, X or Y"},"output":{"$ref":"#/definitions/JoystickAxisType","description":"Axis to be mapped to virtual input device."},"responseCurve":{"$ref":"#/definitions/InputCurveType","description":"Shape of the response curve."},"sensitivity":{"description":"Value multiplier applied after deadzone and response curve calculation.","type":"number"}},"required":["input","output"],"type":"object"},"JoystickInputConfigAxialPolar":{"additionalProperties":false,"properties":{"deadzone":{"$ref":"#/definitions/Deadzone"},"input":{"$ref":"#/definitions/InputAxisPolar","description":"Touch Axis, Right, Left, Up, or Down"},"output":{"anyOf":[{"$ref":"#/definitions/JoystickPolarAxisType"},{"$ref":"#/definitions/TriggerType"}],"description":"Axis to be mapped to virtual input device."},"responseCurve":{"$ref":"#/definitions/InputCurveType","description":"Shape of the response curve."},"sensitivity":{"description":"Value multiplier applied after deadzone and response curve calculation.","type":"number"}},"required":["input","output"],"type":"object"},"JoystickInputMapping1D":{"anyOf":[{"$ref":"#/definitions/JoystickInputConfigAxial"},{"$ref":"#/definitions/JoystickInputConfigAxialPolar"}]},"JoystickInputMapping2D":{"anyOf":[{"$ref":"#/definitions/JoystickInputConfig2D"},{"$ref":"#/definitions/JoystickInputMapping1D"}]},"JoystickPolarAxisType":{"enum":["leftJoystickRight","leftJoystickLeft","leftJoystickUp","leftJoystickDown","rightJoystickRight","rightJoystickLeft","rightJoystickUp","rightJoystickDown"],"type":"string"},"JoystickType":{"enum":["rightJoystick","leftJoystick"],"type":"string"},"Layer":{"additionalProperties":false,"properties":{"center":{"$ref":"#/definitions/Wheel<LayerControl>"},"left":{"$ref":"#/definitions/Wheel<LayerControl>"},"lower":{"additionalProperties":false,"properties":{"center":{"$ref":"#/definitions/LayerControl"},"leftCenter":{"items":{"$ref":"#/definitions/LayerControl"},"type":"array"},"rightCenter":{"items":{"$ref":"#/definitions/LayerControl"},"type":"array"}},"type":"object"},"right":{"$ref":"#/definitions/Wheel<LayerControl>"},"sensors":{"items":{"$ref":"#/definitions/SensorControl"},"type":"array"},"upper":{"additionalProperties":false,"properties":{"left":{"items":{"$ref":"#/definitions/LayerControl"},"type":"array"},"leftCenter":{"items":{"$ref":"#/definitions/LayerControl"},"type":"array"},"right":{"items":{"$ref":"#/definitions/LayerControl"},"type":"array"},"rightCenter":{"items":{"$ref":"#/definitions/LayerControl"},"type":"array"}},"type":"object"}},"type":"object"},"LayerControl":{"anyOf":[{"$ref":"#/definitions/Control"},{"$ref":"#/definitions/Blank"}]},"Layout":{"additionalProperties":false,"properties":{"center":{"$ref":"#/definitions/Wheel<Control>"},"layers":{"additionalProperties":{"$ref":"#/definitions/Layer"},"description":"Construct a type with a set of properties K of type T","type":"object"},"left":{"$ref":"#/definitions/Wheel<Control>"},"lower":{"additionalProperties":false,"properties":{"center":{"$ref":"#/definitions/Control"},"leftCenter":{"items":{"$ref":"#/definitions/Control"},"type":"array"},"rightCenter":{"items":{"$ref":"#/definitions/Control"},"type":"array"}},"type":"object"},"right":{"$ref":"#/definitions/Wheel<Control>"},"sensors":{"items":{"$ref":"#/definitions/SensorControl"},"type":"array"},"upper":{"additionalProperties":false,"properties":{"left":{"items":{"$ref":"#/definitions/Control"},"type":"array"},"leftCenter":{"items":{"$ref":"#/definitions/Control"},"type":"array"},"right":{"items":{"$ref":"#/definitions/Control"},"type":"array"},"rightCenter":{"items":{"$ref":"#/definitions/Control"},"type":"array"}},"type":"object"}},"type":"object"},"LayoutAction":{"additionalProperties":false,"properties":{"target":{"type":"string"},"type":{"const":"layer","type":"string"}},"required":["type","target"],"type":"object"},"LayoutOrientation":{"enum":["landscape-left","landscape-right","landscape","portrait-up","portrait"],"type":"string"},"MouseInputConfig2D":{"additionalProperties":false,"properties":{"input":{"const":"axisXY","type":"string"},"output":{"const":"relativeMouse","type":"string"},"sensitivity":{"type":"number"}},"required":["input","output"],"type":"object"},"MouseInputConfigAxial":{"additionalProperties":false,"properties":{"input":{"anyOf":[{"const":"axisX","type":"string"},{"const":"axisY","type":"string"}]},"output":{"enum":["relativeMouseX","relativeMouseY"],"type":"string"},"sensitivity":{"type":"number"}},"required":["input","output"],"type":"object"},"MouseInputConfigAxialPolar":{"additionalProperties":false,"properties":{"input":{"$ref":"#/definitions/InputAxisPolar"},"output":{"$ref":"#/definitions/MousePolarAxisType"},"sensitivity":{"type":"number"}},"required":["input","output"],"type":"object"},"MouseInputMapping1D":{"anyOf":[{"$ref":"#/definitions/MouseInputConfigAxial"},{"$ref":"#/definitions/MouseInputConfigAxialPolar"}]},"MouseInputMapping2D":{"anyOf":[{"$ref":"#/definitions/MouseInputConfig2D"},{"$ref":"#/definitions/MouseInputMapping1D"}]},"MousePolarAxisType":{"enum":["relativeMouseUp","relativeMouseDown","relativeMouseLeft","relativeMouseRight"],"type":"string"},"OuterWheel<Control>":{"items":{"anyOf":[{"$ref":"#/definitions/Control"},{"$ref":"#/definitions/ControlGroup<Control>"},{"type":"null"}]},"maxItems":8,"minItems":1,"type":"array"},"OuterWheel<LayerControl>":{"items":{"anyOf":[{"$ref":"#/definitions/LayerControl"},{"$ref":"#/definitions/ControlGroup<LayerControl>"},{"type":"null"}]},"maxItems":8,"minItems":1,"type":"array"},"SensorControl":{"anyOf":[{"$ref":"#/definitions/Gyroscope"},{"$ref":"#/definitions/Accelerometer"}]},"SensorZYInputConfig":{"additionalProperties":false,"properties":{"deadzone":{"$ref":"#/definitions/Deadzone2D","description":"Normalized radius of the inner region that will ignore touch input. Value must be a number 0 and 1, with a default value of 0.5."},"input":{"description":"Touch Axis, X and Y","const":"axisZY","type":"string"},"output":{"anyOf":[{"$ref":"#/definitions/JoystickType"},{"const":"relativeMouse","type":"string"}],"description":"Axis to be mapped to virtual input device."},"responseCurve":{"$ref":"#/definitions/InputCurveType","description":"Shape of the response curve."},"sensitivity":{"description":"Value multiplier applied after deadzone and response curve calculation.","type":"number"}},"required":["input","output"],"type":"object"},"Throttle":{"additionalProperties":false,"description":"Throttle\\n\\nSimilar to a y-axis only joystick, but tuned specifically to control gas/brake in racing games.","properties":{"axisDown":{"$ref":"#/definitions/TriggerType","description":"Map input axis (touch negative y-axis) to output axis."},"axisUp":{"$ref":"#/definitions/TriggerType","description":"Map input axis (touch positive y-axis) to output axis."},"icon":{"$ref":"#/definitions/GameIcon","description":"Icon to be displayed on the throttle knob."},"relative":{"description":"By default, the throttle will calculate its value using a relative calculation based on user\'s initial touch.\\nSetting this value to false will instead calculate its value based on the center point of the control.","type":"boolean"},"sticky":{"description":"By default, when the user stops touching the control, the axisDown and axisRight values reset back to 0.\\nWhen set to true, the values will instead remain unchanged. This is commonly used to implement \\"cruise control\\" in driving games.","type":"boolean"},"type":{"description":"Control type identifier.","const":"throttle","type":"string"}},"required":["type","axisDown","axisUp"],"type":"object"},"Touchpad":{"additionalProperties":false,"description":"Touchpad\\n\\nPrimarily used in FPS/TPS titles to control the player\'s look camera. Ideally this should be mapped to an event driven\\noutput type (touch or mouse) but it can also be used to drive joystick output (with a couple caveats).\\nFor non-cloud aware titles mapping to joystick output, it is absolutely critical to zero out the deadzone.\\nIn these situations (non-cloud aware) it is also important for the player to set their camera settings to max sensitivity in-game\\nOptional actions can be set to activate on touch start (and release on touch end).","properties":{"action":{"$ref":"#/definitions/ActionType","description":"Action to be invoked while the user is touching the touchpad."},"axis":{"anyOf":[{"$ref":"#/definitions/InputMapping2D"},{"items":{"$ref":"#/definitions/InputMapping2D"},"type":"array"}],"description":"Map input axis (touch) to output axis (joystick, mouse, or touch)."},"icon":{"$ref":"#/definitions/GameIcon","description":"Icon to be displayed on the touchpad."},"renderAsButton":{"description":"Render the touchpad to appear visually as a button.","type":"boolean"},"type":{"description":"Control type identifier.","const":"touchpad","type":"string"}},"required":["type","axis"],"type":"object"},"TriggerType":{"enum":["leftTrigger","rightTrigger"],"type":"string"},"TurboAction":{"additionalProperties":false,"properties":{"action":{"$ref":"#/definitions/ControllerInput"},"interval":{"type":"number"},"type":{"const":"turbo","type":"string"}},"required":["type","action","interval"],"type":"object"},"Wheel<Control>":{"additionalProperties":false,"properties":{"inner":{"$ref":"#/definitions/InnerWheel<Control>"},"outer":{"$ref":"#/definitions/OuterWheel<Control>"}},"type":"object"},"Wheel<LayerControl>":{"additionalProperties":false,"properties":{"inner":{"$ref":"#/definitions/InnerWheel<LayerControl>"},"outer":{"$ref":"#/definitions/OuterWheel<LayerControl>"}},"type":"object"}},"properties":{"$schema":{"type":"string"},"content":{"$ref":"#/definitions/Layout"},"orientation":{"$ref":"#/definitions/LayoutOrientation"}},"required":["content"],"type":"object"}')},"7HJd":function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.TelemetryEventNames=void 0,function(e){e.TakError="GameStreaming.UI.TakError",e.TakServerLayoutChange="GameStreaming.UI.Tak.ServerLayoutChange",e.TakDeveloperLayoutChange="GameStreaming.UI.Tak.DeveloperLayoutChange",e.TakUserLayoutChange="GameStreaming.UI.Tak.UserLayoutChange",e.TakInputModalitySession="GameStreaming.UI.Tak.TakInputModalitySession",e.TakErgoPreferenceChanged="GameStreaming.UI.Tak.TakErgoPreferenceChanged",e.TakBundleFetch="GameStreaming.UI.Tak.TakBundleFetch",e.TakInfo="GameStreaming.UI.TakInfo"}(t.TelemetryEventNames||(t.TelemetryEventNames={}))},"7RMT":function(e,t,i){"use strict";e.exports=function(e,t,i){var o,n=" ",r=e.level,a=e.dataLevel,s=e.schema[t],c=e.schemaPath+e.util.getProperty(t),l=e.errSchemaPath+"/"+t,u=!e.opts.allErrors,d="data"+(a||""),p=e.opts.$data&&s&&s.$data;p?(n+=" var schema"+r+" = "+e.util.getData(s.$data,a,e.dataPathArr)+"; ",o="schema"+r):o=s,n+="if ( ",p&&(n+=" ("+o+" !== undefined && typeof "+o+" != 'string') || "),n+=" !"+(p?"(new RegExp("+o+"))":e.usePattern(s))+".test("+d+") ) {   ";var h=h||[];h.push(n),n="",!1!==e.createErrors?(n+=" { keyword: 'pattern' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(l)+" , params: { pattern:  ",n+=p?""+o:""+e.util.toQuotedString(s),n+="  } ",!1!==e.opts.messages&&(n+=" , message: 'should match pattern \"",n+=p?"' + "+o+" + '":""+e.util.escapeQuotes(s),n+="\"' "),e.opts.verbose&&(n+=" , schema:  ",n+=p?"validate.schema"+c:""+e.util.toQuotedString(s),n+="         , parentSchema: validate.schema"+e.schemaPath+" , data: "+d+" "),n+=" } "):n+=" {} ";var f=n;return n=h.pop(),!e.compositeRule&&u?e.async?n+=" throw new ValidationError(["+f+"]); ":n+=" validate.errors = ["+f+"]; return false; ":n+=" var err = "+f+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",n+="} ",u&&(n+=" else { "),n}},"7VBh":function(e,t,i){"use strict";var o=this&&this.__decorate||function(e,t,i,o){var n,r=arguments.length,a=r<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,i):o;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)a=Reflect.decorate(e,t,i,o);else for(var s=e.length-1;s>=0;s--)(n=e[s])&&(a=(r<3?n(a):r>3?n(t,i,a):n(t,i))||a);return r>3&&a&&Object.defineProperty(t,i,a),a},n=this&&this.__metadata||function(e,t){if("object"===typeof Reflect&&"function"===typeof Reflect.metadata)return Reflect.metadata(e,t)},r=this&&this.__param||function(e,t){return function(i,o){t(i,o,e)}};Object.defineProperty(t,"__esModule",{value:!0}),t.JoystickControl=void 0;const a=i("s6Xb"),s=i("2ZOr"),c=i("q7M9"),l=i("/2Ai"),u=i("l4dA"),d=i("65S6"),p=i("g5Cp"),h=i("3ggl"),f=i("cvzu"),y=i("vHJf"),g=i("wQyi"),m=i("B+R7");let v=class extends f.LatestPointerRenderControl{constructor(e,t,i){var o;super((o=e.getProps(),{value:p.ORIGIN,interactionState:!1===o.visible?g.JoystickState.Hidden:!1===o.enabled?g.JoystickState.Disabled:g.JoystickState.Idle}),e,t),this.inputProvider=i,this.nonVisualJoystickState=g.JoystickState.Idle,this.inputAccumulationMap={analogMap:{},mouseMap:{}};const n=this.model.getProps(),r=this.getState();this.mapping=(0,d.buildInputMapConfig)(n.axis),this.pipes=this.mapping.map(e=>(0,d.buildPipes)(e.map)),this.joystickTypeMemo=new h.MemoizedConverter(this.mapping,m.getJoystickType),this.renderPropertyManager=new y.JoystickRenderPropertyManager(n,r,this.joystickTypeMemo.lastResult),this.nonVisualJoystickState=!1===n.visible?g.JoystickState.Hidden:g.JoystickState.Idle}onGameLoopTick(e){const{value:t}=this.getState();this.resetMouseInputAccumulationMap(),(0,d.applyInput2D)(t,this.pipes,this.mapping,this.inputAccumulationMap,l.InputAccumulationType.Mouse);const{mouseMap:{relativeMouseX:i,relativeMouseY:o}}=this.inputAccumulationMap,n={x:i&&0!==i?i*e:0,y:o&&0!==o?o*e:0};0===n.x&&0===n.y||this.inputProvider.sendRelativeMouseEvent(n)}onPropsChangedInternal([e,t]){const i=this.getState();this.mapping=(0,d.buildInputMapConfig)(t.axis),this.pipes=this.mapping.map(e=>(0,d.buildPipes)(e.map)),this.joystickTypeMemo.convert(this.mapping),this.renderPropertyManager.updateJoystickType(this.joystickTypeMemo.lastResult),e&&(this.nonVisualJoystickState!==g.JoystickState.Activated||(0,u.actionsAreEqual)(e.action,t.action)&&e.actionThreshold===t.actionThreshold||e.action&&this.model.commitAction(!1,e.action),this.nonVisualJoystickState!==g.JoystickState.Moving&&this.nonVisualJoystickState!==g.JoystickState.Activated||e.axis===t.axis||this.model.resetAnalogInput());const o=!1!==t.enabled,n=!1!==t.visible;if(n?o?n&&i.interactionState===g.JoystickState.Hidden?(this.nonVisualJoystickState=g.JoystickState.Idle,this.setState({interactionState:o?this.nonVisualJoystickState:g.JoystickState.Disabled,value:p.ORIGIN})):o&&i.interactionState===g.JoystickState.Disabled&&this.setState({interactionState:this.nonVisualJoystickState,value:i.value}):i.interactionState!==g.JoystickState.Disabled&&(this.nonVisualJoystickState=this.nonVisualJoystickState===g.JoystickState.Hidden?g.JoystickState.Idle:this.nonVisualJoystickState,this.setState({interactionState:g.JoystickState.Disabled,value:i.value})):i.interactionState!==g.JoystickState.Hidden&&(this.nonVisualJoystickState=g.JoystickState.Hidden,this.setState({interactionState:this.nonVisualJoystickState,value:p.ORIGIN})),this.nonVisualJoystickState===g.JoystickState.Moving||this.nonVisualJoystickState===g.JoystickState.Activated){if(this.pointerTracker.peekFront()){const{interactionState:e,value:t}=this.getState(),i=this.checkActionActive(t);this.nonVisualJoystickState=i?g.JoystickState.Activated:g.JoystickState.Moving,this.setState({interactionState:e===g.JoystickState.Disabled?e:this.nonVisualJoystickState,value:t})}}}unmountInternal(){this.mouseSubscription&&this.mouseSubscription.unsubscribe()}onStateChangedInternal(e){const{value:t}=e,{action:i}=this.model.getProps();let o;switch(this.joystickTypeMemo.lastResult){case g.JoystickType.Standard:o=(0,p.clampRadial)(t,1);break;case g.JoystickType.Horizontal:o={x:(0,p.clamp)(e.value.x,-1,1),y:0};break;case g.JoystickType.Vertical:o={x:0,y:(0,p.clamp)(e.value.y,-1,1)}}switch(this.nonVisualJoystickState){case g.JoystickState.Activated:return this.model.commitAction(!0,i),void this.sendMouseAndJoystickInput(o);case g.JoystickState.Moving:return this.model.commitAction(!1,i),void this.sendMouseAndJoystickInput(o);default:return this.model.commitAction(!1,i),this.model.resetAnalogInput(),void(this.mouseSubscription&&this.mouseSubscription.unsubscribe())}}onPointerStart(e){const{interactionState:t,value:i}=this.getState();switch(this.nonVisualJoystickState){case g.JoystickState.Idle:case g.JoystickState.Moving:case g.JoystickState.Activated:{const o=this.calculateJoystickValue(e,i),n=this.checkActionActive(o);return this.nonVisualJoystickState=n?g.JoystickState.Activated:g.JoystickState.Moving,this.setState({interactionState:t!==g.JoystickState.Disabled?this.nonVisualJoystickState:t,value:o}),!0}default:return!1}}onPointerMove(e){switch(this.nonVisualJoystickState){case g.JoystickState.Activated:case g.JoystickState.Moving:{const{interactionState:t,value:i}=this.getState(),o=this.calculateJoystickValue(e,i),n=this.checkActionActive(o);return this.nonVisualJoystickState=n?g.JoystickState.Activated:g.JoystickState.Moving,this.setState({interactionState:t!==g.JoystickState.Disabled?this.nonVisualJoystickState:t,value:o}),!0}default:return!1}}onPointerEnd(){switch(this.nonVisualJoystickState){case g.JoystickState.Activated:case g.JoystickState.Moving:{const{interactionState:e}=this.getState();return this.nonVisualJoystickState=g.JoystickState.Idle,this.setState({interactionState:e!==g.JoystickState.Disabled?this.nonVisualJoystickState:e,value:{x:0,y:0}}),!0}default:return!1}}getIsStateUndimmable({interactionState:e}){return e===g.JoystickState.Activated||e===g.JoystickState.Moving}calculateJoystickValue(e,t){return{x:this.getNormalizedXValue(e,t),y:this.getNormalizedYValue(e,t)}}getNormalizedXValue(e,t){const{relative:i=!0,x:o}=this.model.getProps(),n=this.getRadius();return i?t.x+e.lastPositionDelta.x/n:(e.position.x-o)/n}getNormalizedYValue(e,t){const{relative:i=!0,y:o}=this.model.getProps(),n=this.getRadius();return i?t.y+e.lastPositionDelta.y/n:(e.position.y-o)/n}checkActionActive(e){const{action:t,actionThreshold:i=0}=this.model.getProps();return!!t&&(e.x>=i||e.y>=i||(0,p.calculateMagnitude)(e)>=i)}getRadius(){const{expand:e=!0,colliderRadius:t,baseSize:i}=this.model.getProps(),o=i/2;return e||o>t?(0,p.clamp)(t-o,o,t):o}sendMouseAndJoystickInput(e){(!this.mouseSubscription||this.mouseSubscription.closed)&&(0,d.hasMouseOutputType)(this.mapping)&&(this.mouseSubscription=c.gameloop$.subscribe(e=>{this.onGameLoopTick(e)})),this.resetJoystickInputAccumulationMap(),(0,d.applyInput2D)(e,this.pipes,this.mapping,this.inputAccumulationMap,l.InputAccumulationType.Joystick);const{analogMap:t}=this.inputAccumulationMap;this.model.setAnalogInput(t)}resetMouseInputAccumulationMap(){this.inputAccumulationMap.mouseMap.relativeMouseX=void 0,this.inputAccumulationMap.mouseMap.relativeMouseY=void 0}resetJoystickInputAccumulationMap(){this.inputAccumulationMap.analogMap.leftJoystickX=void 0,this.inputAccumulationMap.analogMap.leftJoystickY=void 0,this.inputAccumulationMap.analogMap.leftTrigger=void 0,this.inputAccumulationMap.analogMap.rightJoystickX=void 0,this.inputAccumulationMap.analogMap.rightJoystickY=void 0,this.inputAccumulationMap.analogMap.rightTrigger=void 0}};v=o([(0,a.injectable)(),r(0,(0,a.inject)(s.SERVICE_TYPES.VirtualControl)),r(1,(0,a.inject)(s.SERVICE_TYPES.UserInterface)),r(2,(0,a.inject)(s.SERVICE_TYPES.InputProvider)),n("design:paramtypes",[Object,Function,Function])],v),t.JoystickControl=v},"7oZD":function(e,t,i){"use strict";var o=this&&this.__decorate||function(e,t,i,o){var n,r=arguments.length,a=r<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,i):o;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)a=Reflect.decorate(e,t,i,o);else for(var s=e.length-1;s>=0;s--)(n=e[s])&&(a=(r<3?n(a):r>3?n(t,i,a):n(t,i))||a);return r>3&&a&&Object.defineProperty(t,i,a),a},n=this&&this.__metadata||function(e,t){if("object"===typeof Reflect&&"function"===typeof Reflect.metadata)return Reflect.metadata(e,t)},r=this&&this.__param||function(e,t){return function(i,o){t(i,o,e)}};Object.defineProperty(t,"__esModule",{value:!0}),t.GyroscopeControl=void 0;const a=i("s6Xb"),s=i("LcNk"),c=i("YfSF"),l=i("2ZOr"),u=i("/2Ai"),d=i("2++W"),p=i("65S6"),h=i("cvzu");let f=class extends h.Control{constructor(e,t,i){super(e),this.sensorStore=t,this.inputProvider=i,this.inputAccumulationMap={analogMap:{},mouseMap:{}};const o=this.model.getProps();this.mapping=(0,p.buildInputMapConfig)(o.axis),this.pipes=this.mapping.map(e=>(0,p.buildPipes)(e.map,o.sensitivity))}mount(){super.mount(),this.sensorSubscription&&this.sensorSubscription.unsubscribe(),this.sensorSubscription=this.model.props$.pipe((0,c.map)(e=>e.enabled),(0,c.distinctUntilChanged)(),(0,c.switchMap)(e=>!1===e?s.NEVER:this.sensorStore.gyroscope$.pipe((0,c.withLatestFrom)(this.sensorStore.orientation$),(0,c.map)(e=>{const[t,i]=e,{x:o,y:n,z:r}="axisZY"===this.mapping[0].map.input?{x:i===d.DeviceSensorOrientation.Clockwise90?-t.z:t.z,y:t.y,z:t.z}:t;switch(i){case d.DeviceSensorOrientation.Clockwise270:return{x:o,y:n,z:r};case d.DeviceSensorOrientation.Clockwise90:return{x:-o,y:-n,z:r};case d.DeviceSensorOrientation.Clockwise0:return{x:-n,y:o,z:r};case d.DeviceSensorOrientation.Clockwise180:return{x:n,y:-o,z:r};default:return{x:o,y:n,z:r}}})))).subscribe(e=>{this.resetInputAccumulationMap(),(0,p.applyInput2D)(e,this.pipes,this.mapping,this.inputAccumulationMap,u.InputAccumulationType.JoystickAndMouse);const{analogMap:t,mouseMap:{relativeMouseX:i,relativeMouseY:o}}=this.inputAccumulationMap;if((0,p.hasMouseOutputType)(this.mapping)){const e={x:i&&0!==i?i:0,y:o&&0!==o?o:0};0===e.x&&0===e.y||this.inputProvider.sendRelativeMouseEvent(e)}(0,p.hasJoystickOutputType)(this.mapping)&&this.model.setAnalogInput(t)})}unmount(){super.unmount(),this.sensorSubscription&&this.sensorSubscription.unsubscribe()}onPropsChangedInternal([,e]){this.mapping=(0,p.buildInputMapConfig)(e.axis),this.pipes=this.mapping.map(t=>(0,p.buildPipes)(t.map,e.sensitivity))}resetInputAccumulationMap(){this.inputAccumulationMap.analogMap.leftJoystickX=void 0,this.inputAccumulationMap.analogMap.leftJoystickY=void 0,this.inputAccumulationMap.analogMap.leftTrigger=void 0,this.inputAccumulationMap.analogMap.rightJoystickX=void 0,this.inputAccumulationMap.analogMap.rightJoystickY=void 0,this.inputAccumulationMap.analogMap.rightTrigger=void 0,this.inputAccumulationMap.mouseMap.relativeMouseX=void 0,this.inputAccumulationMap.mouseMap.relativeMouseY=void 0}};f=o([(0,a.injectable)(),r(0,(0,a.inject)(l.SERVICE_TYPES.VirtualControl)),r(1,(0,a.inject)(l.SERVICE_TYPES.SensorStore)),r(2,(0,a.inject)(l.SERVICE_TYPES.InputProvider)),n("design:paramtypes",[Object,Object,Function])],f),t.GyroscopeControl=f},"7zgF":function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ErgoAdjustorRenderPropertyManager=void 0;const o=i("2ZOr"),n=i("kU1o"),r=i("25ZR"),a=i("++aF"),s=i("JM/N"),c=o.ICON_SIZE/12,l=o.ICON_SIZE/3,u=o.ICON_SIZE/2,d=u/2;class p extends r.RenderPropertyManager{constructor(e,t){super(e,t,Object.keys(s.ErgoAdjustorState).length/2,{isDimmable:!1}),this.styleManager=new a.ErgoAdjustorStyleManager,this.opacity={value:0,energy:n.AnimationEnergy.Instant},this._renderProperties=this.primeCache(this.state)}willOpacityChangesCauseUpdates(e){return this.opacity.value!==e.value||this.opacity.energy!==e.energy}updateOpacity(e){this.opacity.value=e.value,this.opacity.energy=e.energy}primeCache(e){const{type:t,x:i,y:o}=this.props;return{type:t,rotation:0,x:i,y:o,outerRing:{radius:0,opacity:this.styleManager.getOuterRingOpacity(e.interactionState),color:this.styleManager.getOuterRingColor()},innerRing:{radius:0,rotation:0,color:this.styleManager.getInnerRingColor(e.interactionState),rotationIndicator:{width:u,height:d,rotation:0,color:this.styleManager.getRotationIndicatorColor(e.interactionState)}},originIndicator:{width:c,height:l,opacity:this.styleManager.getOriginIndicatorOpacity(e.interactionState),color:this.styleManager.getOriginIndicatorColor(e.interactionState)},opacity:{value:1,energy:n.AnimationEnergy.Instant},visible:!1}}completeCache(){const{x:e,y:t,visible:i=!1,colliderRadius:o,radius:n,angleInRadians:r,horizontalFlip:a}=this.props;this._renderProperties.x=e,this._renderProperties.y=t,this._renderProperties.visible=i,this._renderProperties.outerRing.radius=o,this._renderProperties.innerRing.radius=(o+n)/2,this._renderProperties.innerRing.rotation=r,this._renderProperties.innerRing.rotationIndicator.rotation=a?r:-r,this._renderProperties.opacity.value=this.opacity.value,this._renderProperties.opacity.energy=this.opacity.energy}}t.ErgoAdjustorRenderPropertyManager=p},"83B1":function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getSocketMap=t.WHEEL_BASE_OFFSET=t.mirrorValue=void 0;const o=i("9XOD"),n=i("g5Cp"),r=i("3O3G"),a=i("LBtb"),s=i("yOeK");t.mirrorValue=function(e){const{x:t,y:i}=e;return{x:-t,y:i}};const c=Math.PI/4;t.WHEEL_BASE_OFFSET=Math.PI/8;function l(e,t){const i="LEFT"===e;if(!t)return 0;switch(t.length){case 2:return i?3*Math.PI/4:Math.PI/4;case 3:return Math.PI/3;default:return 0}}function u(e,i,s,u,d){const{windowWidth:p,windowHeight:h}=s,{radius:f,angleInRadians:y,x:g,y:m}=d,v="LEFT"===i,{outer:b,inner:S}=(0,a.generateKeymap)(i),k=b.map(e=>e.singleBase),P=b.map(e=>e.singleLarge),w=b.map(e=>e.double),A=b.map(e=>e.triple),I=b.map(e=>e.quadruple),T=v&&g<.5*p||!v&&g>.5*p||"CENTER"===i,C=T?1:-1,_=f<0,E=.5*u,x=_?u+f+E+f:u+f+E,R=_?x*(2/3):u+f,O=x-R,D=x,M=y+t.WHEEL_BASE_OFFSET,j=(u+r.BASE_RADIUS+E)/x,$={x:g,y:m,colliderRadius:R,collider:e=>(0,o.radialCollider)(e,{x:g,y:m},R),horizontalFlip:T,inputScale:j,wheelOffsetAngle:M,workspaceWidth:p,workspaceHeight:h},B=e=>{const t=(0,n.loop)(e+-2,0,7),i=c*t+M,o=(0,n.directionToPosition)(i,D);return{x:C*o.x+$.x,y:o.y+$.y}},L=e=>{const t=(0,n.loop)(e+-2,0,7),i=O+D,o=.5*c+c*t+M,r=(0,n.directionToPosition)(o,i);return{x:C*r.x+$.x,y:r.y+$.y}},F=e=>Object.assign(Object.assign({},e),{collider:t=>(0,o.radialCollider)(t,Object.assign({},e),u/2),colliderRadius:u/2,horizontalFlip:T,inputScale:j,workspaceWidth:p,workspaceHeight:h,wheelOffsetAngle:M,size:u,baseSize:u}),N=e=>Object.assign(Object.assign({},e),{collider:t=>(0,o.radialCollider)(t,Object.assign({},e),u),colliderRadius:u,horizontalFlip:T,inputScale:j,wheelOffsetAngle:M,workspaceWidth:p,workspaceHeight:h,size:2*u,baseSize:u}),J=e=>{const t=B(e);return F(t)},z=(e,t,i)=>{const o=B(e),r=(0,n.directionToPosition)(t,i),a={x:r.x*C+o.x,y:r.y+o.y};return Object.assign(Object.assign({},F(a)),{angle:t})},U=(e,t)=>{const i=B(e),o=B((0,n.loop)(e+1,0,7)),r={x:o.x-i.x,y:o.y-i.y},{angleInRadians:a,radius:s}=(0,n.positionToDirection)(r),c=(0,n.directionToPosition)(a-C*Math.PI/3,s),l={x:i.x+c.x,y:i.y+c.y};return Object.assign(Object.assign({},F(l)),{angle:t})},V=(e,t,i)=>{const o=(e=>{const t=(0,n.loop)(e+-2,0,7),i=.5*c+c*t+M,o=(0,n.directionToPosition)(i,D);return{x:C*o.x+$.x,y:o.y+$.y}})(e),r=i?2*O:0,a=(0,n.directionToPosition)(t,r),s={x:o.x+a.x*C,y:o.y+a.y};return Object.assign(Object.assign({},F(s)),{angle:t})};let K=0;const q=(0,n.calculateDistance)(B(0),B(1)),H=e.outer?e.outer.reduce((e,t)=>{const i=(0,n.loop)(K+-2,0,7),o=.5*c+c*i+M;let r=K+1;return Array.isArray(t)?(1===t.length&&(e[P[K]]=N(L(K))),2===t.length&&(e[w[K][0]]=V(K,o,!1),e[w[K][1]]=V(K,o,!0)),3===t.length&&A[K].map((t,i)=>{switch(i){case 0:e[t]=J(K);break;case 1:e[t]=U(K,o);break;case 2:e[t]=J((0,n.loop)(K+1,0,7))}}),4===t.length&&I[K].map((t,i)=>{switch(i){case 0:e[t]=J(K);break;case 1:e[t]=z(K,o,q);break;case 2:e[t]=z((0,n.loop)(K+1,0,7),o,q);break;case 3:e[t]=J((0,n.loop)(K+1,0,7))}}),r++):t&&(e[k[K]]=F(B(K))),K=r,e},{}):{},W=k.reduce((e,t,i)=>(H[t]||H[P[(0,n.loop)(i-1,0,7)]]||(e[k[i]]=F(B(i))),e),{}),Y=k.reduce((e,t,i)=>(e[P[i]]=N(L(i)),e),{}),G=k.reduce((e,t,i)=>{const o=H[t],r=(0,n.loop)(i+1,0,7),a=k[r],s=H[a],l=A[i][1];if(o&&s&&!H[l]){const t=(0,n.loop)(i+-2,0,7),o=.5*c+c*t+M;e[l]=U(i,o)}return e},{}),X=A.map(e=>e[1]).reduce((e,t,i)=>{const o=H[t],r=(0,n.loop)(i+1,0,7),a=k[r],s=H[a];if(o&&s){const t=(0,n.loop)(i+-2,0,7),o=.5*c+c*t+M;e[I[i][1]]=z(i,o,q),e[I[i][2]]=z(r,o,q)}return e},{}),Z=e.inner?e.inner.reduce((r,a,s,c)=>{if(1===c.length)r[i+"_CENTER"]=Object.assign(Object.assign({},$),{collider:e=>(0,o.radialCollider)(e,Object.assign({},$),.5*R),size:2*R,baseSize:u});else{const o=e.inner.length,a=(0,n.loop)(s,0,o-1),c=l(i,e.inner),u=2*Math.PI/o*a+t.WHEEL_BASE_OFFSET-.75*Math.PI+c+M,d=(0,n.directionToPosition)(u,.5*R),p={x:$.x+d.x*C,y:$.y+d.y};r[2===o?S.double[s]:3===o?S.triple[s]:S.quadruple[s]]=F(Object.assign({},p))}return r},{}):{};return{sockets:Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},H),W),G),X),Z),Y),collider:t=>{const o={x:(t.x-$.x)*C,y:t.y-$.y},r=(0,n.positionToDirection)(o),a=D+3*O,s=D+O,c=e.inner&&1===e.inner.length&&r.radius<=s,u=i+"_CENTER",d=new Set;if(!e.outer&&c)d.add(u);else if(r.radius>=D-O&&r.radius<a){const e=Math.floor((r.angleInRadians-Math.PI/8-M)/(Math.PI/4)),t=(0,n.loop)(e+3,0,7),i=(0,n.loop)(e+3,0,7),o=(0,n.loop)(e+3+-1,0,7);d.add(P[i]),d.add(P[o]),c&&d.add(u),r.radius<D+O&&(d.add(k[t]),r.radius>=D-O&&(d.add(w[i][0]),d.add(w[o][0])))}else if(r.radius<D-O&&e.inner){const t=2*Math.PI/e.inner.length,o=l(i,e.inner);let a=r.angleInRadians-M-Math.PI-.25*t-.5*o;2===e.inner.length&&"RIGHT"===i&&(a-=-Math.PI/4%(2*Math.PI)),a%=2*Math.PI;const s=Math.floor(a/t),c=(0,n.loop)(s,0,e.inner.length-1),u=1===e.inner.length?S.singleLarge[c]:2===e.inner.length?S.double[c]:3===e.inner.length?S.triple[c]:S.quadruple[c];d.add(u),d.add(i+"_CENTER")}return d}}}function d(e,t,i,n,a){const s="LEFT"===e,{radius:c}=n,l=s&&i.x<.5*t.windowWidth||!s&&i.x>.5*t.windowWidth,u=c<0,d=.5*t.baseControlSize,p=u?t.baseControlSize+c+d+c:t.baseControlSize+c+d,h=u?p*(2/3):t.baseControlSize+c,f=p-h,y=p,g=(t.baseControlSize+r.BASE_RADIUS+d)/p,m=Object.assign(Object.assign({},i),{colliderRadius:h,collider:e=>(0,o.radialCollider)(e,Object.assign({},i),h),horizontalFlip:l,inputScale:g,wheelOffsetAngle:a});return{[e+"_ERGO_SIZE"]:Object.assign(Object.assign({},m),{colliderRadius:y+f}),[e+"_ERGO_CENTER"]:Object.assign({},m)}}function p(e){return{TOUCH_FORWARDING:{baseSize:e.baseControlSize,collider:()=>!0,colliderRadius:0,horizontalFlip:!1,inputScale:0,size:0,workspaceHeight:e.windowHeight,workspaceWidth:e.windowWidth,x:e.videoX,y:e.videoY}}}t.getSocketMap=function(e,t){const i=e.layoutFile.content,{x:o,y:n,radius:r,angleInRadians:a}=t.leftWheelAnchor,{x:c,y:l,radius:h,angleInRadians:f}=t.rightWheelAnchor,{x:y,y:g,radius:m,angleInRadians:v}=t.centerWheelAnchor,b={x:o,y:n},S={angleInRadians:a,radius:r},k={x:c,y:l},P={angleInRadians:f,radius:h},w={x:y,y:g},A={angleInRadians:v,radius:m},I=i.left?u(i.left,"LEFT",t,t.baseControlSize,t.leftWheelAnchor):u({},"LEFT",t,t.baseControlSize,t.leftWheelAnchor),T=i.right?u(i.right,"RIGHT",t,t.baseControlSize,t.rightWheelAnchor):u({},"RIGHT",t,t.baseControlSize,t.rightWheelAnchor),C=i.center?u(i.center,"CENTER",t,t.baseControlSize,t.centerWheelAnchor):u({},"CENTER",t,t.baseControlSize,t.centerWheelAnchor),_=d("LEFT",t,b,S,a),E=d("RIGHT",t,k,P,f),x=d("CENTER",t,w,A,v),R=(0,s.getEdgeSockets)(i,t.baseControlSize,t);return{wheels:{left:{sockets:Object.assign(Object.assign({},I.sockets),_),collider:I.collider},center:{sockets:Object.assign(Object.assign({},C.sockets),x),collider:C.collider},right:{sockets:Object.assign(Object.assign({},T.sockets),E),collider:T.collider}},edges:{upper:{sockets:R.upper},lower:{sockets:R.lower}},nativeTouch:{sockets:p(t)}}}},"8pkF":function(e,t,i){"use strict";i.d(t,"a",(function(){return o}));class o extends Event{constructor(){super(o.type)}}o.type="takConfigChanged"},"8yhB":function(e,t,i){"use strict";e.exports=function e(t,i){if(t===i)return!0;if(t&&i&&"object"==typeof t&&"object"==typeof i){if(t.constructor!==i.constructor)return!1;var o,n,r;if(Array.isArray(t)){if((o=t.length)!=i.length)return!1;for(n=o;0!==n--;)if(!e(t[n],i[n]))return!1;return!0}if(t.constructor===RegExp)return t.source===i.source&&t.flags===i.flags;if(t.valueOf!==Object.prototype.valueOf)return t.valueOf()===i.valueOf();if(t.toString!==Object.prototype.toString)return t.toString()===i.toString();if((o=(r=Object.keys(t)).length)!==Object.keys(i).length)return!1;for(n=o;0!==n--;)if(!Object.prototype.hasOwnProperty.call(i,r[n]))return!1;for(n=o;0!==n--;){var a=r[n];if(!e(t[a],i[a]))return!1}return!0}return t!==t&&i!==i}},"90Yz":function(e,t,i){"use strict";var o=this&&this.__decorate||function(e,t,i,o){var n,r=arguments.length,a=r<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,i):o;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)a=Reflect.decorate(e,t,i,o);else for(var s=e.length-1;s>=0;s--)(n=e[s])&&(a=(r<3?n(a):r>3?n(t,i,a):n(t,i))||a);return r>3&&a&&Object.defineProperty(t,i,a),a},n=this&&this.__metadata||function(e,t){if("object"===typeof Reflect&&"function"===typeof Reflect.metadata)return Reflect.metadata(e,t)},r=this&&this.__param||function(e,t){return function(i,o){t(i,o,e)}};Object.defineProperty(t,"__esModule",{value:!0}),t.InputProvider=t.mergeGamepadStates=t.mergeAnalogs=t.mergeButtons=t.resetGamepadState=t.getResetGamepadState=void 0;const a=i("s6Xb"),s=i("2ZOr"),c=i("g5Cp");function l(){return{leftJoystickX:0,leftJoystickY:0,rightJoystickX:0,rightJoystickY:0,leftTrigger:0,rightTrigger:0,guide:!1,gamepadA:!1,gamepadB:!1,gamepadX:!1,gamepadY:!1,view:!1,menu:!1,leftBumper:!1,rightBumper:!1,dPadLeft:!1,dPadRight:!1,dPadUp:!1,dPadDown:!1,leftThumb:!1,rightThumb:!1,captureShare:!1}}function u(e=!1,t=!1){return e||t}function d(e=0,t=0,i=-1,o=1){return(0,c.clamp)(e+t,i,o)}t.getResetGamepadState=l,t.resetGamepadState=function(e){e.leftJoystickX=0,e.leftJoystickY=0,e.rightJoystickX=0,e.rightJoystickY=0,e.leftTrigger=0,e.rightTrigger=0,e.guide=!1,e.gamepadA=!1,e.gamepadB=!1,e.gamepadX=!1,e.gamepadY=!1,e.view=!1,e.menu=!1,e.leftBumper=!1,e.rightBumper=!1,e.dPadLeft=!1,e.dPadRight=!1,e.dPadUp=!1,e.dPadDown=!1,e.leftThumb=!1,e.rightThumb=!1,e.captureShare=!1},t.mergeButtons=u,t.mergeAnalogs=d,t.mergeGamepadStates=function(e,t,i){e.leftJoystickX=d(t.leftJoystickX,i.leftJoystickX),e.leftJoystickY=d(t.leftJoystickY,i.leftJoystickY),e.rightJoystickX=d(t.rightJoystickX,i.rightJoystickX),e.rightJoystickY=d(t.rightJoystickY,i.rightJoystickY),e.leftTrigger=d(t.leftTrigger,i.leftTrigger,0),e.rightTrigger=d(t.rightTrigger,i.rightTrigger,0),e.guide=u(t.guide,i.guide),e.gamepadA=u(t.gamepadA,i.gamepadA),e.gamepadB=u(t.gamepadB,i.gamepadB),e.gamepadX=u(t.gamepadX,i.gamepadX),e.gamepadY=u(t.gamepadY,i.gamepadY),e.view=u(t.view,i.view),e.menu=u(t.menu,i.menu),e.leftBumper=u(t.leftBumper,i.leftBumper),e.rightBumper=u(t.rightBumper,i.rightBumper),e.dPadLeft=u(t.dPadLeft,i.dPadLeft),e.dPadRight=u(t.dPadRight,i.dPadRight),e.dPadUp=u(t.dPadUp,i.dPadUp),e.dPadDown=u(t.dPadDown,i.dPadDown),e.leftThumb=u(t.leftThumb,i.leftThumb),e.rightThumb=u(t.rightThumb,i.rightThumb),e.captureShare=u(t.captureShare,i.captureShare)};let p=class{constructor(e,t,i){this.takBridge=e,this.screen=t,this.layoutCoordinator=i,this.frameCount=0,this.mouseAccumulator={x:0,y:0},this.gamepadAccumulator={leftJoystickX:0,leftJoystickY:0,rightJoystickX:0,rightJoystickY:0,leftTrigger:0,rightTrigger:0,guide:0,gamepadA:0,gamepadB:0,gamepadX:0,gamepadY:0,view:0,menu:0,leftBumper:0,rightBumper:0,dPadLeft:0,dPadRight:0,dPadUp:0,dPadDown:0,leftThumb:0,rightThumb:0,captureShare:0},this.gamepadModel={leftJoystickX:0,leftJoystickY:0,rightJoystickX:0,rightJoystickY:0,leftTrigger:0,rightTrigger:0,guide:!1,gamepadA:!1,gamepadB:!1,gamepadX:!1,gamepadY:!1,view:!1,menu:!1,leftBumper:!1,rightBumper:!1,dPadLeft:!1,dPadRight:!1,dPadUp:!1,dPadDown:!1,leftThumb:!1,rightThumb:!1,captureShare:!1},this.isGamepadModelDirty=!1,this.screenPropertiesSubscription=this.screen.screenProps$.subscribe(e=>{this.screenProperties=e}),this.screenProperties=this.screen.screenProps$.getValue()}unmount(){this.screenPropertiesSubscription.unsubscribe()}sendTouchEvent(e){const{videoHeight:t,videoWidth:i,videoX:o,videoY:n}=this.screenProperties;let r,a,s=0,l=0,u=0;e.position&&(r=(0,c.clamp)((e.position.x-o)/i,0,1),a=(0,c.clamp)((e.position.y-n)/t,0,1),e.additionalTouchData&&(s=e.additionalTouchData.pressure,l=e.additionalTouchData.diameter/t,u=e.additionalTouchData.orientation)),this.takBridge.onTouch({pointerId:e.pointerIndex,action:e.action,x:r,y:a,pressure:s,orientation:u,diameter:l})}sendRelativeMouseEvent(e){const t=this.mouseAccumulator.x+e.x,i=this.mouseAccumulator.y+e.y;this.mouseAccumulator.x=t%1,this.mouseAccumulator.y=i%1;const o={x:t-this.mouseAccumulator.x,y:i-this.mouseAccumulator.y};0===o.x&&0===o.y||this.takBridge.onRelativeMouse(o)}sendLayoutChangeEvent(e){var t,i,o,n;switch(e.layoutAction){case"hide":null===(i=(t=this.layoutCoordinator).onLayoutChange)||void 0===i||i.call(t,{type:e.layoutAction,scope:e.scope});break;case"show":null===(n=(o=this.layoutCoordinator).onLayoutChange)||void 0===n||n.call(o,{type:e.layoutAction,scope:e.scope,id:e.id})}}startFrame(){this.frameCount++}endFrame(){this.frameCount--,0===this.frameCount&&this.commitGamepadModel()}updateGamepadModel(e,t){this.startFrame();try{if(e.captureShare!==t.captureShare){const e=t.captureShare?1:-1;this.isGamepadModelDirty=this.isGamepadModelDirty||this.shouldMarkDirtyForButton(this.gamepadAccumulator.captureShare,e),this.gamepadAccumulator.captureShare+=e,this.gamepadModel.captureShare=this.gamepadAccumulator.captureShare>0}if(e.guide!==t.guide){const e=t.guide?1:-1;this.isGamepadModelDirty=this.isGamepadModelDirty||this.shouldMarkDirtyForButton(this.gamepadAccumulator.guide,e),this.gamepadAccumulator.guide+=e,this.gamepadModel.guide=this.gamepadAccumulator.guide>0}if(e.menu!==t.menu){const e=t.menu?1:-1;this.isGamepadModelDirty=this.isGamepadModelDirty||this.shouldMarkDirtyForButton(this.gamepadAccumulator.menu,e),this.gamepadAccumulator.menu+=e,this.gamepadModel.menu=this.gamepadAccumulator.menu>0}if(e.view!==t.view){const e=t.view?1:-1;this.isGamepadModelDirty=this.isGamepadModelDirty||this.shouldMarkDirtyForButton(this.gamepadAccumulator.view,e),this.gamepadAccumulator.view+=e,this.gamepadModel.view=this.gamepadAccumulator.view>0}if(e.dPadDown!==t.dPadDown){const e=t.dPadDown?1:-1;this.isGamepadModelDirty=this.isGamepadModelDirty||this.shouldMarkDirtyForButton(this.gamepadAccumulator.dPadDown,e),this.gamepadAccumulator.dPadDown+=e,this.gamepadModel.dPadDown=this.gamepadAccumulator.dPadDown>0}if(e.dPadLeft!==t.dPadLeft){const e=t.dPadLeft?1:-1;this.isGamepadModelDirty=this.isGamepadModelDirty||this.shouldMarkDirtyForButton(this.gamepadAccumulator.dPadLeft,e),this.gamepadAccumulator.dPadLeft+=e,this.gamepadModel.dPadLeft=this.gamepadAccumulator.dPadLeft>0}if(e.dPadRight!==t.dPadRight){const e=t.dPadRight?1:-1;this.isGamepadModelDirty=this.isGamepadModelDirty||this.shouldMarkDirtyForButton(this.gamepadAccumulator.dPadRight,e),this.gamepadAccumulator.dPadRight+=e,this.gamepadModel.dPadRight=this.gamepadAccumulator.dPadRight>0}if(e.dPadUp!==t.dPadUp){const e=t.dPadUp?1:-1;this.isGamepadModelDirty=this.isGamepadModelDirty||this.shouldMarkDirtyForButton(this.gamepadAccumulator.dPadUp,e),this.gamepadAccumulator.dPadUp+=e,this.gamepadModel.dPadUp=this.gamepadAccumulator.dPadUp>0}if(e.gamepadA!==t.gamepadA){const e=t.gamepadA?1:-1;this.isGamepadModelDirty=this.isGamepadModelDirty||this.shouldMarkDirtyForButton(this.gamepadAccumulator.gamepadA,e),this.gamepadAccumulator.gamepadA+=e,this.gamepadModel.gamepadA=this.gamepadAccumulator.gamepadA>0}if(e.gamepadB!==t.gamepadB){const e=t.gamepadB?1:-1;this.isGamepadModelDirty=this.isGamepadModelDirty||this.shouldMarkDirtyForButton(this.gamepadAccumulator.gamepadB,e),this.gamepadAccumulator.gamepadB+=e,this.gamepadModel.gamepadB=this.gamepadAccumulator.gamepadB>0}if(e.gamepadX!==t.gamepadX){const e=t.gamepadX?1:-1;this.isGamepadModelDirty=this.isGamepadModelDirty||this.shouldMarkDirtyForButton(this.gamepadAccumulator.gamepadX,e),this.gamepadAccumulator.gamepadX+=e,this.gamepadModel.gamepadX=this.gamepadAccumulator.gamepadX>0}if(e.gamepadY!==t.gamepadY){const e=t.gamepadY?1:-1;this.isGamepadModelDirty=this.isGamepadModelDirty||this.shouldMarkDirtyForButton(this.gamepadAccumulator.gamepadY,e),this.gamepadAccumulator.gamepadY+=e,this.gamepadModel.gamepadY=this.gamepadAccumulator.gamepadY>0}if(e.rightBumper!==t.rightBumper){const e=t.rightBumper?1:-1;this.isGamepadModelDirty=this.isGamepadModelDirty||this.shouldMarkDirtyForButton(this.gamepadAccumulator.rightBumper,e),this.gamepadAccumulator.rightBumper+=e,this.gamepadModel.rightBumper=this.gamepadAccumulator.rightBumper>0}if(e.leftBumper!==t.leftBumper){const e=t.leftBumper?1:-1;this.isGamepadModelDirty=this.isGamepadModelDirty||this.shouldMarkDirtyForButton(this.gamepadAccumulator.leftBumper,e),this.gamepadAccumulator.leftBumper+=e,this.gamepadModel.leftBumper=this.gamepadAccumulator.leftBumper>0}if(e.rightThumb!==t.rightThumb){const e=t.rightThumb?1:-1;this.isGamepadModelDirty=this.isGamepadModelDirty||this.shouldMarkDirtyForButton(this.gamepadAccumulator.rightThumb,e),this.gamepadAccumulator.rightThumb+=e,this.gamepadModel.rightThumb=this.gamepadAccumulator.rightThumb>0}if(e.leftThumb!==t.leftThumb){const e=t.leftThumb?1:-1;this.isGamepadModelDirty=this.isGamepadModelDirty||this.shouldMarkDirtyForButton(this.gamepadAccumulator.leftThumb,e),this.gamepadAccumulator.leftThumb+=e,this.gamepadModel.leftThumb=this.gamepadAccumulator.leftThumb>0}if(e.rightJoystickX!==t.rightJoystickX){const i=t.rightJoystickX-e.rightJoystickX;this.isGamepadModelDirty=this.isGamepadModelDirty||this.shouldMarkDirtyForAnalogValue(this.gamepadAccumulator.rightJoystickX,i,-1,1),this.gamepadAccumulator.rightJoystickX+=i,this.gamepadModel.rightJoystickX=this.clampAnalogInput(this.gamepadAccumulator.rightJoystickX,-1,1)}if(e.rightJoystickY!==t.rightJoystickY){const i=t.rightJoystickY-e.rightJoystickY;this.isGamepadModelDirty=this.isGamepadModelDirty||this.shouldMarkDirtyForAnalogValue(this.gamepadAccumulator.rightJoystickY,i,-1,1),this.gamepadAccumulator.rightJoystickY+=i,this.gamepadModel.rightJoystickY=this.clampAnalogInput(this.gamepadAccumulator.rightJoystickY,-1,1)}if(e.leftJoystickX!==t.leftJoystickX){const i=t.leftJoystickX-e.leftJoystickX;this.isGamepadModelDirty=this.isGamepadModelDirty||this.shouldMarkDirtyForAnalogValue(this.gamepadAccumulator.leftJoystickX,i,-1,1),this.gamepadAccumulator.leftJoystickX+=i,this.gamepadModel.leftJoystickX=this.clampAnalogInput(this.gamepadAccumulator.leftJoystickX,-1,1)}if(e.leftJoystickY!==t.leftJoystickY){const i=t.leftJoystickY-e.leftJoystickY;this.isGamepadModelDirty=this.isGamepadModelDirty||this.shouldMarkDirtyForAnalogValue(this.gamepadAccumulator.leftJoystickY,i,-1,1),this.gamepadAccumulator.leftJoystickY+=i,this.gamepadModel.leftJoystickY=this.clampAnalogInput(this.gamepadAccumulator.leftJoystickY,-1,1)}if(e.rightTrigger!==t.rightTrigger){const i=t.rightTrigger-e.rightTrigger;this.isGamepadModelDirty=this.isGamepadModelDirty||this.shouldMarkDirtyForAnalogValue(this.gamepadAccumulator.rightTrigger,i,0,1),this.gamepadAccumulator.rightTrigger+=i,this.gamepadModel.rightTrigger=this.clampAnalogInput(this.gamepadAccumulator.rightTrigger,0,1)}if(e.leftTrigger!==t.leftTrigger){const i=t.leftTrigger-e.leftTrigger;this.isGamepadModelDirty=this.isGamepadModelDirty||this.shouldMarkDirtyForAnalogValue(this.gamepadAccumulator.leftTrigger,i,0,1),this.gamepadAccumulator.leftTrigger+=i,this.gamepadModel.leftTrigger=this.clampAnalogInput(this.gamepadAccumulator.leftTrigger,0,1)}}finally{this.endFrame()}}commitGamepadModel(){this.isGamepadModelDirty&&(this.isGamepadModelDirty=!1,this.takBridge.onGamepad(Object.assign({},this.gamepadModel)))}shouldMarkDirtyForButton(e,t){return e>0!==e+t>0}shouldMarkDirtyForAnalogValue(e,t,i,o){return(0,c.clamp)(e,i,o)!==(0,c.clamp)(e+t,i,o)}clampAnalogInput(e,t,i){const o=(0,c.clamp)(e,t,i);return Math.abs(o)>1e-5?o:0}};p=o([(0,a.injectable)(),r(0,(0,a.inject)(s.CONFIG_TYPES.TAKBridge)),r(1,(0,a.inject)(s.SERVICE_TYPES.ScreenDisplay)),r(2,(0,a.inject)(s.SERVICE_TYPES.LayoutCoordinator)),n("design:paramtypes",[Object,Function,Function])],p),t.InputProvider=p},"91AH":function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.copyPullIndicatorRenderProps=t.arePullIndicatorRenderPropsEqual=t.areBasePullIndicatorRenderPropsEqual=void 0;const o=i("V2pq"),n=i("SqAV");function r(e,t){return!!(e===t||e&&t&&e.radius===t.radius&&e.weight===t.weight)}t.areBasePullIndicatorRenderPropsEqual=r,t.arePullIndicatorRenderPropsEqual=function(e,t){return!!(e===t||e&&t&&r(e,t)&&(0,n.areStrokeRenderPropsEqual)(e,t))},t.copyPullIndicatorRenderProps=function(e){return{color:(0,o.copyColor)(e.color),opacity:e.opacity,radius:e.radius,type:e.type,weight:e.weight}}},"96UY":function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.TouchpadStyleManager=void 0;const o=i("kU1o"),n=i("IuIz"),r=i("pL49"),a=i("JWEj"),s=i("1Gbd");t.TouchpadStyleManager=class{constructor(e=3){this.backgroundColorMemo=new n.LazyMemoizedConverter(r.convertStringToColor,e),this.faceImageGreyscaleColorMemo=new n.LazyMemoizedConverter(r.convertStringToGreyscaleColor,3)}getAnimationEnergy(e,t){let i=s.DefaultTouchpadAnimationEnergy;switch(e){case a.TouchpadState.Hidden:i=o.AnimationEnergy.Slow;break;case a.TouchpadState.Disabled:case a.TouchpadState.Idle:i=o.AnimationEnergy.Medium;break;case a.TouchpadState.Moving:i=t===a.TouchpadState.Idle||t===a.TouchpadState.Disabled||t===a.TouchpadState.Hidden?o.AnimationEnergy.Instant:o.AnimationEnergy.Medium;break;case a.TouchpadState.Activated:i=t===a.TouchpadState.Moving||t===a.TouchpadState.Idle||t===a.TouchpadState.Disabled||t===a.TouchpadState.Hidden?o.AnimationEnergy.Instant:o.AnimationEnergy.Medium;break}return i}getBackground(e,t){var i,o,n,r,c;const l=(0,s.getDefaultTouchpadBackground)();switch(this.extractBackgroundCustomStyles(l,null===(i=null===t||void 0===t?void 0:t.default)||void 0===i?void 0:i.background),e){case a.TouchpadState.Hidden:l.opacity*=.33;break;case a.TouchpadState.Disabled:l.opacity*=.33,this.extractBackgroundCustomStyles(l,null===(o=null===t||void 0===t?void 0:t.disabled)||void 0===o?void 0:o.background);break;case a.TouchpadState.Idle:l.opacity*=.33,this.extractBackgroundCustomStyles(l,null===(n=null===t||void 0===t?void 0:t.idle)||void 0===n?void 0:n.background);break;case a.TouchpadState.Moving:this.extractBackgroundCustomStyles(l,null===(r=null===t||void 0===t?void 0:t.moving)||void 0===r?void 0:r.background);break;case a.TouchpadState.Activated:this.extractBackgroundCustomStyles(l,null===(c=null===t||void 0===t?void 0:t.activated)||void 0===c?void 0:c.background)}return l}getFaceImage(e,t,i,n){var r,c,l,u,d;const p=(0,s.getDefaultTouchpadFaceImage)(i);switch(this.extractFaceImageCustomStyles(p,null===(r=null===n||void 0===n?void 0:n.default)||void 0===r?void 0:r.faceImage),e){case a.TouchpadState.Hidden:p.opacity*=.3,p.animationEnergy=o.AnimationEnergy.Slow;break;case a.TouchpadState.Disabled:p.opacity*=.3,p.animationEnergy=o.AnimationEnergy.Medium,"icon"===p.type&&(p.color=this.faceImageGreyscaleColorMemo.convert(p.color.string)),this.extractFaceImageCustomStyles(p,null===(c=null===n||void 0===n?void 0:n.disabled)||void 0===c?void 0:c.faceImage);break;case a.TouchpadState.Idle:p.opacity*=.3,p.animationEnergy=o.AnimationEnergy.Medium,this.extractFaceImageCustomStyles(p,null===(l=null===n||void 0===n?void 0:n.idle)||void 0===l?void 0:l.faceImage);break;case a.TouchpadState.Moving:{const e=t===a.TouchpadState.Idle||t===a.TouchpadState.Disabled||t===a.TouchpadState.Hidden;p.animationEnergy=e?o.AnimationEnergy.Instant:o.AnimationEnergy.Medium,p.scale=.75,this.extractFaceImageCustomStyles(p,null===(u=null===n||void 0===n?void 0:n.moving)||void 0===u?void 0:u.faceImage);break}case a.TouchpadState.Activated:{const e=t===a.TouchpadState.Moving||t===a.TouchpadState.Idle||t===a.TouchpadState.Disabled||t===a.TouchpadState.Hidden;p.animationEnergy=e?o.AnimationEnergy.Instant:o.AnimationEnergy.Medium,p.scale=.75,this.extractFaceImageCustomStyles(p,null===(d=null===n||void 0===n?void 0:n.activated)||void 0===d?void 0:d.faceImage);break}}return p}getOpacity(e,t){var i,o,n,r,c,l,u,d,p,h;let f=s.DefaultTouchpadOpacity;switch(f=null!==(o=null===(i=null===t||void 0===t?void 0:t.default)||void 0===i?void 0:i.opacity)&&void 0!==o?o:f,e){case a.TouchpadState.Hidden:f=0;break;case a.TouchpadState.Disabled:f*=.33,f=null!==(r=null===(n=null===t||void 0===t?void 0:t.disabled)||void 0===n?void 0:n.opacity)&&void 0!==r?r:f;break;case a.TouchpadState.Idle:f=null!==(l=null===(c=null===t||void 0===t?void 0:t.idle)||void 0===c?void 0:c.opacity)&&void 0!==l?l:f;break;case a.TouchpadState.Moving:f=null!==(d=null===(u=null===t||void 0===t?void 0:t.moving)||void 0===u?void 0:u.opacity)&&void 0!==d?d:f;break;case a.TouchpadState.Activated:f=null!==(h=null===(p=null===t||void 0===t?void 0:t.activated)||void 0===p?void 0:p.opacity)&&void 0!==h?h:f}return f}extractBackgroundCustomStyles(e,t){var i;t&&(e.type=t.type,e.value="color"===t.type?this.backgroundColorMemo.convert(t.value):t.value,e.opacity=null!==(i=t.opacity)&&void 0!==i?i:e.opacity)}extractFaceImageCustomStyles(e,t){var i;t&&(e.type=t.type,e.value=t.value,e.opacity=null!==(i=t.opacity)&&void 0!==i?i:e.opacity)}}},"9K0c":function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.BundleProcessor=void 0;var o=i("nyYK");Object.defineProperty(t,"BundleProcessor",{enumerable:!0,get:function(){return o.BundleProcessor}})},"9XOD":function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.radialCollider=t.anchorCollider=t.boxCollider=void 0,t.boxCollider=function(e,t,i){const{x:o,y:n}=t,{width:r,height:a}=i;return e.x>=o&&e.x<=o+r&&e.y>=n&&e.y<=n+a},t.anchorCollider=function(e,t){const i=e.x-t.x,o=e.y-t.y;return Math.sqrt(i*i+o*o)<t.colliderRadius},t.radialCollider=function(e,t,i){const o=e.x-t.x,n=e.y-t.y;return Math.sqrt(o*o+n*n)<i}},"9vRB":function(e,t,i){"use strict";var o=i("J4sq");e.exports=function(e){o.copy(e,this)}},A8be:function(e,t,i){"use strict";var o=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.expandBundle=void 0;const n=o(i("uwHF")),r=i("0PxE");t.expandBundle=async function(e,t,i){let o;e instanceof ArrayBuffer||(o={base64:!0});const a=await n.default.loadAsync(e,o),s=[];a.forEach((e,o)=>{if(o.dir)return;s.push((async()=>{const n=e.lastIndexOf("https://www.xbox.com/");let a="",s="";-1===n?(a="",s=e):(a=e.substring(0,n),s=e.substring(n+1));let c="";c=""===t&&""===a?"":""===t?a:""===a?t:`${t}/${a}`;const l=(0,r.normalizePath)(c);if(!l.startsWith((0,r.normalizePath)(t)))throw new Error(`Cannot unzip path:'${e}' item as it is outside zip destination.`);await i.mkdir(l);const u=`${l}/${s}`;"arraybuffer"===i.dataFormat?await i.writeFile(u,await o.async("arraybuffer")):await i.writeFile(u,await o.async("base64"))})())}),await Promise.all(s)}},AYPR:function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.PairwiseValue=void 0;t.PairwiseValue=class{constructor(e){this._previous=e,this._current=e}get previous(){return this._previous}get current(){return this._current}get changed(){return this._current!==this._previous}set(e){this._previous=this._current,this._current=e}}},"B+R7":function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getJoystickType=void 0;const o=i("wQyi");t.getJoystickType=function(e){const t=e.map(e=>e.map.input);return-1===t.indexOf("axisX")&&-1===t.indexOf("axisLeft")&&-1===t.indexOf("axisRight")&&-1===t.indexOf("axisXY")?o.JoystickType.Vertical:-1===t.indexOf("axisY")&&-1===t.indexOf("axisUp")&&-1===t.indexOf("axisDown")&&-1===t.indexOf("axisXY")?o.JoystickType.Horizontal:o.JoystickType.Standard}},B0kg:function(e,t,i){"use strict";var o=this&&this.__decorate||function(e,t,i,o){var n,r=arguments.length,a=r<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,i):o;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)a=Reflect.decorate(e,t,i,o);else for(var s=e.length-1;s>=0;s--)(n=e[s])&&(a=(r<3?n(a):r>3?n(t,i,a):n(t,i))||a);return r>3&&a&&Object.defineProperty(t,i,a),a},n=this&&this.__metadata||function(e,t){if("object"===typeof Reflect&&"function"===typeof Reflect.metadata)return Reflect.metadata(e,t)};Object.defineProperty(t,"__esModule",{value:!0}),t.RuntimeOptionsService=void 0;const r=i("s6Xb"),a=i("LcNk"),s=i("YfSF"),c=i("rsTb"),l=i("Qmag");let u=class{constructor(){this.options=l.DefaultRuntimeOptions,this.optionsInputStream=new a.BehaviorSubject(this.options),this.optionsStream=this.optionsInputStream.pipe((0,s.distinctUntilChanged)(l.areRuntimeOptionsEqual),(0,s.shareReplay)(1)),this.callbacks={},this.callbacksInputStream=new a.BehaviorSubject(this.callbacks),this.callbacksStream=this.callbacksInputStream.pipe((0,s.distinctUntilChanged)(l.areRuntimeCallbacksEqual),(0,s.shareReplay)(1))}updateOptions(e){this.options=(0,l.mergeRuntimeOptions)(this.options,e),this.optionsInputStream.next(this.options)}getOptionsStream(){return this.optionsStream}getFilteredOptionsStream(e){return(0,c.getFilteredStream)(this.getOptionsStream(),t=>(0,l.mergeRuntimeOptions)(l.DefaultRuntimeOptions,e(t)),l.areRuntimeOptionsEqual)}getCurrentOptions(){return this.options}updateCallbacks(e){this.callbacks=(0,l.mergeRuntimeCallbacks)(this.callbacks,e),this.callbacksInputStream.next(this.callbacks)}getCallbacksStream(){return this.callbacksStream}getFilteredCallbacksStream(e){return(0,c.getFilteredStream)(this.getCallbacksStream(),t=>e(t),l.areRuntimeCallbacksEqual)}};u=o([(0,r.injectable)(),n("design:paramtypes",[])],u),t.RuntimeOptionsService=u},B2dP:function(e,t){e.exports=function(e,t){if("string"!==typeof e)throw new TypeError("expected path to be a string");if("\\"===e||"/"===e)return"/";var i=e.length;if(i<=1)return e;var o="";if(i>4&&"\\"===e[3]){var n=e[2];"?"!==n&&"."!==n||"\\\\"!==e.slice(0,2)||(e=e.slice(2),o="//")}var r=e.split(/[/\\]+/);return!1!==t&&""===r[r.length-1]&&r.pop(),o+r.join("https://www.xbox.com/")}},BG1S:function(e,t,i){"use strict";var o=this&&this.__decorate||function(e,t,i,o){var n,r=arguments.length,a=r<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,i):o;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)a=Reflect.decorate(e,t,i,o);else for(var s=e.length-1;s>=0;s--)(n=e[s])&&(a=(r<3?n(a):r>3?n(t,i,a):n(t,i))||a);return r>3&&a&&Object.defineProperty(t,i,a),a},n=this&&this.__metadata||function(e,t){if("object"===typeof Reflect&&"function"===typeof Reflect.metadata)return Reflect.metadata(e,t)},r=this&&this.__param||function(e,t){return function(i,o){t(i,o,e)}};Object.defineProperty(t,"__esModule",{value:!0}),t.TouchManager=void 0;const a=i("s6Xb"),s=i("LcNk"),c=i("YfSF"),l=i("2ZOr"),u=i("nQP3"),d=i("dP60"),p=i("MTv4");let h=class{constructor(e){this.screen=e,this.pointers=[],this.freePointerCount=0,this.rawPointerEvents$=new s.BehaviorSubject([]),this.pointerUpdates=new d.PointerTracker;for(let t=0;t<p.MAX_SIMULTANEOUS_POINTERS;t++)this.pointers.push(new u.Pointer(t));this.freePointers=new Array(p.MAX_SIMULTANEOUS_POINTERS),this.rawPointerEventWasHandledArray=new Array(p.MAX_SIMULTANEOUS_POINTERS),this.pointerUpdates$=this.rawPointerEvents$.pipe((0,c.map)(e=>{this.freePointerCount=0,e.length>this.rawPointerEventWasHandledArray.length&&(this.rawPointerEventWasHandledArray.length=e.length);const t=this.pointers;for(let o=0;o<this.pointers.length;o++){if(t[o].state===p.PointerState.End){this.freePointers[this.freePointerCount]=o,this.freePointerCount++;continue}let i=-1;for(let t=0;t<e.length;t++)if(e[t].identifier===this.pointers[o].identifier){i=t,this.rawPointerEventWasHandledArray[t]=!0;break}-1!==i?this.pointers[o].updatePointerData(e[i].pageX-this.screen.screenProps$.value.x,e[i].pageY-this.screen.screenProps$.value.y,e[i].pressure,e[i].orientation,e[i].diameter,e[i].pointerType,e[i].touchTarget)&&this.pointerUpdates.tryPushBack(this.pointers[o]):this.pointers[o].state!==p.PointerState.End&&(this.pointers[o].reset(),this.pointerUpdates.tryPushBack(this.pointers[o]))}let i=0;for(let o=0;o<e.length;o++)if(this.rawPointerEventWasHandledArray[o])this.rawPointerEventWasHandledArray[o]=!1;else if(i<this.freePointerCount){const t=this.pointers[this.freePointers[i]];i++,t.identifier=e[o].identifier,t.updatePointerData(e[o].pageX-this.screen.screenProps$.value.x,e[o].pageY-this.screen.screenProps$.value.y,e[o].pressure,e[o].orientation,e[o].diameter,e[o].pointerType,e[o].touchTarget),this.pointerUpdates.tryPushBack(t)}return this.pointerUpdates}),(0,c.shareReplay)(1))}handlePointerEvent(e){this.rawPointerEvents$.next(e)}};h=o([(0,a.injectable)(),r(0,(0,a.inject)(l.SERVICE_TYPES.ScreenDisplay)),n("design:paramtypes",[Function])],h),t.TouchManager=h},"C/7w":function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.MouseJoystickDriver=void 0;const o=i("LcNk"),n=i("q7M9");t.MouseJoystickDriver=class{constructor(){this.joystick$=new o.BehaviorSubject({x:0,y:0}),this.currentVelocity={x:0,y:0,time:0}}subscribeToJoystickInput(e){return this.joystick$.subscribe(e)}start(){const e=Date.now();this.currentVelocity.x=0,this.currentVelocity.y=0,this.currentVelocity.time=e,this.gameLoopSubscription&&!this.gameLoopSubscription.closed||(this.gameLoopSubscription=n.gameloop$.subscribe(this.onGameLoopTick.bind(this)))}moveDelta(e){const t=Date.now();let i=t-this.currentVelocity.time;i=0!==i?i:1,this.currentVelocity.x=e.x/i,this.currentVelocity.y=e.y/i,this.currentVelocity.time=t}stop(){this.gameLoopSubscription&&(this.gameLoopSubscription.unsubscribe(),this.gameLoopSubscription=void 0)}dispose(){this.stop()}onGameLoopTick(e){const t=Date.now();t-this.currentVelocity.time>=20&&(this.currentVelocity.x=0,this.currentVelocity.y=0,this.currentVelocity.time=t),this.joystick$.next(this.currentVelocity)}}},Cjht:function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.copyTouchpadWrapperRenderProps=t.copyTouchpadRenderProps=t.areTouchpadRenderPropsEqual=void 0;const o=i("iZJm"),n=i("gJ6f"),r=i("PFUz"),a=i("Tt8o"),s=i("gfMA");function c(e){return Object.assign(Object.assign({},(0,s.copyRenderControlRenderProps)(e)),{animationEnergy:e.animationEnergy,background:(0,o.copyBackgroundRenderProps)(e.background),baseSize:e.baseSize,faceImage:(0,r.copyFaceImageRenderProps)(e.faceImage),radius:e.radius,type:e.type})}t.areTouchpadRenderPropsEqual=function(e,t){return!!(e===t||e&&t&&(0,s.areRenderControlRenderPropsEqual)(e,t)&&e.radius===t.radius&&e.baseSize===t.baseSize&&(0,o.areBackgroundRenderPropsEqual)(e.background,t.background)&&(0,r.areFaceImageRenderPropsEqual)(e.faceImage,t.faceImage)&&e.animationEnergy===t.animationEnergy)},t.copyTouchpadRenderProps=c,t.copyTouchpadWrapperRenderProps=function(e){return e.type===n.ControlType.Button?(0,a.copyButtonRenderProps)(e):c(e)}},DC67:function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.isRenderControl=void 0,t.isRenderControl=function(e){return void 0!==e.renderStream}},"DG/1":function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.doesLayoutUseSensors=t.isTouchSupportedForTitle=t.getLoadableTouchBundles=t.fullyDereferenceLayout=t.applyStatePatch=t.performActionPerLocaleDirectory=t.shouldShowGamepadDisconnectModal=t.getLayoutToRender=t.PreferredInputModality=t.areTabDetailsArrayEquivalent=t.compareTabDetails=t.getLayoutForId=t.SystemLayouts=t.defaultUserOverrideLayout=t.standardLayout=t.blankLayout=void 0;const o=i("DfD7"),n=i("t2t5"),r=i("U8mw"),a=i("4KZH"),s=i("V1gA"),c=i("diTm"),l=i("RDdo"),u="TakUtils";function d(e,t){return a.TakxVersion.compareAsTakxVersions(e.tabVersion,t.tabVersion)||a.TakxVersion.compareAsTakxVersions(e.manifestVersion,t.manifestVersion)||a.TakxVersion.compareAsTakxVersions(e.layoutVersion,t.layoutVersion)||e.id.localeCompare(t.id)}var p;function h(e,t=a.TakxConstants.ManifestVersion,i=a.TakxConstants.LayoutVersion,n){if(!e||0===e.length)return[];const r=e.filter(e=>1===a.TakxVersion.compareAsTakxVersions(e.manifestVersion,t)?(null===n||void 0===n||n.log(u,o.LogLevel.Info,`Takx manifest version ${e.manifestVersion} is newer than ${t} skipping...`),!1):1!==a.TakxVersion.compareAsTakxVersions(e.layoutVersion,i)||(null===n||void 0===n||n.log(u,o.LogLevel.Info,`Takx layout version ${e.layoutVersion} is newer than ${i} skipping...`),!1)).sort((e,t)=>-1*d(e,t));return 0===r.length&&(null===n||void 0===n||n.log(u,o.LogLevel.Info,"No loadable touch bundles found despite having service delievered bundles")),r}t.blankLayout={id:"System.Blank",displayName:"Native Touch Only (Blank)",layoutFile:{content:{}}},t.standardLayout={id:"System.Standard",displayName:"Standard",layoutFile:{content:r.standardXboxLayout}},t.defaultUserOverrideLayout={id:"System.Override",displayName:"User Override (Basic Controls)",layoutFile:{content:r.standardXboxLayout}},t.SystemLayouts=new Map([[t.defaultUserOverrideLayout.id,t.defaultUserOverrideLayout],[t.standardLayout.id,t.standardLayout],[t.blankLayout.id,t.blankLayout]]),t.getLayoutForId=function(e,i){return null===e||void 0===e?t.blankLayout:""===e?t.standardLayout:null===i||void 0===i?void 0:i.get(e)},t.compareTabDetails=d,t.areTabDetailsArrayEquivalent=function(e,t){return e===t||void 0!==e&&void 0!==t&&e.length===t.length&&e.every(e=>t.some(t=>0===d(e,t)))},function(e){e.Controller="Controller",e.Touch="Touch",e.MouseAndKeyboard="MouseAndKeyboard"}(p=t.PreferredInputModality||(t.PreferredInputModality={})),t.getLayoutToRender=function(e,i,o,n){return e===p.Controller||e===p.MouseAndKeyboard&&!n?t.blankLayout:o||(i||t.blankLayout)},t.shouldShowGamepadDisconnectModal=function(e,t,i,o,n,r,a,s){return!(!e&&!o)&&(!!t&&(!a&&(!(s===p.MouseAndKeyboard||!o)||!(s===p.Touch||s===p.MouseAndKeyboard||r&&i||n&&i))))},t.performActionPerLocaleDirectory=async function(e,t,i){const o=e.split("-");if(await i(t+"/neutral"),e.trim().length>0){let e=t,n="";for(let t=0;t<o.length;t++)n=`${n}${0===t?"":"-"}${o[t]}`,e=`${e}/${n}`,await i(e)}},t.applyStatePatch=function(e,t,i,o,r){const a=[];try{const o=JSON.parse(JSON.stringify(t.state));if(JSON.parse(i(e)).forEach(e=>{e.path=e.path.startsWith("https://www.xbox.com/")?e.path:"/"+e.path;try{(0,n.applyOperation)(o,e,!0,!0,!0)}catch(t){const e=(0,c.stringify)(t);a.push(e)}}),a.length>0){const e="Failed trying to apply state patch: \n"+a.join("\n");null===r||void 0===r||r(e)}return Object.assign(Object.assign({},t),{state:o})}catch(s){const e="Failed trying to apply state patch: "+(0,c.stringify)(s);return null===o||void 0===o||o(e),t}},t.fullyDereferenceLayout=async function(e,t,i,o,n){var r;const c=await(0,s.dereferenceJsonReferences)(e.layoutFile,t,null!==(r=e.basePath)&&void 0!==r?r:"",i),u=o(c);if(!u)throw new ReferenceError("Resolved layout no longer is valid against schema");const d=a.TakxInternalConstants.SchemaAlternateNames.get(u),p=d?a.TakxInternalConstants.LayoutConverters.get(d):void 0;if(!p)throw new Error("Unable to find a layout converter for the schema version "+u);const h=p.convert(c),f=Object.assign(Object.assign({},e),{layoutFile:h});let y=f;return n&&(y=(0,l.transformAssetsInLayoutFile)(f,n)),y},t.getLoadableTouchBundles=h,t.isTouchSupportedForTitle=function(e,t,i,o){return!!(i||e||h(t,void 0,void 0,o).length>0)},t.doesLayoutUseSensors=function(e){var t,i;if(null===(t=e.layoutFile.content.sensors)||void 0===t?void 0:t.length)return!0;if(e.layoutFile.content.layers)for(const o of Object.keys(e.layoutFile.content.layers)){if(null===(i=e.layoutFile.content.layers[o].sensors)||void 0===i?void 0:i.length)return!0}return!1}},DOrc:function(e,t,i){"use strict";i.d(t,"a",(function(){return o}));class o extends Event{constructor(e){super(o.type),this.state=e}}o.type="stateChanged"},DjZ3:function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.TAKContainer=t.TAKActionNames=void 0;const o=i("s6Xb"),n=i("2ZOr"),r=i("KhT9"),a=i("Hs6J"),s=i("ViUo"),c=i("90Yz"),l=i("TSub"),u=i("YFNc"),d=i("BG1S"),p=i("S2AS"),h=i("Ledy");var f;!function(e){e.ToggleErgoEdit="TAKAction.ToggleErgoEdit",e.UpdateUseErgoEditSymmetry="TAKAction.UpdateUseErgoEditSymmetry",e.ResetSettingsForCurrentScope="TAKAction.ResetSettingsForCurrentScope",e.UpdateSensorsSettingsForCurrentScope="TAKAction.UpdateSensorsSettingsForCurrentScope",e.UpdateGyroSensitivityForCurrentScope="TAKAction.UpdateGyroSensitivityForCurrentScope",e.UpdateGyroEnabledForCurrentScope="TAKAction.UpdateGyroEnabledForCurrentScope",e.UpdateOpacityMultiplierForCurrentScope="TAKAction.UpdateOpacityMultiplierForCurrentScope",e.SetStylingOverrides="TAKAction.SetStylingOverrides",e.UpdateRuntimeCallbacks="TAKAction.UpdateRuntimeCallbacks",e.UpdateRuntimeOptions="TAKAction.UpdateRuntimeOptions",e.SetLayoutOverride="TAKAction.SetLayoutOverride",e.ChangeTouchControls="TAKAction.ChangeTouchControls",e.ChangeLayout="TAKAction.ChangeLayout"}(f=t.TAKActionNames||(t.TAKActionNames={}));t.TAKContainer=class{constructor(e){this.setTouchState=(e,t=h.TouchEventTarget.All)=>{this.touchManager.handlePointerEvent(e.map(e=>Object.assign(e,{touchTarget:t})))},this.openAppMenu=()=>{this.rootContainer.get(n.CONFIG_TYPES.TAKBridge).onAppMenu()},this.getScreenObservable=()=>this.screenDisplay.screenProps$,this.setScreenProps=e=>this.screenDisplay.setScreenProps(e),this.updateTAKBridge=e=>Object.assign(this.rootContainer.get(n.CONFIG_TYPES.TAKBridge),e);const{takBridge:t,screenPropsBase:i,settingsProvider:u,rumble:f,sensorStore:y,runtimeOptions:g,runtimeCallbacks:m,logger:v}=e;this.rootContainer=new o.Container,this.rootContainer.bind(n.CONSTANT_TYPES.RootContainer).toConstantValue(this.rootContainer),this.rootContainer.bind(n.CONFIG_TYPES.TAKBridge).toConstantValue(t),this.rootContainer.bind(n.CONFIG_TYPES.ScreenPropsBase).toConstantValue(i),this.rootContainer.bind(n.SERVICE_TYPES.SettingsProvider).toConstantValue(u),this.rootContainer.bind(n.SERVICE_TYPES.Rumble).toConstantValue(f),this.rootContainer.bind(n.SERVICE_TYPES.SensorStore).toConstantValue(y),this.rootContainer.bind(n.SERVICE_TYPES.Logger).toConstantValue(v),this.rootContainer.bind(n.SERVICE_TYPES.Settings).to(r.Settings).inSingletonScope(),this.rootContainer.bind(n.SERVICE_TYPES.InputProvider).to(c.InputProvider).inSingletonScope(),this.rootContainer.bind(n.SERVICE_TYPES.TouchManager).to(d.TouchManager).inSingletonScope(),this.rootContainer.bind(n.SERVICE_TYPES.ScreenDisplay).to(l.ScreenDisplay).inSingletonScope(),this.rootContainer.bind(n.SERVICE_TYPES.UserInterface).to(p.UserInterface).inSingletonScope(),this.rootContainer.bind(n.SERVICE_TYPES.ControlRepository).to(a.ControlRepository).inSingletonScope(),this.rootContainer.bind(n.SERVICE_TYPES.LayoutController).to(r.LayoutController).inSingletonScope(),this.rootContainer.bind(n.SERVICE_TYPES.LayerManager).to(r.LayerManager).inSingletonScope(),this.rootContainer.bind(n.SERVICE_TYPES.RuntimeOptions).to(r.RuntimeOptionsService).inSingletonScope(),this.rootContainer.bind(n.SERVICE_TYPES.BundleLoader).to(r.BundleLoader).inSingletonScope(),this.rootContainer.bind(n.SERVICE_TYPES.BundleProcessor).to(r.BundleProcessor).inSingletonScope(),this.rootContainer.bind(n.SERVICE_TYPES.LayoutCoordinator).to(r.LayoutCoordinator).inSingletonScope(),this.rootContainer.bind(n.SERVICE_TYPES.HitTester).to(s.HitTester).inSingletonScope(),this.layoutController=this.rootContainer.get(n.SERVICE_TYPES.LayoutController),this.touchManager=this.rootContainer.get(n.SERVICE_TYPES.TouchManager),this.screenDisplay=this.rootContainer.get(n.SERVICE_TYPES.ScreenDisplay),this.userInterface=this.rootContainer.get(n.SERVICE_TYPES.UserInterface),this.settings=this.rootContainer.get(n.SERVICE_TYPES.Settings),this.runtimeOptionsService=this.rootContainer.get(n.SERVICE_TYPES.RuntimeOptions),this.bundleProcessor=this.rootContainer.get(n.SERVICE_TYPES.BundleProcessor),this.layoutCoordinator=this.rootContainer.get(n.SERVICE_TYPES.LayoutCoordinator),this.hitTester=this.rootContainer.get(n.SERVICE_TYPES.HitTester),this.inputProvider=this.rootContainer.get(n.SERVICE_TYPES.InputProvider),this.overlayUIStream$=this.userInterface.getOverlayStream(),m&&this.runtimeOptionsService.updateCallbacks(m),g&&this.runtimeOptionsService.updateOptions(g)}getControlsStream(){return this.layoutController.getRenderControlsStream()}dispatchAction(e){switch(e.action){case f.ToggleErgoEdit:this.userInterface.toggleIsErgoEditActive();break;case f.UpdateUseErgoEditSymmetry:this.settings.updateSettings({action:u.SettingsUpdateActionNames.UpdateUseErgoEditSymmetry,useErgoEditSymmetry:e.useErgoEditSymmetry}),this.settings.commitSettings();break;case f.ResetSettingsForCurrentScope:this.settings.updateSettings({action:u.SettingsUpdateActionNames.ResetSettingsForScope,scope:this.userInterface.getCurrentScope()}),this.settings.commitSettings();break;case f.UpdateSensorsSettingsForCurrentScope:this.settings.updateSettings({action:u.SettingsUpdateActionNames.UpdateSensorsForScope,scope:this.userInterface.getCurrentScope(),gyro:e.gyro,accelerometer:e.accelerometer}),this.settings.commitSettings();break;case f.UpdateGyroEnabledForCurrentScope:this.settings.updateSettings({action:u.SettingsUpdateActionNames.UpdateGyroEnabledForScope,scope:this.userInterface.getCurrentScope(),enabled:e.enabled}),this.settings.commitSettings();break;case f.UpdateGyroSensitivityForCurrentScope:this.settings.updateSettings({action:u.SettingsUpdateActionNames.UpdateGyroSensitivityForScope,scope:this.userInterface.getCurrentScope(),sensitivity:e.sensitivity}),this.settings.commitSettings();break;case f.UpdateOpacityMultiplierForCurrentScope:this.settings.updateSettings({action:u.SettingsUpdateActionNames.UpdateOpacityMultiplierForScope,scope:this.userInterface.getCurrentScope(),value:e.opacity}),this.settings.commitSettings();break;case f.SetStylingOverrides:this.userInterface.setStylingOverrides(e.overrides);break;case f.UpdateRuntimeCallbacks:this.runtimeOptionsService.updateCallbacks(e.callbacks);break;case f.UpdateRuntimeOptions:this.runtimeOptionsService.updateOptions(e.options);break;case f.SetLayoutOverride:this.layoutCoordinator.setLayoutOverride(e.layout);break;case f.ChangeTouchControls:this.bundleProcessor.changeTouchControls(e.touchControlsChange),this.layoutCoordinator.changeTouchControls(e.touchControlsChange);break;case f.ChangeLayout:this.layoutCoordinator.onLayoutChange(e.layoutChange)}}unmount(){this.layoutController.unmount(),this.bundleProcessor.unmount(),this.hitTester.unmount(),this.inputProvider.unmount()}}},EArA:function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.copyThrottleRenderProps=t.areThrottleRenderPropsEqual=t.copyThrottleIndicatorRenderProps=t.areThrottleIndicatorRenderPropsEqual=t.copyThrottleIndicatorStyleRenderProps=t.areThrottleIndicatorStyleRenderPropsEqual=t.copyThrottleAxesRenderProps=t.areThrottleAxesRenderPropsEqual=t.copyThrottleAxesStyleRenderPropsEqual=t.areThrottleAxesStyleRenderPropsEqual=t.copyThrottleAxisStyleRenderProps=t.areThrottleAxisStyleRenderPropsEqual=t.copyThrottleAxisCapStyleRenderProps=t.areThrottleAxisCapStyleRenderPropsEqual=t.copyThrottleColorAxisCapStyleRenderProps=void 0;const o=i("V2pq"),n=i("j0qc"),r=i("SqAV"),a=i("gfMA");function s(e){return{opacity:e.opacity,type:e.type,value:(0,o.copyColor)(e.value)}}function c(e,t){return e===t||function(e,t){return!!(e===t||e&&t&&e.type===t.type&&(0,o.areColorsEqual)(e.value,t.value)&&e.opacity===t.opacity)}(e,t)}function l(e){return s(e)}function u(e,t){return!!(e===t||e&&t&&(0,r.areStrokeRenderPropsEqual)(e.stroke,t.stroke)&&c(e.cap,t.cap))}function d(e){return{cap:l(e.cap),stroke:(0,r.copyStrokeRenderProps)(e.stroke)}}function p(e,t){return!!(e===t||e&&t&&u(e.axisUp,t.axisUp)&&u(e.axisDown,t.axisDown))}function h(e){return{axisDown:d(e.axisDown),axisUp:d(e.axisUp)}}function f(e,t){return!!(e===t||e&&t&&e.x===t.x&&e.y===t.y&&e.width===t.width&&e.height===t.height&&e.leftSided===t.leftSided&&p(e.styleProps,t.styleProps))}function y(e){return{height:e.height,leftSided:e.leftSided,styleProps:h(e.styleProps),width:e.width,x:e.x,y:e.y}}function g(e,t){return!!(e===t||e&&t&&e.opacity===t.opacity&&(0,o.areColorsEqual)(e.color,t.color))}function m(e){return{color:(0,o.copyColor)(e.color),opacity:e.opacity}}function v(e,t){return!!(e===t||e&&t&&e.x===t.x&&e.y===t.y&&e.width===t.width&&e.height===t.height&&g(e.styleProps,t.styleProps))}function b(e){return{height:e.height,styleProps:m(e.styleProps),width:e.width,x:e.x,y:e.y}}t.copyThrottleColorAxisCapStyleRenderProps=s,t.areThrottleAxisCapStyleRenderPropsEqual=c,t.copyThrottleAxisCapStyleRenderProps=l,t.areThrottleAxisStyleRenderPropsEqual=u,t.copyThrottleAxisStyleRenderProps=d,t.areThrottleAxesStyleRenderPropsEqual=p,t.copyThrottleAxesStyleRenderPropsEqual=h,t.areThrottleAxesRenderPropsEqual=f,t.copyThrottleAxesRenderProps=y,t.areThrottleIndicatorStyleRenderPropsEqual=g,t.copyThrottleIndicatorStyleRenderProps=m,t.areThrottleIndicatorRenderPropsEqual=v,t.copyThrottleIndicatorRenderProps=b,t.areThrottleRenderPropsEqual=function(e,t){return!!(e===t||e&&t&&(0,a.areRenderControlRenderPropsEqual)(e,t)&&f(e.axes,t.axes)&&v(e.indicator,t.indicator)&&(0,n.areKnobRenderPropsEqual)(e.knob,t.knob))},t.copyThrottleRenderProps=function(e){return Object.assign(Object.assign({},(0,a.copyRenderControlRenderProps)(e)),{type:e.type,axes:y(e.axes),indicator:b(e.indicator),knob:(0,n.copyThrottleKnobRenderProps)(e.knob)})}},EQnm:function(e,t,i){"use strict";i.r(t),i.d(t,"decode",(function(){return s})),i.d(t,"encode",(function(){return a}));for(var o="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789%2b/index.html",n="undefined"===typeof Uint8Array?[]:new Uint8Array(256),r=0;r<o.length;r++)n[o.charCodeAt(r)]=r;var a=function(e){var t,i=new Uint8Array(e),n=i.length,r="";for(t=0;t<n;t+=3)r+=o[i[t]>>2],r+=o[(3&i[t])<<4|i[t+1]>>4],r+=o[(15&i[t+1])<<2|i[t+2]>>6],r+=o[63&i[t+2]];return n%3===2?r=r.substring(0,r.length-1)+"=":n%3===1&&(r=r.substring(0,r.length-2)+"=="),r},s=function(e){var t,i,o,r,a,s=.75*e.length,c=e.length,l=0;"="===e[e.length-1]&&(s--,"="===e[e.length-2]&&s--);var u=new ArrayBuffer(s),d=new Uint8Array(u);for(t=0;t<c;t+=4)i=n[e.charCodeAt(t)],o=n[e.charCodeAt(t+1)],r=n[e.charCodeAt(t+2)],a=n[e.charCodeAt(t+3)],d[l++]=i<<2|o>>4,d[l++]=(15&o)<<4|r>>2,d[l++]=(3&r)<<6|63&a;return u}},EToa:function(e,t,i){"use strict";function o(e,t){return!(e!==t&&(e.opacityMultiplier.animationEnergy!==t.opacityMultiplier.animationEnergy||e.opacityMultiplier.acceptedRange.minimum!==t.opacityMultiplier.acceptedRange.minimum||e.opacityMultiplier.acceptedRange.maximum!==t.opacityMultiplier.acceptedRange.maximum))}function n(e,t){return!(e!==t&&(e.adjustors.opacity.energy!==t.adjustors.opacity.energy||e.adjustors.opacity.value!==t.adjustors.opacity.value))}Object.defineProperty(t,"__esModule",{value:!0}),t.applyPartialStylingConfiguration=t.areStylingConfigurationsEqual=t.areContainersStylingConfigurationsEqual=t.areControlsStylingConfigurationsEqual=void 0,t.areControlsStylingConfigurationsEqual=o,t.areContainersStylingConfigurationsEqual=n,t.areStylingConfigurationsEqual=function(e,t){return!!(e===t||o(e.controls,t.controls)&&n(e.containers,t.containers))},t.applyPartialStylingConfiguration=function(e,t){var i,o,n,r,a,s;return{controls:Object.assign(Object.assign(Object.assign({},e.controls),t.controls),{opacityMultiplier:Object.assign(Object.assign(Object.assign({},e.controls.opacityMultiplier),null===(i=null===t||void 0===t?void 0:t.controls)||void 0===i?void 0:i.opacityMultiplier),{acceptedRange:Object.assign(Object.assign({},e.controls.opacityMultiplier.acceptedRange),null===(n=null===(o=t.controls)||void 0===o?void 0:o.opacityMultiplier)||void 0===n?void 0:n.acceptedRange)})}),containers:Object.assign(Object.assign(Object.assign({},e.containers),t.containers),{adjustors:Object.assign(Object.assign(Object.assign({},e.containers.adjustors),null===(r=t.containers)||void 0===r?void 0:r.adjustors),{opacity:Object.assign(Object.assign({},e.containers.adjustors.opacity),null===(s=null===(a=t.containers)||void 0===a?void 0:a.adjustors)||void 0===s?void 0:s.opacity)})})}}},Fr07:function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getDefaultButtonPullIndicator=t.getDefaultButtonFaceImage=t.getDefaultButtonBackground=t.DefaultButtonAnimationEnergy=t.DefaultButtonOpacity=void 0;const o=i("Zd/9"),n=i("kU1o"),r=i("PFUz"),a=i("SqAV"),s=i("3/FZ");t.DefaultButtonOpacity=1,t.DefaultButtonAnimationEnergy=n.AnimationEnergy.Instant,t.getDefaultButtonBackground=function(e){return{type:"color",opacity:1,value:(0,s.getBrightenedActionColorRgb)(e)}},t.getDefaultButtonFaceImage=function(e){return{type:"icon",value:e,scale:1,color:{r:1,g:1,b:1,a:1,string:o.WHITE_ALPHA_100},displayShadow:!0,label:{type:r.FaceImageLabelRenderType.Default,value:e,fillType:r.FaceImageLabelRenderFillType.None,color:(0,s.getActionColorRgb)(e),offset:{x:0,y:0}},animationEnergy:n.AnimationEnergy.Instant,opacity:1,offset:{x:0,y:0}}},t.getDefaultButtonPullIndicator=function(e,t,i){const o=e/2;return{type:a.StrokeType.Dashed,opacity:1,radius:e+o,weight:o,color:(0,s.getActionColorRgb)(i||t)}}},GzZA:function(e,t,i){"use strict";e.exports=function(e,t){t||(t={}),"function"===typeof t&&(t={cmp:t});var i,o="boolean"===typeof t.cycles&&t.cycles,n=t.cmp&&(i=t.cmp,function(e){return function(t,o){var n={key:t,value:e[t]},r={key:o,value:e[o]};return i(n,r)}}),r=[];return function e(t){if(t&&t.toJSON&&"function"===typeof t.toJSON&&(t=t.toJSON()),void 0!==t){if("number"==typeof t)return isFinite(t)?""+t:"null";if("object"!==typeof t)return JSON.stringify(t);var i,a;if(Array.isArray(t)){for(a="[",i=0;i<t.length;i++)i&&(a+=","),a+=e(t[i])||"null";return a+"]"}if(null===t)return"null";if(-1!==r.indexOf(t)){if(o)return JSON.stringify("__cycle__");throw new TypeError("Converting circular structure to JSON")}var s=r.push(t)-1,c=Object.keys(t).sort(n&&n(t));for(a="",i=0;i<c.length;i++){var l=c[i],u=e(t[l]);u&&(a&&(a+=","),a+=JSON.stringify(l)+":"+u)}return r.splice(s,1),"{"+a+"}"}}(e)}},H6Pt:function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ButtonState=void 0,function(e){e[e.Hidden=0]="Hidden",e[e.Disabled=1]="Disabled",e[e.Idle=2]="Idle",e[e.Toggled=3]="Toggled",e[e.Activated=4]="Activated",e[e.Pulled=5]="Pulled"}(t.ButtonState||(t.ButtonState={}))},HHqe:function(e,t,i){"use strict";var o=this&&this.__decorate||function(e,t,i,o){var n,r=arguments.length,a=r<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,i):o;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)a=Reflect.decorate(e,t,i,o);else for(var s=e.length-1;s>=0;s--)(n=e[s])&&(a=(r<3?n(a):r>3?n(t,i,a):n(t,i))||a);return r>3&&a&&Object.defineProperty(t,i,a),a},n=this&&this.__metadata||function(e,t){if("object"===typeof Reflect&&"function"===typeof Reflect.metadata)return Reflect.metadata(e,t)},r=this&&this.__param||function(e,t){return function(i,o){t(i,o,e)}};Object.defineProperty(t,"__esModule",{value:!0}),t.ThrottleControl=void 0;const a=i("s6Xb"),s=i("2ZOr"),c=i("9XOD"),l=i("g5Cp"),u=i("cvzu"),d=i("r7Ei"),p=i("l1ss");function h(e){return e>0?p.ThrottleState.ActivatedUp:e<0?p.ThrottleState.ActivatedDown:p.ThrottleState.Activated}let f=class extends u.LatestPointerRenderControl{constructor(e,t){var i;super({value:0,interactionState:!1===(i=e.getProps()).visible?p.ThrottleState.Hidden:!1===i.enabled?p.ThrottleState.Disabled:p.ThrottleState.Idle},e,t),this.nonVisualThrottleState=p.ThrottleState.Idle,this.customCollider=e=>{const{x:t,y:i,size:o}=this.model.getProps(),n=this.getKnobPosition();return(0,c.radialCollider)(e,{x:t,y:i-n},o/2)};const o=this.model.getProps(),n=this.getState();this.renderPropertyManager=new d.ThrottleRenderProppertyManager(o,n),this.nonVisualThrottleState=!1===o.visible?p.ThrottleState.Hidden:p.ThrottleState.Idle}onPropsChangedInternal([e,t]){const i=this.getState();e&&(this.nonVisualThrottleState!==p.ThrottleState.IdleUp&&this.nonVisualThrottleState!==p.ThrottleState.ActivatedUp||e.axisUp===t.axisUp||this.model.resetAnalogInput(),this.nonVisualThrottleState===p.ThrottleState.ActivatedDown&&e.axisDown!==t.axisDown&&this.model.resetAnalogInput());const o=!1!==t.enabled,n=!1!==t.visible,r=!0===t.sticky;if(n?o?n&&i.interactionState===p.ThrottleState.Hidden?(this.nonVisualThrottleState=p.ThrottleState.Idle,this.setState({interactionState:o?this.nonVisualThrottleState:p.ThrottleState.Disabled,value:0})):o&&i.interactionState===p.ThrottleState.Disabled&&this.setState({interactionState:this.nonVisualThrottleState,value:i.value}):(this.nonVisualThrottleState=this.nonVisualThrottleState===p.ThrottleState.Hidden?p.ThrottleState.Idle:this.nonVisualThrottleState,i.interactionState!==p.ThrottleState.Disabled&&this.setState({interactionState:p.ThrottleState.Disabled,value:i.value})):(this.nonVisualThrottleState=p.ThrottleState.Hidden,i.interactionState!==p.ThrottleState.Hidden&&this.setState({interactionState:p.ThrottleState.Hidden,value:0})),!r&&this.nonVisualThrottleState===p.ThrottleState.IdleUp){const{interactionState:e}=this.getState();this.nonVisualThrottleState=p.ThrottleState.Idle,this.setState({interactionState:e!==p.ThrottleState.Disabled?this.nonVisualThrottleState:e,value:0})}}onStateChangedInternal(e){const{value:t}=e,{axisDown:i,axisUp:o}=this.model.getProps(),n=(0,l.clamp)(t,-1,1);switch(this.nonVisualThrottleState){case p.ThrottleState.ActivatedUp:case p.ThrottleState.IdleUp:return void this.model.setAnalogInput({[i]:0,[o]:n});case p.ThrottleState.ActivatedDown:return void this.model.setAnalogInput({[o]:0,[i]:-n});default:return void this.model.resetAnalogInput()}}onPointerStart(e){const{interactionState:t,value:i}=this.getState();switch(this.nonVisualThrottleState){case p.ThrottleState.Idle:case p.ThrottleState.IdleUp:case p.ThrottleState.Activated:case p.ThrottleState.ActivatedUp:case p.ThrottleState.ActivatedDown:{const o=this.calculateThrottleValue(e,i);return this.nonVisualThrottleState=h(o),this.setState({interactionState:t!==p.ThrottleState.Disabled?this.nonVisualThrottleState:t,value:o}),!0}default:return!1}}onPointerMove(e){const{interactionState:t,value:i}=this.getState();switch(this.nonVisualThrottleState){case p.ThrottleState.Activated:case p.ThrottleState.ActivatedUp:case p.ThrottleState.ActivatedDown:{const o=this.calculateThrottleValue(e,i);return this.nonVisualThrottleState=h(o),this.setState({value:o,interactionState:t!==p.ThrottleState.Disabled?this.nonVisualThrottleState:t}),!0}default:return!1}}onPointerEnd(){const{interactionState:e,value:t}=this.getState(),{sticky:i}=this.model.getProps();switch(this.nonVisualThrottleState){case p.ThrottleState.ActivatedUp:return this.nonVisualThrottleState=i?p.ThrottleState.IdleUp:p.ThrottleState.Idle,this.setState({value:i?(0,l.clamp)(t,-1,1):0,interactionState:e!==p.ThrottleState.Disabled?this.nonVisualThrottleState:e}),!0;case p.ThrottleState.Activated:case p.ThrottleState.ActivatedDown:return this.nonVisualThrottleState=p.ThrottleState.Idle,this.setState({value:0,interactionState:e!==p.ThrottleState.Disabled?this.nonVisualThrottleState:e}),!0;default:return!1}}getIsStateUndimmable({interactionState:e}){return e===p.ThrottleState.Activated||e===p.ThrottleState.ActivatedDown||e===p.ThrottleState.ActivatedUp}getKnobPosition(){const{colliderRadius:e}=this.model.getProps(),{value:t}=this.getState();return t*e}calculateThrottleValue(e,t){const{relative:i=!0,colliderRadius:o,y:n}=this.model.getProps();return i?t-e.lastPositionDelta.y/(1*o):(n-e.position.y)/(1*o)}};f=o([(0,a.injectable)(),r(0,(0,a.inject)(s.SERVICE_TYPES.VirtualControl)),r(1,(0,a.inject)(s.SERVICE_TYPES.UserInterface)),n("design:paramtypes",[Object,Function])],f),t.ThrottleControl=f},Hi9g:function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.PooledList=void 0;t.PooledList=class{constructor(e){this._nodes=[];for(let t=0;t<e;t++)this._nodes.push({});this._freeNodeCount=e}get size(){return this.capacity-this._freeNodeCount}get capacity(){return this._nodes.length}get isEmpty(){return 0===this.size}tryPushFront(e){const t=this.getFreeNode(e);return!!t&&(this._headNode?(this._headNode.previous=t,t.next=this._headNode,this._headNode=t):(this._headNode=t,this._tailNode=t),!0)}tryPushBack(e){const t=this.getFreeNode(e);return!!t&&(this._tailNode?(this._tailNode.next=t,t.previous=this._tailNode,this._tailNode=t):(this._headNode=t,this._tailNode=t),!0)}popFront(){const e=this._headNode;if(e)return this.removeNode(e)}popBack(){const e=this._tailNode;if(e)return this.removeNode(e)}peekFront(){var e;return null===(e=this._headNode)||void 0===e?void 0:e.value}peekBack(){var e;return null===(e=this._tailNode)||void 0===e?void 0:e.value}forEach(e){let t=this._headNode;for(;t;){const i=t.value;i&&e(i),t=t.next}}clear(){let e=this._headNode;for(;e;){const t=e;e=t.next,t.value=void 0,t.next=void 0,t.previous=void 0}this._freeNodeCount=this._nodes.length,this._headNode=void 0,this._tailNode=void 0}removeFirstIf(e){return this.removeIf(e,!0)}removeLastIf(e){return this.removeIf(e,!1)}removeNode(e){e.previous&&(e.previous.next=e.next),e.next&&(e.next.previous=e.previous),e===this._headNode&&(this._headNode=e.next),e===this._tailNode&&(this._tailNode=e.previous);const t=e.value;return this.returnFreeNode(e),t}getFreeNode(e){if(this._freeNodeCount>0){this._freeNodeCount--;const t=this._nodes[this._freeNodeCount];return t.value=e,t}{const t={value:e};return this._nodes.push(t),t}}returnFreeNode(e){e.next=void 0,e.previous=void 0,e.value=void 0,this._nodes[this._freeNodeCount]=e,this._freeNodeCount++}removeIf(e,t){let i=t?this._headNode:this._tailNode;for(;i;){if(i.value&&e(i.value))return this.removeNode(i);i=t?i.next:i.previous}}}},"Hj/m":function(e,t,i){"use strict";e.exports=function(e,t,i){var o=" ",n=e.level,r=e.dataLevel,a=e.schema[t],s=e.schemaPath+e.util.getProperty(t),c=e.errSchemaPath+"/"+t,l=!e.opts.allErrors,u="data"+(r||""),d="valid"+n,p=e.opts.$data&&a&&a.$data;p&&(o+=" var schema"+n+" = "+e.util.getData(a.$data,r,e.dataPathArr)+"; ");var h="schema"+n;if(!p)if(a.length<e.opts.loopRequired&&e.schema.properties&&Object.keys(e.schema.properties).length){var f=[],y=a;if(y)for(var g,m=-1,v=y.length-1;m<v;){g=y[m+=1];var b=e.schema.properties[g];b&&(e.opts.strictKeywords?"object"==typeof b&&Object.keys(b).length>0||!1===b:e.util.schemaHasRules(b,e.RULES.all))||(f[f.length]=g)}}else f=a;if(p||f.length){var S=e.errorPath,k=p||f.length>=e.opts.loopRequired,P=e.opts.ownProperties;if(l)if(o+=" var missing"+n+"; ",k){p||(o+=" var "+h+" = validate.schema"+s+"; ");var w="' + "+(E="schema"+n+"["+(T="i"+n)+"]")+" + '";e.opts._errorDataPathProperty&&(e.errorPath=e.util.getPathExpr(S,E,e.opts.jsonPointers)),o+=" var "+d+" = true; ",p&&(o+=" if (schema"+n+" === undefined) "+d+" = true; else if (!Array.isArray(schema"+n+")) "+d+" = false; else {"),o+=" for (var "+T+" = 0; "+T+" < "+h+".length; "+T+"++) { "+d+" = "+u+"["+h+"["+T+"]] !== undefined ",P&&(o+=" &&   Object.prototype.hasOwnProperty.call("+u+", "+h+"["+T+"]) "),o+="; if (!"+d+") break; } ",p&&(o+="  }  "),o+="  if (!"+d+") {   ",(_=_||[]).push(o),o="",!1!==e.createErrors?(o+=" { keyword: 'required' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(c)+" , params: { missingProperty: '"+w+"' } ",!1!==e.opts.messages&&(o+=" , message: '",e.opts._errorDataPathProperty?o+="is a required property":o+="should have required property \\'"+w+"\\'",o+="' "),e.opts.verbose&&(o+=" , schema: validate.schema"+s+" , parentSchema: validate.schema"+e.schemaPath+" , data: "+u+" "),o+=" } "):o+=" {} ";var A=o;o=_.pop(),!e.compositeRule&&l?e.async?o+=" throw new ValidationError(["+A+"]); ":o+=" validate.errors = ["+A+"]; return false; ":o+=" var err = "+A+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",o+=" } else { "}else{o+=" if ( ";var I=f;if(I)for(var T=-1,C=I.length-1;T<C;){R=I[T+=1],T&&(o+=" || "),o+=" ( ( "+(j=u+(M=e.util.getProperty(R)))+" === undefined ",P&&(o+=" || ! Object.prototype.hasOwnProperty.call("+u+", '"+e.util.escapeQuotes(R)+"') "),o+=") && (missing"+n+" = "+e.util.toQuotedString(e.opts.jsonPointers?R:M)+") ) "}o+=") {  ";var _;w="' + "+(E="missing"+n)+" + '";e.opts._errorDataPathProperty&&(e.errorPath=e.opts.jsonPointers?e.util.getPathExpr(S,E,!0):S+" + "+E),(_=_||[]).push(o),o="",!1!==e.createErrors?(o+=" { keyword: 'required' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(c)+" , params: { missingProperty: '"+w+"' } ",!1!==e.opts.messages&&(o+=" , message: '",e.opts._errorDataPathProperty?o+="is a required property":o+="should have required property \\'"+w+"\\'",o+="' "),e.opts.verbose&&(o+=" , schema: validate.schema"+s+" , parentSchema: validate.schema"+e.schemaPath+" , data: "+u+" "),o+=" } "):o+=" {} ";A=o;o=_.pop(),!e.compositeRule&&l?e.async?o+=" throw new ValidationError(["+A+"]); ":o+=" validate.errors = ["+A+"]; return false; ":o+=" var err = "+A+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",o+=" } else { "}else if(k){p||(o+=" var "+h+" = validate.schema"+s+"; ");var E;w="' + "+(E="schema"+n+"["+(T="i"+n)+"]")+" + '";e.opts._errorDataPathProperty&&(e.errorPath=e.util.getPathExpr(S,E,e.opts.jsonPointers)),p&&(o+=" if ("+h+" && !Array.isArray("+h+")) {  var err =   ",!1!==e.createErrors?(o+=" { keyword: 'required' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(c)+" , params: { missingProperty: '"+w+"' } ",!1!==e.opts.messages&&(o+=" , message: '",e.opts._errorDataPathProperty?o+="is a required property":o+="should have required property \\'"+w+"\\'",o+="' "),e.opts.verbose&&(o+=" , schema: validate.schema"+s+" , parentSchema: validate.schema"+e.schemaPath+" , data: "+u+" "),o+=" } "):o+=" {} ",o+=";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; } else if ("+h+" !== undefined) { "),o+=" for (var "+T+" = 0; "+T+" < "+h+".length; "+T+"++) { if ("+u+"["+h+"["+T+"]] === undefined ",P&&(o+=" || ! Object.prototype.hasOwnProperty.call("+u+", "+h+"["+T+"]) "),o+=") {  var err =   ",!1!==e.createErrors?(o+=" { keyword: 'required' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(c)+" , params: { missingProperty: '"+w+"' } ",!1!==e.opts.messages&&(o+=" , message: '",e.opts._errorDataPathProperty?o+="is a required property":o+="should have required property \\'"+w+"\\'",o+="' "),e.opts.verbose&&(o+=" , schema: validate.schema"+s+" , parentSchema: validate.schema"+e.schemaPath+" , data: "+u+" "),o+=" } "):o+=" {} ",o+=";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; } } ",p&&(o+="  }  ")}else{var x=f;if(x)for(var R,O=-1,D=x.length-1;O<D;){R=x[O+=1];var M=e.util.getProperty(R),j=(w=e.util.escapeQuotes(R),u+M);e.opts._errorDataPathProperty&&(e.errorPath=e.util.getPath(S,R,e.opts.jsonPointers)),o+=" if ( "+j+" === undefined ",P&&(o+=" || ! Object.prototype.hasOwnProperty.call("+u+", '"+e.util.escapeQuotes(R)+"') "),o+=") {  var err =   ",!1!==e.createErrors?(o+=" { keyword: 'required' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(c)+" , params: { missingProperty: '"+w+"' } ",!1!==e.opts.messages&&(o+=" , message: '",e.opts._errorDataPathProperty?o+="is a required property":o+="should have required property \\'"+w+"\\'",o+="' "),e.opts.verbose&&(o+=" , schema: validate.schema"+s+" , parentSchema: validate.schema"+e.schemaPath+" , data: "+u+" "),o+=" } "):o+=" {} ",o+=";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; } "}}e.errorPath=S}else l&&(o+=" if (true) {");return o}},Hs6J:function(e,t,i){"use strict";var o=this&&this.__decorate||function(e,t,i,o){var n,r=arguments.length,a=r<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,i):o;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)a=Reflect.decorate(e,t,i,o);else for(var s=e.length-1;s>=0;s--)(n=e[s])&&(a=(r<3?n(a):r>3?n(t,i,a):n(t,i))||a);return r>3&&a&&Object.defineProperty(t,i,a),a},n=this&&this.__metadata||function(e,t){if("object"===typeof Reflect&&"function"===typeof Reflect.metadata)return Reflect.metadata(e,t)};Object.defineProperty(t,"__esModule",{value:!0}),t.ControlRepository=void 0;const r=i("s6Xb"),a=i("OPhC"),s=i("XnAj"),c=i("SU0a"),l=i("/d9p"),u=i("N3jH"),d=i("7oZD"),p=i("7VBh"),h=i("HHqe"),f=i("rDai"),y=i("TACl"),g=i("gJ6f");let m=class{constructor(){this.controlMap=new Map,this.initializeBaseControls()}get(e){return this.controlMap.get(e)}bindBundle(e){this.controlMap.get(e.classIdentifier)||this.controlMap.set(e.classIdentifier,e)}initializeBaseControls(){this.bindBundle({classIdentifier:g.ControlType.ArcadeButtons,controlClass:s.ArcadeButtonsControl}),this.bindBundle({classIdentifier:g.ControlType.DirectionalPad,controlClass:l.DirectionalPadControl}),this.bindBundle({classIdentifier:g.ControlType.Button,controlClass:c.ButtonControl}),this.bindBundle({classIdentifier:g.ControlType.Joystick,controlClass:p.JoystickControl}),this.bindBundle({classIdentifier:g.ControlType.Throttle,controlClass:h.ThrottleControl}),this.bindBundle({classIdentifier:g.ControlType.Touchpad,controlClass:y.TouchpadControl}),this.bindBundle({classIdentifier:g.ControlType.Accelerometer,controlClass:a.AccelerometerControl}),this.bindBundle({classIdentifier:g.ControlType.Gyroscope,controlClass:d.GyroscopeControl}),this.bindBundle({classIdentifier:g.ControlType.ErgoAdjustor,controlClass:u.ErgoAdjustorControl}),this.bindBundle({classIdentifier:g.ControlType.TouchForwarding,controlClass:f.TouchForwardingControl})}};m=o([(0,r.injectable)(),n("design:paramtypes",[])],m),t.ControlRepository=m},HyQB:function(e,t,i){"use strict";e.exports=function(e,t,i){var o=" ",n=e.level,r=e.dataLevel,a=e.schema[t],s=e.schemaPath+e.util.getProperty(t),c=e.errSchemaPath+"/"+t,l=!e.opts.allErrors,u="data"+(r||""),d="errs__"+n,p=e.util.copy(e),h="";p.level++;var f="valid"+p.level,y="key"+n,g="idx"+n,m=p.dataLevel=e.dataLevel+1,v="data"+m,b="dataProperties"+n,S=Object.keys(a||{}).filter(D),k=e.schema.patternProperties||{},P=Object.keys(k).filter(D),w=e.schema.additionalProperties,A=S.length||P.length,I=!1===w,T="object"==typeof w&&Object.keys(w).length,C=e.opts.removeAdditional,_=I||T||C,E=e.opts.ownProperties,x=e.baseId,R=e.schema.required;if(R&&(!e.opts.$data||!R.$data)&&R.length<e.opts.loopRequired)var O=e.util.toHash(R);function D(e){return"__proto__"!==e}if(o+="var "+d+" = errors;var "+f+" = true;",E&&(o+=" var "+b+" = undefined;"),_){if(o+=E?" "+b+" = "+b+" || Object.keys("+u+"); for (var "+g+"=0; "+g+"<"+b+".length; "+g+"++) { var "+y+" = "+b+"["+g+"]; ":" for (var "+y+" in "+u+") { ",A){if(o+=" var isAdditional"+n+" = !(false ",S.length)if(S.length>8)o+=" || validate.schema"+s+".hasOwnProperty("+y+") ";else{var M=S;if(M)for(var j=-1,$=M.length-1;j<$;)Y=M[j+=1],o+=" || "+y+" == "+e.util.toQuotedString(Y)+" "}if(P.length){var B=P;if(B)for(var L=-1,F=B.length-1;L<F;)re=B[L+=1],o+=" || "+e.usePattern(re)+".test("+y+") "}o+=" ); if (isAdditional"+n+") { "}if("all"==C)o+=" delete "+u+"["+y+"]; ";else{var N=e.errorPath,J="' + "+y+" + '";if(e.opts._errorDataPathProperty&&(e.errorPath=e.util.getPathExpr(e.errorPath,y,e.opts.jsonPointers)),I)if(C)o+=" delete "+u+"["+y+"]; ";else{o+=" "+f+" = false; ";var z=c;c=e.errSchemaPath+"/additionalProperties",(ie=ie||[]).push(o),o="",!1!==e.createErrors?(o+=" { keyword: 'additionalProperties' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(c)+" , params: { additionalProperty: '"+J+"' } ",!1!==e.opts.messages&&(o+=" , message: '",e.opts._errorDataPathProperty?o+="is an invalid additional property":o+="should NOT have additional properties",o+="' "),e.opts.verbose&&(o+=" , schema: false , parentSchema: validate.schema"+e.schemaPath+" , data: "+u+" "),o+=" } "):o+=" {} ";var U=o;o=ie.pop(),!e.compositeRule&&l?e.async?o+=" throw new ValidationError(["+U+"]); ":o+=" validate.errors = ["+U+"]; return false; ":o+=" var err = "+U+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",c=z,l&&(o+=" break; ")}else if(T)if("failing"==C){o+=" var "+d+" = errors;  ";var V=e.compositeRule;e.compositeRule=p.compositeRule=!0,p.schema=w,p.schemaPath=e.schemaPath+".additionalProperties",p.errSchemaPath=e.errSchemaPath+"/additionalProperties",p.errorPath=e.opts._errorDataPathProperty?e.errorPath:e.util.getPathExpr(e.errorPath,y,e.opts.jsonPointers);var K=u+"["+y+"]";p.dataPathArr[m]=y;var q=e.validate(p);p.baseId=x,e.util.varOccurences(q,v)<2?o+=" "+e.util.varReplace(q,v,K)+" ":o+=" var "+v+" = "+K+"; "+q+" ",o+=" if (!"+f+") { errors = "+d+"; if (validate.errors !== null) { if (errors) validate.errors.length = errors; else validate.errors = null; } delete "+u+"["+y+"]; }  ",e.compositeRule=p.compositeRule=V}else{p.schema=w,p.schemaPath=e.schemaPath+".additionalProperties",p.errSchemaPath=e.errSchemaPath+"/additionalProperties",p.errorPath=e.opts._errorDataPathProperty?e.errorPath:e.util.getPathExpr(e.errorPath,y,e.opts.jsonPointers);K=u+"["+y+"]";p.dataPathArr[m]=y;q=e.validate(p);p.baseId=x,e.util.varOccurences(q,v)<2?o+=" "+e.util.varReplace(q,v,K)+" ":o+=" var "+v+" = "+K+"; "+q+" ",l&&(o+=" if (!"+f+") break; ")}e.errorPath=N}A&&(o+=" } "),o+=" }  ",l&&(o+=" if ("+f+") { ",h+="}")}var H=e.opts.useDefaults&&!e.compositeRule;if(S.length){var W=S;if(W)for(var Y,G=-1,X=W.length-1;G<X;){var Z=a[Y=W[G+=1]];if(e.opts.strictKeywords?"object"==typeof Z&&Object.keys(Z).length>0||!1===Z:e.util.schemaHasRules(Z,e.RULES.all)){var Q=e.util.getProperty(Y),ee=(K=u+Q,H&&void 0!==Z.default);p.schema=Z,p.schemaPath=s+Q,p.errSchemaPath=c+"/"+e.util.escapeFragment(Y),p.errorPath=e.util.getPath(e.errorPath,Y,e.opts.jsonPointers),p.dataPathArr[m]=e.util.toQuotedString(Y);q=e.validate(p);if(p.baseId=x,e.util.varOccurences(q,v)<2){q=e.util.varReplace(q,v,K);var te=K}else{te=v;o+=" var "+v+" = "+K+"; "}if(ee)o+=" "+q+" ";else{if(O&&O[Y]){o+=" if ( "+te+" === undefined ",E&&(o+=" || ! Object.prototype.hasOwnProperty.call("+u+", '"+e.util.escapeQuotes(Y)+"') "),o+=") { "+f+" = false; ";N=e.errorPath,z=c;var ie,oe=e.util.escapeQuotes(Y);e.opts._errorDataPathProperty&&(e.errorPath=e.util.getPath(N,Y,e.opts.jsonPointers)),c=e.errSchemaPath+"/required",(ie=ie||[]).push(o),o="",!1!==e.createErrors?(o+=" { keyword: 'required' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(c)+" , params: { missingProperty: '"+oe+"' } ",!1!==e.opts.messages&&(o+=" , message: '",e.opts._errorDataPathProperty?o+="is a required property":o+="should have required property \\'"+oe+"\\'",o+="' "),e.opts.verbose&&(o+=" , schema: validate.schema"+s+" , parentSchema: validate.schema"+e.schemaPath+" , data: "+u+" "),o+=" } "):o+=" {} ";U=o;o=ie.pop(),!e.compositeRule&&l?e.async?o+=" throw new ValidationError(["+U+"]); ":o+=" validate.errors = ["+U+"]; return false; ":o+=" var err = "+U+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",c=z,e.errorPath=N,o+=" } else { "}else l?(o+=" if ( "+te+" === undefined ",E&&(o+=" || ! Object.prototype.hasOwnProperty.call("+u+", '"+e.util.escapeQuotes(Y)+"') "),o+=") { "+f+" = true; } else { "):(o+=" if ("+te+" !== undefined ",E&&(o+=" &&   Object.prototype.hasOwnProperty.call("+u+", '"+e.util.escapeQuotes(Y)+"') "),o+=" ) { ");o+=" "+q+" } "}}l&&(o+=" if ("+f+") { ",h+="}")}}if(P.length){var ne=P;if(ne)for(var re,ae=-1,se=ne.length-1;ae<se;){Z=k[re=ne[ae+=1]];if(e.opts.strictKeywords?"object"==typeof Z&&Object.keys(Z).length>0||!1===Z:e.util.schemaHasRules(Z,e.RULES.all)){p.schema=Z,p.schemaPath=e.schemaPath+".patternProperties"+e.util.getProperty(re),p.errSchemaPath=e.errSchemaPath+"/patternProperties/"+e.util.escapeFragment(re),o+=E?" "+b+" = "+b+" || Object.keys("+u+"); for (var "+g+"=0; "+g+"<"+b+".length; "+g+"++) { var "+y+" = "+b+"["+g+"]; ":" for (var "+y+" in "+u+") { ",o+=" if ("+e.usePattern(re)+".test("+y+")) { ",p.errorPath=e.util.getPathExpr(e.errorPath,y,e.opts.jsonPointers);K=u+"["+y+"]";p.dataPathArr[m]=y;q=e.validate(p);p.baseId=x,e.util.varOccurences(q,v)<2?o+=" "+e.util.varReplace(q,v,K)+" ":o+=" var "+v+" = "+K+"; "+q+" ",l&&(o+=" if (!"+f+") break; "),o+=" } ",l&&(o+=" else "+f+" = true; "),o+=" }  ",l&&(o+=" if ("+f+") { ",h+="}")}}}return l&&(o+=" "+h+" if ("+d+" == errors) {"),o}},I73t:function(e){e.exports=JSON.parse('{"$id":"https://raw.githubusercontent.com/microsoft/xbox-game-streaming-tools/main/touch-adaptation-kit/schemas/context/latest/context.json","$schema":"http://json-schema.org/draft-07/schema#","title":"JSON Schema for Touch Adaptation Bundle Context File","definitions":{"ContextDefinableType":{"description":"Set of types which can be used in the definitions section of a context file.","anyOf":[{"$ref":"../../layout/latest/layout.json#/definitions/LayoutDefinableType"},{"$ref":"#/definitions/StateType"},{"type":"array","items":{"$ref":"#/definitions/StateType"}}]},"StateType":{"description":"Set of types which can be used for state values","anyOf":[{"type":"string"},{"type":"boolean"},{"type":"integer"},{"type":"number"}]}},"type":"object","properties":{"$schema":{"type":"string"},"definitions":{"type":"object","description":"Definitions block that contains reusable components for layouts.","patternProperties":{"^(?!__proto__)[a-zA-Z0-9\\\\.\\\\-_]+$":{"$ref":"#/definitions/ContextDefinableType"}},"additionalProperties":false},"state":{"type":"object","description":"State block that contains the global state that forms a shared context that other layouts can reference.","patternProperties":{"^(?!__proto__)[a-zA-Z0-9\\\\.\\\\-_]+$":{"$ref":"#/definitions/StateType"}},"additionalProperties":false},"allowedStateValues":{"type":"object","description":"AllowedStateValues block which contains allowed state values for a given state, such as allowed asset names for a given asset","patternProperties":{"^(?!__proto__)[a-zA-Z0-9\\\\.\\\\-_]+$":{"anyOf":[{"type":"array","items":{"$ref":"#/definitions/StateType"}},{"$ref":"../../layout/latest/layout.json#/definitions/Reference"}]}},"additionalProperties":false}},"additionalProperties":false}')},IpJ1:function(e,t,i){"use strict";e.exports={$ref:i("ZnA5"),allOf:i("pMbS"),anyOf:i("3v10"),$comment:i("oMWc"),const:i("U9v9"),contains:i("znPh"),dependencies:i("x3wu"),enum:i("mvuV"),format:i("PNaz"),if:i("RpMG"),items:i("QS+l"),maximum:i("YPqp"),minimum:i("YPqp"),maxItems:i("46nG"),minItems:i("46nG"),maxLength:i("+x4O"),minLength:i("+x4O"),maxProperties:i("uSOI"),minProperties:i("uSOI"),multipleOf:i("YCfN"),not:i("Mfng"),oneOf:i("bu9z"),pattern:i("7RMT"),properties:i("HyQB"),propertyNames:i("WJiY"),required:i("Hj/m"),uniqueItems:i("Z2Kv"),validate:i("n40a")}},IuIz:function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.LazyMemoizedConverter=void 0;const o=i("3ggl");t.LazyMemoizedConverter=class{constructor(e,t){this._converter=e,this._cacheLimit=t}convert(e){return this._memoizedConverter?this._memoizedConverter.convert(e):this._memoizedConverter=new o.MemoizedConverter(e,this._converter,this._cacheLimit),this._memoizedConverter.lastResult}clear(){var e;null===(e=this._memoizedConverter)||void 0===e||e.clear()}}},J4sq:function(e,t,i){"use strict";function o(e,t,i,o){var n=o?" !== ":" === ",r=o?" || ":" && ",a=o?"!":"",s=o?"":"!";switch(e){case"null":return t+n+"null";case"array":return a+"Array.isArray("+t+")";case"object":return"("+a+t+r+"typeof "+t+n+'"object"'+r+s+"Array.isArray("+t+"))";case"integer":return"(typeof "+t+n+'"number"'+r+s+"("+t+" % 1)"+r+t+n+t+(i?r+a+"isFinite("+t+")":"")+")";case"number":return"(typeof "+t+n+'"'+e+'"'+(i?r+a+"isFinite("+t+")":"")+")";default:return"typeof "+t+n+'"'+e+'"'}}e.exports={copy:function(e,t){for(var i in t=t||{},e)t[i]=e[i];return t},checkDataType:o,checkDataTypes:function(e,t,i){switch(e.length){case 1:return o(e[0],t,i,!0);default:var n="",a=r(e);for(var s in a.array&&a.object&&(n=a.null?"(":"(!"+t+" || ",n+="typeof "+t+' !== "object")',delete a.null,delete a.array,delete a.object),a.number&&delete a.integer,a)n+=(n?" && ":"")+o(s,t,i,!0);return n}},coerceToTypes:function(e,t){if(Array.isArray(t)){for(var i=[],o=0;o<t.length;o++){var r=t[o];(n[r]||"array"===e&&"array"===r)&&(i[i.length]=r)}if(i.length)return i}else{if(n[t])return[t];if("array"===e&&"array"===t)return["array"]}},toHash:r,getProperty:c,escapeQuotes:l,equal:i("8yhB"),ucs2length:i("Jui5"),varOccurences:function(e,t){t+="[^0-9]";var i=e.match(new RegExp(t,"g"));return i?i.length:0},varReplace:function(e,t,i){return t+="([^0-9])",i=i.replace(/\$/g,"$$$$"),e.replace(new RegExp(t,"g"),i+"$1")},schemaHasRules:function(e,t){if("boolean"==typeof e)return!e;for(var i in e)if(t[i])return!0},schemaHasRulesExcept:function(e,t,i){if("boolean"==typeof e)return!e&&"not"!=i;for(var o in e)if(o!=i&&t[o])return!0},schemaUnknownRules:function(e,t){if("boolean"==typeof e)return;for(var i in e)if(!t[i])return i},toQuotedString:u,getPathExpr:function(e,t,i,o){return h(e,i?"'/' + "+t+(o?"":".replace(/~/g, '~0').replace(/\\//g, '~1')"):o?"'[' + "+t+" + ']'":"'[\\'' + "+t+" + '\\']'")},getPath:function(e,t,i){var o=u(i?"/"+f(t):c(t));return h(e,o)},getData:function(e,t,i){var o,n,r,a;if(""===e)return"rootData";if("/"==e[0]){if(!d.test(e))throw new Error("Invalid JSON-pointer: "+e);n=e,r="rootData"}else{if(!(a=e.match(p)))throw new Error("Invalid JSON-pointer: "+e);if(o=+a[1],"#"==(n=a[2])){if(o>=t)throw new Error("Cannot access property/index "+o+" levels up, current level is "+t);return i[t-o]}if(o>t)throw new Error("Cannot access data "+o+" levels up, current level is "+t);if(r="data"+(t-o||""),!n)return r}for(var s=r,l=n.split("https://www.xbox.com/"),u=0;u<l.length;u++){var h=l[u];h&&(r+=c(y(h)),s+=" && "+r)}return s},unescapeFragment:function(e){return y(decodeURIComponent(e))},unescapeJsonPointer:y,escapeFragment:function(e){return encodeURIComponent(f(e))},escapeJsonPointer:f};var n=r(["string","number","integer","boolean","null"]);function r(e){for(var t={},i=0;i<e.length;i++)t[e[i]]=!0;return t}var a=/^[a-z$_][a-z$_0-9]*$/i,s=/'|\\/g;function c(e){return"number"==typeof e?"["+e+"]":a.test(e)?"."+e:"['"+l(e)+"']"}function l(e){return e.replace(s,"\\$&").replace(/\n/g,"\\n").replace(/\r/g,"\\r").replace(/\f/g,"\\f").replace(/\t/g,"\\t")}function u(e){return"'"+l(e)+"'"}var d=/^\/(?:[^~]|~0|~1)*$/,p=/^([0-9]+)(#|\/(?:[^~]|~0|~1)*)?$/;function h(e,t){return'""'==e?t:(e+" + "+t).replace(/([^\\])' \+ '/g,"$1")}function f(e){return e.replace(/~/g,"~0").replace(/\//g,"~1")}function y(e){return e.replace(/~1/g,"/").replace(/~0/g,"~")}},J7us:function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getOrientationFromScreen=void 0;const o=i("2++W");t.getOrientationFromScreen=function(e){switch(e.orientation){case o.ScreenOrientation.LandscapeLeft:case o.ScreenOrientation.LandscapeRight:return e.isSpanned?"landscapeSpanned":"landscape";case o.ScreenOrientation.PortraitUp:case o.ScreenOrientation.PortraitUpsideDown:return e.isSpanned?"portraitSpanned":"portrait"}}},"JM/N":function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ErgoAdjustorState=void 0,function(e){e[e.None=0]="None",e[e.SinglePointerMove=1]="SinglePointerMove",e[e.SinglePointerRadius=2]="SinglePointerRadius",e[e.SinglePointerAngle=3]="SinglePointerAngle",e[e.SinglePointerRotateAndMove=4]="SinglePointerRotateAndMove",e[e.TwoPointers=5]="TwoPointers"}(t.ErgoAdjustorState||(t.ErgoAdjustorState={}))},JWEj:function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.TouchpadState=void 0,function(e){e[e.Hidden=0]="Hidden",e[e.Disabled=1]="Disabled",e[e.Idle=2]="Idle",e[e.Moving=3]="Moving",e[e.Activated=4]="Activated"}(t.TouchpadState||(t.TouchpadState={}))},Jui5:function(e,t,i){"use strict";e.exports=function(e){for(var t,i=0,o=e.length,n=0;n<o;)i++,(t=e.charCodeAt(n++))>=55296&&t<=56319&&n<o&&56320==(64512&(t=e.charCodeAt(n)))&&n++;return i}},K3oT:function(e,t,i){"use strict";i.d(t,"a",(function(){return a}));var o=i("DOrc"),n=i("wIlS"),r=i("/R13");function a(){const e=Object(n.a)();return Object(r.a)(o.a.type),e.state}},KhT9:function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.VirtualControl=t.UserInterface=t.Settings=t.ScreenDisplay=t.calculateScreenProps=t.RuntimeOptionsService=t.DefaultRuntimeOptions=t.LayoutCoordinator=t.LayoutController=t.LayerManager=t.InputProvider=t.ControlRepository=t.BundleProcessor=t.BundleLoader=void 0;var o=i("Y7t8");Object.defineProperty(t,"BundleLoader",{enumerable:!0,get:function(){return o.BundleLoader}});var n=i("9K0c");Object.defineProperty(t,"BundleProcessor",{enumerable:!0,get:function(){return n.BundleProcessor}});var r=i("Hs6J");Object.defineProperty(t,"ControlRepository",{enumerable:!0,get:function(){return r.ControlRepository}});var a=i("90Yz");Object.defineProperty(t,"InputProvider",{enumerable:!0,get:function(){return a.InputProvider}});var s=i("V3Ju");Object.defineProperty(t,"LayerManager",{enumerable:!0,get:function(){return s.LayerManager}});var c=i("Qg7d");Object.defineProperty(t,"LayoutController",{enumerable:!0,get:function(){return c.LayoutController}});var l=i("oTBh");Object.defineProperty(t,"LayoutCoordinator",{enumerable:!0,get:function(){return l.LayoutCoordinator}});var u=i("3y5O");Object.defineProperty(t,"DefaultRuntimeOptions",{enumerable:!0,get:function(){return u.DefaultRuntimeOptions}}),Object.defineProperty(t,"RuntimeOptionsService",{enumerable:!0,get:function(){return u.RuntimeOptionsService}});var d=i("TSub");Object.defineProperty(t,"calculateScreenProps",{enumerable:!0,get:function(){return d.calculateScreenProps}}),Object.defineProperty(t,"ScreenDisplay",{enumerable:!0,get:function(){return d.ScreenDisplay}});var p=i("wrGj");Object.defineProperty(t,"Settings",{enumerable:!0,get:function(){return p.Settings}});var h=i("S2AS");Object.defineProperty(t,"UserInterface",{enumerable:!0,get:function(){return h.UserInterface}});var f=i("sa+M");Object.defineProperty(t,"VirtualControl",{enumerable:!0,get:function(){return f.VirtualControl}})},Ks3E:function(e){e.exports=JSON.parse('{"$id":"https://raw.githubusercontent.com/microsoft/xbox-game-streaming-tools/main/touch-adaptation-kit/schemas/manifest/v2.0/manifest.json","$schema":"http://json-schema.org/draft-07/schema#","title":"JSON Schema for Touch Adaptation Bundle Manifests","type":"object","properties":{"$schema":{"type":"string"},"layouts":{"type":"string","description":"Root directory for the touch layouts."},"assets":{"type":"string","description":"Root directory for all assets needed by the touch layouts."},"defaultLayout":{"type":"string","description":"Name of the layout to use by default when a game is starting"},"contextFile":{"type":"string","format":"uri-reference","description":"Relative file path to the global context file that can be referenced by all layouts."},"version":{"type":"string","pattern":"\\\\d+\\\\.\\\\d+\\\\.\\\\d+\\\\.\\\\d+","description":"Version number of the touch adaptation bundle.","examples":["1.0.0.0"]},"versionName":{"type":"string","description":"Descriptive name of the version of the touch adaptation bundle.","examples":["DLC 2"]}},"required":["layouts","version"],"additionalProperties":false}')},LBtb:function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.mergeLayoutContent=t.generateKeymap=t.buildSimpleSocket=t.reflectValue=void 0;const o=i("9XOD"),n=i("g5Cp");function r(e){return Array.isArray(e)}function a(e,t){if(!e)return t;if(!t)return e;for(let i=0;i<e.length;i++){const o=e[i];if(t&&i<t.length){const n=t[i];if(r(n)&&r(o))o.length!==n.length?e[i]=n:e[i]=a(o,n);else if(r(n)||r(o))if(e[i]=n,r(n)){if(i+1<e.length){r(e[i+1])?e[i+1]=null:e.splice(i+1,1)}}else i+1<e.length&&e.splice(i+1,0,null);else e[i]=null!==n&&void 0!==n?n:o}}if(t.length>e.length){const i=t.slice(e.length);return e.concat(i)}return e}function s(e,t){return e?((null===t||void 0===t?void 0:t.inner)&&(e.inner=a(e.inner,t.inner)),(null===t||void 0===t?void 0:t.outer)&&(e.outer=a(e.outer,t.outer)),e):t}t.reflectValue=function(e,t){return Object.assign(Object.assign({},e),{x:t-e.x})},t.buildSimpleSocket=function(e,t,i,n,r,a){return Object.assign(Object.assign({},e),{colliderRadius:t,collider:i=>(0,o.radialCollider)(i,Object.assign({},e),t),horizontalFlip:!1,size:i,baseSize:n,inputScale:1,workspaceWidth:r,workspaceHeight:a})},t.generateKeymap=function(e){return{inner:{singleBase:e+"_CENTER",singleLarge:e+"_CENTER",double:[e+"_INNER_2_0",e+"_INNER_2_1"],triple:[e+"_INNER_3_0",e+"_INNER_3_1",e+"_INNER_3_2"],quadruple:[e+"_INNER_4_0",e+"_INNER_4_1",e+"_INNER_4_2",e+"_INNER_4_3"]},outer:[e+"_0",e+"_1",e+"_2",e+"_3",e+"_4",e+"_5",e+"_6",e+"_7"].map((e,t,i)=>{const o=i[(0,n.loop)(t+1,0,7)];return{singleBase:e,singleLarge:`${e}-${o}`,double:[`${e}-${o}_INNER`,`${e}-${o}_OUTER`],triple:[e,e+"_INTERPOLATED",o],quadruple:[e,e+"_EXTRUDED_1",o+"_EXTRUDED_2",o]}})}},t.mergeLayoutContent=function(e,t){var i,o,n,r;(null===t||void 0===t?void 0:t.center)&&(e.center=s(e.center,t.center)),(null===t||void 0===t?void 0:t.left)&&(e.left=s(e.left,t.left)),(null===t||void 0===t?void 0:t.right)&&(e.right=s(e.right,t.right)),(null===t||void 0===t?void 0:t.lower)&&(e.lower=(i=e.lower,o=t.lower,i?((null===o||void 0===o?void 0:o.leftCenter)&&(i.leftCenter=a(i.leftCenter,o.leftCenter)),(null===o||void 0===o?void 0:o.rightCenter)&&(i.rightCenter=a(i.rightCenter,o.rightCenter)),(null===o||void 0===o?void 0:o.center)&&(i.center=o.center),i):o)),(null===t||void 0===t?void 0:t.upper)&&(e.upper=(n=e.upper,r=t.upper,n?((null===r||void 0===r?void 0:r.right)&&(n.right=a(n.right,r.right)),n):r)),(null===t||void 0===t?void 0:t.sensors)&&(e.sensors=a(e.sensors,t.sensors))}},LKBR:function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.DirectionalPadRenderPropertyManager=void 0;const o=i("kU1o"),n=i("25ZR"),r=i("TqiN"),a=i("fUIH");class s extends n.ValueRenderPropertyManager{constructor(e,t){super(e,t,Object.keys(a.DirectionalPadState).length/2),this.styleManager=new r.DirectionalPadStyleManager,this._renderProperties=this.primeCache(this.state)}primeCache({interactionState:e}){const{type:t,baseSize:i,x:n,y:r,scale:s=1,deadzone:c=.5,styles:l}=this.props,u=i/2*s,d=u*c;return{type:t,rotation:0,x:n,y:r,direction:a.DirectionalPadDirection.None,radius:u,spokeWidth:d,scale:s,styleProps:this.styleManager.getStyle(e,l),opacity:{value:this.styleManager.getOpacity(e,l),energy:o.AnimationEnergy.Instant}}}completeCache({interactionState:e,value:t}){this._renderProperties.direction=e===a.DirectionalPadState.Activated?t:a.DirectionalPadDirection.None}}t.DirectionalPadRenderPropertyManager=s},Ledy:function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.PointerType=t.TouchEventTarget=void 0,function(e){e[e.Native=1]="Native",e[e.TAK=2]="TAK",e[e.All=3]="All"}(t.TouchEventTarget||(t.TouchEventTarget={})),function(e){e.Touch="touch",e.Mouse="mouse",e.Pen="pen"}(t.PointerType||(t.PointerType={}))},MTv4:function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.PointerState=t.MAX_SIMULTANEOUS_POINTERS=void 0,t.MAX_SIMULTANEOUS_POINTERS=12,function(e){e[e.Start=0]="Start",e[e.Move=1]="Move",e[e.End=2]="End"}(t.PointerState||(t.PointerState={}))},Mfng:function(e,t,i){"use strict";e.exports=function(e,t,i){var o=" ",n=e.level,r=e.dataLevel,a=e.schema[t],s=e.schemaPath+e.util.getProperty(t),c=e.errSchemaPath+"/"+t,l=!e.opts.allErrors,u="data"+(r||""),d="errs__"+n,p=e.util.copy(e);p.level++;var h="valid"+p.level;if(e.opts.strictKeywords?"object"==typeof a&&Object.keys(a).length>0||!1===a:e.util.schemaHasRules(a,e.RULES.all)){p.schema=a,p.schemaPath=s,p.errSchemaPath=c,o+=" var "+d+" = errors;  ";var f,y=e.compositeRule;e.compositeRule=p.compositeRule=!0,p.createErrors=!1,p.opts.allErrors&&(f=p.opts.allErrors,p.opts.allErrors=!1),o+=" "+e.validate(p)+" ",p.createErrors=!0,f&&(p.opts.allErrors=f),e.compositeRule=p.compositeRule=y,o+=" if ("+h+") {   ";var g=g||[];g.push(o),o="",!1!==e.createErrors?(o+=" { keyword: 'not' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(c)+" , params: {} ",!1!==e.opts.messages&&(o+=" , message: 'should NOT be valid' "),e.opts.verbose&&(o+=" , schema: validate.schema"+s+" , parentSchema: validate.schema"+e.schemaPath+" , data: "+u+" "),o+=" } "):o+=" {} ";var m=o;o=g.pop(),!e.compositeRule&&l?e.async?o+=" throw new ValidationError(["+m+"]); ":o+=" validate.errors = ["+m+"]; return false; ":o+=" var err = "+m+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",o+=" } else {  errors = "+d+"; if (vErrors !== null) { if ("+d+") vErrors.length = "+d+"; else vErrors = null; } ",e.opts.allErrors&&(o+=" } ")}else o+="  var err =   ",!1!==e.createErrors?(o+=" { keyword: 'not' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(c)+" , params: {} ",!1!==e.opts.messages&&(o+=" , message: 'should NOT be valid' "),e.opts.verbose&&(o+=" , schema: validate.schema"+s+" , parentSchema: validate.schema"+e.schemaPath+" , data: "+u+" "),o+=" } "):o+=" {} ",o+=";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",l&&(o+=" if (false) { ");return o}},MsEf:function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.v3_3LayoutConverter=t.v2LayoutConverter=t.v1LayoutConverter=t.defaultLayoutConverter=void 0,t.defaultLayoutConverter={convert:e=>e},t.v1LayoutConverter={convert:e=>(o(e),d(e),e)},t.v2LayoutConverter={convert:e=>(n(e),p(e),e)},t.v3_3LayoutConverter={convert:e=>(r(e),e)};const o=e=>{if(!e||"object"!==typeof e)return;if(e.type)switch(e.action&&(e.action=u(e.action)),e.pullAction&&(e.pullAction=u(e.pullAction)),e.type){case"button":case"touchpad":a(e);break;case"joystick":l(e);break;case"throttle":c(e);break;case"arcadeButtons":s(e)}const t=Object.keys(e);for(const i of t)o(e[i])},n=e=>{if(!e||"object"!==typeof e)return;if(e.type)switch(e.action&&(e.action=u(e.action)),e.pullAction&&(e.pullAction=u(e.pullAction)),e.type){case"touchpad":a(e);break;case"joystick":l(e);break;case"throttle":c(e);break;case"arcadeButtons":s(e)}const t=Object.keys(e);for(const i of t)n(e[i])},r=e=>{if(!e||"object"!==typeof e)return;e.type&&(e.action&&(e.action=u(e.action)),e.pullAction&&(e.pullAction=u(e.pullAction)));const t=Object.keys(e);for(const i of t)r(e[i])},a=e=>{if(e.icon){const t={default:{faceImage:{type:"icon",value:e.icon}}};delete e.icon,e.styles=t}},s=e=>{const t=Object.keys(e);for(const i of t)a(e[i])},c=e=>{if(e.icon){const t={default:{knob:{faceImage:{type:"icon",value:e.icon}}}};delete e.icon,e.styles=t}},l=e=>{if(e.threshold){const t=e.threshold;delete e.threshold,e.actionThreshold=t}c(e)},u=e=>{switch(e){case"rightJoystickUp":return"rightJoystickDown";case"rightJoystickDown":return"rightJoystickUp";case"leftJoystickUp":return"leftJoystickDown";case"leftJoystickDown":return"leftJoystickUp";default:return e}},d=e=>{let t=[];const{upper:i}=e.content;if(i){const{left:o,leftCenter:n,rightCenter:r,right:a}=i;a&&(t=t.concat(a)),r&&(t=t.concat(r.reverse())),n&&(t=t.concat(n)),o&&(t=t.concat(o.reverse())),delete e.content.upper}t.length>0&&(e.content.upper={right:t})},p=e=>{d(e)}},Myyd:function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ArcadeButtonSockets=void 0,function(e){e[e.LightPunch=0]="LightPunch",e[e.MediumPunch=1]="MediumPunch",e[e.HeavyPunch=2]="HeavyPunch",e[e.SpecialPunch=3]="SpecialPunch",e[e.LightKick=4]="LightKick",e[e.MediumKick=5]="MediumKick",e[e.HeavyKick=6]="HeavyKick",e[e.SpecialKick=7]="SpecialKick"}(t.ArcadeButtonSockets||(t.ArcadeButtonSockets={}))},N1y0:function(e,t,i){"use strict";i.d(t,"a",(function(){return o}));class o{static isInProgressState(e){return e instanceof o}InProgressState(){}}},N3jH:function(e,t,i){"use strict";var o=this&&this.__decorate||function(e,t,i,o){var n,r=arguments.length,a=r<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,i):o;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)a=Reflect.decorate(e,t,i,o);else for(var s=e.length-1;s>=0;s--)(n=e[s])&&(a=(r<3?n(a):r>3?n(t,i,a):n(t,i))||a);return r>3&&a&&Object.defineProperty(t,i,a),a},n=this&&this.__metadata||function(e,t){if("object"===typeof Reflect&&"function"===typeof Reflect.metadata)return Reflect.metadata(e,t)},r=this&&this.__param||function(e,t){return function(i,o){t(i,o,e)}};Object.defineProperty(t,"__esModule",{value:!0}),t.ErgoAdjustorControl=void 0;const a=i("s6Xb"),s=i("LcNk"),c=i("YfSF"),l=i("2ZOr"),u=i("9XOD"),d=i("TSub"),p=i("YFNc"),h=i("zrWA"),f=i("g5Cp"),y=i("cvzu"),g=i("7zgF"),m=i("JM/N");function v(){return{interactionState:m.ErgoAdjustorState.None}}let b=class extends y.RenderControl{constructor(e,t,i,o){super(v(),e,t),this.settings=i,this.screen=o,this.isDirty=!1,this.compatibleInteractionMode=h.UIInteractionMode.UserCustomization,this.pointers={},this.visualState=new s.BehaviorSubject(m.ErgoAdjustorState.None),this.adjustedErgo=p.DefaultWheelErgoSettingState,this.customCollider=e=>{const{x:t,y:i,colliderRadius:o}=this.model.getProps();return(0,u.radialCollider)(e,{x:t,y:i},o)},this.renderPropertyManager=new g.ErgoAdjustorRenderPropertyManager(e.getProps(),v()),this.styleConfigurationSubscription=t.getContainersStylingConfigurationStream().pipe((0,c.map)(e=>e.adjustors)).subscribe(this.onStylingConfigurationChanged.bind(this))}addToSettingsUpdate(e){if(!this.isDirty)return e;this.isDirty=!1;const t=this.model.getProps();if(t.useSymmetry&&"center"!==t.wheelKey){const i="right"===t.wheelKey?"left":"right";return Object.assign(Object.assign({},e),{[t.wheelKey]:this.adjustedErgo,[i]:{x:-1*this.adjustedErgo.x,y:this.adjustedErgo.y,radius:this.adjustedErgo.radius,angleInRadians:-1*this.adjustedErgo.angleInRadians}})}return Object.assign(Object.assign({},e),{[t.wheelKey]:this.adjustedErgo})}unmountInternal(){var e;this.styleConfigurationSubscription&&!this.styleConfigurationSubscription.closed&&(null===(e=this.styleConfigurationSubscription)||void 0===e||e.unsubscribe())}onPropsChangedInternal([,e]){this.initialRadius={radius:e.radius,angleInRadians:e.angleInRadians},this.calculateInteractionState()}onStateChangedInternal(){const e=this.model.getProps(),t=Object.keys(this.pointers);let i=this.visualState.getValue();if(1===t.length){const o=this.pointers[t[0]];this.initialPosition={x:o.x-e.x,y:o.y-e.y},this.initialRadius=(0,f.positionToDirection)(this.initialPosition),i=this.initialRadius.radius<=e.colliderRadius/2?m.ErgoAdjustorState.SinglePointerMove:m.ErgoAdjustorState.SinglePointerRotateAndMove}else if(2===t.length){i=m.ErgoAdjustorState.TwoPointers;const t=this.getTouchData();this.initialPosition={x:t.x-e.x,y:t.y-e.y},this.initialRadius=(0,f.positionToDirection)(this.initialPosition)}else 0===t.length&&(i=m.ErgoAdjustorState.None);i!==this.visualState.getValue()&&this.visualState.next(i)}onPointerStart(e){return this.pointers[e.pointerIndex]=e.initialPosition,this.calculateInteractionState(),this.setState(Object.assign(Object.assign({},this.getState()),{interactionState:this.visualState.getValue()})),!0}onPointerEnd(e){return this.removePointer(e.pointerIndex),this.setState(Object.assign(Object.assign({},this.getState()),{interactionState:this.visualState.getValue()})),this.calculateInteractionState(),this.visualState.getValue()===m.ErgoAdjustorState.None&&this.settings.commitSettings(),!0}onPointerMove(e){const t=this.model.getProps();switch(this.visualState.getValue()){case m.ErgoAdjustorState.None:break;case m.ErgoAdjustorState.SinglePointerMove:this.pointers[e.pointerIndex]=e.position,this.setWheelErgo(e.position.x-this.initialPosition.x,e.position.y-this.initialPosition.y,t.radius,t.angleInRadians);break;case m.ErgoAdjustorState.SinglePointerRotateAndMove:this.pointers[e.pointerIndex]=e.position,this.touchMoveAngle(e.position);break;case m.ErgoAdjustorState.SinglePointerAngle:this.pointers[e.pointerIndex]=e.position,this.touchAngle(e.position);break;case m.ErgoAdjustorState.SinglePointerRadius:this.pointers[e.pointerIndex]=e.position,this.touchRadius(e.position)}return!0}getIsStateUndimmable(){return!1}onStylingConfigurationChanged(e){if(this.renderPropertyManager.willOpacityChangesCauseUpdates(e.opacity)){this.startRenderFrame();try{this.isRenderDirty=!0,this.renderPropertyManager.updateOpacity(e.opacity)}finally{this.endRenderFrame()}}}touchMoveAngle(e){const t=this.model.getProps(),i=t.horizontalFlip?1:-1,o={x:e.x-t.x,y:e.y-t.y},{radius:n,angleInRadians:r}=(0,f.positionToDirection)(o),a=n-this.initialRadius.radius;let s=r-this.initialRadius.angleInRadians;s*=i;const c=t.radius+a;let l=t.angleInRadians+s;l=t.angleInRadians+s,l%=2*Math.PI,this.initialRadius={angleInRadians:r,radius:n},this.setWheelErgo(t.x,t.y,c,l)}touchRadius(e){const t=this.model.getProps(),i={x:e.x-t.x,y:e.y-t.y},{radius:o}=(0,f.positionToDirection)(i),n=o-this.initialRadius.radius,r=t.radius+n;this.initialRadius={angleInRadians:t.angleInRadians,radius:o},this.setWheelErgo(t.x,t.y,r,t.radius)}touchAngle(e){const t=this.model.getProps(),i=t.horizontalFlip?1:-1,o={x:e.x-t.x,y:e.y-t.y},{angleInRadians:n}=(0,f.positionToDirection)(o);let r=n-this.initialRadius.angleInRadians;r*=i;let a=t.angleInRadians+r;a=t.angleInRadians+r,a%=2*Math.PI,this.initialRadius={angleInRadians:n,radius:t.radius},this.setWheelErgo(t.x,t.y,t.radius,a)}removePointer(e){this.pointers[e]&&delete this.pointers[e],this.calculateInteractionState()}calculateInteractionState(){this.onStateChanged(this.getState())}getTouchData(){const e=Object.keys(this.pointers).map(e=>this.pointers[e]),t=e[0],i=e[1],o=i.y-t.y,n=i.x-t.x,{angleInRadians:r,radius:a}=(0,f.positionToDirection)({x:n,y:o});return{angleInRadians:r,radius:a,x:(t.x+i.x)/2,y:(t.y+i.y)/2}}setWheelErgo(e,t,i,o){const n=this.model.getProps();if(i!==n.radius||o!==n.angleInRadians||e!==n.x||t!==n.y){this.isDirty=!0;const r=this.screen.screenProps$.getValue(),a=n.wheelKey;this.adjustedErgo=(0,d.calculateWheelErgoSettingsFromCurrentState)({radius:i,angleInRadians:o,x:e,y:t},"left"===a?r.leftWheelAnchor:r.rightWheelAnchor,r)}}};b=o([(0,a.injectable)(),r(0,(0,a.inject)(l.SERVICE_TYPES.VirtualControl)),r(1,(0,a.inject)(l.SERVICE_TYPES.UserInterface)),r(2,(0,a.inject)(l.SERVICE_TYPES.Settings)),r(3,(0,a.inject)(l.SERVICE_TYPES.ScreenDisplay)),n("design:paramtypes",[Object,Function,Function,Function])],b),t.ErgoAdjustorControl=b},"NUX/":function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.opacityMappingUtils=void 0;t.opacityMappingUtils={constants:{internal:{min:.05,max:1},displayed:{min:0,max:100}},converters:{internalToDisplayed:e=>e<=.05?0:e>=1?100:Math.round(100*e),displayedToInternal:e=>e<=0?.05:e>=100?1:e/100}}},NUuW:function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.VirtualFileSystemDirectory=t.VirtualFileSystemFile=t.VirtualFileSystemItem=void 0;class o{constructor(e){this.name=e}}t.VirtualFileSystemItem=o;t.VirtualFileSystemFile=class extends o{constructor(e,t){super(e),this.data=t}};t.VirtualFileSystemDirectory=class extends o{constructor(e){super(e),this.directories=new Map,this.files=new Map}find(e){if(""===e)return this;const t=e.indexOf("/");if(-1===t){const t=this.directories.get(e);if(t)return t;const i=this.files.get(e);return i||void 0}const i=this.directories.get(e.substring(0,t));return i?i.find(e.substring(t+1)):void 0}}},Nz3K:function(e){e.exports=JSON.parse('{"$id":"https://raw.githubusercontent.com/microsoft/xbox-game-streaming-tools/main/touch-adaptation-kit/schemas/context/v3.4.1/context.json","$schema":"http://json-schema.org/draft-07/schema#","title":"JSON Schema for Touch Adaptation Bundle Context File","definitions":{"ContextDefinableType":{"description":"Set of types which can be used in the definitions section of a context file.","anyOf":[{"$ref":"../../layout/v3.4.1/layout.json#/definitions/LayoutDefinableType"},{"$ref":"#/definitions/StateType"},{"type":"array","items":{"$ref":"#/definitions/StateType"}}]},"StateType":{"description":"Set of types which can be used for state values","anyOf":[{"type":"string"},{"type":"boolean"},{"type":"integer"},{"type":"number"}]}},"type":"object","properties":{"$schema":{"type":"string"},"definitions":{"type":"object","description":"Definitions block that contains reusable components for layouts.","patternProperties":{"^(?!__proto__)[a-zA-Z0-9\\\\.\\\\-_]+$":{"$ref":"#/definitions/ContextDefinableType"}},"additionalProperties":false},"state":{"type":"object","description":"State block that contains the global state that forms a shared context that other layouts can reference.","patternProperties":{"^(?!__proto__)[a-zA-Z0-9\\\\.\\\\-_]+$":{"$ref":"#/definitions/StateType"}},"additionalProperties":false},"allowedStateValues":{"type":"object","description":"AllowedStateValues block which contains allowed state values for a given state, such as allowed asset names for a given asset","patternProperties":{"^(?!__proto__)[a-zA-Z0-9\\\\.\\\\-_]+$":{"anyOf":[{"type":"array","items":{"$ref":"#/definitions/StateType"}},{"$ref":"../../layout/v3.4.1/layout.json#/definitions/Reference"}]}},"additionalProperties":false}},"additionalProperties":false}')},OPhC:function(e,t,i){"use strict";var o=this&&this.__decorate||function(e,t,i,o){var n,r=arguments.length,a=r<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,i):o;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)a=Reflect.decorate(e,t,i,o);else for(var s=e.length-1;s>=0;s--)(n=e[s])&&(a=(r<3?n(a):r>3?n(t,i,a):n(t,i))||a);return r>3&&a&&Object.defineProperty(t,i,a),a},n=this&&this.__metadata||function(e,t){if("object"===typeof Reflect&&"function"===typeof Reflect.metadata)return Reflect.metadata(e,t)},r=this&&this.__param||function(e,t){return function(i,o){t(i,o,e)}};Object.defineProperty(t,"__esModule",{value:!0}),t.AccelerometerControl=void 0;const a=i("s6Xb"),s=i("LcNk"),c=i("YfSF"),l=i("2ZOr"),u=i("/2Ai"),d=i("2++W"),p=i("65S6"),h=i("cvzu");let f=class extends h.Control{constructor(e,t,i){super(e),this.sensorStore=t,this.inputProvider=i,this.inputAccumulationMap={analogMap:{},mouseMap:{}};const o=this.model.getProps();this.mapping=(0,p.buildInputMapConfig)(o.axis),this.pipes=this.mapping.map(e=>(0,p.buildPipes)(e.map,o.sensitivity))}unmount(){super.unmount(),this.sensorSubscription&&this.sensorSubscription.unsubscribe()}mount(){super.mount(),this.sensorSubscription&&this.sensorSubscription.unsubscribe(),this.sensorSubscription=this.model.props$.pipe((0,c.map)(e=>e.enabled),(0,c.distinctUntilChanged)(),(0,c.switchMap)(e=>!1===e?s.NEVER:this.sensorStore.accelerometer$.pipe((0,c.withLatestFrom)(this.sensorStore.orientation$),(0,c.map)(e=>{const[t,i]=e,{x:o,y:n,z:r}="axisZY"===this.mapping[0].map.input?{x:i===d.DeviceSensorOrientation.Clockwise90?-t.z:t.z,y:t.y,z:t.z}:t;switch(i){case d.DeviceSensorOrientation.Clockwise270:return{x:o,y:n,z:r};case d.DeviceSensorOrientation.Clockwise90:return{x:-o,y:-n,z:r};case d.DeviceSensorOrientation.Clockwise0:return{x:-n,y:o,z:r};case d.DeviceSensorOrientation.Clockwise180:return{x:n,y:-o,z:r};default:return{x:o,y:n,z:r}}})))).subscribe(e=>{this.resetInputAccumulationMap(),(0,p.applyInput2D)(e,this.pipes,this.mapping,this.inputAccumulationMap,u.InputAccumulationType.JoystickAndMouse);const{analogMap:t,mouseMap:{relativeMouseX:i,relativeMouseY:o}}=this.inputAccumulationMap;if((0,p.hasMouseOutputType)(this.mapping)){const e={x:i&&0!==i?i:0,y:o&&0!==o?o:0};0===e.x&&0===e.y||this.inputProvider.sendRelativeMouseEvent(e)}(0,p.hasJoystickOutputType)(this.mapping)&&this.model.setAnalogInput(t)})}onPropsChangedInternal([,e]){this.mapping=(0,p.buildInputMapConfig)(e.axis),this.pipes=this.mapping.map(t=>(0,p.buildPipes)(t.map,e.sensitivity))}resetInputAccumulationMap(){this.inputAccumulationMap.analogMap.leftJoystickX=void 0,this.inputAccumulationMap.analogMap.leftJoystickY=void 0,this.inputAccumulationMap.analogMap.leftTrigger=void 0,this.inputAccumulationMap.analogMap.rightJoystickX=void 0,this.inputAccumulationMap.analogMap.rightJoystickY=void 0,this.inputAccumulationMap.analogMap.rightTrigger=void 0,this.inputAccumulationMap.mouseMap.relativeMouseX=void 0,this.inputAccumulationMap.mouseMap.relativeMouseY=void 0}};f=o([(0,a.injectable)(),r(0,(0,a.inject)(l.SERVICE_TYPES.VirtualControl)),r(1,(0,a.inject)(l.SERVICE_TYPES.SensorStore)),r(2,(0,a.inject)(l.SERVICE_TYPES.InputProvider)),n("design:paramtypes",[Object,Object,Function])],f),t.AccelerometerControl=f},OkwS:function(e){e.exports=JSON.parse('{"$schema":"http://json-schema.org/draft-07/schema#","$id":"https://raw.githubusercontent.com/ajv-validator/ajv/master/lib/refs/data.json#","description":"Meta-schema for $data reference (JSON Schema extension proposal)","type":"object","required":["$data"],"properties":{"$data":{"type":"string","anyOf":[{"format":"relative-json-pointer"},{"format":"json-pointer"}]}},"additionalProperties":false}')},Oojg:function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.DirectionalPadInteractionActivationType=void 0,function(e){e.Exclusive="exclusive",e.AllowNeighboring="allowNeighboring"}(t.DirectionalPadInteractionActivationType||(t.DirectionalPadInteractionActivationType={}))},PFUz:function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.copyFaceImageRenderProps=t.areFaceImageRenderPropsEqual=t.areFaceImageLabelRenderPropsEqual=t.FaceImageLabelRenderFillType=t.FaceImageLabelRenderType=void 0;const o=i("V2pq"),n=i("vOfS");function r(e,t){return!!(e===t||e&&t&&e.type===t.type&&e.value===t.value&&e.fillType===t.fillType&&(0,o.areColorsEqual)(e.color,t.color)&&e.offset.x===t.offset.x&&e.offset.y===t.offset.y)}function a(e){return{color:(0,o.copyColor)(e.color),fillType:e.fillType,offset:(0,n.copyPositionable)(e.offset),type:e.type,value:e.value}}!function(e){e[e.Default=0]="Default",e[e.None=1]="None",e[e.Action=2]="Action"}(t.FaceImageLabelRenderType||(t.FaceImageLabelRenderType={})),function(e){e[e.None=0]="None",e[e.Solid=1]="Solid"}(t.FaceImageLabelRenderFillType||(t.FaceImageLabelRenderFillType={})),t.areFaceImageLabelRenderPropsEqual=r,t.areFaceImageRenderPropsEqual=function(e,t){return e===t||function(e,t){return!!(e===t||e&&t&&"icon"===e.type&&"icon"===t.type&&e.value===t.value&&e.scale===t.scale&&e.displayShadow===t.displayShadow&&e.animationEnergy===t.animationEnergy&&e.opacity===t.opacity&&e.offset.x===t.offset.x&&e.offset.y===t.offset.y&&(0,o.areColorsEqual)(e.color,t.color)&&r(e.label,t.label))}(e,t)||function(e,t){return!!(e===t||e&&t&&"asset"===e.type&&"asset"===t.type&&e.value===t.value&&e.scale===t.scale&&e.animationEnergy===t.animationEnergy&&e.opacity===t.opacity&&e.offset.x===t.offset.x&&e.offset.y===t.offset.y&&r(e.label,t.label))}(e,t)},t.copyFaceImageRenderProps=function(e){return"icon"===e.type?function(e){return{animationEnergy:e.animationEnergy,color:(0,o.copyColor)(e.color),displayShadow:e.displayShadow,label:a(e.label),offset:(0,n.copyPositionable)(e.offset),opacity:e.opacity,scale:e.scale,type:e.type,value:e.value}}(e):function(e){return{animationEnergy:e.animationEnergy,label:a(e.label),offset:(0,n.copyPositionable)(e.offset),opacity:e.opacity,scale:e.scale,type:e.type,value:e.value}}(e)}},PNaz:function(e,t,i){"use strict";e.exports=function(e,t,i){var o=" ",n=e.level,r=e.dataLevel,a=e.schema[t],s=e.schemaPath+e.util.getProperty(t),c=e.errSchemaPath+"/"+t,l=!e.opts.allErrors,u="data"+(r||"");if(!1===e.opts.format)return l&&(o+=" if (true) { "),o;var d,p=e.opts.$data&&a&&a.$data;p?(o+=" var schema"+n+" = "+e.util.getData(a.$data,r,e.dataPathArr)+"; ",d="schema"+n):d=a;var h=e.opts.unknownFormats,f=Array.isArray(h);if(p){o+=" var "+(y="format"+n)+" = formats["+d+"]; var "+(g="isObject"+n)+" = typeof "+y+" == 'object' && !("+y+" instanceof RegExp) && "+y+".validate; var "+(m="formatType"+n)+" = "+g+" && "+y+".type || 'string'; if ("+g+") { ",e.async&&(o+=" var async"+n+" = "+y+".async; "),o+=" "+y+" = "+y+".validate; } if (  ",p&&(o+=" ("+d+" !== undefined && typeof "+d+" != 'string') || "),o+=" (","ignore"!=h&&(o+=" ("+d+" && !"+y+" ",f&&(o+=" && self._opts.unknownFormats.indexOf("+d+") == -1 "),o+=") || "),o+=" ("+y+" && "+m+" == '"+i+"' && !(typeof "+y+" == 'function' ? ",e.async?o+=" (async"+n+" ? await "+y+"("+u+") : "+y+"("+u+")) ":o+=" "+y+"("+u+") ",o+=" : "+y+".test("+u+"))))) {"}else{var y;if(!(y=e.formats[a])){if("ignore"==h)return e.logger.warn('unknown format "'+a+'" ignored in schema at path "'+e.errSchemaPath+'"'),l&&(o+=" if (true) { "),o;if(f&&h.indexOf(a)>=0)return l&&(o+=" if (true) { "),o;throw new Error('unknown format "'+a+'" is used in schema at path "'+e.errSchemaPath+'"')}var g,m=(g="object"==typeof y&&!(y instanceof RegExp)&&y.validate)&&y.type||"string";if(g){var v=!0===y.async;y=y.validate}if(m!=i)return l&&(o+=" if (true) { "),o;if(v){if(!e.async)throw new Error("async format in sync schema");o+=" if (!(await "+(b="formats"+e.util.getProperty(a)+".validate")+"("+u+"))) { "}else{o+=" if (! ";var b="formats"+e.util.getProperty(a);g&&(b+=".validate"),o+="function"==typeof y?" "+b+"("+u+") ":" "+b+".test("+u+") ",o+=") { "}}var S=S||[];S.push(o),o="",!1!==e.createErrors?(o+=" { keyword: 'format' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(c)+" , params: { format:  ",o+=p?""+d:""+e.util.toQuotedString(a),o+="  } ",!1!==e.opts.messages&&(o+=" , message: 'should match format \"",o+=p?"' + "+d+" + '":""+e.util.escapeQuotes(a),o+="\"' "),e.opts.verbose&&(o+=" , schema:  ",o+=p?"validate.schema"+s:""+e.util.toQuotedString(a),o+="         , parentSchema: validate.schema"+e.schemaPath+" , data: "+u+" "),o+=" } "):o+=" {} ";var k=o;return o=S.pop(),!e.compositeRule&&l?e.async?o+=" throw new ValidationError(["+k+"]); ":o+=" validate.errors = ["+k+"]; return false; ":o+=" var err = "+k+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",o+=" } ",l&&(o+=" else { "),o}},QEDo:function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getSocketSide=void 0;const o=i("ZakO");t.getSocketSide=function(e){return e.startsWith("LEFT")?o.SocketSideEnum.Left:e.startsWith("RIGHT")?o.SocketSideEnum.Right:e.startsWith("CENTER")?o.SocketSideEnum.Center:o.SocketSideEnum.None}},"QS+l":function(e,t,i){"use strict";e.exports=function(e,t,i){var o=" ",n=e.level,r=e.dataLevel,a=e.schema[t],s=e.schemaPath+e.util.getProperty(t),c=e.errSchemaPath+"/"+t,l=!e.opts.allErrors,u="data"+(r||""),d="valid"+n,p="errs__"+n,h=e.util.copy(e),f="";h.level++;var y="valid"+h.level,g="i"+n,m=h.dataLevel=e.dataLevel+1,v="data"+m,b=e.baseId;if(o+="var "+p+" = errors;var "+d+";",Array.isArray(a)){var S=e.schema.additionalItems;if(!1===S){o+=" "+d+" = "+u+".length <= "+a.length+"; ";var k=c;c=e.errSchemaPath+"/additionalItems",o+="  if (!"+d+") {   ";var P=P||[];P.push(o),o="",!1!==e.createErrors?(o+=" { keyword: 'additionalItems' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(c)+" , params: { limit: "+a.length+" } ",!1!==e.opts.messages&&(o+=" , message: 'should NOT have more than "+a.length+" items' "),e.opts.verbose&&(o+=" , schema: false , parentSchema: validate.schema"+e.schemaPath+" , data: "+u+" "),o+=" } "):o+=" {} ";var w=o;o=P.pop(),!e.compositeRule&&l?e.async?o+=" throw new ValidationError(["+w+"]); ":o+=" validate.errors = ["+w+"]; return false; ":o+=" var err = "+w+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",o+=" } ",c=k,l&&(f+="}",o+=" else { ")}var A=a;if(A)for(var I,T=-1,C=A.length-1;T<C;)if(I=A[T+=1],e.opts.strictKeywords?"object"==typeof I&&Object.keys(I).length>0||!1===I:e.util.schemaHasRules(I,e.RULES.all)){o+=" "+y+" = true; if ("+u+".length > "+T+") { ";var _=u+"["+T+"]";h.schema=I,h.schemaPath=s+"["+T+"]",h.errSchemaPath=c+"/"+T,h.errorPath=e.util.getPathExpr(e.errorPath,T,e.opts.jsonPointers,!0),h.dataPathArr[m]=T;var E=e.validate(h);h.baseId=b,e.util.varOccurences(E,v)<2?o+=" "+e.util.varReplace(E,v,_)+" ":o+=" var "+v+" = "+_+"; "+E+" ",o+=" }  ",l&&(o+=" if ("+y+") { ",f+="}")}if("object"==typeof S&&(e.opts.strictKeywords?"object"==typeof S&&Object.keys(S).length>0||!1===S:e.util.schemaHasRules(S,e.RULES.all))){h.schema=S,h.schemaPath=e.schemaPath+".additionalItems",h.errSchemaPath=e.errSchemaPath+"/additionalItems",o+=" "+y+" = true; if ("+u+".length > "+a.length+") {  for (var "+g+" = "+a.length+"; "+g+" < "+u+".length; "+g+"++) { ",h.errorPath=e.util.getPathExpr(e.errorPath,g,e.opts.jsonPointers,!0);_=u+"["+g+"]";h.dataPathArr[m]=g;E=e.validate(h);h.baseId=b,e.util.varOccurences(E,v)<2?o+=" "+e.util.varReplace(E,v,_)+" ":o+=" var "+v+" = "+_+"; "+E+" ",l&&(o+=" if (!"+y+") break; "),o+=" } }  ",l&&(o+=" if ("+y+") { ",f+="}")}}else if(e.opts.strictKeywords?"object"==typeof a&&Object.keys(a).length>0||!1===a:e.util.schemaHasRules(a,e.RULES.all)){h.schema=a,h.schemaPath=s,h.errSchemaPath=c,o+="  for (var "+g+" = 0; "+g+" < "+u+".length; "+g+"++) { ",h.errorPath=e.util.getPathExpr(e.errorPath,g,e.opts.jsonPointers,!0);_=u+"["+g+"]";h.dataPathArr[m]=g;E=e.validate(h);h.baseId=b,e.util.varOccurences(E,v)<2?o+=" "+e.util.varReplace(E,v,_)+" ":o+=" var "+v+" = "+_+"; "+E+" ",l&&(o+=" if (!"+y+") break; "),o+=" }"}return l&&(o+=" "+f+" if ("+p+" == errors) {"),o}},QbNu:function(e,t,i){var o;!function(n){var r=/^\s+/,a=/\s+$/,s=0,c=n.round,l=n.min,u=n.max,d=n.random;function p(e,t){if(t=t||{},(e=e||"")instanceof p)return e;if(!(this instanceof p))return new p(e,t);var i=function(e){var t={r:0,g:0,b:0},i=1,o=null,s=null,c=null,d=!1,p=!1;"string"==typeof e&&(e=function(e){e=e.replace(r,"").replace(a,"").toLowerCase();var t,i=!1;if(x[e])e=x[e],i=!0;else if("transparent"==e)return{r:0,g:0,b:0,a:0,format:"name"};if(t=N.rgb.exec(e))return{r:t[1],g:t[2],b:t[3]};if(t=N.rgba.exec(e))return{r:t[1],g:t[2],b:t[3],a:t[4]};if(t=N.hsl.exec(e))return{h:t[1],s:t[2],l:t[3]};if(t=N.hsla.exec(e))return{h:t[1],s:t[2],l:t[3],a:t[4]};if(t=N.hsv.exec(e))return{h:t[1],s:t[2],v:t[3]};if(t=N.hsva.exec(e))return{h:t[1],s:t[2],v:t[3],a:t[4]};if(t=N.hex8.exec(e))return{r:j(t[1]),g:j(t[2]),b:j(t[3]),a:F(t[4]),format:i?"name":"hex8"};if(t=N.hex6.exec(e))return{r:j(t[1]),g:j(t[2]),b:j(t[3]),format:i?"name":"hex"};if(t=N.hex4.exec(e))return{r:j(t[1]+""+t[1]),g:j(t[2]+""+t[2]),b:j(t[3]+""+t[3]),a:F(t[4]+""+t[4]),format:i?"name":"hex8"};if(t=N.hex3.exec(e))return{r:j(t[1]+""+t[1]),g:j(t[2]+""+t[2]),b:j(t[3]+""+t[3]),format:i?"name":"hex"};return!1}(e));"object"==typeof e&&(J(e.r)&&J(e.g)&&J(e.b)?(h=e.r,f=e.g,y=e.b,t={r:255*D(h,255),g:255*D(f,255),b:255*D(y,255)},d=!0,p="%"===String(e.r).substr(-1)?"prgb":"rgb"):J(e.h)&&J(e.s)&&J(e.v)?(o=B(e.s),s=B(e.v),t=function(e,t,i){e=6*D(e,360),t=D(t,100),i=D(i,100);var o=n.floor(e),r=e-o,a=i*(1-t),s=i*(1-r*t),c=i*(1-(1-r)*t),l=o%6;return{r:255*[i,s,a,a,c,i][l],g:255*[c,i,i,s,a,a][l],b:255*[a,a,c,i,i,s][l]}}(e.h,o,s),d=!0,p="hsv"):J(e.h)&&J(e.s)&&J(e.l)&&(o=B(e.s),c=B(e.l),t=function(e,t,i){var o,n,r;function a(e,t,i){return i<0&&(i+=1),i>1&&(i-=1),i<1/6?e+6*(t-e)*i:i<.5?t:i<2/3?e+(t-e)*(2/3-i)*6:e}if(e=D(e,360),t=D(t,100),i=D(i,100),0===t)o=n=r=i;else{var s=i<.5?i*(1+t):i+t-i*t,c=2*i-s;o=a(c,s,e+1/3),n=a(c,s,e),r=a(c,s,e-1/3)}return{r:255*o,g:255*n,b:255*r}}(e.h,o,c),d=!0,p="hsl"),e.hasOwnProperty("a")&&(i=e.a));var h,f,y;return i=O(i),{ok:d,format:e.format||p,r:l(255,u(t.r,0)),g:l(255,u(t.g,0)),b:l(255,u(t.b,0)),a:i}}(e);this._originalInput=e,this._r=i.r,this._g=i.g,this._b=i.b,this._a=i.a,this._roundA=c(100*this._a)/100,this._format=t.format||i.format,this._gradientType=t.gradientType,this._r<1&&(this._r=c(this._r)),this._g<1&&(this._g=c(this._g)),this._b<1&&(this._b=c(this._b)),this._ok=i.ok,this._tc_id=s++}function h(e,t,i){e=D(e,255),t=D(t,255),i=D(i,255);var o,n,r=u(e,t,i),a=l(e,t,i),s=(r+a)/2;if(r==a)o=n=0;else{var c=r-a;switch(n=s>.5?c/(2-r-a):c/(r+a),r){case e:o=(t-i)/c+(t<i?6:0);break;case t:o=(i-e)/c+2;break;case i:o=(e-t)/c+4}o/=6}return{h:o,s:n,l:s}}function f(e,t,i){e=D(e,255),t=D(t,255),i=D(i,255);var o,n,r=u(e,t,i),a=l(e,t,i),s=r,c=r-a;if(n=0===r?0:c/r,r==a)o=0;else{switch(r){case e:o=(t-i)/c+(t<i?6:0);break;case t:o=(i-e)/c+2;break;case i:o=(e-t)/c+4}o/=6}return{h:o,s:n,v:s}}function y(e,t,i,o){var n=[$(c(e).toString(16)),$(c(t).toString(16)),$(c(i).toString(16))];return o&&n[0].charAt(0)==n[0].charAt(1)&&n[1].charAt(0)==n[1].charAt(1)&&n[2].charAt(0)==n[2].charAt(1)?n[0].charAt(0)+n[1].charAt(0)+n[2].charAt(0):n.join("")}function g(e,t,i,o){return[$(L(o)),$(c(e).toString(16)),$(c(t).toString(16)),$(c(i).toString(16))].join("")}function m(e,t){t=0===t?0:t||10;var i=p(e).toHsl();return i.s-=t/100,i.s=M(i.s),p(i)}function v(e,t){t=0===t?0:t||10;var i=p(e).toHsl();return i.s+=t/100,i.s=M(i.s),p(i)}function b(e){return p(e).desaturate(100)}function S(e,t){t=0===t?0:t||10;var i=p(e).toHsl();return i.l+=t/100,i.l=M(i.l),p(i)}function k(e,t){t=0===t?0:t||10;var i=p(e).toRgb();return i.r=u(0,l(255,i.r-c(-t/100*255))),i.g=u(0,l(255,i.g-c(-t/100*255))),i.b=u(0,l(255,i.b-c(-t/100*255))),p(i)}function P(e,t){t=0===t?0:t||10;var i=p(e).toHsl();return i.l-=t/100,i.l=M(i.l),p(i)}function w(e,t){var i=p(e).toHsl(),o=(i.h+t)%360;return i.h=o<0?360+o:o,p(i)}function A(e){var t=p(e).toHsl();return t.h=(t.h+180)%360,p(t)}function I(e){var t=p(e).toHsl(),i=t.h;return[p(e),p({h:(i+120)%360,s:t.s,l:t.l}),p({h:(i+240)%360,s:t.s,l:t.l})]}function T(e){var t=p(e).toHsl(),i=t.h;return[p(e),p({h:(i+90)%360,s:t.s,l:t.l}),p({h:(i+180)%360,s:t.s,l:t.l}),p({h:(i+270)%360,s:t.s,l:t.l})]}function C(e){var t=p(e).toHsl(),i=t.h;return[p(e),p({h:(i+72)%360,s:t.s,l:t.l}),p({h:(i+216)%360,s:t.s,l:t.l})]}function _(e,t,i){t=t||6,i=i||30;var o=p(e).toHsl(),n=360/i,r=[p(e)];for(o.h=(o.h-(n*t>>1)+720)%360;--t;)o.h=(o.h+n)%360,r.push(p(o));return r}function E(e,t){t=t||6;for(var i=p(e).toHsv(),o=i.h,n=i.s,r=i.v,a=[],s=1/t;t--;)a.push(p({h:o,s:n,v:r})),r=(r+s)%1;return a}p.prototype={isDark:function(){return this.getBrightness()<128},isLight:function(){return!this.isDark()},isValid:function(){return this._ok},getOriginalInput:function(){return this._originalInput},getFormat:function(){return this._format},getAlpha:function(){return this._a},getBrightness:function(){var e=this.toRgb();return(299*e.r+587*e.g+114*e.b)/1e3},getLuminance:function(){var e,t,i,o=this.toRgb();return e=o.r/255,t=o.g/255,i=o.b/255,.2126*(e<=.03928?e/12.92:n.pow((e+.055)/1.055,2.4))+.7152*(t<=.03928?t/12.92:n.pow((t+.055)/1.055,2.4))+.0722*(i<=.03928?i/12.92:n.pow((i+.055)/1.055,2.4))},setAlpha:function(e){return this._a=O(e),this._roundA=c(100*this._a)/100,this},toHsv:function(){var e=f(this._r,this._g,this._b);return{h:360*e.h,s:e.s,v:e.v,a:this._a}},toHsvString:function(){var e=f(this._r,this._g,this._b),t=c(360*e.h),i=c(100*e.s),o=c(100*e.v);return 1==this._a?"hsv("+t+", "+i+"%, "+o+"%)":"hsva("+t+", "+i+"%, "+o+"%, "+this._roundA+")"},toHsl:function(){var e=h(this._r,this._g,this._b);return{h:360*e.h,s:e.s,l:e.l,a:this._a}},toHslString:function(){var e=h(this._r,this._g,this._b),t=c(360*e.h),i=c(100*e.s),o=c(100*e.l);return 1==this._a?"hsl("+t+", "+i+"%, "+o+"%)":"hsla("+t+", "+i+"%, "+o+"%, "+this._roundA+")"},toHex:function(e){return y(this._r,this._g,this._b,e)},toHexString:function(e){return"#"+this.toHex(e)},toHex8:function(e){return function(e,t,i,o,n){var r=[$(c(e).toString(16)),$(c(t).toString(16)),$(c(i).toString(16)),$(L(o))];if(n&&r[0].charAt(0)==r[0].charAt(1)&&r[1].charAt(0)==r[1].charAt(1)&&r[2].charAt(0)==r[2].charAt(1)&&r[3].charAt(0)==r[3].charAt(1))return r[0].charAt(0)+r[1].charAt(0)+r[2].charAt(0)+r[3].charAt(0);return r.join("")}(this._r,this._g,this._b,this._a,e)},toHex8String:function(e){return"#"+this.toHex8(e)},toRgb:function(){return{r:c(this._r),g:c(this._g),b:c(this._b),a:this._a}},toRgbString:function(){return 1==this._a?"rgb("+c(this._r)+", "+c(this._g)+", "+c(this._b)+")":"rgba("+c(this._r)+", "+c(this._g)+", "+c(this._b)+", "+this._roundA+")"},toPercentageRgb:function(){return{r:c(100*D(this._r,255))+"%",g:c(100*D(this._g,255))+"%",b:c(100*D(this._b,255))+"%",a:this._a}},toPercentageRgbString:function(){return 1==this._a?"rgb("+c(100*D(this._r,255))+"%, "+c(100*D(this._g,255))+"%, "+c(100*D(this._b,255))+"%)":"rgba("+c(100*D(this._r,255))+"%, "+c(100*D(this._g,255))+"%, "+c(100*D(this._b,255))+"%, "+this._roundA+")"},toName:function(){return 0===this._a?"transparent":!(this._a<1)&&(R[y(this._r,this._g,this._b,!0)]||!1)},toFilter:function(e){var t="#"+g(this._r,this._g,this._b,this._a),i=t,o=this._gradientType?"GradientType = 1, ":"";if(e){var n=p(e);i="#"+g(n._r,n._g,n._b,n._a)}return"progid:DXImageTransform.Microsoft.gradient("+o+"startColorstr="+t+",endColorstr="+i+")"},toString:function(e){var t=!!e;e=e||this._format;var i=!1,o=this._a<1&&this._a>=0;return t||!o||"hex"!==e&&"hex6"!==e&&"hex3"!==e&&"hex4"!==e&&"hex8"!==e&&"name"!==e?("rgb"===e&&(i=this.toRgbString()),"prgb"===e&&(i=this.toPercentageRgbString()),"hex"!==e&&"hex6"!==e||(i=this.toHexString()),"hex3"===e&&(i=this.toHexString(!0)),"hex4"===e&&(i=this.toHex8String(!0)),"hex8"===e&&(i=this.toHex8String()),"name"===e&&(i=this.toName()),"hsl"===e&&(i=this.toHslString()),"hsv"===e&&(i=this.toHsvString()),i||this.toHexString()):"name"===e&&0===this._a?this.toName():this.toRgbString()},clone:function(){return p(this.toString())},_applyModification:function(e,t){var i=e.apply(null,[this].concat([].slice.call(t)));return this._r=i._r,this._g=i._g,this._b=i._b,this.setAlpha(i._a),this},lighten:function(){return this._applyModification(S,arguments)},brighten:function(){return this._applyModification(k,arguments)},darken:function(){return this._applyModification(P,arguments)},desaturate:function(){return this._applyModification(m,arguments)},saturate:function(){return this._applyModification(v,arguments)},greyscale:function(){return this._applyModification(b,arguments)},spin:function(){return this._applyModification(w,arguments)},_applyCombination:function(e,t){return e.apply(null,[this].concat([].slice.call(t)))},analogous:function(){return this._applyCombination(_,arguments)},complement:function(){return this._applyCombination(A,arguments)},monochromatic:function(){return this._applyCombination(E,arguments)},splitcomplement:function(){return this._applyCombination(C,arguments)},triad:function(){return this._applyCombination(I,arguments)},tetrad:function(){return this._applyCombination(T,arguments)}},p.fromRatio=function(e,t){if("object"==typeof e){var i={};for(var o in e)e.hasOwnProperty(o)&&(i[o]="a"===o?e[o]:B(e[o]));e=i}return p(e,t)},p.equals=function(e,t){return!(!e||!t)&&p(e).toRgbString()==p(t).toRgbString()},p.random=function(){return p.fromRatio({r:d(),g:d(),b:d()})},p.mix=function(e,t,i){i=0===i?0:i||50;var o=p(e).toRgb(),n=p(t).toRgb(),r=i/100;return p({r:(n.r-o.r)*r+o.r,g:(n.g-o.g)*r+o.g,b:(n.b-o.b)*r+o.b,a:(n.a-o.a)*r+o.a})},p.readability=function(e,t){var i=p(e),o=p(t);return(n.max(i.getLuminance(),o.getLuminance())+.05)/(n.min(i.getLuminance(),o.getLuminance())+.05)},p.isReadable=function(e,t,i){var o,n,r=p.readability(e,t);switch(n=!1,(o=function(e){var t,i;t=((e=e||{level:"AA",size:"small"}).level||"AA").toUpperCase(),i=(e.size||"small").toLowerCase(),"AA"!==t&&"AAA"!==t&&(t="AA");"small"!==i&&"large"!==i&&(i="small");return{level:t,size:i}}(i)).level+o.size){case"AAsmall":case"AAAlarge":n=r>=4.5;break;case"AAlarge":n=r>=3;break;case"AAAsmall":n=r>=7}return n},p.mostReadable=function(e,t,i){var o,n,r,a,s=null,c=0;n=(i=i||{}).includeFallbackColors,r=i.level,a=i.size;for(var l=0;l<t.length;l++)(o=p.readability(e,t[l]))>c&&(c=o,s=p(t[l]));return p.isReadable(e,s,{level:r,size:a})||!n?s:(i.includeFallbackColors=!1,p.mostReadable(e,["#fff","#000"],i))};var x=p.names={aliceblue:"f0f8ff",antiquewhite:"faebd7",aqua:"0ff",aquamarine:"7fffd4",azure:"f0ffff",beige:"f5f5dc",bisque:"ffe4c4",black:"000",blanchedalmond:"ffebcd",blue:"00f",blueviolet:"8a2be2",brown:"a52a2a",burlywood:"deb887",burntsienna:"ea7e5d",cadetblue:"5f9ea0",chartreuse:"7fff00",chocolate:"d2691e",coral:"ff7f50",cornflowerblue:"6495ed",cornsilk:"fff8dc",crimson:"dc143c",cyan:"0ff",darkblue:"00008b",darkcyan:"008b8b",darkgoldenrod:"b8860b",darkgray:"a9a9a9",darkgreen:"006400",darkgrey:"a9a9a9",darkkhaki:"bdb76b",darkmagenta:"8b008b",darkolivegreen:"556b2f",darkorange:"ff8c00",darkorchid:"9932cc",darkred:"8b0000",darksalmon:"e9967a",darkseagreen:"8fbc8f",darkslateblue:"483d8b",darkslategray:"2f4f4f",darkslategrey:"2f4f4f",darkturquoise:"00ced1",darkviolet:"9400d3",deeppink:"ff1493",deepskyblue:"00bfff",dimgray:"696969",dimgrey:"696969",dodgerblue:"1e90ff",firebrick:"b22222",floralwhite:"fffaf0",forestgreen:"228b22",fuchsia:"f0f",gainsboro:"dcdcdc",ghostwhite:"f8f8ff",gold:"ffd700",goldenrod:"daa520",gray:"808080",green:"008000",greenyellow:"adff2f",grey:"808080",honeydew:"f0fff0",hotpink:"ff69b4",indianred:"cd5c5c",indigo:"4b0082",ivory:"fffff0",khaki:"f0e68c",lavender:"e6e6fa",lavenderblush:"fff0f5",lawngreen:"7cfc00",lemonchiffon:"fffacd",lightblue:"add8e6",lightcoral:"f08080",lightcyan:"e0ffff",lightgoldenrodyellow:"fafad2",lightgray:"d3d3d3",lightgreen:"90ee90",lightgrey:"d3d3d3",lightpink:"ffb6c1",lightsalmon:"ffa07a",lightseagreen:"20b2aa",lightskyblue:"87cefa",lightslategray:"789",lightslategrey:"789",lightsteelblue:"b0c4de",lightyellow:"ffffe0",lime:"0f0",limegreen:"32cd32",linen:"faf0e6",magenta:"f0f",maroon:"800000",mediumaquamarine:"66cdaa",mediumblue:"0000cd",mediumorchid:"ba55d3",mediumpurple:"9370db",mediumseagreen:"3cb371",mediumslateblue:"7b68ee",mediumspringgreen:"00fa9a",mediumturquoise:"48d1cc",mediumvioletred:"c71585",midnightblue:"191970",mintcream:"f5fffa",mistyrose:"ffe4e1",moccasin:"ffe4b5",navajowhite:"ffdead",navy:"000080",oldlace:"fdf5e6",olive:"808000",olivedrab:"6b8e23",orange:"ffa500",orangered:"ff4500",orchid:"da70d6",palegoldenrod:"eee8aa",palegreen:"98fb98",paleturquoise:"afeeee",palevioletred:"db7093",papayawhip:"ffefd5",peachpuff:"ffdab9",peru:"cd853f",pink:"ffc0cb",plum:"dda0dd",powderblue:"b0e0e6",purple:"800080",rebeccapurple:"663399",red:"f00",rosybrown:"bc8f8f",royalblue:"4169e1",saddlebrown:"8b4513",salmon:"fa8072",sandybrown:"f4a460",seagreen:"2e8b57",seashell:"fff5ee",sienna:"a0522d",silver:"c0c0c0",skyblue:"87ceeb",slateblue:"6a5acd",slategray:"708090",slategrey:"708090",snow:"fffafa",springgreen:"00ff7f",steelblue:"4682b4",tan:"d2b48c",teal:"008080",thistle:"d8bfd8",tomato:"ff6347",turquoise:"40e0d0",violet:"ee82ee",wheat:"f5deb3",white:"fff",whitesmoke:"f5f5f5",yellow:"ff0",yellowgreen:"9acd32"},R=p.hexNames=function(e){var t={};for(var i in e)e.hasOwnProperty(i)&&(t[e[i]]=i);return t}(x);function O(e){return e=parseFloat(e),(isNaN(e)||e<0||e>1)&&(e=1),e}function D(e,t){(function(e){return"string"==typeof e&&-1!=e.indexOf(".")&&1===parseFloat(e)})(e)&&(e="100%");var i=function(e){return"string"===typeof e&&-1!=e.indexOf("%")}(e);return e=l(t,u(0,parseFloat(e))),i&&(e=parseInt(e*t,10)/100),n.abs(e-t)<1e-6?1:e%t/parseFloat(t)}function M(e){return l(1,u(0,e))}function j(e){return parseInt(e,16)}function $(e){return 1==e.length?"0"+e:""+e}function B(e){return e<=1&&(e=100*e+"%"),e}function L(e){return n.round(255*parseFloat(e)).toString(16)}function F(e){return j(e)/255}var N=function(){var e="(?:[-\\+]?\\d*\\.\\d+%?)|(?:[-\\+]?\\d+%?)",t="[\\s|\\(]+("+e+")[,|\\s]+("+e+")[,|\\s]+("+e+")\\s*\\)?",i="[\\s|\\(]+("+e+")[,|\\s]+("+e+")[,|\\s]+("+e+")[,|\\s]+("+e+")\\s*\\)?";return{CSS_UNIT:new RegExp(e),rgb:new RegExp("rgb"+t),rgba:new RegExp("rgba"+i),hsl:new RegExp("hsl"+t),hsla:new RegExp("hsla"+i),hsv:new RegExp("hsv"+t),hsva:new RegExp("hsva"+i),hex3:/^#?([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})$/,hex6:/^#?([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})$/,hex4:/^#?([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})$/,hex8:/^#?([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})$/}}();function J(e){return!!N.CSS_UNIT.exec(e)}e.exports?e.exports=p:void 0===(o=function(){return p}.call(t,i,t,e))||(e.exports=o)}(Math)},Qg7d:function(e,t,i){"use strict";var o=this&&this.__decorate||function(e,t,i,o){var n,r=arguments.length,a=r<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,i):o;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)a=Reflect.decorate(e,t,i,o);else for(var s=e.length-1;s>=0;s--)(n=e[s])&&(a=(r<3?n(a):r>3?n(t,i,a):n(t,i))||a);return r>3&&a&&Object.defineProperty(t,i,a),a},n=this&&this.__metadata||function(e,t){if("object"===typeof Reflect&&"function"===typeof Reflect.metadata)return Reflect.metadata(e,t)},r=this&&this.__param||function(e,t){return function(i,o){t(i,o,e)}};Object.defineProperty(t,"__esModule",{value:!0}),t.LayoutController=void 0;const a=i("s6Xb"),s=i("LcNk"),c=i("YfSF"),l=i("2ZOr"),u=i("DC67"),d=i("cwRv"),p=i("gJ6f"),h=i("2++W"),f=i("DG/1"),y=i("kEja"),g=i("TSub"),m=i("SWgh"),v=i("83B1"),b=i("LBtb");let S=class{constructor(e,t,i,o,n,r){this.screen=e,this.rootContainer=t,this.userInterface=i,this.layerManager=o,this.controlRepository=n,this.runtimeOptionsService=r,this.allControls=[],this.socketKeyMap=new Map,this.controlsWithTouchesSubscription=void 0,this.buildLayout=(e,t,i,o)=>{const n="portrait"===e.layoutFile.orientation||"portrait-up"===e.layoutFile.orientation,r=5*t.baseControlSize,a=(n?4:8)*t.baseControlSize,l=!!(e.layoutFile.content.center||e.layoutFile.content.left||e.layoutFile.content.right||e.layoutFile.content.lower||e.layoutFile.content.upper),u=!o||!l||t.windowWidth>=a&&t.windowHeight>=r;this.userInterface.setControlsAreHidden(!u);const d=u?e.layoutFile.content:f.blankLayout.layoutFile.content,h=this.layoutToSocketArray(d);return(0,s.combineLatest)([this.effectiveScreenProps$]).pipe((0,c.withLatestFrom)(this.userInterface.getCurrentSettingsStream()),(0,c.map)(e=>{const[[t],i]=e,o=[{type:p.ControlType.ErgoAdjustor,socket:"LEFT_ERGO_SIZE",angleInRadians:t.leftWheelAnchor.angleInRadians,radius:t.leftWheelAnchor.radius,useSymmetry:i.useErgoEditSymmetry,visible:!!d.left,wheelKey:"left"},{type:p.ControlType.ErgoAdjustor,socket:"RIGHT_ERGO_SIZE",angleInRadians:t.rightWheelAnchor.angleInRadians,radius:t.rightWheelAnchor.radius,useSymmetry:i.useErgoEditSymmetry,visible:!!d.right,wheelKey:"right"},{type:p.ControlType.ErgoAdjustor,socket:"CENTER_ERGO_SIZE",angleInRadians:t.rightWheelAnchor.angleInRadians,radius:t.centerWheelAnchor.radius,useSymmetry:i.useErgoEditSymmetry,visible:!!d.center,wheelKey:"center"}];return[...h,...o,{type:p.ControlType.TouchForwarding,socket:"TOUCH_FORWARDING"}]})).pipe((0,c.map)(e=>{const t=e,{controlConfigContainerLinks:o,containers:n}=(0,m.createContainersForControlConfigs)(t,i);return{controls:this.buildControls(o,this.rootContainer),containers:[n.edges.upper,n.edges.lower,n.wheels.left,n.wheels.center,n.wheels.right,n.nativeTouch,n.sensors]}}))},this.loadedLayout$=this.userInterface.getLayoutStream().pipe((0,c.switchMap)(e=>{this.layerManager.reconcileLayoutLayers(e);return this.layerManager.getActiveLayersStream().pipe((0,c.map)(t=>{var i;const o=JSON.parse(JSON.stringify(e)),n=o.layoutFile.content;for(const e of t)(0,b.mergeLayoutContent)(n,null===(i=n.layers)||void 0===i?void 0:i[e]);return o}))}),(0,c.observeOn)(s.queueScheduler)),this.effectiveScreenProps$=(0,s.combineLatest)([this.userInterface.getCurrentSettingsStream(),this.screen.screenProps$]).pipe((0,c.map)(e=>{const[t,i]=e;let o=t.landscape;switch(i.orientation){case h.ScreenOrientation.LandscapeLeft:case h.ScreenOrientation.LandscapeRight:o=i.isSpanned?t.landscapeSpanned:t.landscape;break;case h.ScreenOrientation.PortraitUp:case h.ScreenOrientation.PortraitUpsideDown:o=i.isSpanned?t.portraitSpanned:t.portrait}return(0,g.calculateEffectiveScreenPropsFromSettings)(i,o)}),(0,c.shareReplay)(1));const a=(0,s.combineLatest)([this.effectiveScreenProps$,this.loadedLayout$]).pipe((0,c.withLatestFrom)(this.userInterface.getCurrentSettingsStream()),(0,c.map)(([[e,t],i])=>{if(t.layoutFile.content.sensors)for(const o of t.layoutFile.content.sensors)(0,y.isSensorControl)(o)&&(o.enabled=o.enabled&&"accelerometer"===o.type?i.accelerometer.enabled:i.gyro.enabled,o.sensitivity="accelerometer"===o.type?i.accelerometer.sensitivity:i.gyro.sensitivity);return[e,t,(0,v.getSocketMap)(t,e)]})).pipe((0,c.withLatestFrom)(this.runtimeOptionsService.getFilteredOptionsStream(e=>({hideOnSmallScreens:e.hideOnSmallScreens}))),(0,c.switchMap)(([[e,t,i],o])=>this.buildLayout(t,e,i,o.hideOnSmallScreens).pipe((0,c.tap)(e=>{this.allControls=e.controls.allControls}))),(0,c.tap)(()=>{const e=this.allControls.map(e=>{const t=e.model.getProps();return`${t.type}-${t.socket}`});this.socketKeyMap.forEach((t,i)=>{-1===e.indexOf(i)&&(t.unmount(),this.socketKeyMap.delete(i))})}),(0,c.shareReplay)(1));this.mountedControls$=a.pipe((0,c.map)(e=>e.controls)),this.mountedContainers$=a.pipe((0,c.map)(e=>e.containers))}unmount(){var e;null===(e=this.controlsWithTouchesSubscription)||void 0===e||e.unsubscribe(),this.allControls.forEach(e=>{e&&e.unmount()})}getRenderControlsStream(){return this.mountedControls$.pipe((0,c.map)(e=>e.renderControls),(0,c.shareReplay)(1))}getControlContainersStream(){return this.mountedContainers$.pipe((0,c.shareReplay)(1))}layoutToSocketArray(e){const t=[],{center:i,left:o,right:n,lower:r,upper:a,sensors:s}=e;function c(e,i){const o=(0,b.generateKeymap)(e),{outer:n,inner:r}=i;n&&n.reduce((i,n)=>Array.isArray(n)?(n.map((r,a)=>{if(r){const s=i%8;t.push(Object.assign(r,{socket:1===n.length?o.outer[s].singleLarge:2===n.length?o.outer[s].double[a]:3===n.length?o.outer[s].triple[a]:o.outer[s].quadruple[a],side:e}))}}),i+2):(n&&t.push(Object.assign(n,{socket:o.outer[i%8].singleBase,side:e})),i+1),0),r&&r.map((i,n)=>{i&&t.push(Object.assign(i,{socket:1===r.length?o.inner.singleLarge:2===r.length?o.inner.double[n]:3===r.length?o.inner.triple[n]:o.inner.quadruple[n],side:e}))})}if(i&&c("CENTER",i),o&&c("LEFT",o),n&&c("RIGHT",n),s){const e=s.length;for(let i=0;i<e;i++){const e=s[i];e&&(Object.assign(e,{socket:"SENSOR_"+i}),t.push(e))}}if(a&&a.right){const e=a.right.length;for(let i=0;i<e;i++){const e=a.right[i];e&&(Object.assign(e,{socket:"RIGHT_SYSTEM_"+i}),t.push(e))}}if(r){const{center:e,leftCenter:i,rightCenter:o}=r;if(e){const i=e;Object.assign(e,{socket:"CENTER_LOWER_SYSTEM"}),t.push(i)}if(i){const e=i.length;for(let o=0;o<e;o++){const e=i[o];e&&(Object.assign(e,{socket:"CENTERLEFT_LOWER_SYSTEM_"+o}),t.push(e))}}if(o){const e=o.length;for(let i=0;i<e;i++){const e=o[i];e&&(Object.assign(e,{socket:"CENTERRIGHT_LOWER_SYSTEM_"+i}),t.push(e))}}}return t}buildControls(e,t){const i=[],o=[];return e.forEach(e=>{const{config:n,container:r}=e,a=`${n.type}-${n.socket}`,s=(0,m.buildControl)(n,a,t,this.socketKeyMap,this.controlRepository);s&&(i.push(s),(0,u.isRenderControl)(s)?(o.push(s),r.type===d.ControlContainerType.RenderControlContainer&&r.controls.push(s)):(0,y.isSensorControl)(s)&&r.type===d.ControlContainerType.SensorControlContainer&&r.controls.push(s))}),{allControls:i,renderControls:o}}};S=o([(0,a.injectable)(),r(0,(0,a.inject)(l.SERVICE_TYPES.ScreenDisplay)),r(1,(0,a.inject)(l.CONSTANT_TYPES.RootContainer)),r(2,(0,a.inject)(l.SERVICE_TYPES.UserInterface)),r(3,(0,a.inject)(l.SERVICE_TYPES.LayerManager)),r(4,(0,a.inject)(l.SERVICE_TYPES.ControlRepository)),r(5,(0,a.inject)(l.SERVICE_TYPES.RuntimeOptions)),n("design:paramtypes",[Function,Function,Function,Function,Function,Function])],S),t.LayoutController=S},Qmag:function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.areRuntimeOptionsEqual=t.mergeRuntimeOptions=t.DefaultRuntimeOptions=t.areRuntimeCallbacksEqual=t.mergeRuntimeCallbacks=void 0;const o=i("DG/1");t.mergeRuntimeCallbacks=function(e,t){return Object.assign(Object.assign(Object.assign({},e),t),{asset:Object.assign(Object.assign({},null===e||void 0===e?void 0:e.asset),null===t||void 0===t?void 0:t.asset),layout:Object.assign(Object.assign({},null===e||void 0===e?void 0:e.layout),null===t||void 0===t?void 0:t.layout)})},t.areRuntimeCallbacksEqual=function(e,t){var i,o,n,r,a,s,c,l;return e===t||(null===(i=e.asset)||void 0===i?void 0:i.onUnloadRenderAsset)===(null===(o=t.asset)||void 0===o?void 0:o.onUnloadRenderAsset)&&(null===(n=e.asset)||void 0===n?void 0:n.onLoadAssetFile)===(null===(r=t.asset)||void 0===r?void 0:r.onLoadAssetFile)&&e.fetchTouchAdaptationBundle===t.fetchTouchAdaptationBundle&&e.getString===t.getString&&(null===(a=e.layout)||void 0===a?void 0:a.onCurrentLayoutChanged)===(null===(s=t.layout)||void 0===s?void 0:s.onCurrentLayoutChanged)&&(null===(c=e.layout)||void 0===c?void 0:c.onLoadedLayoutsChanged)===(null===(l=t.layout)||void 0===l?void 0:l.onLoadedLayoutsChanged)&&e.onBundleChanged===t.onBundleChanged&&e.onShowTakNotification===t.onShowTakNotification&&e.onTelemetry===t.onTelemetry},t.DefaultRuntimeOptions={allowLayoutChanges:!1,allowMouseInteraction:!1,desiredDpi:1,disableTak:!1,hideOnSmallScreens:!1,isTouchCapableDevice:!1,locale:"neutral",preferredInputModality:void 0,showStandardLayoutAsFallback:!1,supportedTabs:void 0,titleId:void 0},t.mergeRuntimeOptions=function(e,t){return Object.assign(Object.assign({},e),t)},t.areRuntimeOptionsEqual=function(e,t){return e===t||e.allowLayoutChanges===t.allowLayoutChanges&&e.allowMouseInteraction===t.allowMouseInteraction&&e.desiredDpi===t.desiredDpi&&e.disableTak===t.disableTak&&e.hideOnSmallScreens===t.hideOnSmallScreens&&e.isTouchCapableDevice===t.isTouchCapableDevice&&e.locale===t.locale&&e.preferredInputModality===t.preferredInputModality&&e.showStandardLayoutAsFallback===t.showStandardLayoutAsFallback&&(0,o.areTabDetailsArrayEquivalent)(e.supportedTabs,t.supportedTabs)&&e.titleId===t.titleId}},RDdo:function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getAssetRenderDataInLayout=t.getSpritesheetsInAssetMap=t.transformAssetsInLayoutFile=t.getSpritesheetAssetAtlas=t.assetFileHasAcceptedImageExtension=t.getDpiValueFromDirName=t.getAssetNameFromFileName=t.AcceptedAssetImageExtensions=t.AcceptedAssetDpis=void 0;const o=i("wV8u"),n=i("kEja"),r=/@(\d+\.\d+)x/;function a(e,t){if(!e||"object"!==typeof e)return;if(e.type&&e.value&&"asset"===e.type){const i=t.get(e.value);if(!i)throw new ReferenceError(`Could not find a render key for asset used in reference "${e.value}"`);e.value=i}const i=Object.keys(e);for(let o=0;o<i.length;o++){a(e[i[o]],t)}}function s(e,t){if(!e||"object"!==typeof e)return;if(e.type)switch(e.type){case"arcadeButtons":!function(e,t){if("arcadeButtons"!==e.type)return;const i=Object.keys(e);for(let o=0;o<i.length;o++){const n=i[o];e[n]&&"object"===typeof e[n]&&e[n].styles&&a(e[n],t)}}(e,t);break;case"button":case"directionalPad":case"joystick":case"touchpad":case"throttle":!function(e,t){e.styles&&a(e.styles,t)}(e,t)}const i=Object.keys(e);for(let o=0;o<i.length;o++){s(e[i[o]],t)}}function c(e){const t=e.lastIndexOf(".");return-1!==t?e.substring(0,t):e}function l(e,t,i){if(!e||"object"!==typeof e)return;if(e.type&&e.value&&"asset"===e.type){const o=t.find(t=>t.renderKey===e.value);o&&!i.includes(o)&&i.push(o)}const o=Object.keys(e);for(let n=0;n<o.length;n++){const r=o[n];l(e[r],t,i)}}function u(e,t,i){if(!e||"object"!==typeof e)return;if(e.type)switch(e.type){case"arcadeButtons":!function(e,t,i){if("arcadeButtons"!==e.type)return;const o=Object.keys(e);for(let n=0;n<o.length;n++){const r=o[n];e[r]&&"object"===typeof e[r]&&e[r].styles&&l(e[r],t,i)}}(e,t,i);break;case"button":case"directionalPad":case"joystick":case"touchpad":case"throttle":!function(e,t,i){e.styles&&l(e.styles,t,i)}(e,t,i)}const o=Object.keys(e);for(let n=0;n<o.length;n++){u(e[o[n]],t,i)}}t.AcceptedAssetDpis=["@1.0x","@1.5x","@2.0x","@3.0x","@4.0x"],t.AcceptedAssetImageExtensions=["png"],t.getAssetNameFromFileName=c,t.getDpiValueFromDirName=function(e){const t=r.exec(e);return t&&t[1]?parseFloat(t[1]):-1},t.assetFileHasAcceptedImageExtension=function(e){const i=e.toLowerCase().split(".").pop();return!!i&&t.AcceptedAssetImageExtensions.includes(i)},t.getSpritesheetAssetAtlas=function(e,t){const i=c(e);return t.find(e=>e.name===i+".json")},t.transformAssetsInLayoutFile=function(e,t){const i=new o.CaseInsensitiveMap;for(let o=0;o<t.length;o++){const e=t[o];e.spritesheetName?i.set(`${e.spritesheetName}/${e.name}`,e.renderKey):i.set(e.name,e.renderKey)}return s(e,i),e},t.getSpritesheetsInAssetMap=function(e){const t=[];if(e)for(const i of e.values())(0,n.isLoadedSpritesheetFile)(i)&&t.push(i);return t},t.getAssetRenderDataInLayout=function(e,t,i){u(e,t,i)}},RbPY:function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.convertFaceImageLabelFillType=t.convertFaceImageLabelType=t.finalizeButtonLabel=t.DefaultLabelOffsetY=t.DefaultLabelOffsetX=t.DefaultFaceImageWithLabelOffset=void 0;const o=i("2ZOr"),n=i("PFUz"),r=i("yi9v"),a=i("l4dA");t.DefaultFaceImageWithLabelOffset=.1665*-o.ICON_SIZE;t.DefaultLabelOffsetX=.333*o.ICON_SIZE,t.DefaultLabelOffsetY=.4165*o.ICON_SIZE,t.finalizeButtonLabel=function(e,i,o){"icon"===e.type?e.label.type===n.FaceImageLabelRenderType.Default&&e.label.value===e.value?(e.color=e.label.color,e.label.type=n.FaceImageLabelRenderType.None,e.label.value=r.EmptyIcon):(e.label.value=(0,a.getLabel)(i.multiActionMode,i.action,e.label.type),e.label.value!==r.EmptyIcon&&(e.offset.x=t.DefaultFaceImageWithLabelOffset,e.offset.y=t.DefaultFaceImageWithLabelOffset,e.label.offset.x=t.DefaultLabelOffsetX,e.label.offset.y=t.DefaultLabelOffsetY,e.label.fillType=o.convert(i.action))):e.label.type=n.FaceImageLabelRenderType.None},t.convertFaceImageLabelType=function(e){return"none"===e?n.FaceImageLabelRenderType.None:"action"===e?n.FaceImageLabelRenderType.Action:n.FaceImageLabelRenderType.Default},t.convertFaceImageLabelFillType=function(e){return(0,a.isABXYButton)(e)?n.FaceImageLabelRenderFillType.Solid:n.FaceImageLabelRenderFillType.None}},RpMG:function(e,t,i){"use strict";e.exports=function(e,t,i){var o=" ",n=e.level,r=e.dataLevel,a=e.schema[t],s=e.schemaPath+e.util.getProperty(t),c=e.errSchemaPath+"/"+t,l=!e.opts.allErrors,u="data"+(r||""),d="valid"+n,p="errs__"+n,h=e.util.copy(e);h.level++;var f="valid"+h.level,y=e.schema.then,g=e.schema.else,m=void 0!==y&&(e.opts.strictKeywords?"object"==typeof y&&Object.keys(y).length>0||!1===y:e.util.schemaHasRules(y,e.RULES.all)),v=void 0!==g&&(e.opts.strictKeywords?"object"==typeof g&&Object.keys(g).length>0||!1===g:e.util.schemaHasRules(g,e.RULES.all)),b=h.baseId;if(m||v){var S;h.createErrors=!1,h.schema=a,h.schemaPath=s,h.errSchemaPath=c,o+=" var "+p+" = errors; var "+d+" = true;  ";var k=e.compositeRule;e.compositeRule=h.compositeRule=!0,o+="  "+e.validate(h)+" ",h.baseId=b,h.createErrors=!0,o+="  errors = "+p+"; if (vErrors !== null) { if ("+p+") vErrors.length = "+p+"; else vErrors = null; }  ",e.compositeRule=h.compositeRule=k,m?(o+=" if ("+f+") {  ",h.schema=e.schema.then,h.schemaPath=e.schemaPath+".then",h.errSchemaPath=e.errSchemaPath+"/then",o+="  "+e.validate(h)+" ",h.baseId=b,o+=" "+d+" = "+f+"; ",m&&v?o+=" var "+(S="ifClause"+n)+" = 'then'; ":S="'then'",o+=" } ",v&&(o+=" else { ")):o+=" if (!"+f+") { ",v&&(h.schema=e.schema.else,h.schemaPath=e.schemaPath+".else",h.errSchemaPath=e.errSchemaPath+"/else",o+="  "+e.validate(h)+" ",h.baseId=b,o+=" "+d+" = "+f+"; ",m&&v?o+=" var "+(S="ifClause"+n)+" = 'else'; ":S="'else'",o+=" } "),o+=" if (!"+d+") {   var err =   ",!1!==e.createErrors?(o+=" { keyword: 'if' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(c)+" , params: { failingKeyword: "+S+" } ",!1!==e.opts.messages&&(o+=" , message: 'should match \"' + "+S+" + '\" schema' "),e.opts.verbose&&(o+=" , schema: validate.schema"+s+" , parentSchema: validate.schema"+e.schemaPath+" , data: "+u+" "),o+=" } "):o+=" {} ",o+=";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",!e.compositeRule&&l&&(e.async?o+=" throw new ValidationError(vErrors); ":o+=" validate.errors = vErrors; return false; "),o+=" }   ",l&&(o+=" else { ")}else l&&(o+=" if (true) { ");return o}},S2AS:function(e,t,i){"use strict";var o=this&&this.__decorate||function(e,t,i,o){var n,r=arguments.length,a=r<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,i):o;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)a=Reflect.decorate(e,t,i,o);else for(var s=e.length-1;s>=0;s--)(n=e[s])&&(a=(r<3?n(a):r>3?n(t,i,a):n(t,i))||a);return r>3&&a&&Object.defineProperty(t,i,a),a},n=this&&this.__metadata||function(e,t){if("object"===typeof Reflect&&"function"===typeof Reflect.metadata)return Reflect.metadata(e,t)},r=this&&this.__param||function(e,t){return function(i,o){t(i,o,e)}};Object.defineProperty(t,"__esModule",{value:!0}),t.UserInterface=void 0;const a=i("s6Xb"),s=i("LcNk"),c=i("YfSF"),l=i("2ZOr"),u=i("vOfS"),d=i("a79a"),p=i("g5Cp"),h=i("DG/1"),f=i("YFNc"),y=i("EToa"),g=i("zrWA");let m=class{constructor(e,t){this.settings=e,this.layoutCoordinator=t,this.interactionModeStream=new s.BehaviorSubject(g.UIInteractionMode.Gameplay),this.controlsAreHiddenStream=new s.BehaviorSubject(!0),this.stylingConfigInputStream=new s.BehaviorSubject(g.DefaultStylingConfigurations),this.currentLayout=h.blankLayout,this.layoutStream=this.layoutCoordinator.getCurrentLayoutStream().pipe((0,c.map)(e=>(this.currentLayout=e||h.blankLayout,this.currentLayout)),(0,c.distinctUntilChanged)(),(0,c.shareReplay)(1)),this.currentSettingStream=this.getLayoutStream().pipe((0,c.map)(e=>e.scope),(0,c.distinctUntilChanged)(),(0,c.switchMap)(e=>this.settings.getScopedSettingsStream(e)),(0,c.distinctUntilChanged)(f.areScopedSettingsStatesEqual),(0,c.shareReplay)(1)),this.stylingConfigStream=this.stylingConfigInputStream.pipe((0,c.distinctUntilChanged)(y.areStylingConfigurationsEqual),(0,c.shareReplay)(1)),this.overlayStream=(0,s.combineLatest)([this.interactionModeStream,this.getCurrentSettingsStream(),this.getLayoutStream(),this.getControlsAreHiddenStream(),this.getStylingConfigurationStream()]).pipe((0,c.map)(([e,t,i,o,n])=>({controlsAreHidden:o,isErgoEditActive:d.Flags.IsFlagSet(e,g.UIInteractionMode.UserCustomization),settings:t,stylingConfig:n,layout:i})),(0,c.shareReplay)(1));const i=this.currentSettingStream.pipe((0,c.map)(e=>e.style.opacityMultiplier),(0,c.distinctUntilChanged)()),o=this.stylingConfigStream.pipe((0,c.map)(e=>e.controls.opacityMultiplier),(0,c.distinctUntilChanged)());this.opacityMultiplierStream=(0,s.combineLatest)([i,o]).pipe((0,c.map)(([e,t])=>{const{acceptedRange:{minimum:i,maximum:o},animationEnergy:n}=t;return{value:(0,p.clamp)(e,i,o),energy:n}}),(0,c.distinctUntilChanged)(u.areAnimatableValuesEqual),(0,c.shareReplay)(1)),this.containersStylingConfigStream=this.stylingConfigStream.pipe((0,c.map)(e=>e.containers),(0,c.distinctUntilChanged)(y.areContainersStylingConfigurationsEqual))}setControlsAreHidden(e){e!==this.controlsAreHiddenStream.value&&this.controlsAreHiddenStream.next(e)}toggleIsErgoEditActive(){d.Flags.IsFlagSet(this.interactionModeStream.value,g.UIInteractionMode.UserCustomization)?this.interactionModeStream.next(g.UIInteractionMode.Gameplay):this.interactionModeStream.next(g.UIInteractionMode.UserCustomization)}setStylingOverrides(e){this.stylingConfigInputStream.next((0,y.applyPartialStylingConfiguration)(this.stylingConfigInputStream.value,e))}getCurrentScope(){var e;return null===(e=this.currentLayout)||void 0===e?void 0:e.scope}getOverlayStream(){return this.overlayStream}getInteractionModeStream(){return this.interactionModeStream.asObservable()}getControlsAreHiddenStream(){return this.controlsAreHiddenStream}getCurrentSettingsStream(){return this.currentSettingStream}getLayoutStream(){return this.layoutStream}getOpacityMultiplierStream(){return this.opacityMultiplierStream}getStylingConfigurationStream(){return this.stylingConfigStream}getContainersStylingConfigurationStream(){return this.containersStylingConfigStream}};m=o([(0,a.injectable)(),r(0,(0,a.inject)(l.SERVICE_TYPES.Settings)),r(1,(0,a.inject)(l.SERVICE_TYPES.LayoutCoordinator)),n("design:paramtypes",[Function,Function])],m),t.UserInterface=m},SALw:function(e,t,i){"use strict";var o=i("J4sq"),n=/^(\d\d\d\d)-(\d\d)-(\d\d)$/,r=[0,31,28,31,30,31,30,31,31,30,31,30,31],a=/^(\d\d):(\d\d):(\d\d)(\.\d+)?(z|[+-]\d\d(?::?\d\d)?)?$/i,s=/^(?=.{1,253}\.?$)[a-z0-9](?:[a-z0-9-]{0,61}[a-z0-9])?(?:\.[a-z0-9](?:[-0-9a-z]{0,61}[0-9a-z])?)*\.?$/i,c=/^(?:[a-z][a-z0-9+\-.]*:)(?:\/?\/(?:(?:[a-z0-9\-._~!$&'()*+,;=:]|%[0-9a-f]{2})*@)?(?:\[(?:(?:(?:(?:[0-9a-f]{1,4}:){6}|::(?:[0-9a-f]{1,4}:){5}|(?:[0-9a-f]{1,4})?::(?:[0-9a-f]{1,4}:){4}|(?:(?:[0-9a-f]{1,4}:){0,1}[0-9a-f]{1,4})?::(?:[0-9a-f]{1,4}:){3}|(?:(?:[0-9a-f]{1,4}:){0,2}[0-9a-f]{1,4})?::(?:[0-9a-f]{1,4}:){2}|(?:(?:[0-9a-f]{1,4}:){0,3}[0-9a-f]{1,4})?::[0-9a-f]{1,4}:|(?:(?:[0-9a-f]{1,4}:){0,4}[0-9a-f]{1,4})?::)(?:[0-9a-f]{1,4}:[0-9a-f]{1,4}|(?:(?:25[0-5]|2[0-4]\d|[01]?\d\d?)\.){3}(?:25[0-5]|2[0-4]\d|[01]?\d\d?))|(?:(?:[0-9a-f]{1,4}:){0,5}[0-9a-f]{1,4})?::[0-9a-f]{1,4}|(?:(?:[0-9a-f]{1,4}:){0,6}[0-9a-f]{1,4})?::)|[Vv][0-9a-f]+\.[a-z0-9\-._~!$&'()*+,;=:]+)\]|(?:(?:25[0-5]|2[0-4]\d|[01]?\d\d?)\.){3}(?:25[0-5]|2[0-4]\d|[01]?\d\d?)|(?:[a-z0-9\-._~!$&'()*+,;=]|%[0-9a-f]{2})*)(?::\d*)?(?:\/(?:[a-z0-9\-._~!$&'()*+,;=:@]|%[0-9a-f]{2})*)*|\/(?:(?:[a-z0-9\-._~!$&'()*+,;=:@]|%[0-9a-f]{2})+(?:\/(?:[a-z0-9\-._~!$&'()*+,;=:@]|%[0-9a-f]{2})*)*)?|(?:[a-z0-9\-._~!$&'()*+,;=:@]|%[0-9a-f]{2})+(?:\/(?:[a-z0-9\-._~!$&'()*+,;=:@]|%[0-9a-f]{2})*)*)(?:\?(?:[a-z0-9\-._~!$&'()*+,;=:@/?]|%[0-9a-f]{2})*)?(?:#(?:[a-z0-9\-._~!$&'()*+,;=:@/?]|%[0-9a-f]{2})*)?$/i,l=/^(?:(?:[^\x00-\x20"'<>%\\^`{|}]|%[0-9a-f]{2})|\{[+#./;?&=,!@|]?(?:[a-z0-9_]|%[0-9a-f]{2})+(?::[1-9][0-9]{0,3}|\*)?(?:,(?:[a-z0-9_]|%[0-9a-f]{2})+(?::[1-9][0-9]{0,3}|\*)?)*\})*$/i,u=/^(?:(?:http[s\u017F]?|ftp):\/\/)(?:(?:[\0-\x08\x0E-\x1F!-\x9F\xA1-\u167F\u1681-\u1FFF\u200B-\u2027\u202A-\u202E\u2030-\u205E\u2060-\u2FFF\u3001-\uD7FF\uE000-\uFEFE\uFF00-\uFFFF]|[\uD800-\uDBFF][\uDC00-\uDFFF]|[\uD800-\uDBFF](?![\uDC00-\uDFFF])|(?:[^\uD800-\uDBFF]|^)[\uDC00-\uDFFF])+(?::(?:[\0-\x08\x0E-\x1F!-\x9F\xA1-\u167F\u1681-\u1FFF\u200B-\u2027\u202A-\u202E\u2030-\u205E\u2060-\u2FFF\u3001-\uD7FF\uE000-\uFEFE\uFF00-\uFFFF]|[\uD800-\uDBFF][\uDC00-\uDFFF]|[\uD800-\uDBFF](?![\uDC00-\uDFFF])|(?:[^\uD800-\uDBFF]|^)[\uDC00-\uDFFF])*)?@)?(?:(?!10(?:\.[0-9]{1,3}){3})(?!127(?:\.[0-9]{1,3}){3})(?!169\.254(?:\.[0-9]{1,3}){2})(?!192\.168(?:\.[0-9]{1,3}){2})(?!172\.(?:1[6-9]|2[0-9]|3[01])(?:\.[0-9]{1,3}){2})(?:[1-9][0-9]?|1[0-9][0-9]|2[01][0-9]|22[0-3])(?:\.(?:1?[0-9]{1,2}|2[0-4][0-9]|25[0-5])){2}(?:\.(?:[1-9][0-9]?|1[0-9][0-9]|2[0-4][0-9]|25[0-4]))|(?:(?:(?:[0-9a-z\xA1-\uD7FF\uE000-\uFFFF]|[\uD800-\uDBFF](?![\uDC00-\uDFFF])|(?:[^\uD800-\uDBFF]|^)[\uDC00-\uDFFF])+-)*(?:[0-9a-z\xA1-\uD7FF\uE000-\uFFFF]|[\uD800-\uDBFF](?![\uDC00-\uDFFF])|(?:[^\uD800-\uDBFF]|^)[\uDC00-\uDFFF])+)(?:\.(?:(?:[0-9a-z\xA1-\uD7FF\uE000-\uFFFF]|[\uD800-\uDBFF](?![\uDC00-\uDFFF])|(?:[^\uD800-\uDBFF]|^)[\uDC00-\uDFFF])+-)*(?:[0-9a-z\xA1-\uD7FF\uE000-\uFFFF]|[\uD800-\uDBFF](?![\uDC00-\uDFFF])|(?:[^\uD800-\uDBFF]|^)[\uDC00-\uDFFF])+)*(?:\.(?:(?:[a-z\xA1-\uD7FF\uE000-\uFFFF]|[\uD800-\uDBFF](?![\uDC00-\uDFFF])|(?:[^\uD800-\uDBFF]|^)[\uDC00-\uDFFF]){2,})))(?::[0-9]{2,5})?(?:\/(?:[\0-\x08\x0E-\x1F!-\x9F\xA1-\u167F\u1681-\u1FFF\u200B-\u2027\u202A-\u202E\u2030-\u205E\u2060-\u2FFF\u3001-\uD7FF\uE000-\uFEFE\uFF00-\uFFFF]|[\uD800-\uDBFF][\uDC00-\uDFFF]|[\uD800-\uDBFF](?![\uDC00-\uDFFF])|(?:[^\uD800-\uDBFF]|^)[\uDC00-\uDFFF])*)?$/i,d=/^(?:urn:uuid:)?[0-9a-f]{8}-(?:[0-9a-f]{4}-){3}[0-9a-f]{12}$/i,p=/^(?:\/(?:[^~/]|~0|~1)*)*$/,h=/^#(?:\/(?:[a-z0-9_\-.!$&'()*+,;:=@]|%[0-9a-f]{2}|~0|~1)*)*$/i,f=/^(?:0|[1-9][0-9]*)(?:#|(?:\/(?:[^~/]|~0|~1)*)*)$/;function y(e){return e="full"==e?"full":"fast",o.copy(y[e])}function g(e){var t=e.match(n);if(!t)return!1;var i=+t[1],o=+t[2],a=+t[3];return o>=1&&o<=12&&a>=1&&a<=(2==o&&function(e){return e%4===0&&(e%100!==0||e%400===0)}(i)?29:r[o])}function m(e,t){var i=e.match(a);if(!i)return!1;var o=i[1],n=i[2],r=i[3],s=i[5];return(o<=23&&n<=59&&r<=59||23==o&&59==n&&60==r)&&(!t||s)}e.exports=y,y.fast={date:/^\d\d\d\d-[0-1]\d-[0-3]\d$/,time:/^(?:[0-2]\d:[0-5]\d:[0-5]\d|23:59:60)(?:\.\d+)?(?:z|[+-]\d\d(?::?\d\d)?)?$/i,"date-time":/^\d\d\d\d-[0-1]\d-[0-3]\d[t\s](?:[0-2]\d:[0-5]\d:[0-5]\d|23:59:60)(?:\.\d+)?(?:z|[+-]\d\d(?::?\d\d)?)$/i,uri:/^(?:[a-z][a-z0-9+\-.]*:)(?:\/?\/)?[^\s]*$/i,"uri-reference":/^(?:(?:[a-z][a-z0-9+\-.]*:)?\/?\/)?(?:[^\\\s#][^\s#]*)?(?:#[^\\\s]*)?$/i,"uri-template":l,url:u,email:/^[a-z0-9.!#$%&'*+/=?^_`{|}~-]+@[a-z0-9](?:[a-z0-9-]{0,61}[a-z0-9])?(?:\.[a-z0-9](?:[a-z0-9-]{0,61}[a-z0-9])?)*$/i,hostname:s,ipv4:/^(?:(?:25[0-5]|2[0-4]\d|[01]?\d\d?)\.){3}(?:25[0-5]|2[0-4]\d|[01]?\d\d?)$/,ipv6:/^\s*(?:(?:(?:[0-9a-f]{1,4}:){7}(?:[0-9a-f]{1,4}|:))|(?:(?:[0-9a-f]{1,4}:){6}(?::[0-9a-f]{1,4}|(?:(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(?:\.(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3})|:))|(?:(?:[0-9a-f]{1,4}:){5}(?:(?:(?::[0-9a-f]{1,4}){1,2})|:(?:(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(?:\.(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3})|:))|(?:(?:[0-9a-f]{1,4}:){4}(?:(?:(?::[0-9a-f]{1,4}){1,3})|(?:(?::[0-9a-f]{1,4})?:(?:(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(?:\.(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(?:(?:[0-9a-f]{1,4}:){3}(?:(?:(?::[0-9a-f]{1,4}){1,4})|(?:(?::[0-9a-f]{1,4}){0,2}:(?:(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(?:\.(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(?:(?:[0-9a-f]{1,4}:){2}(?:(?:(?::[0-9a-f]{1,4}){1,5})|(?:(?::[0-9a-f]{1,4}){0,3}:(?:(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(?:\.(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(?:(?:[0-9a-f]{1,4}:){1}(?:(?:(?::[0-9a-f]{1,4}){1,6})|(?:(?::[0-9a-f]{1,4}){0,4}:(?:(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(?:\.(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(?::(?:(?:(?::[0-9a-f]{1,4}){1,7})|(?:(?::[0-9a-f]{1,4}){0,5}:(?:(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(?:\.(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:)))(?:%.+)?\s*$/i,regex:k,uuid:d,"json-pointer":p,"json-pointer-uri-fragment":h,"relative-json-pointer":f},y.full={date:g,time:m,"date-time":function(e){var t=e.split(v);return 2==t.length&&g(t[0])&&m(t[1],!0)},uri:function(e){return b.test(e)&&c.test(e)},"uri-reference":/^(?:[a-z][a-z0-9+\-.]*:)?(?:\/?\/(?:(?:[a-z0-9\-._~!$&'()*+,;=:]|%[0-9a-f]{2})*@)?(?:\[(?:(?:(?:(?:[0-9a-f]{1,4}:){6}|::(?:[0-9a-f]{1,4}:){5}|(?:[0-9a-f]{1,4})?::(?:[0-9a-f]{1,4}:){4}|(?:(?:[0-9a-f]{1,4}:){0,1}[0-9a-f]{1,4})?::(?:[0-9a-f]{1,4}:){3}|(?:(?:[0-9a-f]{1,4}:){0,2}[0-9a-f]{1,4})?::(?:[0-9a-f]{1,4}:){2}|(?:(?:[0-9a-f]{1,4}:){0,3}[0-9a-f]{1,4})?::[0-9a-f]{1,4}:|(?:(?:[0-9a-f]{1,4}:){0,4}[0-9a-f]{1,4})?::)(?:[0-9a-f]{1,4}:[0-9a-f]{1,4}|(?:(?:25[0-5]|2[0-4]\d|[01]?\d\d?)\.){3}(?:25[0-5]|2[0-4]\d|[01]?\d\d?))|(?:(?:[0-9a-f]{1,4}:){0,5}[0-9a-f]{1,4})?::[0-9a-f]{1,4}|(?:(?:[0-9a-f]{1,4}:){0,6}[0-9a-f]{1,4})?::)|[Vv][0-9a-f]+\.[a-z0-9\-._~!$&'()*+,;=:]+)\]|(?:(?:25[0-5]|2[0-4]\d|[01]?\d\d?)\.){3}(?:25[0-5]|2[0-4]\d|[01]?\d\d?)|(?:[a-z0-9\-._~!$&'"()*+,;=]|%[0-9a-f]{2})*)(?::\d*)?(?:\/(?:[a-z0-9\-._~!$&'"()*+,;=:@]|%[0-9a-f]{2})*)*|\/(?:(?:[a-z0-9\-._~!$&'"()*+,;=:@]|%[0-9a-f]{2})+(?:\/(?:[a-z0-9\-._~!$&'"()*+,;=:@]|%[0-9a-f]{2})*)*)?|(?:[a-z0-9\-._~!$&'"()*+,;=:@]|%[0-9a-f]{2})+(?:\/(?:[a-z0-9\-._~!$&'"()*+,;=:@]|%[0-9a-f]{2})*)*)?(?:\?(?:[a-z0-9\-._~!$&'"()*+,;=:@/?]|%[0-9a-f]{2})*)?(?:#(?:[a-z0-9\-._~!$&'"()*+,;=:@/?]|%[0-9a-f]{2})*)?$/i,"uri-template":l,url:u,email:/^[a-z0-9!#$%&'*+/=?^_`{|}~-]+(?:\.[a-z0-9!#$%&'*+/=?^_`{|}~-]+)*@(?:[a-z0-9](?:[a-z0-9-]*[a-z0-9])?\.)+[a-z0-9](?:[a-z0-9-]*[a-z0-9])?$/i,hostname:s,ipv4:/^(?:(?:25[0-5]|2[0-4]\d|[01]?\d\d?)\.){3}(?:25[0-5]|2[0-4]\d|[01]?\d\d?)$/,ipv6:/^\s*(?:(?:(?:[0-9a-f]{1,4}:){7}(?:[0-9a-f]{1,4}|:))|(?:(?:[0-9a-f]{1,4}:){6}(?::[0-9a-f]{1,4}|(?:(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(?:\.(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3})|:))|(?:(?:[0-9a-f]{1,4}:){5}(?:(?:(?::[0-9a-f]{1,4}){1,2})|:(?:(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(?:\.(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3})|:))|(?:(?:[0-9a-f]{1,4}:){4}(?:(?:(?::[0-9a-f]{1,4}){1,3})|(?:(?::[0-9a-f]{1,4})?:(?:(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(?:\.(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(?:(?:[0-9a-f]{1,4}:){3}(?:(?:(?::[0-9a-f]{1,4}){1,4})|(?:(?::[0-9a-f]{1,4}){0,2}:(?:(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(?:\.(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(?:(?:[0-9a-f]{1,4}:){2}(?:(?:(?::[0-9a-f]{1,4}){1,5})|(?:(?::[0-9a-f]{1,4}){0,3}:(?:(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(?:\.(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(?:(?:[0-9a-f]{1,4}:){1}(?:(?:(?::[0-9a-f]{1,4}){1,6})|(?:(?::[0-9a-f]{1,4}){0,4}:(?:(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(?:\.(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(?::(?:(?:(?::[0-9a-f]{1,4}){1,7})|(?:(?::[0-9a-f]{1,4}){0,5}:(?:(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(?:\.(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:)))(?:%.+)?\s*$/i,regex:k,uuid:d,"json-pointer":p,"json-pointer-uri-fragment":h,"relative-json-pointer":f};var v=/t|\s/i;var b=/\/|:/;var S=/[^\\]\\Z/;function k(e){if(S.test(e))return!1;try{return new RegExp(e),!0}catch(t){return!1}}},SU0a:function(e,t,i){"use strict";var o=this&&this.__decorate||function(e,t,i,o){var n,r=arguments.length,a=r<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,i):o;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)a=Reflect.decorate(e,t,i,o);else for(var s=e.length-1;s>=0;s--)(n=e[s])&&(a=(r<3?n(a):r>3?n(t,i,a):n(t,i))||a);return r>3&&a&&Object.defineProperty(t,i,a),a},n=this&&this.__metadata||function(e,t){if("object"===typeof Reflect&&"function"===typeof Reflect.metadata)return Reflect.metadata(e,t)},r=this&&this.__param||function(e,t){return function(i,o){t(i,o,e)}};Object.defineProperty(t,"__esModule",{value:!0}),t.ButtonControl=void 0;const a=i("s6Xb"),s=i("2ZOr"),c=i("l4dA"),l=i("g5Cp"),u=i("kEja"),d=i("cvzu"),p=i("aCuL"),h=i("H6Pt");let f=class extends d.LatestPointerRenderControl{constructor(e,t){var i;super({interactionState:!1===(i=e.getProps()).visible?h.ButtonState.Hidden:!1===i.enabled?h.ButtonState.Disabled:h.ButtonState.Idle},e,t),this.wasJustToggled=!1,this.pullLocation={x:0,y:0},this.nonVisualButtonState=h.ButtonState.Idle;const o=this.getState(),n=this.model.getProps();this.renderPropertyManager=new p.ButtonRenderPropertyManager(n,o),this.nonVisualButtonState=!1===n.visible?h.ButtonState.Hidden:h.ButtonState.Idle}allowsRolloverInteraction(){const e=this.model.getProps();return!e.toggle&&!e.pullAction}onPropsChangedInternal([e,t]){const i=this.getState(),o=!(0,c.actionsAreEqual)(e.action,t.action);this.nonVisualButtonState===h.ButtonState.Activated&&o&&e.action&&this.model.commitAction(!1,e.action),this.nonVisualButtonState===h.ButtonState.Pulled&&o&&e.pullAction&&this.model.commitAction(!1,e.pullAction),this.nonVisualButtonState===h.ButtonState.Toggled&&o&&e.action&&this.model.commitAction(!1,e.action);const n=!1!==t.enabled,r=!1!==t.visible,a=!!t.toggle,s=!!t.pullAction;r?n?r&&i.interactionState===h.ButtonState.Hidden?(this.nonVisualButtonState=h.ButtonState.Idle,this.setState({interactionState:n?this.nonVisualButtonState:h.ButtonState.Disabled})):n&&i.interactionState===h.ButtonState.Disabled?this.setState({interactionState:this.nonVisualButtonState}):i.interactionState===h.ButtonState.Toggled&&(!a||a&&o)?(this.dim(),this.wasJustToggled=!1,this.nonVisualButtonState=h.ButtonState.Idle,this.setState({interactionState:this.nonVisualButtonState})):s||i.interactionState!==h.ButtonState.Pulled||(this.nonVisualButtonState=h.ButtonState.Activated,this.setState({interactionState:this.nonVisualButtonState})):(this.nonVisualButtonState=this.nonVisualButtonState===h.ButtonState.Hidden?h.ButtonState.Idle:this.nonVisualButtonState,i.interactionState!==h.ButtonState.Disabled&&this.setState({interactionState:h.ButtonState.Disabled})):i.interactionState!==h.ButtonState.Hidden&&(this.nonVisualButtonState=h.ButtonState.Hidden,this.setState({interactionState:this.nonVisualButtonState}))}onStateChangedInternal(e){const t=this.nonVisualButtonState,{action:i,pullAction:o}=this.model.getProps(),n=o?this.model.commitAction(t===h.ButtonState.Pulled,o,!1):void 0;if(e.interactionState===h.ButtonState.Disabled&&(0,u.isLayoutAction)(i))this.model.commitAction(!1,i,!0,n);else switch(t){case h.ButtonState.Activated:case h.ButtonState.Pulled:case h.ButtonState.Toggled:return void this.model.commitAction(!0,i,!0,n);default:return void this.model.commitAction(!1,i,!0,n)}}onPointerStart(){switch(this.nonVisualButtonState){case h.ButtonState.Idle:case h.ButtonState.Toggled:case h.ButtonState.Pulled:{const{baseSize:e}=this.model.getProps(),t=(0,l.calculateMagnitude)(this.pullLocation)>=.5*e;this.nonVisualButtonState=t?h.ButtonState.Pulled:h.ButtonState.Activated}break;default:return!1}const e=this.getState();return e.interactionState!==h.ButtonState.Disabled&&e.interactionState!==this.nonVisualButtonState&&this.setState({interactionState:this.nonVisualButtonState}),!0}onPointerEnd(){const{toggle:e}=this.model.getProps();let t=this.nonVisualButtonState;switch(this.nonVisualButtonState){case h.ButtonState.Activated:case h.ButtonState.Pulled:t=e&&!this.wasJustToggled?h.ButtonState.Toggled:h.ButtonState.Idle}this.pullLocation.x=0,this.pullLocation.y=0,t!==this.nonVisualButtonState&&(e&&(this.wasJustToggled?(this.dim(),this.wasJustToggled=!1):(this.undim(),this.wasJustToggled=!0)),this.nonVisualButtonState=t);const i=this.getState();return i.interactionState!==h.ButtonState.Disabled&&i.interactionState!==this.nonVisualButtonState&&this.setState({interactionState:this.nonVisualButtonState}),!0}onPointerMove(e){const{pullAction:t,baseSize:i}=this.model.getProps();if(!t)return!1;this.pullLocation.x+=e.lastPositionDelta.x,this.pullLocation.y+=e.lastPositionDelta.y;if((0,l.calculateMagnitude)(this.pullLocation)>=.5*i)switch(this.nonVisualButtonState){case h.ButtonState.Activated:this.nonVisualButtonState=h.ButtonState.Pulled}else switch(this.nonVisualButtonState){case h.ButtonState.Pulled:this.nonVisualButtonState=h.ButtonState.Activated}const o=this.getState();return o.interactionState!==h.ButtonState.Disabled&&o.interactionState!==this.nonVisualButtonState&&this.setState({interactionState:this.nonVisualButtonState}),!0}getIsStateUndimmable({interactionState:e}){return e===h.ButtonState.Activated||e===h.ButtonState.Pulled||e===h.ButtonState.Toggled}};f=o([(0,a.injectable)(),r(0,(0,a.inject)(s.SERVICE_TYPES.VirtualControl)),r(1,(0,a.inject)(s.SERVICE_TYPES.UserInterface)),n("design:paramtypes",[Object,Function])],f),t.ButtonControl=f},SWgh:function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.createContainersForControlConfigs=t.buildControl=void 0;const o=i("s6Xb"),n=i("2ZOr"),r=i("cwRv"),a=i("gJ6f"),s=i("kEja"),c=i("sa+M");t.buildControl=function(e,t,i,r,s){if(e.type===a.ControlType.Blank)return;let l=r.get(t);if(l&&l.model.getProps().type===e.type)l.model.updateProps(e);else{l&&l.model.getProps().type!==e.type&&l.unmount();const a=function(e,t){const i=new o.Container;return i.parent=t,i.bind(n.CONSTANT_TYPES.ControlConfig).toConstantValue(e),i.bind(n.SERVICE_TYPES.VirtualControl).to(c.VirtualControl).inSingletonScope(),i}(e,i),{classIdentifier:u,controlClass:d}=s.get(e.type);a.bind(u).to(d).inSingletonScope(),l=a.get(u),r.set(t,l),l.mount()}return l},t.createContainersForControlConfigs=function(e,t){const i={edges:{upper:{type:r.ControlContainerType.RenderControlContainer,controls:new Array,collider:t.edges.upper.collider},lower:{type:r.ControlContainerType.RenderControlContainer,controls:new Array,collider:t.edges.lower.collider}},wheels:{left:{type:r.ControlContainerType.RenderControlContainer,controls:new Array,collider:t.wheels.left.collider},right:{type:r.ControlContainerType.RenderControlContainer,controls:new Array,collider:t.wheels.right.collider},center:{type:r.ControlContainerType.RenderControlContainer,controls:new Array,collider:t.wheels.center.collider}},nativeTouch:{type:r.ControlContainerType.RenderControlContainer,controls:new Array,collider:t.nativeTouch.collider},sensors:{type:r.ControlContainerType.SensorControlContainer,controls:new Array}},o=[];return e.forEach(e=>{void 0!==t.edges.upper.sockets[e.socket]?o.push({config:Object.assign(e,t.edges.upper.sockets[e.socket]),container:i.edges.upper}):void 0!==t.edges.lower.sockets[e.socket]?o.push({config:Object.assign(e,t.edges.lower.sockets[e.socket]),container:i.edges.lower}):void 0!==t.wheels.left.sockets[e.socket]?o.push({config:Object.assign(e,t.wheels.left.sockets[e.socket]),container:i.wheels.left}):void 0!==t.wheels.right.sockets[e.socket]?o.push({config:Object.assign(e,t.wheels.right.sockets[e.socket]),container:i.wheels.right}):void 0!==t.wheels.center.sockets[e.socket]?o.push({config:Object.assign(e,t.wheels.center.sockets[e.socket]),container:i.wheels.center}):void 0!==t.nativeTouch.sockets[e.socket]?o.push({config:Object.assign(e,t.nativeTouch.sockets[e.socket]),container:i.nativeTouch}):(0,s.isSensorControl)(e)&&o.push({config:e,container:i.sensors})}),{controlConfigContainerLinks:o,containers:i}}},SXpu:function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.fetchTouchAdaptationBundleContents=t.loadBundleFromTakx=void 0;const o=i("DfD7"),n=i("qYWw"),r=i("0PxE"),a=i("diTm"),s=i("DG/1"),c=i("bdvg"),l=i("2Gx9"),u="TakManager";async function d(e,t,i,d,p,h,f,y,g){try{const v=new n.VirtualFileSystem;await(0,n.expandBundle)(t,v.rootDirectoryPath,v);const b=await async function(e,t,i,n){if(!await t.exists("takxmanifest.json"))return void i.log(u,o.LogLevel.Info,"Takx missing valid manifest. Skipping...");const r=JSON.parse((await t.readFile("takxmanifest.json")).trim());return(0,c.getSchemaManifestIsValidAgainst)(e,r,i,n)?r:void 0}(i,v,h,f);if(!b)return;let S,k,P="";try{P=(0,r.normalizePath)(b.layouts),S=b.assets?(0,r.normalizePath)(b.assets):void 0,k=b.contextFile?(0,r.normalizePath)(b.contextFile):void 0}catch(m){const e=`Cannot access content outside of touch bundle root path. Normalized paths: \nRoot:  \nLayouts:${P} \nAssets:${S} \nContextFile:${k}`;return h.log(u,o.LogLevel.Warn,e),void f(e)}const w=new Map,A=new Map;let I;if(null===g||void 0===g?void 0:g())return;if(await v.exists(P)?(h.log(u,o.LogLevel.Info,`Expanded takx folder (${P}) found, loading layouts for locale: ${d}...`),await(0,s.performActionPerLocaleDirectory)(d,P,e=>async function(e,t,i,n,r,s,l){if(await n.exists(t)){if(r.log(u,o.LogLevel.Debug,"Adding layouts from dir: "+t),null===l||void 0===l?void 0:l())return;const d=await n.readDir(t);await Promise.all(d.filter(e=>e.isFile&&e.name.toLowerCase().endsWith(".json")).map(async d=>{try{const a=d.name.substring(0,d.name.length-5);if(null===l||void 0===l?void 0:l())return;const p=JSON.parse((await n.readFile(d.path)).trim());if(!(0,c.getSchemaLayoutIsValidAgainst)(e,p,r,s))return;const h={id:a,basePath:d.path,layoutFile:p};r.log(u,o.LogLevel.Debug,`Adding layout [${a}] from directory ${t}`),i.set(a,h)}catch(p){const e="Error parsing touch control layout JSON: "+(0,a.stringify)(p);r.log(u,o.LogLevel.Warn,e),s(e)}}))}else r.log(u,o.LogLevel.Info,"Unable to read from layout dir: "+t)}(i,e,w,v,h,f,g))):h.log(u,o.LogLevel.Info,"Manifest layouts folder not found, skipping."),null===g||void 0===g?void 0:g())return;if(S&&await v.exists(S)){if(h.log(u,o.LogLevel.Info,`Expanded takx folder (${S}) found, loading assets for locale: ${d}...`),await(0,s.performActionPerLocaleDirectory)(d,S,e=>(0,l.addAllAssetsFromLocaleDir)(e,A,p,v,h,f,g)),null===g||void 0===g?void 0:g())return;y&&(I=await(0,l.loadAssetFilesInRenderer)(e,A,h,y,f,g))}else h.log(u,o.LogLevel.Info,"Manifest assets folder not found, skipping.");if(null===g||void 0===g?void 0:g())return;const T=k?await async function(e,t,i,n,r){if(await i.exists(t)){n.log(u,o.LogLevel.Info,`Expanded takx context file (${t}) found, loading...`);const a=JSON.parse((await i.readFile(t)).trim());if(!(0,c.getSchemaContextIsValidAgainst)(e,a,n,r))return;return Object.assign(Object.assign({},a),{originalPath:t})}n.log(u,o.LogLevel.Info,"Manifest context file not found, skipping.")}(i,k,v,h,f):void 0;if(null===g||void 0===g?void 0:g())return;return{id:e,defaultLayoutId:b.defaultLayout,layoutMap:w,assetMap:A,assetRenderData:I,contextFile:T,metadata:b.version?{version:b.version,versionName:b.versionName}:void 0}}catch(v){const e="Failed trying to load bundle from expanded takx: "+(0,a.stringify)(v);return h.log(u,o.LogLevel.Warn,e),void f(e)}}t.loadBundleFromTakx=d,t.fetchTouchAdaptationBundleContents=async function(e,t,i,n,r,c,l,p,h){const f=(0,s.getLoadableTouchBundles)(p,void 0,void 0,r);if(0!==f.length){for(const s of f){r.log(u,o.LogLevel.Info,"Considering takx: "+s.id);try{r.log(u,o.LogLevel.Info,"Attempting to load supported takx: "+s.id);const a=await t(s.id),p=await d(s.id,a,e,i,n,r,c,l,h);if(p){if(p.layoutMap&&p.layoutMap.size>0)return r.log(u,o.LogLevel.Info,`Loaded ${p.layoutMap.size} takx layouts. Using only takx layouts.`),p.assetMap&&p.assetMap.size>0&&r.log(u,o.LogLevel.Info,`Loaded ${p.assetMap.size} takx assets to be used with takx layouts.`),Object.assign(Object.assign({},p),{id:s.id})}else r.log(u,o.LogLevel.Info,"Bundle was not able to be loaded or was cancelled. Skipping.")}catch(y){const e="Failed to load supported takx: "+(0,a.stringify)(y);r.log(u,o.LogLevel.Warn,e),c(e)}}(null===h||void 0===h?void 0:h())||r.log(u,o.LogLevel.Warn,"Not able to load any takx bundle despite having supported ones. Falling back to other layouts")}}},SqAV:function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.copyStrokeRenderProps=t.areStrokeRenderPropsEqual=t.StrokeType=void 0;const o=i("V2pq");!function(e){e[e.Solid=0]="Solid",e[e.Dashed=1]="Dashed"}(t.StrokeType||(t.StrokeType={})),t.areStrokeRenderPropsEqual=function(e,t){return!!(e===t||e&&t&&e.type===t.type&&(0,o.areColorsEqual)(e.color,t.color)&&e.opacity===t.opacity)},t.copyStrokeRenderProps=function(e){return{type:e.type,color:(0,o.copyColor)(e.color),opacity:e.opacity}}},TACl:function(e,t,i){"use strict";var o=this&&this.__decorate||function(e,t,i,o){var n,r=arguments.length,a=r<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,i):o;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)a=Reflect.decorate(e,t,i,o);else for(var s=e.length-1;s>=0;s--)(n=e[s])&&(a=(r<3?n(a):r>3?n(t,i,a):n(t,i))||a);return r>3&&a&&Object.defineProperty(t,i,a),a},n=this&&this.__metadata||function(e,t){if("object"===typeof Reflect&&"function"===typeof Reflect.metadata)return Reflect.metadata(e,t)},r=this&&this.__param||function(e,t){return function(i,o){t(i,o,e)}};Object.defineProperty(t,"__esModule",{value:!0}),t.TouchpadControl=void 0;const a=i("s6Xb"),s=i("2ZOr"),c=i("C/7w"),l=i("gJ6f"),u=i("/2Ai"),d=i("l4dA"),p=i("65S6"),h=i("cvzu"),f=i("b1mO"),y=i("JWEj");let g=class extends h.LatestPointerRenderControl{constructor(e,t,i){var o;super({interactionState:!1===(o=e.getProps()).visible?y.TouchpadState.Hidden:!1===o.enabled?y.TouchpadState.Disabled:y.TouchpadState.Idle},e,t),this.inputProvider=i,this.pointerDeltaToSend={x:0,y:0},this.nonVisualTouchpadState=y.TouchpadState.Idle,this.inputAccumulationMap={analogMap:{},mouseMap:{}},this.joystickInputDriver=new c.MouseJoystickDriver,this.renderingAsAButton=!1,this.onStateChangedInternal=()=>{const{action:e}=this.model.getProps();switch(this.nonVisualTouchpadState){case y.TouchpadState.Activated:return this.model.commitAction(!0,e),void this.sendMouseInput();case y.TouchpadState.Moving:return this.model.commitAction(!1,e),void this.sendMouseInput();default:return this.model.commitAction(!1,e),void(this.hasJoystickInputMapping&&this.model.resetAnalogInput())}},this.onPointerStart=e=>{switch(this.nonVisualTouchpadState){case y.TouchpadState.Idle:{const{action:t}=this.model.getProps(),{interactionState:i}=this.getState();return this.pointerDeltaToSend.x+=e.lastPositionDelta.x,this.pointerDeltaToSend.y+=e.lastPositionDelta.y,this.nonVisualTouchpadState=t?y.TouchpadState.Activated:y.TouchpadState.Moving,i!==y.TouchpadState.Disabled&&i!==this.nonVisualTouchpadState&&this.setState({interactionState:this.nonVisualTouchpadState}),this.cancelJoystickInputDriverSubscription(),this.hasJoystickInputMapping&&(this.joystickInputSubscription=this.joystickInputDriver.subscribeToJoystickInput(this.sendJoystickInput.bind(this)),this.joystickInputDriver.start()),!0}default:return!1}};const n=this.getState(),r=this.model.getProps();this.mapping=(0,p.buildInputMapConfig)(r.axis),this.pipes=this.mapping.map(e=>(0,p.buildPipes)(e.map,r.inputScale)),this.hasJoystickInputMapping=(0,p.hasJoystickOutputType)(this.mapping),this.hasMouseInputMapping=(0,p.hasMouseOutputType)(this.mapping),this.renderPropertyManager=new f.TouchpadRenderPropertyManager(r,n),this.nonVisualTouchpadState=!1===r.visible?y.TouchpadState.Hidden:y.TouchpadState.Idle,this.renderingAsAButton=!0===r.renderAsButton,this.identifiers={button:r.socket+"-touchpad-button",touchpad:r.socket+"-touchpad"}}get type(){return this.renderingAsAButton?l.ControlType.Button:l.ControlType.Touchpad}get identifier(){return this.renderingAsAButton?this.identifiers.button:this.identifiers.touchpad}onPropsChangedInternal([e,t]){const i=this.getState();this.mapping=(0,p.buildInputMapConfig)(t.axis),this.pipes=this.mapping.map(e=>(0,p.buildPipes)(e.map,t.inputScale)),this.hasJoystickInputMapping=(0,p.hasJoystickOutputType)(this.mapping),this.hasMouseInputMapping=(0,p.hasMouseOutputType)(this.mapping),e&&(this.nonVisualTouchpadState!==y.TouchpadState.Activated||(0,d.actionsAreEqual)(e.action,t.action)||e.action&&this.model.commitAction(!1,e.action),e.socket!==t.socket&&(this.identifiers.button=t.socket+"-touchpad-button",this.identifiers.touchpad=t.socket+"-touchpad"),this.renderingAsAButton=!0===t.renderAsButton),this.nonVisualTouchpadState!==y.TouchpadState.Moving&&this.nonVisualTouchpadState!==y.TouchpadState.Activated||e.axis===t.axis||this.model.resetAnalogInput();const o=!1!==t.enabled,n=!1!==t.visible;if(n?o?n&&i.interactionState===y.TouchpadState.Hidden?(this.nonVisualTouchpadState=y.TouchpadState.Idle,this.setState({interactionState:o?this.nonVisualTouchpadState:y.TouchpadState.Disabled})):o&&i.interactionState===y.TouchpadState.Disabled&&this.setState({interactionState:this.nonVisualTouchpadState}):(this.nonVisualTouchpadState=this.nonVisualTouchpadState===y.TouchpadState.Hidden?y.TouchpadState.Idle:this.nonVisualTouchpadState,i.interactionState!==y.TouchpadState.Disabled&&this.setState({interactionState:y.TouchpadState.Disabled})):i.interactionState!==y.TouchpadState.Hidden&&(this.nonVisualTouchpadState=y.TouchpadState.Hidden,this.setState({interactionState:this.nonVisualTouchpadState})),this.nonVisualTouchpadState===y.TouchpadState.Moving||this.nonVisualTouchpadState===y.TouchpadState.Activated){const{interactionState:e}=this.getState();this.nonVisualTouchpadState=t.action?y.TouchpadState.Activated:y.TouchpadState.Moving,e!==y.TouchpadState.Disabled&&e!==this.nonVisualTouchpadState&&this.setState({interactionState:this.nonVisualTouchpadState})}}unmountInternal(){var e;null===(e=this.joystickInputSubscription)||void 0===e||e.unsubscribe(),this.joystickInputDriver.dispose()}onPointerMove(e){switch(this.nonVisualTouchpadState){case y.TouchpadState.Activated:case y.TouchpadState.Moving:return this.pointerDeltaToSend.x+=e.lastPositionDelta.x,this.pointerDeltaToSend.y+=e.lastPositionDelta.y,this.hasJoystickInputMapping&&this.joystickInputDriver.moveDelta(e.lastPositionDelta),!0;default:return!1}}onPointerEnd(){switch(this.nonVisualTouchpadState){case y.TouchpadState.Moving:case y.TouchpadState.Activated:{const{interactionState:e}=this.getState();return this.nonVisualTouchpadState=y.TouchpadState.Idle,e!==y.TouchpadState.Disabled&&e!==this.nonVisualTouchpadState&&this.setState({interactionState:this.nonVisualTouchpadState}),this.cancelJoystickInputDriverSubscription(),this.joystickInputDriver.stop(),!0}default:return!1}}getIsStateUndimmable({interactionState:e}){return e===y.TouchpadState.Activated||e===y.TouchpadState.Moving}sendMouseInput(){const e=this.pointerTracker.peekFront();if((null===e||void 0===e?void 0:e.position)&&this.hasMouseInputMapping){this.resetInputAccumulationMap(),(0,p.applyInput2D)(this.pointerDeltaToSend,this.pipes,this.mapping,this.inputAccumulationMap,u.InputAccumulationType.Mouse);const{mouseMap:{relativeMouseX:e,relativeMouseY:t}}=this.inputAccumulationMap;this.pointerDeltaToSend.x=0,this.pointerDeltaToSend.y=0;const i={x:null!==e&&void 0!==e?e:0,y:null!==t&&void 0!==t?t:0};0===i.x&&0===i.y||this.inputProvider.sendRelativeMouseEvent(i)}}sendJoystickInput(e){(0,p.applyInput2D)(e,this.pipes,this.mapping,this.inputAccumulationMap,u.InputAccumulationType.Joystick),this.model.setAnalogInput(this.inputAccumulationMap.analogMap)}cancelJoystickInputDriverSubscription(){this.joystickInputSubscription&&!this.joystickInputSubscription.closed&&(this.joystickInputSubscription.unsubscribe(),this.joystickInputSubscription=void 0)}resetInputAccumulationMap(){this.inputAccumulationMap.analogMap.leftJoystickX=void 0,this.inputAccumulationMap.analogMap.leftJoystickY=void 0,this.inputAccumulationMap.analogMap.leftTrigger=void 0,this.inputAccumulationMap.analogMap.rightJoystickX=void 0,this.inputAccumulationMap.analogMap.rightJoystickY=void 0,this.inputAccumulationMap.analogMap.rightTrigger=void 0,this.inputAccumulationMap.mouseMap.relativeMouseX=void 0,this.inputAccumulationMap.mouseMap.relativeMouseY=void 0}};g=o([(0,a.injectable)(),r(0,(0,a.inject)(s.SERVICE_TYPES.VirtualControl)),r(1,(0,a.inject)(s.SERVICE_TYPES.UserInterface)),r(2,(0,a.inject)(s.SERVICE_TYPES.InputProvider)),n("design:paramtypes",[Object,Function,Function])],g),t.TouchpadControl=g},TSub:function(e,t,i){"use strict";var o=this&&this.__decorate||function(e,t,i,o){var n,r=arguments.length,a=r<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,i):o;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)a=Reflect.decorate(e,t,i,o);else for(var s=e.length-1;s>=0;s--)(n=e[s])&&(a=(r<3?n(a):r>3?n(t,i,a):n(t,i))||a);return r>3&&a&&Object.defineProperty(t,i,a),a},n=this&&this.__metadata||function(e,t){if("object"===typeof Reflect&&"function"===typeof Reflect.metadata)return Reflect.metadata(e,t)},r=this&&this.__param||function(e,t){return function(i,o){t(i,o,e)}};Object.defineProperty(t,"__esModule",{value:!0}),t.ScreenDisplay=t.calculateScreenProps=t.calculateEffectiveScreenPropsFromSettings=t.calculateWheelErgoSettingsFromCurrentState=void 0;const a=i("s6Xb"),s=i("LcNk"),c=i("2ZOr"),l=i("2++W"),u=i("g5Cp"),d=i("3O3G");function p(e,t,i){return{x:e.x+t.x*i.windowWidth,y:e.y+t.y*i.windowHeight,radius:(0,u.clamp)(e.radius*t.radius,0,100),angleInRadians:e.angleInRadians+t.angleInRadians}}function h(e){const{orientation:t,width:i,height:o,videoWidth:n,videoHeight:r,spanWidth:a,placeVideoOnTop:s=!1}=e,c=t===l.ScreenOrientation.LandscapeLeft||t===l.ScreenOrientation.LandscapeRight,p=!isNaN(a),h=p&&c,f=p&&!c,y=(i-n)/2,g=s?0:h?((o-a)/2-r)/2:(o-r)/2,m=c?o/r:i/n,v=h?(o-a)/2:o,b=i,S=h?o-v:0,k=c||h?.5*v:.66*v,P=.25*b,w=.5*d.BASE_BUTTON_SIZE-5,A=2*d.BASE_BUTTON_SIZE+w,I=A<=P?A:P,T=(0,u.directionToPosition)(0,I),C={x:T.x,y:k,radius:d.BASE_RADIUS,angleInRadians:0},_={x:b-T.x,y:k,radius:d.BASE_RADIUS,angleInRadians:0},E={x:b/2,y:k,radius:d.BASE_RADIUS,angleInRadians:0};return Object.assign(Object.assign({},e),{videoX:y,videoY:g,videoScale:m,orientation:t,windowHeight:v,windowWidth:b,windowY:S,isLandscape:c,isSpanned:p,isDoubleLandscape:h,isDoublePortrait:f,leftWheelAnchor:C,rightWheelAnchor:_,centerWheelAnchor:E,baseControlSize:d.BASE_BUTTON_SIZE})}t.calculateWheelErgoSettingsFromCurrentState=function(e,t,i){return{x:(e.x-t.x)/i.windowWidth,y:(e.y-t.y)/i.windowHeight,radius:e.radius/t.radius,angleInRadians:e.angleInRadians-t.angleInRadians}},t.calculateEffectiveScreenPropsFromSettings=function(e,t){return Object.assign(Object.assign({},e),{leftWheelAnchor:p(e.leftWheelAnchor,t.left,e),rightWheelAnchor:p(e.rightWheelAnchor,t.right,e),centerWheelAnchor:p(e.centerWheelAnchor,t.center,e)})},t.calculateScreenProps=h;let f=class{constructor(e){this.setScreenProps=e=>{this.screenProps$.next(h(e))},this.screenProps$=new s.BehaviorSubject(h(e))}};f=o([(0,a.injectable)(),r(0,(0,a.inject)(c.CONFIG_TYPES.ScreenPropsBase)),n("design:paramtypes",[Object])],f),t.ScreenDisplay=f},TqiN:function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.DirectionalPadStyleManager=void 0;const o=i("IuIz"),n=i("pL49"),r=i("fUIH"),a=i("xPvz");t.DirectionalPadStyleManager=class{constructor(e=3){this.backgroundColorMemo=new o.LazyMemoizedConverter(n.convertStringToColor,e),this.fillColorMemo=new o.LazyMemoizedConverter(n.convertStringToColor,e),this.gradientColorMemo=new o.LazyMemoizedConverter(n.convertStringToColor,e),this.strokeColorMemo=new o.LazyMemoizedConverter(n.convertStringToColor,e)}getStyle(e,t){switch(e){case r.DirectionalPadState.Hidden:return(0,a.GetDefaultHiddenDirectionalPadStyle)();case r.DirectionalPadState.Disabled:{const e=(0,a.GetDefaultDisabledDirectionalPadStyle)();return t&&(t.default&&this.extractCustomStyles(t.default,e),t.disabled&&this.extractCustomStyles(t.disabled,e)),e.gradient=(0,a.GetDefaultRestingDirectionalPadGradient)(),e}case r.DirectionalPadState.Idle:{const e=(0,a.GetDefaultIdleDirectionalPadStyle)();return t&&(t.default&&this.extractCustomStyles(t.default,e),t.idle&&this.extractCustomStyles(t.idle,e)),e.gradient=(0,a.GetDefaultRestingDirectionalPadGradient)(),e}case r.DirectionalPadState.Activated:{const e=(0,a.GetDefaultActivatedDirectionalPadStyle)();return t&&(t.default&&this.extractCustomStyles(t.default,e),t.activated&&this.extractCustomStyles(t.activated,e)),e}}}getOpacity(e,t){var i,o,n,s,c,l,u,d;let p=a.DefaultDirectionalPadOpacity;switch(p=null!==(o=null===(i=null===t||void 0===t?void 0:t.default)||void 0===i?void 0:i.opacity)&&void 0!==o?o:p,e){case r.DirectionalPadState.Hidden:p=0;break;case r.DirectionalPadState.Disabled:p*=.33,p=null!==(s=null===(n=null===t||void 0===t?void 0:t.disabled)||void 0===n?void 0:n.opacity)&&void 0!==s?s:p;break;case r.DirectionalPadState.Idle:p=null!==(l=null===(c=null===t||void 0===t?void 0:t.idle)||void 0===c?void 0:c.opacity)&&void 0!==l?l:p;break;case r.DirectionalPadState.Activated:p=null!==(d=null===(u=null===t||void 0===t?void 0:t.activated)||void 0===u?void 0:u.opacity)&&void 0!==d?d:p}return p}extractCustomStyles(e,t){var i;e.background&&this.extractCustomBackgroundStyles(t,e.background),e.fill&&(t.fill=this.fillColorMemo.convert(e.fill)),(null===(i=e.gradient)||void 0===i?void 0:i.color)&&(t.gradient=this.gradientColorMemo.convert(e.gradient.color)),e.stroke&&this.extractCustomStrokeStyle(t,e.stroke)}extractCustomBackgroundStyles(e,t){e.background.type=t.type,e.background.value="color"===t.type?this.backgroundColorMemo.convert(t.value):t.value,void 0!==t.opacity&&(e.background.opacity=t.opacity)}extractCustomStrokeStyle(e,t){e.stroke.color=t.color?this.strokeColorMemo.convert(t.color):e.stroke.color,void 0!==t.opacity&&(e.stroke.opacity=t.opacity)}}},Tt8o:function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.copyButtonRenderProps=t.areButtonRenderPropsEqual=void 0;const o=i("iZJm"),n=i("PFUz"),r=i("91AH"),a=i("gfMA");t.areButtonRenderPropsEqual=function(e,t){return!!(e===t||e&&t&&(0,a.areRenderControlRenderPropsEqual)(e,t)&&e.radius===t.radius&&e.animationEnergy===t.animationEnergy&&(0,n.areFaceImageRenderPropsEqual)(e.faceImage,t.faceImage)&&(0,o.areBackgroundRenderPropsEqual)(e.background,t.background)&&(0,r.arePullIndicatorRenderPropsEqual)(e.pullIndicator,t.pullIndicator))},t.copyButtonRenderProps=function(e){return Object.assign(Object.assign({},(0,a.copyRenderControlRenderProps)(e)),{animationEnergy:e.animationEnergy,background:(0,o.copyBackgroundRenderProps)(e.background),faceImage:(0,n.copyFaceImageRenderProps)(e.faceImage),pullIndicator:(0,r.copyPullIndicatorRenderProps)(e.pullIndicator),radius:e.radius,type:e.type})}},U3l9:function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ArcadeButtonsRenderPropertyManager=void 0;const o=i("kU1o"),n=i("gJ6f"),r=i("ZakO"),a=i("aCuL"),s=i("ncY8"),c=i("Myyd"),l=i("iwGn");t.ArcadeButtonsRenderPropertyManager=class{constructor(e,t,i){this.opacityMultiplierConfiguration={value:1,energy:o.AnimationEnergy.Instant},this.firstFetchCompleted=!1,this.containerProps=e,this.side=i,this.buttonStates={lightPunch:{previous:{interactionState:t.interactionState.lightPunch},current:{interactionState:t.interactionState.lightPunch}},mediumPunch:{previous:{interactionState:t.interactionState.mediumPunch},current:{interactionState:t.interactionState.mediumPunch}},heavyPunch:{previous:{interactionState:t.interactionState.heavyPunch},current:{interactionState:t.interactionState.heavyPunch}},specialPunch:{previous:{interactionState:t.interactionState.specialPunch},current:{interactionState:t.interactionState.specialPunch}},lightKick:{previous:{interactionState:t.interactionState.lightKick},current:{interactionState:t.interactionState.lightKick}},mediumKick:{previous:{interactionState:t.interactionState.mediumKick},current:{interactionState:t.interactionState.mediumKick}},heavyKick:{previous:{interactionState:t.interactionState.heavyKick},current:{interactionState:t.interactionState.heavyKick}},specialKick:{previous:{interactionState:t.interactionState.specialKick},current:{interactionState:t.interactionState.specialKick}}};const{horizontalFlip:n,colliderRadius:u,specialKick:d,specialPunch:p}=e;let h=n?1:-1;this.side===r.SocketSideEnum.Left&&(h*=-1);const f=u*s.ARCADE_RADIUS_MULTIPLIER,y=!(!d&&!p);this.buttonControlProps={lightPunch:{previous:this.makeButtonPropsFromArcadeProps(c.ArcadeButtonSockets.LightPunch,f,h,y,e,e.lightPunch),current:this.makeButtonPropsFromArcadeProps(c.ArcadeButtonSockets.LightPunch,f,h,y,e,e.lightPunch)},mediumPunch:{previous:this.makeButtonPropsFromArcadeProps(c.ArcadeButtonSockets.MediumPunch,f,h,y,e,e.mediumPunch),current:this.makeButtonPropsFromArcadeProps(c.ArcadeButtonSockets.MediumPunch,f,h,y,e,e.mediumPunch)},heavyPunch:{previous:this.makeButtonPropsFromArcadeProps(c.ArcadeButtonSockets.HeavyPunch,f,h,y,e,e.heavyPunch),current:this.makeButtonPropsFromArcadeProps(c.ArcadeButtonSockets.HeavyPunch,f,h,y,e,e.heavyPunch)},specialPunch:e.specialPunch?{previous:this.makeButtonPropsFromArcadeProps(c.ArcadeButtonSockets.SpecialPunch,f,h,y,e,e.specialPunch),current:this.makeButtonPropsFromArcadeProps(c.ArcadeButtonSockets.SpecialPunch,f,h,y,e,e.specialPunch)}:void 0,lightKick:{previous:this.makeButtonPropsFromArcadeProps(c.ArcadeButtonSockets.LightKick,f,h,y,e,e.lightKick),current:this.makeButtonPropsFromArcadeProps(c.ArcadeButtonSockets.LightKick,f,h,y,e,e.lightKick)},mediumKick:{previous:this.makeButtonPropsFromArcadeProps(c.ArcadeButtonSockets.MediumKick,f,h,y,e,e.mediumKick),current:this.makeButtonPropsFromArcadeProps(c.ArcadeButtonSockets.MediumKick,f,h,y,e,e.mediumKick)},heavyKick:{previous:this.makeButtonPropsFromArcadeProps(c.ArcadeButtonSockets.HeavyKick,f,h,y,e,e.heavyKick),current:this.makeButtonPropsFromArcadeProps(c.ArcadeButtonSockets.HeavyKick,f,h,y,e,e.heavyKick)},specialKick:e.specialKick?{previous:this.makeButtonPropsFromArcadeProps(c.ArcadeButtonSockets.SpecialKick,f,h,y,e,e.specialKick),current:this.makeButtonPropsFromArcadeProps(c.ArcadeButtonSockets.SpecialKick,f,h,y,e,e.specialKick)}:void 0},this.buttonRenderPropertyManagers={lightPunch:new a.ButtonRenderPropertyManager(this.buttonControlProps.lightPunch.current,this.buttonStates.lightPunch.current),mediumPunch:new a.ButtonRenderPropertyManager(this.buttonControlProps.mediumPunch.current,this.buttonStates.mediumPunch.current),heavyPunch:new a.ButtonRenderPropertyManager(this.buttonControlProps.heavyPunch.current,this.buttonStates.heavyPunch.current),specialPunch:this.buttonControlProps.specialPunch?new a.ButtonRenderPropertyManager(this.buttonControlProps.specialPunch.current,this.buttonStates.specialPunch.current):void 0,lightKick:new a.ButtonRenderPropertyManager(this.buttonControlProps.lightKick.current,this.buttonStates.lightKick.current),mediumKick:new a.ButtonRenderPropertyManager(this.buttonControlProps.mediumKick.current,this.buttonStates.mediumKick.current),heavyKick:new a.ButtonRenderPropertyManager(this.buttonControlProps.heavyKick.current,this.buttonStates.heavyKick.current),specialKick:this.buttonControlProps.specialKick?new a.ButtonRenderPropertyManager(this.buttonControlProps.specialKick.current,this.buttonStates.specialKick.current):void 0},this._renderProperties=(0,l.buildEmptyArcadeButtonsRenderProperties)()}get isDimmable(){return!0}getRenderProperties(){return this.prepare(),this._renderProperties}willOpacityMultiplierChangesCauseUpdates(e){return!this.firstFetchCompleted||this.opacityMultiplierConfiguration.value!==e.value||this.opacityMultiplierConfiguration.energy!==e.energy}updateOpacityMultiplier(e){var t,i;this.opacityMultiplierConfiguration.value=e.value,this.opacityMultiplierConfiguration.energy=e.energy,this.buttonRenderPropertyManagers.lightPunch.updateOpacityMultiplier(e),this.buttonRenderPropertyManagers.mediumPunch.updateOpacityMultiplier(e),this.buttonRenderPropertyManagers.heavyPunch.updateOpacityMultiplier(e),null===(t=this.buttonRenderPropertyManagers.specialPunch)||void 0===t||t.updateOpacityMultiplier(e),this.buttonRenderPropertyManagers.lightKick.updateOpacityMultiplier(e),this.buttonRenderPropertyManagers.mediumKick.updateOpacityMultiplier(e),this.buttonRenderPropertyManagers.heavyKick.updateOpacityMultiplier(e),null===(i=this.buttonRenderPropertyManagers.specialKick)||void 0===i||i.updateOpacityMultiplier(e)}updateSide(e){this.side=e}updateProps(e){this.containerProps=e;const{horizontalFlip:t,colliderRadius:i,specialKick:o,specialPunch:n}=e;let l=t?1:-1;this.side===r.SocketSideEnum.Left&&(l*=-1);const u=i*s.ARCADE_RADIUS_MULTIPLIER,d=!(!o&&!n);this.updateButtonPropsFromArcadeProps(c.ArcadeButtonSockets.LightPunch,u,l,d,e,e.lightPunch),this.buttonRenderPropertyManagers.lightPunch.updateProps(this.buttonControlProps.lightPunch.current),this.updateButtonPropsFromArcadeProps(c.ArcadeButtonSockets.MediumPunch,u,l,d,e,e.mediumPunch),this.buttonRenderPropertyManagers.mediumPunch.updateProps(this.buttonControlProps.mediumPunch.current),this.updateButtonPropsFromArcadeProps(c.ArcadeButtonSockets.HeavyPunch,u,l,d,e,e.heavyPunch),this.buttonRenderPropertyManagers.heavyPunch.updateProps(this.buttonControlProps.heavyPunch.current),e.specialPunch&&(this.updateButtonPropsFromArcadeProps(c.ArcadeButtonSockets.SpecialPunch,u,l,d,e,e.specialPunch),this.buttonRenderPropertyManagers.specialPunch?this.buttonControlProps.specialPunch&&this.buttonRenderPropertyManagers.specialPunch.updateProps(this.buttonControlProps.specialPunch.current):this.buttonControlProps.specialPunch&&(this.buttonRenderPropertyManagers.specialPunch=new a.ButtonRenderPropertyManager(this.buttonControlProps.specialPunch.current,this.buttonStates.specialPunch.current),this.buttonRenderPropertyManagers.specialPunch.updateOpacityMultiplier(this.opacityMultiplierConfiguration))),this.updateButtonPropsFromArcadeProps(c.ArcadeButtonSockets.LightKick,u,l,d,e,e.lightKick),this.buttonRenderPropertyManagers.lightKick.updateProps(this.buttonControlProps.lightKick.current),this.updateButtonPropsFromArcadeProps(c.ArcadeButtonSockets.MediumKick,u,l,d,e,e.mediumKick),this.buttonRenderPropertyManagers.mediumKick.updateProps(this.buttonControlProps.mediumKick.current),this.updateButtonPropsFromArcadeProps(c.ArcadeButtonSockets.HeavyKick,u,l,d,e,e.heavyKick),this.buttonRenderPropertyManagers.heavyKick.updateProps(this.buttonControlProps.heavyKick.current),e.specialKick&&(this.updateButtonPropsFromArcadeProps(c.ArcadeButtonSockets.SpecialKick,u,l,d,e,e.specialKick),this.buttonRenderPropertyManagers.specialKick?this.buttonControlProps.specialKick&&this.buttonRenderPropertyManagers.specialKick.updateProps(this.buttonControlProps.specialKick.current):this.buttonControlProps.specialKick&&(this.buttonRenderPropertyManagers.specialKick=new a.ButtonRenderPropertyManager(this.buttonControlProps.specialKick.current,this.buttonStates.specialKick.current),this.buttonRenderPropertyManagers.specialKick.updateOpacityMultiplier(this.opacityMultiplierConfiguration)))}updateState(e){var t,i;this.updateButtonState(c.ArcadeButtonSockets.LightPunch,e),this.buttonRenderPropertyManagers.lightPunch.updateState(this.buttonStates.lightPunch.current),this.updateButtonState(c.ArcadeButtonSockets.MediumPunch,e),this.buttonRenderPropertyManagers.mediumPunch.updateState(this.buttonStates.mediumPunch.current),this.updateButtonState(c.ArcadeButtonSockets.HeavyPunch,e),this.buttonRenderPropertyManagers.heavyPunch.updateState(this.buttonStates.heavyPunch.current),this.updateButtonState(c.ArcadeButtonSockets.SpecialPunch,e),null===(t=this.buttonRenderPropertyManagers.specialPunch)||void 0===t||t.updateState(this.buttonStates.specialPunch.current),this.updateButtonState(c.ArcadeButtonSockets.LightKick,e),this.buttonRenderPropertyManagers.lightKick.updateState(this.buttonStates.lightKick.current),this.updateButtonState(c.ArcadeButtonSockets.MediumKick,e),this.buttonRenderPropertyManagers.mediumKick.updateState(this.buttonStates.mediumKick.current),this.updateButtonState(c.ArcadeButtonSockets.HeavyKick,e),this.buttonRenderPropertyManagers.heavyKick.updateState(this.buttonStates.heavyKick.current),this.updateButtonState(c.ArcadeButtonSockets.SpecialKick,e),null===(i=this.buttonRenderPropertyManagers.specialKick)||void 0===i||i.updateState(this.buttonStates.specialKick.current)}undim(){var e,t;this.buttonRenderPropertyManagers.lightPunch.undim(),this.buttonRenderPropertyManagers.mediumPunch.undim(),this.buttonRenderPropertyManagers.heavyPunch.undim(),null===(e=this.buttonRenderPropertyManagers.specialPunch)||void 0===e||e.undim(),this.buttonRenderPropertyManagers.lightKick.undim(),this.buttonRenderPropertyManagers.mediumKick.undim(),this.buttonRenderPropertyManagers.heavyKick.undim(),null===(t=this.buttonRenderPropertyManagers.specialKick)||void 0===t||t.undim()}dim(){var e,t;this.buttonRenderPropertyManagers.lightPunch.dim(),this.buttonRenderPropertyManagers.mediumPunch.dim(),this.buttonRenderPropertyManagers.heavyPunch.dim(),null===(e=this.buttonRenderPropertyManagers.specialPunch)||void 0===e||e.dim(),this.buttonRenderPropertyManagers.lightKick.dim(),this.buttonRenderPropertyManagers.mediumKick.dim(),this.buttonRenderPropertyManagers.heavyKick.dim(),null===(t=this.buttonRenderPropertyManagers.specialKick)||void 0===t||t.dim()}undimSocket(e){var t,i;switch(e){case c.ArcadeButtonSockets.LightPunch:this.buttonRenderPropertyManagers.lightPunch.undim();break;case c.ArcadeButtonSockets.MediumPunch:this.buttonRenderPropertyManagers.mediumPunch.undim();break;case c.ArcadeButtonSockets.HeavyPunch:this.buttonRenderPropertyManagers.heavyPunch.undim();break;case c.ArcadeButtonSockets.SpecialPunch:null===(t=this.buttonRenderPropertyManagers.specialPunch)||void 0===t||t.undim();break;case c.ArcadeButtonSockets.LightKick:this.buttonRenderPropertyManagers.lightKick.undim();break;case c.ArcadeButtonSockets.MediumKick:this.buttonRenderPropertyManagers.mediumKick.undim();break;case c.ArcadeButtonSockets.HeavyKick:this.buttonRenderPropertyManagers.heavyKick.undim();break;case c.ArcadeButtonSockets.SpecialKick:null===(i=this.buttonRenderPropertyManagers.specialKick)||void 0===i||i.undim()}}dimSocket(e){var t,i;switch(e){case c.ArcadeButtonSockets.LightPunch:this.buttonRenderPropertyManagers.lightPunch.dim();break;case c.ArcadeButtonSockets.MediumPunch:this.buttonRenderPropertyManagers.mediumPunch.dim();break;case c.ArcadeButtonSockets.HeavyPunch:this.buttonRenderPropertyManagers.heavyPunch.dim();break;case c.ArcadeButtonSockets.SpecialPunch:null===(t=this.buttonRenderPropertyManagers.specialPunch)||void 0===t||t.dim();break;case c.ArcadeButtonSockets.LightKick:this.buttonRenderPropertyManagers.lightKick.dim();break;case c.ArcadeButtonSockets.MediumKick:this.buttonRenderPropertyManagers.mediumKick.dim();break;case c.ArcadeButtonSockets.HeavyKick:this.buttonRenderPropertyManagers.heavyKick.dim();break;case c.ArcadeButtonSockets.SpecialKick:null===(i=this.buttonRenderPropertyManagers.specialKick)||void 0===i||i.dim()}}prepare(){this._renderProperties.x=this.containerProps.x,this._renderProperties.y=this.containerProps.y,this._renderProperties.lightPunch=this.buttonRenderPropertyManagers.lightPunch.getRenderProperties(),this._renderProperties.mediumPunch=this.buttonRenderPropertyManagers.mediumPunch.getRenderProperties(),this._renderProperties.heavyPunch=this.buttonRenderPropertyManagers.heavyPunch.getRenderProperties(),this._renderProperties.specialPunch=this.containerProps.specialPunch&&this.buttonControlProps.specialPunch&&this.buttonRenderPropertyManagers.specialPunch?this.buttonRenderPropertyManagers.specialPunch.getRenderProperties():void 0,this._renderProperties.lightKick=this.buttonRenderPropertyManagers.lightKick.getRenderProperties(),this._renderProperties.mediumKick=this.buttonRenderPropertyManagers.mediumKick.getRenderProperties(),this._renderProperties.heavyKick=this.buttonRenderPropertyManagers.heavyKick.getRenderProperties(),this._renderProperties.specialKick=this.containerProps.specialKick&&this.buttonControlProps.specialKick&&this.buttonRenderPropertyManagers.specialKick?this.buttonRenderPropertyManagers.specialKick.getRenderProperties():void 0;const{baseSize:e,colliderRadius:t,horizontalFlip:i}=this.containerProps;let o=i?1:-1;this.side===r.SocketSideEnum.Left&&(o*=-1);const n=t*s.ARCADE_ROW_ACTIVATOR_DISPLACEMENT_MULTIPLIER,a=e/2*.15;this._renderProperties.rowActivators.top.radius=a,this._renderProperties.rowActivators.top.x=-Math.SQRT2*n*o,this._renderProperties.rowActivators.top.y=-Math.SQRT2*n,this._renderProperties.rowActivators.bottom.radius=a,this._renderProperties.rowActivators.bottom.x=-1*this._renderProperties.rowActivators.top.x,this._renderProperties.rowActivators.bottom.y=-1*this._renderProperties.rowActivators.top.y,this.firstFetchCompleted||(this.firstFetchCompleted=!0)}makeButtonPropsFromArcadeProps(e,t,i,o,r,a){const{baseSize:s,wheelOffsetAngle:c,socket:l}=r,{action:u,styles:d}=a,p=this.getButtonPosition(e,o,t,i,c);return{type:n.ControlType.Button,action:u,baseSize:s,collider:()=>!1,colliderRadius:0,horizontalFlip:!1,inputScale:0,size:s,socket:l,workspaceHeight:0,workspaceWidth:0,x:p.x,y:p.y,styles:d}}updateButtonPropsFromArcadeProps(e,t,i,o,n,r){const a=this.getButtonPropsForSocket(e);if(void 0===a)e===c.ArcadeButtonSockets.SpecialPunch?n.specialPunch?this.buttonControlProps.specialPunch={previous:this.makeButtonPropsFromArcadeProps(e,t,i,o,n,n.specialPunch),current:this.makeButtonPropsFromArcadeProps(e,t,i,o,n,n.specialPunch)}:this.buttonControlProps.specialPunch=void 0:e===c.ArcadeButtonSockets.SpecialKick&&(n.specialKick?this.buttonControlProps.specialKick={previous:this.makeButtonPropsFromArcadeProps(e,t,i,o,n,n.specialKick),current:this.makeButtonPropsFromArcadeProps(e,t,i,o,n,n.specialKick)}:this.buttonControlProps.specialKick=void 0);else{const{wheelOffsetAngle:s,baseSize:c}=n,{action:l,styles:u}=r,d=this.getButtonPosition(e,o,t,i,s),p=a.current;a.current=a.previous,a.previous=p,a.current.action=l,a.current.x=d.x,a.current.y=d.y,a.current.styles=u,a.current.baseSize=c}}updateButtonState(e,t){const i=this.getButtonStateForSocket(e),o=i.current;i.current=i.previous,i.previous=o,i.current.interactionState=this.getButtonStateFromArcadeState(e,t)}getButtonPosition(e,t,i,o,n){const r=(0,s.getArcadeButtonSocketPosition)(e,t,n);return r.x*=i*o,r.y*=i,r}getButtonPropsForSocket(e){switch(e){case c.ArcadeButtonSockets.LightPunch:return this.buttonControlProps.lightPunch;case c.ArcadeButtonSockets.MediumPunch:return this.buttonControlProps.mediumPunch;case c.ArcadeButtonSockets.HeavyPunch:return this.buttonControlProps.heavyPunch;case c.ArcadeButtonSockets.SpecialPunch:return this.buttonControlProps.specialPunch;case c.ArcadeButtonSockets.LightKick:return this.buttonControlProps.lightKick;case c.ArcadeButtonSockets.MediumKick:return this.buttonControlProps.mediumKick;case c.ArcadeButtonSockets.HeavyKick:return this.buttonControlProps.heavyKick;case c.ArcadeButtonSockets.SpecialKick:return this.buttonControlProps.specialKick}}getButtonStateForSocket(e){switch(e){case c.ArcadeButtonSockets.LightPunch:return this.buttonStates.lightPunch;case c.ArcadeButtonSockets.MediumPunch:return this.buttonStates.mediumPunch;case c.ArcadeButtonSockets.HeavyPunch:return this.buttonStates.heavyPunch;case c.ArcadeButtonSockets.SpecialPunch:return this.buttonStates.specialPunch;case c.ArcadeButtonSockets.LightKick:return this.buttonStates.lightKick;case c.ArcadeButtonSockets.MediumKick:return this.buttonStates.mediumKick;case c.ArcadeButtonSockets.HeavyKick:return this.buttonStates.heavyKick;case c.ArcadeButtonSockets.SpecialKick:return this.buttonStates.specialKick}}getButtonStateFromArcadeState(e,t){switch(e){case c.ArcadeButtonSockets.LightPunch:return t.interactionState.lightPunch;case c.ArcadeButtonSockets.MediumPunch:return t.interactionState.mediumPunch;case c.ArcadeButtonSockets.HeavyPunch:return t.interactionState.heavyPunch;case c.ArcadeButtonSockets.SpecialPunch:return t.interactionState.specialPunch;case c.ArcadeButtonSockets.LightKick:return t.interactionState.lightKick;case c.ArcadeButtonSockets.MediumKick:return t.interactionState.mediumKick;case c.ArcadeButtonSockets.HeavyKick:return t.interactionState.heavyKick;case c.ArcadeButtonSockets.SpecialKick:return t.interactionState.specialKick}}}},U8mw:function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.standardXboxLayout=void 0;const o=i("gJ6f");t.standardXboxLayout={id:"standard",left:{inner:[{type:o.ControlType.Joystick,expand:!1,axis:{input:"axisXY",output:"leftJoystick",deadzone:{threshold:.05,radial:!0}}}],outer:[null,null,[{type:o.ControlType.DirectionalPad}],{type:o.ControlType.Button,action:"leftThumb"},null,{type:o.ControlType.Button,action:"leftTrigger"},{type:o.ControlType.Button,action:"leftBumper"}]},right:{inner:[{type:o.ControlType.Button,action:"gamepadY"},{type:o.ControlType.Button,action:"gamepadB"},{type:o.ControlType.Button,action:"gamepadA"},{type:o.ControlType.Button,action:"gamepadX"}],outer:[{type:o.ControlType.Button,action:"rightBumper"},{type:o.ControlType.Button,action:"rightTrigger"},null,{type:o.ControlType.Button,action:"rightThumb"},[{type:o.ControlType.Joystick,axis:{input:"axisXY",output:"rightJoystick",deadzone:{threshold:.05,radial:!0}}}]]},upper:{right:[{type:o.ControlType.Button,action:"menu"},{type:o.ControlType.Button,action:"view"}]}}},U9v9:function(e,t,i){"use strict";e.exports=function(e,t,i){var o=" ",n=e.level,r=e.dataLevel,a=e.schema[t],s=e.schemaPath+e.util.getProperty(t),c=e.errSchemaPath+"/"+t,l=!e.opts.allErrors,u="data"+(r||""),d="valid"+n,p=e.opts.$data&&a&&a.$data;p&&(o+=" var schema"+n+" = "+e.util.getData(a.$data,r,e.dataPathArr)+"; "),p||(o+=" var schema"+n+" = validate.schema"+s+";"),o+="var "+d+" = equal("+u+", schema"+n+"); if (!"+d+") {   ";var h=h||[];h.push(o),o="",!1!==e.createErrors?(o+=" { keyword: 'const' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(c)+" , params: { allowedValue: schema"+n+" } ",!1!==e.opts.messages&&(o+=" , message: 'should be equal to constant' "),e.opts.verbose&&(o+=" , schema: validate.schema"+s+" , parentSchema: validate.schema"+e.schemaPath+" , data: "+u+" "),o+=" } "):o+=" {} ";var f=o;return o=h.pop(),!e.compositeRule&&l?e.async?o+=" throw new ValidationError(["+f+"]); ":o+=" validate.errors = ["+f+"]; return false; ":o+=" var err = "+f+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",o+=" }",l&&(o+=" else { "),o}},ULLa:function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.DefaultNonRotatingRotationIndicatorColor=t.DefaultRotatingRotationIndicatorColor=t.DefaultNonRotatingOriginIndicatorColor=t.DefaultRotatingOriginIndicatorColor=t.DefaultOuterRingColor=t.DefaultActiveInnerRingColor=t.DefaultPassiveInnerRingColor=void 0,t.DefaultPassiveInnerRingColor={r:140/255,g:192/255,b:140/255,a:128/255,string:"#8cc08c80"},t.DefaultActiveInnerRingColor={r:140/255,g:192/255,b:140/255,a:230/255,string:"#8cc08ce6"},t.DefaultOuterRingColor={r:97/255,g:171/255,b:97/255,a:1,string:"#61ab61ff"},t.DefaultRotatingOriginIndicatorColor={r:0,g:0,b:0,a:230/255,string:"#000000e6"},t.DefaultNonRotatingOriginIndicatorColor={r:9/255,g:17/255,b:9/255,a:.6,string:"#09110999"},t.DefaultRotatingRotationIndicatorColor={r:1,g:1,b:1,a:1,string:"#ffffffff"},t.DefaultNonRotatingRotationIndicatorColor={r:140/255,g:192/255,b:140/255,a:.6,string:"#8cc08c99"}},V1gA:function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.dereferenceJsonReferences=void 0;const o=i("0PxE");function n(e){const t=e.indexOf("#");return t>=0?e.substr(0,t):e}async function r(e,t,i,a,s,c){if(!s||"object"!==typeof s)return Promise.resolve(s);if("object"===typeof(l=s)&&Object.prototype.hasOwnProperty.call(l,"$ref"))return async function(e,t,i,a,s,c){let l,u,d=a;if(n(s)){l=!0;const e=(0,o.normalizePath)(d),t=-1!==e.lastIndexOf("/")?e.substr(0,e.lastIndexOf("/")):e;u=(0,o.normalizePath)(`${t}/${s}`)}else l=!1,u=(0,o.normalizePath)(`${d}/${s}`);if(i.has(u))throw new Error("Circular Reference Detected in Json");if(t.has(u))return Promise.resolve(t.get(u));i.add(u);let p=e;if(l){if(d=n(u),!c)throw new Error("No resolver for external reference");p=await c(d)}let h=p;(function(e){const t=e.indexOf("#");return t>=0?e.substr(t):"#"})(s).split("/").slice(1).map(e=>{const t=decodeURIComponent(e).replace("~1","/").replace("~0","~");if("object"!==typeof h||!Object.prototype.hasOwnProperty.call(h,t))throw new Error(`Key ${e} Not Found in: ${JSON.stringify(h)}`);h=h[t]});const f=r(p,t,i,d,h,c);return t.set(u,f),i.delete(u),f}(e,t,i,a,s.$ref,c);var l;const u=Object.keys(s);for(const o of u){const n=await r(e,t,i,a,s[o],c);n!==s[o]&&(s[o]=n)}return s}t.dereferenceJsonReferences=async function(e,t,i,o){const n=JSON.parse(JSON.stringify(e));return r(e,t,new Set,i,n,o)}},V2pq:function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.copyColor=t.areColorsEqual=void 0,t.areColorsEqual=function(e,t){return e===t||!(e&&!t||!e&&t)&&(!(!e||!t)&&(e.r===t.r&&e.g===t.g&&e.b===t.b&&e.string===t.string))},t.copyColor=function(e){return{r:e.r,g:e.g,b:e.b,a:e.a,string:e.string}}},V3Ju:function(e,t,i){"use strict";var o=this&&this.__decorate||function(e,t,i,o){var n,r=arguments.length,a=r<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,i):o;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)a=Reflect.decorate(e,t,i,o);else for(var s=e.length-1;s>=0;s--)(n=e[s])&&(a=(r<3?n(a):r>3?n(t,i,a):n(t,i))||a);return r>3&&a&&Object.defineProperty(t,i,a),a};Object.defineProperty(t,"__esModule",{value:!0}),t.LayerManager=void 0;const n=i("s6Xb"),r=i("LcNk"),a=i("YfSF");let s=class{constructor(){this.activeLayoutId="",this.layoutLayerActivationStreams=new Map}getLayerActivationStream(e){var t;return null===(t=this.layoutLayerActivationStreams.get(this.activeLayoutId))||void 0===t?void 0:t.get(e)}getActiveLayersStream(){var e;const t=null===(e=this.layoutLayerActivationStreams.get(this.activeLayoutId))||void 0===e?void 0:e.entries(),i=new Set;if(!t)return(0,r.of)(i);const o=[];for(const[n,r]of t)o.push(r.pipe((0,a.distinctUntilChanged)(),(0,a.tap)(e=>{e?i.add(n):i.delete(n)})));return(0,r.combineLatest)(o).pipe((0,a.map)(()=>i))}hasLayerActivationStream(e){var t,i;return null!==(i=null===(t=this.layoutLayerActivationStreams.get(this.activeLayoutId))||void 0===t?void 0:t.has(e))&&void 0!==i&&i}trySetLayerActivated(e,t){var i,o;null===(o=null===(i=this.layoutLayerActivationStreams.get(this.activeLayoutId))||void 0===i?void 0:i.get(e))||void 0===o||o.next(t)}reconcileLayoutLayers(e){if(this.activeLayoutId=e.id,!e.layoutFile.content.layers)return void this.resetLayerActivationStreams();const t=Object.keys(e.layoutFile.content.layers);if(this.layoutLayerActivationStreams.has(this.activeLayoutId))this.layoutLayerActivationStreams.forEach((e,i)=>{if(i!==this.activeLayoutId)e.forEach(e=>{e.complete()}),this.layoutLayerActivationStreams.delete(i);else{const i=[];e.forEach((e,o)=>{-1===t.indexOf(o)&&i.push([o,e])}),i.forEach(([t,i])=>{i.complete(),e.delete(t)}),t.filter(t=>!e.has(t)).forEach(t=>e.set(t,new r.BehaviorSubject(!1)))}});else{this.resetLayerActivationStreams();const e=new Map;t.forEach(t=>e.set(t,new r.BehaviorSubject(!1))),this.layoutLayerActivationStreams.set(this.activeLayoutId,e)}}resetLayerActivationStreams(){this.layoutLayerActivationStreams.forEach(e=>{e.forEach(e=>e.complete()),e.clear()}),this.layoutLayerActivationStreams.clear()}};s=o([(0,n.injectable)()],s),t.LayerManager=s},ViUo:function(e,t,i){"use strict";var o=this&&this.__decorate||function(e,t,i,o){var n,r=arguments.length,a=r<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,i):o;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)a=Reflect.decorate(e,t,i,o);else for(var s=e.length-1;s>=0;s--)(n=e[s])&&(a=(r<3?n(a):r>3?n(t,i,a):n(t,i))||a);return r>3&&a&&Object.defineProperty(t,i,a),a},n=this&&this.__metadata||function(e,t){if("object"===typeof Reflect&&"function"===typeof Reflect.metadata)return Reflect.metadata(e,t)},r=this&&this.__param||function(e,t){return function(i,o){t(i,o,e)}};Object.defineProperty(t,"__esModule",{value:!0}),t.HitTester=void 0;const a=i("s6Xb"),s=i("LcNk"),c=i("YfSF"),l=i("2ZOr"),u=i("cwRv"),d=i("gJ6f"),p=i("J7us"),h=i("YFNc");let f=class{constructor(e,t,i,o,n,r){const a=t.getRenderControlsStream().pipe((0,c.map)(e=>{const t=[],i=[];for(let o=0;o<e.length;o++)i.push(e[o]),e[o].type===d.ControlType.ErgoAdjustor&&t.push(e[o]);return{ergoAdjustors:t,combined:i}}));this.hitTestSubscription=(0,s.combineLatest)([a,e.pointerUpdates$]).pipe((0,c.withLatestFrom)(o.getOverlayStream(),o.getInteractionModeStream(),t.getControlContainersStream(),n.screenProps$),(0,c.tap)(([[e,t],o,n,a,s])=>{i.startFrame();for(let i=0;i<e.combined.length;i++)e.combined[i].startRenderFrame();try{let c=t.popFront();for(;c;){for(let e=0;e<a.length;e++){const t=a[e];t.type===u.ControlContainerType.RenderControlContainer&&c.attemptCollision(t,n)}c.flushNotification(),c=t.popFront()}if(e.ergoAdjustors.some(e=>e.isDirty)){const t=(0,p.getOrientationFromScreen)(s),i=e.ergoAdjustors.reduce((e,t)=>t.addToSettingsUpdate(e),{action:h.SettingsUpdateActionNames.UpdateAllWheelsErgoForScope,scope:o.layout.scope,orientation:t,left:o.settings[t].left,right:o.settings[t].right,center:o.settings[t].center});r.updateSettings(i)}}finally{for(let t=0;t<e.combined.length;t++)e.combined[t].endRenderFrame();i.endFrame()}})).subscribe()}unmount(){this.hitTestSubscription.unsubscribe()}};f=o([(0,a.injectable)(),r(0,(0,a.inject)(l.SERVICE_TYPES.TouchManager)),r(1,(0,a.inject)(l.SERVICE_TYPES.LayoutController)),r(2,(0,a.inject)(l.SERVICE_TYPES.InputProvider)),r(3,(0,a.inject)(l.SERVICE_TYPES.UserInterface)),r(4,(0,a.inject)(l.SERVICE_TYPES.ScreenDisplay)),r(5,(0,a.inject)(l.SERVICE_TYPES.Settings)),n("design:paramtypes",[Function,Function,Function,Function,Function,Function])],f),t.HitTester=f},W3G1:function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.TouchForwardingRenderPropertyManager=void 0;const o=i("kU1o"),n=i("gJ6f"),r=i("25ZR"),a=i("aQA3"),s={type:n.ControlType.TouchForwarding,opacity:{value:1,energy:o.AnimationEnergy.Instant},rotation:0,x:0,y:0};class c extends r.RenderPropertyManager{constructor(e,t){super(e,t,Object.keys(a.TouchForwardingState).length/2),this._renderProperties=this.primeCache()}primeCache(){return s}completeCache(){}}t.TouchForwardingRenderPropertyManager=c},WJiY:function(e,t,i){"use strict";e.exports=function(e,t,i){var o=" ",n=e.level,r=e.dataLevel,a=e.schema[t],s=e.schemaPath+e.util.getProperty(t),c=e.errSchemaPath+"/"+t,l=!e.opts.allErrors,u="data"+(r||""),d="errs__"+n,p=e.util.copy(e);p.level++;var h="valid"+p.level;if(o+="var "+d+" = errors;",e.opts.strictKeywords?"object"==typeof a&&Object.keys(a).length>0||!1===a:e.util.schemaHasRules(a,e.RULES.all)){p.schema=a,p.schemaPath=s,p.errSchemaPath=c;var f="key"+n,y="idx"+n,g="i"+n,m="' + "+f+" + '",v="data"+(p.dataLevel=e.dataLevel+1),b="dataProperties"+n,S=e.opts.ownProperties,k=e.baseId;S&&(o+=" var "+b+" = undefined; "),o+=S?" "+b+" = "+b+" || Object.keys("+u+"); for (var "+y+"=0; "+y+"<"+b+".length; "+y+"++) { var "+f+" = "+b+"["+y+"]; ":" for (var "+f+" in "+u+") { ",o+=" var startErrs"+n+" = errors; ";var P=f,w=e.compositeRule;e.compositeRule=p.compositeRule=!0;var A=e.validate(p);p.baseId=k,e.util.varOccurences(A,v)<2?o+=" "+e.util.varReplace(A,v,P)+" ":o+=" var "+v+" = "+P+"; "+A+" ",e.compositeRule=p.compositeRule=w,o+=" if (!"+h+") { for (var "+g+"=startErrs"+n+"; "+g+"<errors; "+g+"++) { vErrors["+g+"].propertyName = "+f+"; }   var err =   ",!1!==e.createErrors?(o+=" { keyword: 'propertyNames' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(c)+" , params: { propertyName: '"+m+"' } ",!1!==e.opts.messages&&(o+=" , message: 'property name \\'"+m+"\\' is invalid' "),e.opts.verbose&&(o+=" , schema: validate.schema"+s+" , parentSchema: validate.schema"+e.schemaPath+" , data: "+u+" "),o+=" } "):o+=" {} ",o+=";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",!e.compositeRule&&l&&(e.async?o+=" throw new ValidationError(vErrors); ":o+=" validate.errors = vErrors; return false; "),l&&(o+=" break; "),o+=" } }"}return l&&(o+="  if ("+d+" == errors) {"),o}},XnAj:function(e,t,i){"use strict";var o=this&&this.__decorate||function(e,t,i,o){var n,r=arguments.length,a=r<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,i):o;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)a=Reflect.decorate(e,t,i,o);else for(var s=e.length-1;s>=0;s--)(n=e[s])&&(a=(r<3?n(a):r>3?n(t,i,a):n(t,i))||a);return r>3&&a&&Object.defineProperty(t,i,a),a},n=this&&this.__metadata||function(e,t){if("object"===typeof Reflect&&"function"===typeof Reflect.metadata)return Reflect.metadata(e,t)},r=this&&this.__param||function(e,t){return function(i,o){t(i,o,e)}};Object.defineProperty(t,"__esModule",{value:!0}),t.ArcadeButtonsControl=void 0;const a=i("s6Xb"),s=i("2ZOr"),c=i("9XOD"),l=i("ZakO"),u=i("l4dA"),d=i("3ggl"),p=i("QEDo"),h=i("H6Pt"),f=i("cvzu"),y=i("ncY8"),g=i("U3l9"),m=i("Myyd");let v=class extends f.RenderControl{constructor(e,t){super(function(e){var t,i,o,n;return{interactionState:{lightKick:!1===e.lightKick.visible?h.ButtonState.Hidden:!1===e.lightKick.enabled?h.ButtonState.Disabled:h.ButtonState.Idle,mediumKick:!1===e.mediumKick.visible?h.ButtonState.Hidden:!1===e.mediumKick.enabled?h.ButtonState.Disabled:h.ButtonState.Idle,heavyKick:!1===e.heavyKick.visible?h.ButtonState.Hidden:!1===e.heavyKick.enabled?h.ButtonState.Disabled:h.ButtonState.Idle,specialKick:!1===(null===(t=e.specialKick)||void 0===t?void 0:t.visible)?h.ButtonState.Hidden:!1===(null===(i=e.specialKick)||void 0===i?void 0:i.enabled)?h.ButtonState.Disabled:h.ButtonState.Idle,lightPunch:!1===e.lightPunch.visible?h.ButtonState.Hidden:!1===e.lightPunch.enabled?h.ButtonState.Disabled:h.ButtonState.Idle,mediumPunch:!1===e.mediumPunch.visible?h.ButtonState.Hidden:!1===e.mediumPunch.enabled?h.ButtonState.Disabled:h.ButtonState.Idle,heavyPunch:!1===e.heavyPunch.visible?h.ButtonState.Hidden:!1===e.heavyPunch.enabled?h.ButtonState.Disabled:h.ButtonState.Idle,specialPunch:!1===(null===(o=e.specialPunch)||void 0===o?void 0:o.visible)?h.ButtonState.Hidden:!1===(null===(n=e.specialPunch)||void 0===n?void 0:n.enabled)?h.ButtonState.Disabled:h.ButtonState.Idle}}}(e.getProps()),e,t),this.nonVisualButtonStates={lightKick:h.ButtonState.Idle,mediumKick:h.ButtonState.Idle,heavyKick:h.ButtonState.Idle,specialKick:h.ButtonState.Idle,lightPunch:h.ButtonState.Idle,mediumPunch:h.ButtonState.Idle,heavyPunch:h.ButtonState.Idle,specialPunch:h.ButtonState.Idle},this.onPointerStart=()=>this.onTouchChanged(),this.onPointerMove=()=>this.onTouchChanged(),this.onPointerEnd=()=>this.onTouchChanged();const i=e.getProps(),o=this.getState();this.sideMemo=new d.MemoizedConverter(i.socket,p.getSocketSide,3),this.renderPropertyManager=new g.ArcadeButtonsRenderPropertyManager(i,o,this.sideMemo.lastResult),this.resetNonVisualState()}onPropsChangedInternal([e,t]){const i=this.getState();e&&Object.keys(this.nonVisualButtonStates).map(i=>{const o=t[i],n=e[i];this.nonVisualButtonStates[i]!==h.ButtonState.Activated||(0,u.actionsAreEqual)(null===n||void 0===n?void 0:n.action,null===o||void 0===o?void 0:o.action)||(null===n||void 0===n?void 0:n.action)&&this.model.commitAction(!1,n.action)}),this.sideMemo.convert(t.socket),this.renderPropertyManager.updateSide(this.sideMemo.lastResult);const o={lightKick:b(i.interactionState.lightKick,this.nonVisualButtonStates.lightKick,t.lightKick),mediumKick:b(i.interactionState.mediumKick,this.nonVisualButtonStates.mediumKick,t.mediumKick),heavyKick:b(i.interactionState.heavyKick,this.nonVisualButtonStates.heavyKick,t.heavyKick),specialKick:b(i.interactionState.specialKick,this.nonVisualButtonStates.specialKick,t.specialKick),lightPunch:b(i.interactionState.lightPunch,this.nonVisualButtonStates.lightPunch,t.lightPunch),mediumPunch:b(i.interactionState.mediumPunch,this.nonVisualButtonStates.mediumPunch,t.mediumPunch),heavyPunch:b(i.interactionState.heavyPunch,this.nonVisualButtonStates.heavyPunch,t.heavyPunch),specialPunch:b(i.interactionState.specialPunch,this.nonVisualButtonStates.specialPunch,t.specialPunch)};this.nonVisualButtonStates={lightKick:o.lightKick.nonVisualState,mediumKick:o.mediumKick.nonVisualState,heavyKick:o.heavyKick.nonVisualState,specialKick:o.specialKick.nonVisualState,lightPunch:o.lightPunch.nonVisualState,mediumPunch:o.mediumPunch.nonVisualState,heavyPunch:o.heavyPunch.nonVisualState,specialPunch:o.specialPunch.nonVisualState},this.setState({interactionState:{lightKick:o.lightKick.visualState,mediumKick:o.mediumKick.visualState,heavyKick:o.heavyKick.visualState,specialKick:o.specialKick.visualState,lightPunch:o.lightPunch.visualState,mediumPunch:o.mediumPunch.visualState,heavyPunch:o.heavyPunch.visualState,specialPunch:o.specialPunch.visualState}})}onStateChangedInternal(e){const t=this.model.getProps();let i={};Object.keys(this.nonVisualButtonStates).map(e=>{const o=t[e],n=this.nonVisualButtonStates[e];if(o)switch(n){case h.ButtonState.Activated:i=this.model.commitAction(!0,o.action,!1,i);break;default:i=this.model.commitAction(!1,o.action,!1,i)}}),this.model.setAnalogInput(i)}getIsStateUndimmable(){return!1}onTouchChanged(){if(this.resetNonVisualState(),this.renderPropertyManager.dim(),!this.pointerTracker.isEmpty){const{x:e,y:t,colliderRadius:i,horizontalFlip:o,specialKick:n,specialPunch:r,wheelOffsetAngle:a}=this.model.getProps(),s=this.sideMemo.lastResult;let u=o?1:-1;s===l.SocketSideEnum.Left&&(u*=-1);const d=i*y.ARCADE_RADIUS_MULTIPLIER,p=!(!r&&!n);this.pointerTracker.forEach(o=>{const n={x:(o.position.x-e)*u,y:o.position.y-t},r=i*y.ARCADE_ROW_ACTIVATOR_DISPLACEMENT_MULTIPLIER,s={x:-Math.SQRT2*r,y:-Math.SQRT2*r};if((0,c.radialCollider)(n,s,d))return this.nonVisualButtonStates.lightPunch===h.ButtonState.Idle&&(this.nonVisualButtonStates.lightPunch=h.ButtonState.Activated,this.renderPropertyManager.undimSocket(m.ArcadeButtonSockets.LightPunch)),this.nonVisualButtonStates.mediumPunch===h.ButtonState.Idle&&(this.nonVisualButtonStates.mediumPunch=h.ButtonState.Activated,this.renderPropertyManager.undimSocket(m.ArcadeButtonSockets.MediumPunch)),this.nonVisualButtonStates.heavyPunch===h.ButtonState.Idle&&(this.nonVisualButtonStates.heavyPunch=h.ButtonState.Activated,this.renderPropertyManager.undimSocket(m.ArcadeButtonSockets.HeavyPunch)),void(this.nonVisualButtonStates.specialPunch===h.ButtonState.Idle&&(this.nonVisualButtonStates.specialPunch=h.ButtonState.Activated,this.renderPropertyManager.undimSocket(m.ArcadeButtonSockets.SpecialPunch)));const l={x:-1*s.x,y:-1*s.y};if((0,c.radialCollider)(n,l,d))return this.nonVisualButtonStates.lightKick===h.ButtonState.Idle&&(this.nonVisualButtonStates.lightKick=h.ButtonState.Activated,this.renderPropertyManager.undimSocket(m.ArcadeButtonSockets.LightKick)),this.nonVisualButtonStates.mediumKick===h.ButtonState.Idle&&(this.nonVisualButtonStates.mediumKick=h.ButtonState.Activated,this.renderPropertyManager.undimSocket(m.ArcadeButtonSockets.MediumKick)),this.nonVisualButtonStates.heavyKick===h.ButtonState.Idle&&(this.nonVisualButtonStates.heavyKick=h.ButtonState.Activated,this.renderPropertyManager.undimSocket(m.ArcadeButtonSockets.HeavyKick)),void(this.nonVisualButtonStates.specialKick===h.ButtonState.Idle&&(this.nonVisualButtonStates.specialKick=h.ButtonState.Activated,this.renderPropertyManager.undimSocket(m.ArcadeButtonSockets.SpecialKick)));const f={x:0,y:0};for(const{x:e,y:t,name:i}of(0,y.getArcadeButtonConfig)(p,a)){if(f.x=e*d,f.y=t*d,this.nonVisualButtonStates[i]!==h.ButtonState.Idle)continue;if((0,c.radialCollider)(n,f,1.3*d)){this.nonVisualButtonStates[i]=h.ButtonState.Activated;const e=S(i);void 0!==e&&this.renderPropertyManager.undimSocket(e)}}})}return this.convertNonVisualStatesToVisualStates(),!0}resetNonVisualState(){var e,t;const i=this.model.getProps();this.nonVisualButtonStates.lightKick=!1===i.lightKick.visible?h.ButtonState.Hidden:h.ButtonState.Idle,this.nonVisualButtonStates.mediumKick=!1===i.mediumKick.visible?h.ButtonState.Hidden:h.ButtonState.Idle,this.nonVisualButtonStates.heavyKick=!1===i.mediumKick.visible?h.ButtonState.Hidden:h.ButtonState.Idle,this.nonVisualButtonStates.specialKick=!1===(null===(e=i.specialKick)||void 0===e?void 0:e.visible)?h.ButtonState.Hidden:h.ButtonState.Idle,this.nonVisualButtonStates.lightPunch=!1===i.lightPunch.visible?h.ButtonState.Hidden:h.ButtonState.Idle,this.nonVisualButtonStates.mediumPunch=!1===i.mediumPunch.visible?h.ButtonState.Hidden:h.ButtonState.Idle,this.nonVisualButtonStates.heavyPunch=!1===i.heavyPunch.visible?h.ButtonState.Hidden:h.ButtonState.Idle,this.nonVisualButtonStates.specialPunch=!1===(null===(t=i.specialPunch)||void 0===t?void 0:t.visible)?h.ButtonState.Hidden:h.ButtonState.Idle}convertNonVisualStatesToVisualStates(){const{interactionState:e}=this.getState(),t=e.lightPunch!==h.ButtonState.Disabled&&e.lightPunch!==this.nonVisualButtonStates.lightPunch,i=e.mediumPunch!==h.ButtonState.Disabled&&e.mediumPunch!==this.nonVisualButtonStates.mediumPunch,o=e.heavyPunch!==h.ButtonState.Disabled&&e.heavyPunch!==this.nonVisualButtonStates.heavyPunch,n=e.specialPunch!==h.ButtonState.Disabled&&e.specialPunch!==this.nonVisualButtonStates.specialPunch,r=e.lightKick!==h.ButtonState.Disabled&&e.lightKick!==this.nonVisualButtonStates.lightKick,a=e.mediumKick!==h.ButtonState.Disabled&&e.mediumKick!==this.nonVisualButtonStates.mediumKick,s=e.heavyKick!==h.ButtonState.Disabled&&e.heavyKick!==this.nonVisualButtonStates.heavyKick,c=e.specialKick!==h.ButtonState.Disabled&&e.specialKick!==this.nonVisualButtonStates.specialKick;this.setState({interactionState:{lightPunch:t?this.nonVisualButtonStates.lightPunch:e.lightPunch,mediumPunch:i?this.nonVisualButtonStates.mediumPunch:e.mediumPunch,heavyPunch:o?this.nonVisualButtonStates.heavyPunch:e.heavyPunch,specialPunch:n?this.nonVisualButtonStates.specialPunch:e.specialPunch,lightKick:r?this.nonVisualButtonStates.lightKick:e.lightKick,mediumKick:a?this.nonVisualButtonStates.mediumKick:e.mediumKick,heavyKick:s?this.nonVisualButtonStates.heavyKick:e.heavyKick,specialKick:c?this.nonVisualButtonStates.specialKick:e.specialKick}})}};v=o([(0,a.injectable)(),r(0,(0,a.inject)(s.SERVICE_TYPES.VirtualControl)),r(1,(0,a.inject)(s.SERVICE_TYPES.UserInterface)),n("design:paramtypes",[Object,Function])],v),t.ArcadeButtonsControl=v;const b=(e,t,i)=>{if(i){const o=!1!==i.enabled,n=!1!==i.visible;let r=t;if(n){if(o){if(n&&e===h.ButtonState.Hidden)return r=h.ButtonState.Idle,{visualState:o?r:h.ButtonState.Disabled,nonVisualState:r};if(o&&e===h.ButtonState.Disabled)return{visualState:r,nonVisualState:r}}else if(r=r===h.ButtonState.Hidden?h.ButtonState.Idle:r,e!==h.ButtonState.Disabled)return{visualState:h.ButtonState.Disabled,nonVisualState:r}}else if(e!==h.ButtonState.Hidden)return r=h.ButtonState.Hidden,{visualState:r,nonVisualState:r}}return{visualState:e,nonVisualState:t}},S=e=>{switch(e){case"lightPunch":return m.ArcadeButtonSockets.LightPunch;case"mediumPunch":return m.ArcadeButtonSockets.MediumPunch;case"heavyPunch":return m.ArcadeButtonSockets.HeavyPunch;case"specialPunch":return m.ArcadeButtonSockets.SpecialPunch;case"lightKick":return m.ArcadeButtonSockets.LightKick;case"mediumKick":return m.ArcadeButtonSockets.MediumKick;case"heavyKick":return m.ArcadeButtonSockets.HeavyKick;case"specialKick":return m.ArcadeButtonSockets.SpecialKick;default:return}}},Y6hi:function(e){e.exports=JSON.parse('{"$id":"https://raw.githubusercontent.com/microsoft/xbox-game-streaming-tools/main/touch-adaptation-kit/schemas/layout/v3.4.1/layout.json","$schema":"http://json-schema.org/draft-07/schema#","additionalProperties":false,"definitions":{"LayoutDefinableType":{"description":"Set of types which can be used in the definitions section of a layout file.","anyOf":[{"type":"string"},{"type":"boolean"},{"type":"integer"},{"type":"number"},{"$ref":"#/definitions/Accelerometer"},{"$ref":"#/definitions/ActionType"},{"$ref":"#/definitions/ArcadeButton"},{"$ref":"#/definitions/ArcadeButtonDefaultStyle"},{"$ref":"#/definitions/ArcadeButtons"},{"$ref":"#/definitions/ArcadeButtonStyles"},{"$ref":"#/definitions/AxisCap"},{"$ref":"#/definitions/AxisCapColor"},{"$ref":"#/definitions/Background"},{"$ref":"#/definitions/BackgroundAsset"},{"$ref":"#/definitions/BackgroundAssetValue"},{"$ref":"#/definitions/BackgroundColor"},{"$ref":"#/definitions/Blank"},{"$ref":"#/definitions/Button"},{"$ref":"#/definitions/ButtonStyles"},{"$ref":"#/definitions/ButtonActivatedStyle"},{"$ref":"#/definitions/ButtonDefaultStyle"},{"$ref":"#/definitions/ButtonDisabledStyle"},{"$ref":"#/definitions/ButtonIdleStyle"},{"$ref":"#/definitions/ButtonToggledStyle"},{"$ref":"#/definitions/ButtonPulledStyle"},{"$ref":"#/definitions/ButtonMappableType"},{"$ref":"#/definitions/ButtonType"},{"$ref":"#/definitions/Control"},{"$ref":"#/definitions/ControlEnabled"},{"$ref":"#/definitions/ControlGroup<Control>"},{"$ref":"#/definitions/ControlGroupControlItem"},{"$ref":"#/definitions/ControlGroup<LayerControl>"},{"$ref":"#/definitions/ControlGroupLayerControlItem"},{"$ref":"#/definitions/ControllerInput"},{"$ref":"#/definitions/ControlVisibility"},{"$ref":"#/definitions/Deadzone"},{"$ref":"#/definitions/Deadzone2D"},{"$ref":"#/definitions/DirectionalPad"},{"$ref":"#/definitions/DirectionalPadDefaultStyle"},{"$ref":"#/definitions/DirectionalPadIdleStyle"},{"$ref":"#/definitions/DirectionalPadInteraction"},{"$ref":"#/definitions/DirectionalPadInteractionActivationType"},{"$ref":"#/definitions/DirectionalPadStyles"},{"$ref":"#/definitions/FaceImage"},{"$ref":"#/definitions/FaceImageAsset"},{"$ref":"#/definitions/FaceImageAssetValue"},{"$ref":"#/definitions/FaceImageIcon"},{"$ref":"#/definitions/FaceImageIconLabel"},{"$ref":"#/definitions/FaceImageIconValue"},{"$ref":"#/definitions/GameIcon"},{"$ref":"#/definitions/Gradient"},{"$ref":"#/definitions/Gyroscope"},{"$ref":"#/definitions/HexColor"},{"$ref":"#/definitions/InnerWheel<Control>"},{"$ref":"#/definitions/InnerWheel<LayerControl>"},{"$ref":"#/definitions/InputAxisPolar"},{"$ref":"#/definitions/InputCurveType"},{"$ref":"#/definitions/InputMappingZY"},{"$ref":"#/definitions/InputMapping2D"},{"$ref":"#/definitions/Joystick"},{"$ref":"#/definitions/JoystickActivatedStyle"},{"$ref":"#/definitions/JoystickAxisType"},{"$ref":"#/definitions/JoystickDefaultStyle"},{"$ref":"#/definitions/JoystickDirectionIndicator"},{"$ref":"#/definitions/JoystickDisabledStyle"},{"$ref":"#/definitions/JoystickIdleStyle"},{"$ref":"#/definitions/JoystickInputConfig2D"},{"$ref":"#/definitions/JoystickInputConfigAxial"},{"$ref":"#/definitions/JoystickInputConfigAxialPolar"},{"$ref":"#/definitions/JoystickInputMapping1D"},{"$ref":"#/definitions/JoystickInputMapping2D"},{"$ref":"#/definitions/JoystickMovingStyle"},{"$ref":"#/definitions/JoystickOutlineWithIndicator"},{"$ref":"#/definitions/JoystickOutlineWithoutIndicator"},{"$ref":"#/definitions/JoystickPolarAxisType"},{"$ref":"#/definitions/JoystickStyles"},{"$ref":"#/definitions/JoystickType"},{"$ref":"#/definitions/KnobStyle"},{"$ref":"#/definitions/Layer"},{"$ref":"#/definitions/LayerControl"},{"$ref":"#/definitions/Layout"},{"$ref":"#/definitions/LayoutAction"},{"$ref":"#/definitions/LayoutOrientation"},{"$ref":"#/definitions/MouseInputConfig2D"},{"$ref":"#/definitions/MouseInputConfigAxial"},{"$ref":"#/definitions/MouseInputConfigAxialPolar"},{"$ref":"#/definitions/MouseInputMapping1D"},{"$ref":"#/definitions/MouseInputMapping2D"},{"$ref":"#/definitions/MousePolarAxisType"},{"$ref":"#/definitions/Opacity"},{"$ref":"#/definitions/OuterWheel<Control>"},{"$ref":"#/definitions/OuterWheelControlGroup"},{"$ref":"#/definitions/OuterWheel<LayerControl>"},{"$ref":"#/definitions/OuterWheelLayerControlGroup"},{"$ref":"#/definitions/PullIndicator"},{"$ref":"#/definitions/SensorControl"},{"$ref":"#/definitions/SensorZYInputConfig"},{"$ref":"#/definitions/Stroke"},{"$ref":"#/definitions/Throttle"},{"$ref":"#/definitions/ThrottleAxisStyle"},{"$ref":"#/definitions/ThrottleDefaultStyle"},{"$ref":"#/definitions/ThrottleStyles"},{"$ref":"#/definitions/Touchpad"},{"$ref":"#/definitions/TouchpadDefaultStyle"},{"$ref":"#/definitions/TouchpadStyles"},{"$ref":"#/definitions/TriggerType"},{"$ref":"#/definitions/TurboAction"},{"$ref":"#/definitions/UpperLayer"},{"$ref":"#/definitions/UpperLayout"},{"$ref":"#/definitions/Wheel<Control>"},{"$ref":"#/definitions/Wheel<LayerControl>"}]},"Definitions":{"type":"object","description":"Definitions block that contains reusable components for layouts.","patternProperties":{"^(?!__proto__)[a-zA-Z0-9\\\\.\\\\-_]+$":{"$ref":"#/definitions/LayoutDefinableType"}}},"Reference":{"type":"object","additionalProperties":false,"description":"JSON Reference to another value defined locally or in a nearby file.","required":["$ref"],"patternProperties":{"^\\\\$ref$":{"type":"string","format":"uri-reference"}}},"Accelerometer":{"oneOf":[{"$ref":"#/definitions/Reference"},{"additionalProperties":false,"description":"Accelerometer","properties":{"axis":{"anyOf":[{"$ref":"#/definitions/InputMappingZY"},{"items":{"$ref":"#/definitions/InputMapping2D"},"type":"array"}],"description":"Map input axis (touch) to output axis (joystick, mouse, or touch)."},"type":{"description":"Control type identifier.","const":"accelerometer","type":"string"}},"required":["type","axis"],"type":"object"}]},"ActionType":{"anyOf":[{"$ref":"#/definitions/ButtonMappableType"},{"items":{"$ref":"#/definitions/ButtonMappableType"},"type":"array"}],"description":"Actions able to be invoked by various controls (Joystick, Button, and Touchpad)."},"ArcadeButton":{"oneOf":[{"additionalProperties":false,"properties":{"action":{"$ref":"#/definitions/ControllerInput"},"enabled":{"$ref":"#/definitions/ControlEnabled"},"styles":{"$ref":"#/definitions/ArcadeButtonStyles"},"visible":{"$ref":"#/definitions/ControlVisibility"}},"required":["action"],"type":"object"},{"$ref":"#/definitions/Reference"}]},"ArcadeButtonDefaultStyle":{"oneOf":[{"additionalProperties":false,"description":"Default styling parameters to be applied to the arcade button.\\nWhen a specific state\'s styling is not provided, parameters fallback to their equivalents in default.\\nIf default styling is not provided, internal defaults are used instead.","properties":{"background":{"$ref":"#/definitions/Background","description":"Background styling to be used on the arcade button."},"faceImage":{"$ref":"#/definitions/FaceImage","description":"Face image to be used on the arcade button."},"opacity":{"description":"The opacity of the arcade button.","$ref":"#/definitions/Opacity"}},"type":"object"},{"$ref":"#/definitions/Reference"}]},"ArcadeButtons":{"oneOf":[{"additionalProperties":false,"description":"Fighting Buttons\\n\\nA grouping of buttons arranged based on common 6 or 8 button arcade controllers. This is most commonly\\nthe preferred button arrangement to play fighting games. Touching between buttons allows the player to press multiple buttons at once.\\nTouching above the button group will activate all 3 punch buttons silmutaneously, and touching below will activate all 3 kick buttons.","properties":{"heavyKick":{"$ref":"#/definitions/ArcadeButton","description":"Action to be invoked when a user touches the large kick button."},"heavyPunch":{"$ref":"#/definitions/ArcadeButton","description":"Action to be invoked when a user touches the large punch button."},"lightKick":{"$ref":"#/definitions/ArcadeButton","description":"Action to be invoked when a user touches the small kick button."},"lightPunch":{"$ref":"#/definitions/ArcadeButton","description":"Action to be invoked when a user touches the small punch button."},"mediumKick":{"$ref":"#/definitions/ArcadeButton","description":"Action to be invoked when a user touches the medium kick button."},"mediumPunch":{"$ref":"#/definitions/ArcadeButton","description":"Action to be invoked when a user touches the medium punch button."},"specialKick":{"$ref":"#/definitions/ArcadeButton","description":"Action to be invoked when a user touches the special kick button."},"specialPunch":{"$ref":"#/definitions/ArcadeButton","description":"Action to be invoked when a user touches the special punch button."},"type":{"description":"Control type identifier.","const":"arcadeButtons","type":"string"}},"required":["type","lightKick","mediumKick","heavyKick","lightPunch","mediumPunch","heavyPunch"],"type":"object"},{"$ref":"#/definitions/Reference"}]},"ArcadeButtonStyles":{"oneOf":[{"additionalProperties":false,"description":"Styling to be applied to the arcade button.\\nFor each state the arcade button can be in, each styleable component can be customized.","properties":{"activated":{"$ref":"#/definitions/ArcadeButtonDefaultStyle","description":"Styling to be applied to the arcade button\'s components while it is in the activated state.\\nThe activated state is when the arcade button is being interacted with (i.e. tapped) and the action being executed."},"default":{"$ref":"#/definitions/ArcadeButtonDefaultStyle","description":"Default styling parameters to be applied to the arcade button.\\nWhen a specific state\'s styling is not provided, parameters fallback to their equivalents in default.\\nIf default styling is not provided, internal defaults are used instead."},"disabled":{"$ref":"#/definitions/ArcadeButtonDefaultStyle","description":"Styling to be applied to the arcade button\'s components while it is in the disabled state.\\nThe arcade button cannot be interacted with in this state, but it still exists."},"idle":{"$ref":"#/definitions/ArcadeButtonDefaultStyle","description":"Styling to be applied to the arcade button\'s components while it is in the idle state.\\nThe idle state is defined as when the arcade button is not yet interacted with (i.e. not tapped)."}},"type":"object"},{"$ref":"#/definitions/Reference"}]},"AxisCap":{"$ref":"#/definitions/AxisCapColor"},"AxisCapColor":{"oneOf":[{"additionalProperties":false,"description":"Assigns the specified color to the cap element of the control axis","properties":{"type":{"description":"Axis cap style type identifier","const":"color","type":"string"},"value":{"description":"The color to apply to the axis cap","$ref":"#/definitions/HexColor"},"opacity":{"description":"The opacity of the axis cap","$ref":"#/definitions/Opacity"}},"required":["type","value"],"type":"object"},{"$ref":"#/definitions/Reference"}]},"Background":{"oneOf":[{"$ref":"#/definitions/BackgroundColor"},{"$ref":"#/definitions/BackgroundAsset"}]},"BackgroundAsset":{"additionalProperties":false,"description":"Assigns a custom asset to the background element of the control","properties":{"type":{"description":"Background type identifier","const":"asset","type":"string"},"value":{"$ref":"#/definitions/BackgroundAssetValue"},"opacity":{"description":"The opacity of the background","$ref":"#/definitions/Opacity"}},"required":["type","value"],"type":"object"},"BackgroundAssetValue":{"oneOf":[{"$ref":"#/definitions/Reference"},{"description":"The file name (without extension) of the asset file to reference.","examples":["FancyImage"],"type":"string"}]},"BackgroundColor":{"oneOf":[{"$ref":"#/definitions/Reference"},{"additionalProperties":false,"description":"Assigns the specified color to the background element of the control","properties":{"type":{"description":"Background type identifier","const":"color","type":"string"},"value":{"description":"The color to apply to the background","$ref":"#/definitions/HexColor"},"opacity":{"description":"The opacity of the background","$ref":"#/definitions/Opacity"}},"required":["type","value"],"type":"object"}]},"Blank":{"oneOf":[{"additionalProperties":false,"description":"Blank\\n\\nWhen creating a layout that uses control layering, the blank control is used exclusively to\\noverride existing controls on previous control layers.\\nThe blank control does not contain any functionality and does not have any renderable properties.","properties":{"type":{"description":"Control type identifier.","const":"blank","type":"string"}},"required":["type"],"type":"object"},{"$ref":"#/definitions/Reference"}]},"Button":{"oneOf":[{"additionalProperties":false,"description":"Button\\n\\nThe most basic of all control types. The button enables an action on touch start, and disables the action on touch end.\\nIf toggle is set to true, the button will alternate between enabling and disabling the action on touch start.","properties":{"action":{"$ref":"#/definitions/ActionType","description":"Action to be invoked when a user touches the button."},"pullAction":{"$ref":"#/definitions/ActionType","description":"Action to be invoked when a user pulls button during a touch."},"toggle":true,"styles":{"$ref":"#/definitions/ButtonStyles"},"visible":{"$ref":"#/definitions/ControlVisibility"},"enabled":{"$ref":"#/definitions/ControlEnabled"},"type":{"description":"Control type identifier.","const":"button","type":"string"}},"required":["type","action"],"type":"object"},{"$ref":"#/definitions/Reference"}]},"ButtonStyles":{"oneOf":[{"additionalProperties":false,"description":"Styling to be applied to the button.\\nFor each state the button can be in, each styleable component can be customized.","properties":{"default":{"$ref":"#/definitions/ButtonDefaultStyle"},"idle":{"$ref":"#/definitions/ButtonIdleStyle"},"activated":{"$ref":"#/definitions/ButtonActivatedStyle"},"disabled":{"$ref":"#/definitions/ButtonDisabledStyle"},"toggled":{"$ref":"#/definitions/ButtonToggledStyle"},"pulled":{"$ref":"#/definitions/ButtonPulledStyle"}},"type":"object"},{"$ref":"#/definitions/Reference"}]},"ButtonActivatedStyle":{"oneOf":[{"additionalProperties":false,"description":"Styling to be applied to the button\'s components while the button is in the activated state.\\nThe activated state is when the button is being interacted with (i.e. tapped) and the action being executed.","properties":{"background":{"$ref":"#/definitions/Background","description":"Background styling to be used on the button when it is in the activated state."},"faceImage":{"$ref":"#/definitions/FaceImage","description":"Face Image to be used on the button when it is in the activated state."},"opacity":{"$ref":"#/definitions/Opacity","description":"The opacity of the button when it is in the activated state."},"pullIndicator":{"$ref":"#/definitions/PullIndicator","description":"Pull action indicator styling to be applied when the button is in the activated state.\\nThe indicator is displayed when the button is in the activated or pulled state."}},"type":"object"},{"$ref":"#/definitions/Reference"}]},"ButtonDefaultStyle":{"oneOf":[{"additionalProperties":false,"description":"Default styling parameters to be applied to the button.\\nWhen a specific state\'s styling is not provided, parameters fallback to their equivalents in default.\\nIf default styling is not provided, internal defaults are used instead.","properties":{"background":{"$ref":"#/definitions/Background","description":"Default background styling to be used on the button."},"faceImage":{"$ref":"#/definitions/FaceImage","description":"Default face image to be used on the button."},"opacity":{"$ref":"#/definitions/Opacity","description":"Default opacity to set the button to."},"pullIndicator":{"$ref":"#/definitions/PullIndicator","description":"Default pull action indicator styling to be applied.\\nThe indicator is displayed when the button is in the activated or pulled state."}},"type":"object"},{"$ref":"#/definitions/Reference"}]},"ButtonDisabledStyle":{"oneOf":[{"additionalProperties":false,"description":"Styling to be applied to the button\'s components while the button is in the disabled state.\\nThe button cannot be interacted with in this state, but it still exists.","properties":{"background":{"$ref":"#/definitions/Background","description":"Background styling to be used on the button when it is in the disabled state."},"faceImage":{"$ref":"#/definitions/FaceImage","description":"Face Image to be used on the button when it is in the disabled stated."},"opacity":{"$ref":"#/definitions/Opacity","description":"The opacity of the button when it is in the disabled state."}},"type":"object"},{"$ref":"#/definitions/Reference"}]},"ButtonIdleStyle":{"oneOf":[{"additionalProperties":false,"description":"Styling to be applied to the button\'s components while it is in the idle state.\\nThe idle state is defined as when the button is not yet interacted with (i.e. not tapped).","properties":{"background":{"$ref":"#/definitions/Background","description":"Background styling to be used on the button when it is in the idle state."},"faceImage":{"$ref":"#/definitions/FaceImage","description":"Face image to be used on the button when it is in the idle state."},"opacity":{"$ref":"#/definitions/Opacity","description":"The opacity of the button when it is in the idle state."}},"type":"object"},{"$ref":"#/definitions/Reference"}]},"ButtonToggledStyle":{"oneOf":[{"additionalProperties":false,"description":"Styling to be applied to the button\'s components while the button is in the toggled state.\\nThe toggled state is when the button is defined to be a toggle button, and it is toggled.","properties":{"background":{"$ref":"#/definitions/Background","description":"Background styling to be used on the button when it is in the toggled state."},"faceImage":{"$ref":"#/definitions/FaceImage","description":"Face Image to be used on the button when it is in the toggled state."},"opacity":{"$ref":"#/definitions/Opacity","description":"The opacity of the button when it is in the toggled state."}},"type":"object"},{"$ref":"#/definitions/Reference"}]},"ButtonPulledStyle":{"oneOf":[{"additionalProperties":false,"description":"Styling to be applied to the button\'s components while the button is in the pulled state.\\nThe pulled state is when the button has a pull action defined, and the player has pulled the button to execute the pull action.","properties":{"background":{"$ref":"#/definitions/Background","description":"Background color to be used on the button when it is pulled."},"faceImage":{"$ref":"#/definitions/FaceImage","description":"Face Image to be used on the button when it is pulled."},"opacity":{"$ref":"#/definitions/Opacity","description":"The opacity of the button when it is in the pulled state."},"pullIndicator":{"$ref":"#/definitions/PullIndicator","description":"Pull action indicator styling to be applied when the button is in the pulled state.\\nThe indicator is displayed when the button is in the activated or pulled state."}},"type":"object"},{"$ref":"#/definitions/Reference"}]},"ButtonMappableType":{"anyOf":[{"$ref":"#/definitions/ControllerInput"},{"$ref":"#/definitions/LayoutAction"},{"$ref":"#/definitions/TurboAction"}]},"ButtonType":{"oneOf":[{"$ref":"#/definitions/Reference"},{"enum":["guide","gamepadA","gamepadB","gamepadX","gamepadY","view","menu","leftBumper","rightBumper","dPadLeft","dPadRight","dPadUp","dPadDown","leftThumb","rightThumb"],"type":"string"}]},"Control":{"anyOf":[{"$ref":"#/definitions/Throttle"},{"$ref":"#/definitions/Touchpad"},{"$ref":"#/definitions/Button"},{"$ref":"#/definitions/Joystick"},{"$ref":"#/definitions/DirectionalPad"},{"$ref":"#/definitions/ArcadeButtons"}]},"ControlEnabled":{"oneOf":[{"description":"Controls whether or not this control is enabled. Defaults to \'true\'. When disabled, the control receives no input but is visible.","type":"boolean"},{"$ref":"#/definitions/Reference"}]},"ControlGroup<Control>":{"items":{"$ref":"#/definitions/ControlGroupControlItem"},"maxItems":4,"minItems":1,"type":"array"},"ControlGroupControlItem":{"anyOf":[{"$ref":"#/definitions/Reference"},{"$ref":"#/definitions/Control"},{"type":"null"}]},"ControlGroup<LayerControl>":{"items":{"$ref":"#/definitions/ControlGroupLayerControlItem"},"maxItems":4,"minItems":1,"type":"array"},"ControlGroupLayerControlItem":{"anyOf":[{"$ref":"#/definitions/Reference"},{"$ref":"#/definitions/LayerControl"},{"type":"null"}]},"ControllerInput":{"anyOf":[{"$ref":"#/definitions/ButtonType"},{"$ref":"#/definitions/TriggerType"},{"$ref":"#/definitions/JoystickPolarAxisType"}]},"ControlVisibility":{"oneOf":[{"description":"Controls whether or not this control is visible. Defaults to \'true\'. When not visible, the control receives no input.","type":"boolean"},{"$ref":"#/definitions/Reference"}]},"Deadzone":{"oneOf":[{"additionalProperties":false,"properties":{"threshold":{"type":"number"}},"required":["threshold"],"type":"object"},{"$ref":"#/definitions/Reference"}]},"Deadzone2D":{"oneOf":[{"$ref":"#/definitions/Reference"},{"additionalProperties":false,"properties":{"radial":{"type":"boolean"},"threshold":{"type":"number"}},"required":["threshold","radial"],"type":"object"}]},"DirectionalPad":{"oneOf":[{"additionalProperties":false,"description":"Directional Pad typically used by 2D platformer and fighting games.","properties":{"deadzone":{"description":"Normalized size of the the directional pad inner region that will ignore touch input.\\nValue must be a number 0 and 1, with a default value of 0.5.","type":"number"},"enabled":{"$ref":"#/definitions/ControlEnabled"},"interaction":{"$ref":"#/definitions/DirectionalPadInteraction"},"scale":{"description":"Size multiplier of the directional pad control. Default value of 1.","type":"number"},"styles":{"$ref":"#/definitions/DirectionalPadStyles"},"type":{"description":"Control type identifier.","const":"directionalPad","type":"string"},"visible":{"$ref":"#/definitions/ControlVisibility"}},"required":["type"],"type":"object"},{"$ref":"#/definitions/Reference"}]},"DirectionalPadDefaultStyle":{"oneOf":[{"additionalProperties":false,"description":"Default styling parameters to be applied to the directional pad.\\nWhen a specific state\'s styling is not provided, parameters fallback to their equivalents in default.\\nIf default styling is not provided, internal defaults are used instead.","properties":{"background":{"$ref":"#/definitions/Background","description":"Background styling to be used on the directional pad."},"fill":{"$ref":"#/definitions/HexColor","description":"Fill color to be used inside the directional pad."},"gradient":{"$ref":"#/definitions/Gradient","description":"Gradient to be used on the directional pad in the activated state."},"opacity":{"$ref":"#/definitions/Opacity","description":"Opacity of the directional pad."},"stroke":{"$ref":"#/definitions/Stroke","description":"Stroke to be used on the directional pad."}},"type":"object"},{"$ref":"#/definitions/Reference"}]},"DirectionalPadIdleStyle":{"oneOf":[{"additionalProperties":false,"description":"Styling to be applied to the directional pad\'s components while it is in the idle state.\\nThe idle state is defined as when the directional pad is not yet interacted with.","properties":{"background":{"$ref":"#/definitions/Background","description":"Background styling to be used on the directional pad."},"fill":{"$ref":"#/definitions/HexColor","description":"Fill color to be used inside the directional pad."},"opacity":{"$ref":"#/definitions/Opacity","description":"Opacity of the directional pad."},"stroke":{"$ref":"#/definitions/Stroke","description":"Stroke to be used on the directional pad."}},"type":"object"},{"$ref":"#/definitions/Reference"}]},"DirectionalPadInteraction":{"oneOf":[{"additionalProperties":false,"description":"Property definitions that can alter the interaction mechanisms of the user with the control.","properties":{"activationType":{"$ref":"#/definitions/DirectionalPadInteractionActivationType"}},"type":"object"},{"$ref":"#/definitions/Reference"}]},"DirectionalPadInteractionActivationType":{"oneOf":[{"description":"Defines the type of activation that is allowed for any given direction on the directional pad.\\nCan be one of [exclusive, allowNeighboring]. Defaults to allowNeighboring.\\nWhen set to exclusive, only a single direction can be activated on the directional pad at a time. I.e., only one of \'Up\', \'Right\', \'Down\', or \'Left\' can be activated by the user at a time.\\nWhen set to allowNeighboring, a direction and either of its neighboring directions can be simultaneously activated by the user when tapping between them. I.e., the user can activate \'Up+Right\', \'Right+Down\', \'Down+Left\', or \'Left+Up\' by tapping between each of the two directions, in addition to the ability to activate each individual direction by directly tapping on them.","type":"string","enum":["exclusive","allowNeighboring"]},{"$ref":"#/definitions/Reference"}]},"DirectionalPadStyles":{"oneOf":[{"additionalProperties":false,"description":"Styling to be applied to the directional pad.\\nFor each state the directional pad can be in, each styleable component can be customized.","properties":{"activated":{"$ref":"#/definitions/DirectionalPadDefaultStyle","description":"Styling to be applied to the directional pad\'s components while it is in the activated state.\\nThe activated state is when the directional pad is being interacted with (i.e. touched) regardless of whether that touch results in a specific directional pad input or not."},"default":{"$ref":"#/definitions/DirectionalPadDefaultStyle","description":"Default styling parameters to be applied to the directional pad.\\nWhen a specific state\'s styling is not provided, parameters fallback to their equivalents in default.\\nIf default styling is not provided, internal defaults are used instead."},"disabled":{"$ref":"#/definitions/DirectionalPadIdleStyle","description":"Styling to be applied to the directional pad\'s components while it is in the disabled state.\\nThe directional pad cannot be interacted with in this state, but it still exists."},"idle":{"$ref":"#/definitions/DirectionalPadIdleStyle","description":"Styling to be applied to the directional pad\'s components while it is in the idle state.\\nThe idle state is defined as when the directional pad is not yet interacted with."}},"type":"object"},{"$ref":"#/definitions/Reference"}]},"FaceImage":{"oneOf":[{"$ref":"#/definitions/FaceImageIcon"},{"$ref":"#/definitions/FaceImageAsset"}]},"FaceImageAsset":{"additionalProperties":false,"description":"Used to create a reference to a custom asset.","properties":{"type":{"description":"Face Image type identifier","const":"asset","type":"string"},"value":{"$ref":"#/definitions/FaceImageAssetValue"},"opacity":{"description":"The opacity of the face image.","$ref":"#/definitions/Opacity"}},"type":"object","required":["type","value"]},"FaceImageAssetValue":{"oneOf":[{"description":"The file name (without extension) of the asset file to reference.","type":"string","examples":["FancyImage"]},{"$ref":"#/definitions/Reference"}]},"FaceImageIcon":{"additionalProperties":false,"description":"Used to create a reference to a built-in icon.","properties":{"type":{"description":"Face Image type identifier","const":"icon","type":"string"},"value":{"$ref":"#/definitions/FaceImageIconValue"},"opacity":{"description":"The opacity of the face image.","$ref":"#/definitions/Opacity"},"label":{"$ref":"#/definitions/FaceImageIconLabel"}},"type":"object","required":["type","value"]},"FaceImageIconLabel":{"properties":{"type":{"enum":["action","none"],"type":"string","description":"action: to display label for the action type. If multiple action types, display constant icon: --- ,none: do not display any label"}},"description":"Descriptive text for face image icons","type":"object"},"FaceImageIconValue":{"oneOf":[{"description":"The name of the icon to use.","$ref":"#/definitions/GameIcon"},{"$ref":"#/definitions/Reference"}]},"GameIcon":{"enum":["placeholder","walk","enterCar","jump","punch","weaponSelect","stealth","exitCar","handbrake","fire","aim","crouch","dPad","steering","upChevron","downChevron","leftChevron","rightChevron","gasPedal","brakePedal","reload","characterSelect","ability","lightKick","mediumKick","heavyKick","lightPunch","mediumPunch","heavyPunch","lookBehind","leftArrow","rightArrow","upArrow","downArrow","brightness","phone","close","look","smallGridView","largeGridView","interact","rewind","move","titleMenu","internet","specialAbility","leftRightArrows","sync","repeatRefresh","select","leftArrow2","rightArrow2","upArrow2","downArrow2","parameters","handbrake2","ability2","character","characterSelect2","lookBehind2","run","sprint","ram","dodge","block","cover","climbStairs","add","subtract","hourglass","stopwatch","move2","touch","lightSword","mediumSword","heavySword","lightSword2","mediumSword2","heavySword2","sword","sword2","lightKick2","mediumKick2","heavyKick2","lightKick3","mediumKick3","heavyKick3","lightKick4","mediumKick4","heavyKick4","capture","exit","lightPunch2","mediumPunch2","heavyPunch2","lightPunch3","mediumPunch3","heavyPunch3","dash","zoomIn","zoomOut","map","map2","inventory","emotes","slide","medical","armor","radio","enterDoor","exitDoor","chat","bomb","grenade","flag","waypoint","horn","selectAll","switchCamera","arrowReload","arrow","bow","roll","pickAxe","attackBehind","firePunch","golf","targetLock","radialMenu","kick"],"type":"string"},"Gradient":{"oneOf":[{"additionalProperties":false,"description":"Configuration that defines a color gradient.","properties":{"color":{"$ref":"#/definitions/HexColor","description":"The base color to be used on the gradient."}},"type":"object"},{"$ref":"#/definitions/Reference"}]},"Gyroscope":{"oneOf":[{"additionalProperties":false,"description":"Gyroscope\\n\\nLike the touchpad, the gyroscope is most typically used in first/third-person perspective games to control the player look camera.\\nWith proper axis tuning (deadzone removal and linearization of response-curves),\\nusing the gyroscope can bring mouse-like precision to the player\'s control\\n(especially when used in combination with touchpad or joystick.","properties":{"axis":{"anyOf":[{"$ref":"#/definitions/InputMappingZY"},{"items":{"$ref":"#/definitions/InputMapping2D"},"type":"array"}],"description":"Map input axis (touch) to output axis (joystick, mouse, or touch)."},"type":{"description":"Control type identifier.","const":"gyroscope","type":"string"}},"required":["type","axis"],"type":"object"},{"$ref":"#/definitions/Reference"}]},"HexColor":{"description":"Hexadecimal representation of RGBA color values.","pattern":"^#([a-fA-F0-9]{6}|[a-fA-F0-9]{8}|[a-fA-F0-9]{4}|[a-fA-F0-9]{3})$","examples":["#0099ff","#0099ffaa","#09f","#09fa"],"type":"string"},"InnerWheel<Control>":{"items":{"$ref":"#/definitions/Control"},"maxItems":4,"minItems":1,"type":"array"},"InnerWheel<LayerControl>":{"items":{"$ref":"#/definitions/LayerControl"},"maxItems":4,"minItems":1,"type":"array"},"InputAxisPolar":{"anyOf":[{"enum":["axisRight","axisLeft"],"type":"string"},{"enum":["axisUp","axisDown"],"type":"string"}]},"InputCurveType":{"anyOf":[{"$ref":"#/definitions/Reference"},{"additionalProperties":false,"description":"Circular response curve shape that widens input resolution near lower range values (0)\\nand condenses resolution near higher range values (1)","properties":{"range":{"description":"Start and end values for input curve range.","items":{"type":"number"},"maxItems":2,"minItems":2,"type":"array"},"type":{"const":"circular","type":"string"}},"required":["range","type"],"type":"object"},{"additionalProperties":false,"description":"Circular response curve shape that condenses input resolution near lower range values (0)\\nand widens resolution near higher range values (1)","properties":{"range":{"description":"Start and end values for input curve range.","items":{"type":"number"},"maxItems":2,"minItems":2,"type":"array"},"type":{"const":"circular-inverse","type":"string"}},"required":["range","type"],"type":"object"}]},"InputMapping2D":{"anyOf":[{"$ref":"#/definitions/JoystickInputMapping2D"},{"$ref":"#/definitions/MouseInputMapping2D"}]},"InputMappingZY":{"anyOf":[{"$ref":"#/definitions/InputMapping2D"},{"$ref":"#/definitions/SensorZYInputConfig"}]},"Joystick":{"oneOf":[{"additionalProperties":false,"description":"Joystick\\n\\nPrimarily used across games for player locomotion, the joystick is able to use either a single-axis, or dual-axis configuration.\\nOptional actions can be set to activate either on touch start (and release on touch end),\\nor when the user has moved the joystick to a position that meets a specified minimum threshold.","properties":{"action":{"$ref":"#/definitions/ActionType","description":"Action to be invoked while the user is touching the joystick."},"actionThreshold":{"description":"Normalized minimum joystick value (radial) required to invoke the action. Default value of 0.","type":"number"},"axis":{"anyOf":[{"$ref":"#/definitions/InputMapping2D"},{"items":{"$ref":"#/definitions/InputMapping2D"},"type":"array"}],"description":"Map input axis (touch) to output axis (joystick, mouse, or touch)."},"enabled":{"$ref":"#/definitions/ControlEnabled"},"expand":{"description":"Expand joystick range to match user ergonomic preferences when placed in a center control socket.\\nSet to false to use a standardized fixed joystick size. Default value of true.","type":"boolean"},"relative":{"description":"By default, the joystick will calculate its value using a relative calculation based on user\'s initial touch.\\nSetting this value to false will instead calculate its value based on the center point of the control.","type":"boolean"},"styles":{"$ref":"#/definitions/JoystickStyles"},"visible":{"$ref":"#/definitions/ControlVisibility"},"type":{"description":"Control type identifier.","const":"joystick","type":"string"}},"required":["type","axis"],"type":"object"},{"$ref":"#/definitions/Reference"}]},"JoystickActivatedStyle":{"oneOf":[{"additionalProperties":false,"description":"Styling to be applied to the joystick\'s components while the joystick is in the activated state.\\nThe activated state is when the joystick has an action defined and the knob is moved outside the threshold (if any) to execute the action.","properties":{"background":{"$ref":"#/definitions/Background","description":"Background styling to be used on the joystick when it is in the activated state."},"knob":{"$ref":"#/definitions/KnobStyle","description":"Styling of the joystick knob components when it is in the activated state."},"opacity":{"$ref":"#/definitions/Opacity","description":"The opacity of the joystick when it is in the activated state."},"outline":{"$ref":"#/definitions/JoystickOutlineWithIndicator","description":"Styling of the joystick outline components when it is in the activated state."}},"type":"object"},{"$ref":"#/definitions/Reference"}]},"JoystickAxisType":{"enum":["leftJoystickX","leftJoystickY","rightJoystickX","rightJoystickY"],"type":"string"},"JoystickDefaultStyle":{"oneOf":[{"additionalProperties":false,"description":"Default styling parameters to be applied to the joystick.\\nWhen a specific state\'s styling is not provided, parameters fallback to their equivalents in default.\\nIf default styling is not provided, internal defaults are used instead.","properties":{"background":{"$ref":"#/definitions/Background","description":"Default background styling to be used on the joystick."},"knob":{"$ref":"#/definitions/KnobStyle","description":"Default styling of the joystick knob components."},"opacity":{"$ref":"#/definitions/Opacity","description":"Default opacity of the joystick."},"outline":{"$ref":"#/definitions/JoystickOutlineWithIndicator","description":"Default styling of the joystick outline components."}},"type":"object"},{"$ref":"#/definitions/Reference"}]},"JoystickDirectionIndicator":{"oneOf":[{"additionalProperties":false,"description":"Styling of the directional indicator on the joystick","properties":{"type":{"description":"Joystick directional indicator type identifier","const":"color","type":"string"},"value":{"description":"The color to apply to the directional indicator","$ref":"#/definitions/HexColor"},"opacity":{"description":"The opacity of the directional indicator","$ref":"#/definitions/Opacity"}},"required":["type","value"],"type":"object"},{"$ref":"#/definitions/Reference"}]},"JoystickDisabledStyle":{"oneOf":[{"additionalProperties":false,"description":"Styling to be applied to the joystick\'s components while it is in the disabled state.\\nThe joystick cannot be interacted with in this state, but it still exists.","properties":{"background":{"$ref":"#/definitions/Background","description":"Background styling to be used on the joystick when it is in the disabled state."},"knob":{"$ref":"#/definitions/KnobStyle","description":"Styling of the joystick knob components when it is in the disabled state."},"opacity":{"$ref":"#/definitions/Opacity","description":"The opacity of the joystick when it is in the disabled state."},"outline":{"$ref":"#/definitions/JoystickOutlineWithoutIndicator","description":"Styling of the joystick outline components when it is in the disabled state."}},"type":"object"},{"$ref":"#/definitions/Reference"}]},"JoystickIdleStyle":{"oneOf":[{"additionalProperties":false,"description":"Styling to be applied to the joystick\'s components while it is in the idle state.\\nThe idle state is defined as when the joystick is not yet interacted with (i.e. not touched).","properties":{"background":{"$ref":"#/definitions/Background","description":"Background styling to be used on the joystick when it is in the idle state."},"knob":{"$ref":"#/definitions/KnobStyle","description":"Styling of the joystick knob components when it is in the idle state."},"opacity":{"$ref":"#/definitions/Opacity","description":"The opacity of the joystick when it is in the idle state."},"outline":{"$ref":"#/definitions/JoystickOutlineWithoutIndicator","description":"Styling of the joystick outline components when it is in the idle state."}},"type":"object"},{"$ref":"#/definitions/Reference"}]},"JoystickInputConfig2D":{"oneOf":[{"additionalProperties":false,"properties":{"deadzone":{"$ref":"#/definitions/Deadzone2D","description":"Normalized radius of the inner region that will ignore touch input. Value must be a number 0 and 1, with a default value of 0.5."},"input":{"description":"Touch Axis, X and Y","const":"axisXY","type":"string"},"output":{"anyOf":[{"$ref":"#/definitions/JoystickType"},{"const":"relativeMouse","type":"string"}],"description":"Axis to be mapped to virtual input device."},"responseCurve":{"$ref":"#/definitions/InputCurveType","description":"Shape of the response curve."},"sensitivity":{"description":"Value multiplier applied after deadzone and response curve calculation.","type":"number"}},"required":["input","output"],"type":"object"},{"$ref":"#/definitions/Reference"}]},"JoystickInputConfigAxial":{"oneOf":[{"additionalProperties":false,"properties":{"deadzone":{"$ref":"#/definitions/Deadzone"},"input":{"anyOf":[{"const":"axisX","type":"string"},{"const":"axisY","type":"string"}],"description":"Touch Axis, X or Y"},"output":{"$ref":"#/definitions/JoystickAxisType","description":"Axis to be mapped to virtual input device."},"responseCurve":{"$ref":"#/definitions/InputCurveType","description":"Shape of the response curve."},"sensitivity":{"description":"Value multiplier applied after deadzone and response curve calculation.","type":"number"}},"required":["input","output"],"type":"object"},{"$ref":"#/definitions/Reference"}]},"JoystickInputConfigAxialPolar":{"oneOf":[{"additionalProperties":false,"properties":{"deadzone":{"$ref":"#/definitions/Deadzone"},"input":{"$ref":"#/definitions/InputAxisPolar","description":"Touch Axis, Right, Left, Up, or Down"},"output":{"anyOf":[{"$ref":"#/definitions/JoystickPolarAxisType"},{"$ref":"#/definitions/TriggerType"}],"description":"Axis to be mapped to virtual input device."},"responseCurve":{"$ref":"#/definitions/InputCurveType","description":"Shape of the response curve."},"sensitivity":{"description":"Value multiplier applied after deadzone and response curve calculation.","type":"number"}},"required":["input","output"],"type":"object"},{"$ref":"#/definitions/Reference"}]},"JoystickInputMapping1D":{"anyOf":[{"$ref":"#/definitions/JoystickInputConfigAxial"},{"$ref":"#/definitions/JoystickInputConfigAxialPolar"}]},"JoystickInputMapping2D":{"anyOf":[{"$ref":"#/definitions/JoystickInputConfig2D"},{"$ref":"#/definitions/JoystickInputMapping1D"}]},"JoystickMovingStyle":{"oneOf":[{"additionalProperties":false,"description":"Styling to be applied to the joystick\'s components while the joystick is in the moving state.\\nThe moving state is when the joystick knob is being interacted with (i.e. touched) regardless of the deadzone defined.","properties":{"background":{"$ref":"#/definitions/Background","description":"Background styling to be used on the joystick when it is in the moving state."},"knob":{"$ref":"#/definitions/KnobStyle","description":"Styling of the joystick knob components when it is in the moving state."},"opacity":{"$ref":"#/definitions/Opacity","description":"The opacity of the joystick when it is in the moving state."},"outline":{"$ref":"#/definitions/JoystickOutlineWithIndicator","description":"Styling of the joystick outline components when it is in the moving state."}},"type":"object"},{"$ref":"#/definitions/Reference"}]},"JoystickOutlineWithIndicator":{"oneOf":[{"additionalProperties":false,"description":"Styling of the joystick\'s outline components","properties":{"stroke":{"$ref":"#/definitions/Stroke","description":"Styling of the stroke of the joystick\'s outline"},"indicator":{"$ref":"#/definitions/JoystickDirectionIndicator","description":"Styling of the directional indicator on the joystick\'s outline"},"opacity":{"$ref":"#/definitions/Opacity","description":"The opacity of the joystick outline"}},"type":"object"},{"$ref":"#/definitions/Reference"}]},"JoystickOutlineWithoutIndicator":{"oneOf":[{"additionalProperties":false,"description":"Styling of the joystick\'s outline components","properties":{"stroke":{"$ref":"#/definitions/Stroke","description":"Styling of the stroke of the joystick\'s outline"},"opacity":{"$ref":"#/definitions/Opacity","description":"The opacity of the joystick outline"}},"type":"object"},{"$ref":"#/definitions/Reference"}]},"JoystickPolarAxisType":{"enum":["leftJoystickRight","leftJoystickLeft","leftJoystickUp","leftJoystickDown","rightJoystickRight","rightJoystickLeft","rightJoystickUp","rightJoystickDown"],"type":"string"},"JoystickStyles":{"oneOf":[{"additionalProperties":false,"description":"Styling to be applied to the joystick.\\n For each state that the joystick can be in, each styleable component can be customized.","properties":{"activated":{"$ref":"#/definitions/JoystickActivatedStyle"},"default":{"$ref":"#/definitions/JoystickDefaultStyle"},"disabled":{"$ref":"#/definitions/JoystickDisabledStyle"},"idle":{"$ref":"#/definitions/JoystickIdleStyle"},"moving":{"$ref":"#/definitions/JoystickMovingStyle"}},"type":"object"},{"$ref":"#/definitions/Reference"}]},"JoystickType":{"oneOf":[{"$ref":"#/definitions/Reference"},{"enum":["rightJoystick","leftJoystick"],"type":"string"}]},"KnobStyle":{"oneOf":[{"additionalProperties":false,"description":"Styling options for a knob on controls that support it.","properties":{"background":{"$ref":"#/definitions/Background","description":"Background of the knob"},"faceImage":{"$ref":"#/definitions/FaceImage","description":"Face image on the knob"},"opacity":{"$ref":"#/definitions/Opacity","description":"Opacity of the knob"},"stroke":{"$ref":"#/definitions/Stroke","description":"Stroke of the knob"}},"type":"object"},{"$ref":"#/definitions/Reference"}]},"Layer":{"oneOf":[{"additionalProperties":false,"properties":{"center":{"$ref":"#/definitions/Wheel<LayerControl>"},"left":{"$ref":"#/definitions/Wheel<LayerControl>"},"lower":{"oneOf":[{"additionalProperties":false,"properties":{"center":{"$ref":"#/definitions/LayerControl"},"leftCenter":{"items":{"anyOf":[{"$ref":"#/definitions/LayerControl"},{"$ref":"#/definitions/Reference"},{"type":"null"}]},"type":"array"},"rightCenter":{"items":{"anyOf":[{"$ref":"#/definitions/LayerControl"},{"$ref":"#/definitions/Reference"},{"type":"null"}]},"type":"array"}},"type":"object"},{"$ref":"#/definitions/Reference"}]},"right":{"$ref":"#/definitions/Wheel<LayerControl>"},"sensors":{"items":{"$ref":"#/definitions/SensorLayerControl"},"type":"array"},"upper":{"$ref":"#/definitions/UpperLayer"}},"type":"object"},{"$ref":"#/definitions/Reference"}]},"LayerControl":{"anyOf":[{"$ref":"#/definitions/Control"},{"$ref":"#/definitions/Blank"}]},"Layout":{"additionalProperties":false,"properties":{"center":{"$ref":"#/definitions/Wheel<Control>"},"layers":{"additionalProperties":{"$ref":"#/definitions/Layer"},"description":"Construct a type with a set of properties K of type T","type":"object"},"left":{"$ref":"#/definitions/Wheel<Control>"},"lower":{"oneOf":[{"additionalProperties":false,"properties":{"center":{"$ref":"#/definitions/Control"},"leftCenter":{"items":{"anyOf":[{"$ref":"#/definitions/Control"},{"$ref":"#/definitions/Reference"},{"type":"null"}]},"type":"array"},"rightCenter":{"items":{"anyOf":[{"$ref":"#/definitions/Control"},{"$ref":"#/definitions/Reference"},{"type":"null"}]},"type":"array"}},"type":"object"},{"$ref":"#/definitions/Reference"}]},"right":{"$ref":"#/definitions/Wheel<Control>"},"sensors":{"items":{"$ref":"#/definitions/SensorControl"},"type":"array"},"upper":{"$ref":"#/definitions/UpperLayout"}},"type":"object"},"LayoutAction":{"additionalProperties":false,"properties":{"target":{"type":"string"},"type":{"const":"layer","type":"string"}},"required":["type","target"],"type":"object"},"LayoutOrientation":{"enum":["landscape-left","landscape-right","landscape","portrait-up","portrait"],"type":"string"},"MouseInputConfig2D":{"oneOf":[{"additionalProperties":false,"properties":{"input":{"const":"axisXY","type":"string"},"output":{"const":"relativeMouse","type":"string"},"sensitivity":{"type":"number"}},"required":["input","output"],"type":"object"},{"$ref":"#/definitions/Reference"}]},"MouseInputConfigAxial":{"oneOf":[{"additionalProperties":false,"properties":{"input":{"anyOf":[{"const":"axisX","type":"string"},{"const":"axisY","type":"string"}]},"output":{"enum":["relativeMouseX","relativeMouseY"],"type":"string"},"sensitivity":{"type":"number"}},"required":["input","output"],"type":"object"},{"$ref":"#/definitions/Reference"}]},"MouseInputConfigAxialPolar":{"oneOf":[{"additionalProperties":false,"properties":{"input":{"$ref":"#/definitions/InputAxisPolar"},"output":{"$ref":"#/definitions/MousePolarAxisType"},"sensitivity":{"type":"number"}},"required":["input","output"],"type":"object"},{"$ref":"#/definitions/Reference"}]},"MouseInputMapping1D":{"anyOf":[{"$ref":"#/definitions/MouseInputConfigAxial"},{"$ref":"#/definitions/MouseInputConfigAxialPolar"}]},"MouseInputMapping2D":{"anyOf":[{"$ref":"#/definitions/MouseInputConfig2D"},{"$ref":"#/definitions/MouseInputMapping1D"}]},"MousePolarAxisType":{"enum":["relativeMouseUp","relativeMouseDown","relativeMouseLeft","relativeMouseRight"],"type":"string"},"Opacity":{"oneOf":[{"description":"Opacity to be used on a control when styled in a specific state.","type":"number","minimum":0,"maximum":1},{"$ref":"#/definitions/Reference"}]},"OuterWheel<Control>":{"items":{"$ref":"#/definitions/OuterWheelControlGroup"},"maxItems":8,"minItems":1,"type":"array"},"OuterWheelControlGroup":{"anyOf":[{"$ref":"#/definitions/Reference"},{"$ref":"#/definitions/Control"},{"$ref":"#/definitions/ControlGroup<Control>"},{"type":"null"}]},"OuterWheel<LayerControl>":{"items":{"$ref":"#/definitions/OuterWheelLayerControlGroup"},"maxItems":8,"minItems":1,"type":"array"},"OuterWheelLayerControlGroup":{"anyOf":[{"$ref":"#/definitions/Reference"},{"$ref":"#/definitions/LayerControl"},{"$ref":"#/definitions/ControlGroup<LayerControl>"},{"type":"null"}]},"PullIndicator":{"oneOf":[{"additionalProperties":false,"description":"Styling options for pull action indicators on controls that support it.","properties":{"background":{"description":"Styling to be applied to the background of the pull indicator","$ref":"#/definitions/BackgroundColor"}},"type":"object"},{"$ref":"#/definitions/Reference"}]},"SensorControl":{"anyOf":[{"$ref":"#/definitions/Gyroscope"},{"$ref":"#/definitions/Accelerometer"}]},"SensorLayerControl":{"oneOf":[{"$ref":"#/definitions/SensorControl"},{"$ref":"#/definitions/Blank"},{"type":"null"}]},"SensorZYInputConfig":{"oneOf":[{"additionalProperties":false,"properties":{"deadzone":{"$ref":"#/definitions/Deadzone2D","description":"Normalized radius of the inner region that will ignore touch input. Value must be a number 0 and 1, with a default value of 0.5."},"input":{"description":"Touch Axis, X and Y","const":"axisZY","type":"string"},"output":{"anyOf":[{"$ref":"#/definitions/JoystickType"},{"const":"relativeMouse","type":"string"}],"description":"Axis to be mapped to virtual input device."},"responseCurve":{"$ref":"#/definitions/InputCurveType","description":"Shape of the response curve."},"sensitivity":{"description":"Value multiplier applied after deadzone and response curve calculation.","type":"number"}},"required":["input","output"],"type":"object"},{"$ref":"#/definitions/Reference"}]},"Stroke":{"oneOf":[{"additionalProperties":false,"properties":{"type":{"description":"Stroke type identifier","const":"solid","type":"string"},"color":{"$ref":"#/definitions/HexColor","description":"Stroke color in Hex format"},"opacity":{"$ref":"#/definitions/Opacity","description":"The opacity of the stroke"}},"required":["type"],"type":"object"},{"$ref":"#/definitions/Reference"}]},"Throttle":{"oneOf":[{"additionalProperties":false,"description":"Throttle\\n\\nSimilar to a y-axis only joystick, but tuned specifically to control gas/brake in racing games.","properties":{"axisDown":{"$ref":"#/definitions/TriggerType","description":"Map input axis (touch negative y-axis) to output axis."},"axisUp":{"$ref":"#/definitions/TriggerType","description":"Map input axis (touch positive y-axis) to output axis."},"enabled":{"$ref":"#/definitions/ControlEnabled"},"relative":{"description":"By default, the throttle will calculate its value using a relative calculation based on user\'s initial touch.\\nSetting this value to false will instead calculate its value based on the center point of the control.","type":"boolean"},"sticky":{"description":"By default, when the user stops touching the control, the axisUp and axisDown values reset back to 0. When set to true, the axisUp value will instead remain unchanged when touch is released. This has no effect on the axisDown value.\\nThis is commonly used to implement \\"cruise control\\" in driving games.","type":"boolean"},"styles":{"$ref":"#/definitions/ThrottleStyles"},"type":{"description":"Control type identifier.","const":"throttle","type":"string"},"visible":{"$ref":"#/definitions/ControlVisibility"}},"required":["type","axisDown","axisUp"],"type":"object"},{"$ref":"#/definitions/Reference"}]},"ThrottleAxisStyle":{"oneOf":[{"additionalProperties":false,"description":"Styling to be applied to the throttle axis","properties":{"cap":{"$ref":"#/definitions/AxisCap","description":"Styling to be applied to the cap sitting on the specified end of the axis."},"stroke":{"$ref":"#/definitions/Stroke","description":"Styling to be applied to the main stroke on the edge of the axis."}},"type":"object"},{"$ref":"#/definitions/Reference"}]},"ThrottleDefaultStyle":{"oneOf":[{"additionalProperties":false,"description":"Default styling parameters to be applied to the throttle.\\nWhen a specific state\'s styling is not provided, parameters fallback to their equivalents in default.\\nIf default styling is not provided, internal defaults are used instead.","properties":{"axisUp":{"$ref":"#/definitions/ThrottleAxisStyle","description":"Axis Up styling to be applied to the throttle. This styles the positive (upper) portion of the throttle axis in the state it is defined for."},"axisDown":{"$ref":"#/definitions/ThrottleAxisStyle","description":"Axis Down styling to be applied to the throttle. This styles the negative (lower) portion of the throttle axis in the state that it is defined for."},"indicator":{"$ref":"#/definitions/Stroke","description":"Indicator styling to be applied to the throttle. This styles the component connecting the throttle knob to its axis which indicating the current position of the knob along the axis."},"knob":{"$ref":"#/definitions/KnobStyle","description":"Default knob styling to be applied to the throttle."},"opacity":{"$ref":"#/definitions/Opacity","description":"The opacity of the throttle."}},"type":"object"},{"$ref":"#/definitions/Reference"}]},"ThrottleStyles":{"oneOf":[{"additionalProperties":false,"description":"Styling to be applied to the throttle.\\nFor each state the throttle can be in, each styleable component can be customized.","properties":{"activated":{"$ref":"#/definitions/ThrottleDefaultStyle","description":"Styling to be applied to the throttle\'s components while it is in the activated state.\\nThe activated state is transitioned to when a user is touching the knob, with the knob placed exactly at the 0 value along the axis (center)."},"activatedUp":{"$ref":"#/definitions/ThrottleDefaultStyle","description":"Styling to be applied to the throttle\'s components while it is in the activated up state.\\nThe activated up state is transitioned to when a user is touching the knob and has moved the knob such that it is in the positive (upper) section of the throttle axis."},"activatedDown":{"$ref":"#/definitions/ThrottleDefaultStyle","description":"Styling to be applied to the throttle\'s components while it is in the activated down state.\\nThe activated down state is transitioned to when a user is touching the knob and has moved the knob such that it is in the negative (lower) section of the throttle axis."},"default":{"$ref":"#/definitions/ThrottleDefaultStyle","description":"Default styling parameters to be applied to the throttle.\\nWhen a specific state\'s styling is not provided, parameters fallback to their equivalents in default.\\nIf default styling is not provided, internal defaults are used instead."},"disabled":{"$ref":"#/definitions/ThrottleDefaultStyle","description":"Styling to be applied to the throttle\'s components while it is in the disabled state.\\nThe disabled state is transitioned to when the throttle has enabled: false. It cannot be interacted with in this state, but it still exists."},"idle":{"$ref":"#/definitions/ThrottleDefaultStyle","description":"Styling to be applied to the throttle\'s components while it is in the idle state.\\nThe idle state is transitioned to when a user is not touching the throttle knob, while the knob is also not sticky in the upper section of the axis."},"idleUp":{"$ref":"#/definitions/ThrottleDefaultStyle","description":"Styling to be applied to the throttle\'s components while it is in the idle up state.\\nThe idle up state is transitioned to when a user releases the throttle knob in the upper section of the axis, with sticky set to true. The knob stays at its last position before the touch was released in this state."}},"type":"object"},{"$ref":"#/definitions/Reference"}]},"Touchpad":{"oneOf":[{"additionalProperties":false,"description":"Touchpad\\n\\nPrimarily used in FPS/TPS titles to control the player\'s look camera. Ideally this should be mapped to an event driven\\noutput type (touch or mouse) but it can also be used to drive joystick output (with a couple caveats).\\nFor non-cloud aware titles mapping to joystick output, it is absolutely critical to zero out the deadzone.\\nIn these situations (non-cloud aware) it is also important for the player to set their camera settings to max sensitivity in-game\\nOptional actions can be set to activate on touch start (and release on touch end).","properties":{"action":{"$ref":"#/definitions/ActionType","description":"Action to be invoked while the user is touching the touchpad."},"axis":{"anyOf":[{"$ref":"#/definitions/InputMapping2D"},{"items":{"$ref":"#/definitions/InputMapping2D"},"type":"array"}],"description":"Map input axis (touch) to output axis (joystick, mouse, or touch)."},"enabled":{"$ref":"#/definitions/ControlEnabled"},"renderAsButton":{"description":"Render the touchpad to appear visually as a button.","type":"boolean"},"styles":{"$ref":"#/definitions/TouchpadStyles"},"type":{"description":"Control type identifier.","const":"touchpad","type":"string"},"visible":{"$ref":"#/definitions/ControlVisibility"}},"required":["type","axis"],"type":"object"},{"$ref":"#/definitions/Reference"}]},"TouchpadDefaultStyle":{"oneOf":[{"additionalProperties":false,"description":"Default styling parameters to be applied to the joystick.\\nWhen a specific state\'s styling is not provided, parameters fallback to their equivalents in default.\\nIf default styling is not provided, internal defaults are used instead.","properties":{"background":{"$ref":"#/definitions/Background","description":"Background styling to be used on the touchpad."},"faceImage":{"$ref":"#/definitions/FaceImage","description":"Face image to be used on the touchpad."},"opacity":{"$ref":"#/definitions/Opacity","description":"Opacity of the whole touchpad control."}},"type":"object"},{"$ref":"#/definitions/Reference"}]},"TouchpadStyles":{"oneOf":[{"additionalProperties":false,"description":"Styling to be applied to the touchpad.\\n For each state that the touchpad can be in, each styleable component can be customized.","properties":{"activated":{"$ref":"#/definitions/TouchpadDefaultStyle","description":"Styling to be applied to the touchpad\'s components while it is in the activated state.\\nThe activated state is when the touchpad has an action defined, and is being interacted with (i.e. tapped)."},"default":{"$ref":"#/definitions/TouchpadDefaultStyle","description":"Default styling parameters to be applied to the touchpad.\\nWhen a specific state\'s styling is not provided, parameters fallback to their equivalents in default.\\nIf default styling is not provided, internal defaults are used instead."},"disabled":{"$ref":"#/definitions/TouchpadDefaultStyle","description":"Styling to be applied to the touchpad\'s components while it is in the disabled state.\\nThe touchpad cannot be interacted with in this state, but it still exists."},"idle":{"$ref":"#/definitions/TouchpadDefaultStyle","description":"Styling to be applied to the touchpad\'s components while it is in the idle state.\\nThe idle state is defined as when the touchpad is not yet interacted with (i.e. not tapped)."},"moving":{"$ref":"#/definitions/TouchpadDefaultStyle","description":"Styling to be applied to the touchpad\'s components while it is in the moving state.\\nThe moving state is when the touchpad is being interacted with (i.e. tapped), without an action defined."}},"type":"object"},{"$ref":"#/definitions/Reference"}]},"TriggerType":{"oneOf":[{"$ref":"#/definitions/Reference"},{"enum":["leftTrigger","rightTrigger"],"type":"string"}]},"TurboAction":{"additionalProperties":false,"properties":{"action":{"$ref":"#/definitions/ControllerInput"},"interval":{"type":"number"},"type":{"const":"turbo","type":"string"}},"required":["type","action","interval"],"type":"object"},"UpperLayer":{"oneOf":[{"additionalProperties":false,"properties":{"right":{"items":{"anyOf":[{"$ref":"#/definitions/LayerControl"},{"type":"null"}]},"type":"array"}},"type":"object"},{"$ref":"#/definitions/Reference"}]},"UpperLayout":{"oneOf":[{"additionalProperties":false,"properties":{"right":{"items":{"anyOf":[{"$ref":"#/definitions/Control"},{"type":"null"}]},"type":"array"}},"type":"object"},{"$ref":"#/definitions/Reference"}]},"Wheel<Control>":{"oneOf":[{"$ref":"#/definitions/Reference"},{"additionalProperties":false,"properties":{"inner":{"$ref":"#/definitions/InnerWheel<Control>"},"outer":{"$ref":"#/definitions/OuterWheel<Control>"}},"type":"object"}]},"Wheel<LayerControl>":{"oneOf":[{"$ref":"#/definitions/Reference"},{"additionalProperties":false,"properties":{"inner":{"$ref":"#/definitions/InnerWheel<LayerControl>"},"outer":{"$ref":"#/definitions/OuterWheel<LayerControl>"}},"type":"object"}]}},"properties":{"$schema":{"type":"string"},"content":{"$ref":"#/definitions/Layout"},"orientation":{"$ref":"#/definitions/LayoutOrientation"},"definitions":{"$ref":"#/definitions/Definitions"}},"required":["content"],"type":"object"}')},Y7t8:function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.BundleLoader=void 0;var o=i("xbHb");Object.defineProperty(t,"BundleLoader",{enumerable:!0,get:function(){return o.BundleLoader}})},YCfN:function(e,t,i){"use strict";e.exports=function(e,t,i){var o,n=" ",r=e.level,a=e.dataLevel,s=e.schema[t],c=e.schemaPath+e.util.getProperty(t),l=e.errSchemaPath+"/"+t,u=!e.opts.allErrors,d="data"+(a||""),p=e.opts.$data&&s&&s.$data;if(p?(n+=" var schema"+r+" = "+e.util.getData(s.$data,a,e.dataPathArr)+"; ",o="schema"+r):o=s,!p&&"number"!=typeof s)throw new Error(t+" must be number");n+="var division"+r+";if (",p&&(n+=" "+o+" !== undefined && ( typeof "+o+" != 'number' || "),n+=" (division"+r+" = "+d+" / "+o+", ",e.opts.multipleOfPrecision?n+=" Math.abs(Math.round(division"+r+") - division"+r+") > 1e-"+e.opts.multipleOfPrecision+" ":n+=" division"+r+" !== parseInt(division"+r+") ",n+=" ) ",p&&(n+="  )  "),n+=" ) {   ";var h=h||[];h.push(n),n="",!1!==e.createErrors?(n+=" { keyword: 'multipleOf' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(l)+" , params: { multipleOf: "+o+" } ",!1!==e.opts.messages&&(n+=" , message: 'should be multiple of ",n+=p?"' + "+o:o+"'"),e.opts.verbose&&(n+=" , schema:  ",n+=p?"validate.schema"+c:""+s,n+="         , parentSchema: validate.schema"+e.schemaPath+" , data: "+d+" "),n+=" } "):n+=" {} ";var f=n;return n=h.pop(),!e.compositeRule&&u?e.async?n+=" throw new ValidationError(["+f+"]); ":n+=" validate.errors = ["+f+"]; return false; ":n+=" var err = "+f+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",n+="} ",u&&(n+=" else { "),n}},YFNc:function(e,t,i){"use strict";function o(e,t){return e===t||e.x===t.x&&e.y===t.y&&e.radius===t.radius&&e.angleInRadians===t.angleInRadians}function n(e,t){return e===t||e.enabled===t.enabled&&e.sensitivity===t.sensitivity}function r(e,t){return e===t||o(e.left,t.left)&&o(e.right,t.right)&&o(e.center,t.center)}function a(e,t){return e===t||e.opacityMultiplier===t.opacityMultiplier}function s(e,t){return e===t||r(e.portrait,t.portrait)&&r(e.landscape,t.landscape)&&r(e.landscapeSpanned,t.landscapeSpanned)&&r(e.portraitSpanned,t.portraitSpanned)&&a(e.style,t.style)&&n(e.gyro,t.gyro)&&n(e.accelerometer,t.accelerometer)}Object.defineProperty(t,"__esModule",{value:!0}),t.SettingsUpdateActionNames=t.DefaultSettingsState=t.areScopedSettingsStatesEqual=t.arePerScopeSettingsStatesEqual=t.DefaultPerScopeSettingsState=t.areStyleSettingStatesEqual=t.DefaultStyleSettingState=t.areOrientationErgoSettingsStatesEqual=t.DefaultOrientationErgoSettingState=t.areSensorSettingsStatesEqual=t.DefaultSensorSettingState=t.areWheelErgoSettingsStatesEqual=t.DefaultWheelErgoSettingState=t.LATEST_SETTINGS_STATE_VERSION=void 0,t.LATEST_SETTINGS_STATE_VERSION=2,t.DefaultWheelErgoSettingState={x:0,y:0,radius:1,angleInRadians:0},t.areWheelErgoSettingsStatesEqual=o,t.DefaultSensorSettingState={enabled:!0,sensitivity:1},t.areSensorSettingsStatesEqual=n,t.DefaultOrientationErgoSettingState={left:t.DefaultWheelErgoSettingState,right:t.DefaultWheelErgoSettingState,center:t.DefaultWheelErgoSettingState},t.areOrientationErgoSettingsStatesEqual=r,t.DefaultStyleSettingState={opacityMultiplier:1},t.areStyleSettingStatesEqual=a,t.DefaultPerScopeSettingsState={portrait:t.DefaultOrientationErgoSettingState,landscape:t.DefaultOrientationErgoSettingState,landscapeSpanned:t.DefaultOrientationErgoSettingState,portraitSpanned:t.DefaultOrientationErgoSettingState,style:t.DefaultStyleSettingState,gyro:t.DefaultSensorSettingState,accelerometer:t.DefaultSensorSettingState},t.arePerScopeSettingsStatesEqual=s,t.areScopedSettingsStatesEqual=function(e,t){return e===t||s(e,t)&&e.version===t.version&&e.useErgoEditSymmetry===t.useErgoEditSymmetry},t.DefaultSettingsState={version:t.LATEST_SETTINGS_STATE_VERSION,useErgoEditSymmetry:!1,system:t.DefaultPerScopeSettingsState,scopedSettings:{}},function(e){e.DeleteAll="SettingsUpdateAction.DeleteAll",e.ResetSettingsForScope="SettingsUpdateAction.ResetSettingsForScope",e.UpdateUseErgoEditSymmetry="SettingsUpdateAction.UpdateUseErgoEditSymmetry",e.UpdateWheelErgoForScope="SettingsUpdateAction.UpdateWheelErgoForScope",e.UpdateAllWheelsErgoForScope="SettingsUpdateAction.UpdateAllWheelsErgoForScope",e.UpdateSensorsForScope="SettingsUpdateAction.UpdateSensorsForScope",e.UpdateGyroEnabledForScope="SettingsUpdateAction.UpdateGyroEnabledForScope",e.UpdateGyroSensitivityForScope="SettingsUpdateAction.UpdateGyroSensitivityForScope",e.UpdateOpacityMultiplierForScope="SettingsUpdateAction.UpdateOpacityMultiplierForScope"}(t.SettingsUpdateActionNames||(t.SettingsUpdateActionNames={}))},YPqp:function(e,t,i){"use strict";e.exports=function(e,t,i){var o,n=" ",r=e.level,a=e.dataLevel,s=e.schema[t],c=e.schemaPath+e.util.getProperty(t),l=e.errSchemaPath+"/"+t,u=!e.opts.allErrors,d="data"+(a||""),p=e.opts.$data&&s&&s.$data;p?(n+=" var schema"+r+" = "+e.util.getData(s.$data,a,e.dataPathArr)+"; ",o="schema"+r):o=s;var h="maximum"==t,f=h?"exclusiveMaximum":"exclusiveMinimum",y=e.schema[f],g=e.opts.$data&&y&&y.$data,m=h?"<":">",v=h?">":"<",b=void 0;if(!p&&"number"!=typeof s&&void 0!==s)throw new Error(t+" must be number");if(!g&&void 0!==y&&"number"!=typeof y&&"boolean"!=typeof y)throw new Error(f+" must be number or boolean");if(g){var S=e.util.getData(y.$data,a,e.dataPathArr),k="exclusive"+r,P="exclType"+r,w="exclIsNumber"+r,A="' + "+(C="op"+r)+" + '";n+=" var schemaExcl"+r+" = "+S+"; ",n+=" var "+k+"; var "+P+" = typeof "+(S="schemaExcl"+r)+"; if ("+P+" != 'boolean' && "+P+" != 'undefined' && "+P+" != 'number') { ";var I;b=f;(I=I||[]).push(n),n="",!1!==e.createErrors?(n+=" { keyword: '"+(b||"_exclusiveLimit")+"' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(l)+" , params: {} ",!1!==e.opts.messages&&(n+=" , message: '"+f+" should be boolean' "),e.opts.verbose&&(n+=" , schema: validate.schema"+c+" , parentSchema: validate.schema"+e.schemaPath+" , data: "+d+" "),n+=" } "):n+=" {} ";var T=n;n=I.pop(),!e.compositeRule&&u?e.async?n+=" throw new ValidationError(["+T+"]); ":n+=" validate.errors = ["+T+"]; return false; ":n+=" var err = "+T+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",n+=" } else if ( ",p&&(n+=" ("+o+" !== undefined && typeof "+o+" != 'number') || "),n+=" "+P+" == 'number' ? ( ("+k+" = "+o+" === undefined || "+S+" "+m+"= "+o+") ? "+d+" "+v+"= "+S+" : "+d+" "+v+" "+o+" ) : ( ("+k+" = "+S+" === true) ? "+d+" "+v+"= "+o+" : "+d+" "+v+" "+o+" ) || "+d+" !== "+d+") { var op"+r+" = "+k+" ? '"+m+"' : '"+m+"='; ",void 0===s&&(b=f,l=e.errSchemaPath+"/"+f,o=S,p=g)}else{A=m;if((w="number"==typeof y)&&p){var C="'"+A+"'";n+=" if ( ",p&&(n+=" ("+o+" !== undefined && typeof "+o+" != 'number') || "),n+=" ( "+o+" === undefined || "+y+" "+m+"= "+o+" ? "+d+" "+v+"= "+y+" : "+d+" "+v+" "+o+" ) || "+d+" !== "+d+") { "}else{w&&void 0===s?(k=!0,b=f,l=e.errSchemaPath+"/"+f,o=y,v+="="):(w&&(o=Math[h?"min":"max"](y,s)),y===(!w||o)?(k=!0,b=f,l=e.errSchemaPath+"/"+f,v+="="):(k=!1,A+="="));C="'"+A+"'";n+=" if ( ",p&&(n+=" ("+o+" !== undefined && typeof "+o+" != 'number') || "),n+=" "+d+" "+v+" "+o+" || "+d+" !== "+d+") { "}}b=b||t,(I=I||[]).push(n),n="",!1!==e.createErrors?(n+=" { keyword: '"+(b||"_limit")+"' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(l)+" , params: { comparison: "+C+", limit: "+o+", exclusive: "+k+" } ",!1!==e.opts.messages&&(n+=" , message: 'should be "+A+" ",n+=p?"' + "+o:o+"'"),e.opts.verbose&&(n+=" , schema:  ",n+=p?"validate.schema"+c:""+s,n+="         , parentSchema: validate.schema"+e.schemaPath+" , data: "+d+" "),n+=" } "):n+=" {} ";T=n;return n=I.pop(),!e.compositeRule&&u?e.async?n+=" throw new ValidationError(["+T+"]); ":n+=" validate.errors = ["+T+"]; return false; ":n+=" var err = "+T+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",n+=" } ",u&&(n+=" else { "),n}},Z085:function(e){e.exports=JSON.parse('{"$id":"https://raw.githubusercontent.com/microsoft/xbox-game-streaming-tools/main/touch-adaptation-kit/schemas/layout/latest/layout.json","$schema":"http://json-schema.org/draft-07/schema#","additionalProperties":false,"definitions":{"LayoutDefinableType":{"description":"Set of types which can be used in the definitions section of a layout file.","anyOf":[{"type":"string"},{"type":"boolean"},{"type":"integer"},{"type":"number"},{"$ref":"#/definitions/Accelerometer"},{"$ref":"#/definitions/ActionType"},{"$ref":"#/definitions/ArcadeButton"},{"$ref":"#/definitions/ArcadeButtonDefaultStyle"},{"$ref":"#/definitions/ArcadeButtons"},{"$ref":"#/definitions/ArcadeButtonStyles"},{"$ref":"#/definitions/AxisCap"},{"$ref":"#/definitions/AxisCapColor"},{"$ref":"#/definitions/Background"},{"$ref":"#/definitions/BackgroundAsset"},{"$ref":"#/definitions/BackgroundAssetValue"},{"$ref":"#/definitions/BackgroundColor"},{"$ref":"#/definitions/Blank"},{"$ref":"#/definitions/Button"},{"$ref":"#/definitions/ButtonStyles"},{"$ref":"#/definitions/ButtonActivatedStyle"},{"$ref":"#/definitions/ButtonDefaultStyle"},{"$ref":"#/definitions/ButtonDisabledStyle"},{"$ref":"#/definitions/ButtonIdleStyle"},{"$ref":"#/definitions/ButtonToggledStyle"},{"$ref":"#/definitions/ButtonPulledStyle"},{"$ref":"#/definitions/ButtonMappableType"},{"$ref":"#/definitions/ButtonType"},{"$ref":"#/definitions/Control"},{"$ref":"#/definitions/ControlEnabled"},{"$ref":"#/definitions/ControlGroup<Control>"},{"$ref":"#/definitions/ControlGroupControlItem"},{"$ref":"#/definitions/ControlGroup<LayerControl>"},{"$ref":"#/definitions/ControlGroupLayerControlItem"},{"$ref":"#/definitions/ControllerInput"},{"$ref":"#/definitions/ControlVisibility"},{"$ref":"#/definitions/Deadzone"},{"$ref":"#/definitions/Deadzone2D"},{"$ref":"#/definitions/DirectionalPad"},{"$ref":"#/definitions/DirectionalPadDefaultStyle"},{"$ref":"#/definitions/DirectionalPadIdleStyle"},{"$ref":"#/definitions/DirectionalPadInteraction"},{"$ref":"#/definitions/DirectionalPadInteractionActivationType"},{"$ref":"#/definitions/DirectionalPadStyles"},{"$ref":"#/definitions/FaceImage"},{"$ref":"#/definitions/FaceImageAsset"},{"$ref":"#/definitions/FaceImageAssetValue"},{"$ref":"#/definitions/FaceImageIcon"},{"$ref":"#/definitions/FaceImageIconLabel"},{"$ref":"#/definitions/FaceImageIconValue"},{"$ref":"#/definitions/GameIcon"},{"$ref":"#/definitions/Gradient"},{"$ref":"#/definitions/Gyroscope"},{"$ref":"#/definitions/HexColor"},{"$ref":"#/definitions/InnerWheel<Control>"},{"$ref":"#/definitions/InnerWheel<LayerControl>"},{"$ref":"#/definitions/InputAxisPolar"},{"$ref":"#/definitions/InputCurveType"},{"$ref":"#/definitions/InputMappingZY"},{"$ref":"#/definitions/InputMapping2D"},{"$ref":"#/definitions/Joystick"},{"$ref":"#/definitions/JoystickActivatedStyle"},{"$ref":"#/definitions/JoystickAxisType"},{"$ref":"#/definitions/JoystickDefaultStyle"},{"$ref":"#/definitions/JoystickDirectionIndicator"},{"$ref":"#/definitions/JoystickDisabledStyle"},{"$ref":"#/definitions/JoystickIdleStyle"},{"$ref":"#/definitions/JoystickInputConfig2D"},{"$ref":"#/definitions/JoystickInputConfigAxial"},{"$ref":"#/definitions/JoystickInputConfigAxialPolar"},{"$ref":"#/definitions/JoystickInputMapping1D"},{"$ref":"#/definitions/JoystickInputMapping2D"},{"$ref":"#/definitions/JoystickMovingStyle"},{"$ref":"#/definitions/JoystickOutlineWithIndicator"},{"$ref":"#/definitions/JoystickOutlineWithoutIndicator"},{"$ref":"#/definitions/JoystickPolarAxisType"},{"$ref":"#/definitions/JoystickStyles"},{"$ref":"#/definitions/JoystickType"},{"$ref":"#/definitions/KnobStyle"},{"$ref":"#/definitions/Layer"},{"$ref":"#/definitions/LayerControl"},{"$ref":"#/definitions/Layout"},{"$ref":"#/definitions/LayoutAction"},{"$ref":"#/definitions/LayoutOrientation"},{"$ref":"#/definitions/MouseInputConfig2D"},{"$ref":"#/definitions/MouseInputConfigAxial"},{"$ref":"#/definitions/MouseInputConfigAxialPolar"},{"$ref":"#/definitions/MouseInputMapping1D"},{"$ref":"#/definitions/MouseInputMapping2D"},{"$ref":"#/definitions/MousePolarAxisType"},{"$ref":"#/definitions/Opacity"},{"$ref":"#/definitions/OuterWheel<Control>"},{"$ref":"#/definitions/OuterWheelControlGroup"},{"$ref":"#/definitions/OuterWheel<LayerControl>"},{"$ref":"#/definitions/OuterWheelLayerControlGroup"},{"$ref":"#/definitions/PullIndicator"},{"$ref":"#/definitions/SensorControl"},{"$ref":"#/definitions/SensorZYInputConfig"},{"$ref":"#/definitions/Stroke"},{"$ref":"#/definitions/Throttle"},{"$ref":"#/definitions/ThrottleAxisStyle"},{"$ref":"#/definitions/ThrottleDefaultStyle"},{"$ref":"#/definitions/ThrottleStyles"},{"$ref":"#/definitions/Touchpad"},{"$ref":"#/definitions/TouchpadDefaultStyle"},{"$ref":"#/definitions/TouchpadStyles"},{"$ref":"#/definitions/TriggerType"},{"$ref":"#/definitions/TurboAction"},{"$ref":"#/definitions/UpperLayer"},{"$ref":"#/definitions/UpperLayout"},{"$ref":"#/definitions/Wheel<Control>"},{"$ref":"#/definitions/Wheel<LayerControl>"}]},"Definitions":{"type":"object","description":"Definitions block that contains reusable components for layouts.","patternProperties":{"^(?!__proto__)[a-zA-Z0-9\\\\.\\\\-_]+$":{"$ref":"#/definitions/LayoutDefinableType"}}},"Reference":{"type":"object","additionalProperties":false,"description":"JSON Reference to another value defined locally or in a nearby file.","required":["$ref"],"patternProperties":{"^\\\\$ref$":{"type":"string","format":"uri-reference"}}},"Accelerometer":{"oneOf":[{"$ref":"#/definitions/Reference"},{"additionalProperties":false,"description":"Accelerometer","properties":{"axis":{"anyOf":[{"$ref":"#/definitions/InputMappingZY"},{"items":{"$ref":"#/definitions/InputMapping2D"},"type":"array"}],"description":"Map input axis (touch) to output axis (joystick, mouse, or touch)."},"type":{"description":"Control type identifier.","const":"accelerometer","type":"string"}},"required":["type","axis"],"type":"object"}]},"ActionType":{"anyOf":[{"$ref":"#/definitions/ButtonMappableType"},{"items":{"$ref":"#/definitions/ButtonMappableType"},"type":"array"}],"description":"Actions able to be invoked by various controls (Joystick, Button, and Touchpad)."},"ArcadeButton":{"oneOf":[{"additionalProperties":false,"properties":{"action":{"$ref":"#/definitions/ControllerInput"},"enabled":{"$ref":"#/definitions/ControlEnabled"},"styles":{"$ref":"#/definitions/ArcadeButtonStyles"},"visible":{"$ref":"#/definitions/ControlVisibility"}},"required":["action"],"type":"object"},{"$ref":"#/definitions/Reference"}]},"ArcadeButtonDefaultStyle":{"oneOf":[{"additionalProperties":false,"description":"Default styling parameters to be applied to the arcade button.\\nWhen a specific state\'s styling is not provided, parameters fallback to their equivalents in default.\\nIf default styling is not provided, internal defaults are used instead.","properties":{"background":{"$ref":"#/definitions/Background","description":"Background styling to be used on the arcade button."},"faceImage":{"$ref":"#/definitions/FaceImage","description":"Face image to be used on the arcade button."},"opacity":{"description":"The opacity of the arcade button.","$ref":"#/definitions/Opacity"}},"type":"object"},{"$ref":"#/definitions/Reference"}]},"ArcadeButtons":{"oneOf":[{"additionalProperties":false,"description":"Fighting Buttons\\n\\nA grouping of buttons arranged based on common 6 or 8 button arcade controllers. This is most commonly\\nthe preferred button arrangement to play fighting games. Touching between buttons allows the player to press multiple buttons at once.\\nTouching above the button group will activate all 3 punch buttons silmutaneously, and touching below will activate all 3 kick buttons.","properties":{"heavyKick":{"$ref":"#/definitions/ArcadeButton","description":"Action to be invoked when a user touches the large kick button."},"heavyPunch":{"$ref":"#/definitions/ArcadeButton","description":"Action to be invoked when a user touches the large punch button."},"lightKick":{"$ref":"#/definitions/ArcadeButton","description":"Action to be invoked when a user touches the small kick button."},"lightPunch":{"$ref":"#/definitions/ArcadeButton","description":"Action to be invoked when a user touches the small punch button."},"mediumKick":{"$ref":"#/definitions/ArcadeButton","description":"Action to be invoked when a user touches the medium kick button."},"mediumPunch":{"$ref":"#/definitions/ArcadeButton","description":"Action to be invoked when a user touches the medium punch button."},"specialKick":{"$ref":"#/definitions/ArcadeButton","description":"Action to be invoked when a user touches the special kick button."},"specialPunch":{"$ref":"#/definitions/ArcadeButton","description":"Action to be invoked when a user touches the special punch button."},"type":{"description":"Control type identifier.","const":"arcadeButtons","type":"string"}},"required":["type","lightKick","mediumKick","heavyKick","lightPunch","mediumPunch","heavyPunch"],"type":"object"},{"$ref":"#/definitions/Reference"}]},"ArcadeButtonStyles":{"oneOf":[{"additionalProperties":false,"description":"Styling to be applied to the arcade button.\\nFor each state the arcade button can be in, each styleable component can be customized.","properties":{"activated":{"$ref":"#/definitions/ArcadeButtonDefaultStyle","description":"Styling to be applied to the arcade button\'s components while it is in the activated state.\\nThe activated state is when the arcade button is being interacted with (i.e. tapped) and the action being executed."},"default":{"$ref":"#/definitions/ArcadeButtonDefaultStyle","description":"Default styling parameters to be applied to the arcade button.\\nWhen a specific state\'s styling is not provided, parameters fallback to their equivalents in default.\\nIf default styling is not provided, internal defaults are used instead."},"disabled":{"$ref":"#/definitions/ArcadeButtonDefaultStyle","description":"Styling to be applied to the arcade button\'s components while it is in the disabled state.\\nThe arcade button cannot be interacted with in this state, but it still exists."},"idle":{"$ref":"#/definitions/ArcadeButtonDefaultStyle","description":"Styling to be applied to the arcade button\'s components while it is in the idle state.\\nThe idle state is defined as when the arcade button is not yet interacted with (i.e. not tapped)."}},"type":"object"},{"$ref":"#/definitions/Reference"}]},"AxisCap":{"$ref":"#/definitions/AxisCapColor"},"AxisCapColor":{"oneOf":[{"additionalProperties":false,"description":"Assigns the specified color to the cap element of the control axis","properties":{"type":{"description":"Axis cap style type identifier","const":"color","type":"string"},"value":{"description":"The color to apply to the axis cap","$ref":"#/definitions/HexColor"},"opacity":{"description":"The opacity of the axis cap","$ref":"#/definitions/Opacity"}},"required":["type","value"],"type":"object"},{"$ref":"#/definitions/Reference"}]},"Background":{"oneOf":[{"$ref":"#/definitions/BackgroundColor"},{"$ref":"#/definitions/BackgroundAsset"}]},"BackgroundAsset":{"additionalProperties":false,"description":"Assigns a custom asset to the background element of the control","properties":{"type":{"description":"Background type identifier","const":"asset","type":"string"},"value":{"$ref":"#/definitions/BackgroundAssetValue"},"opacity":{"description":"The opacity of the background","$ref":"#/definitions/Opacity"}},"required":["type","value"],"type":"object"},"BackgroundAssetValue":{"oneOf":[{"$ref":"#/definitions/Reference"},{"description":"The file name (without extension) of the asset file to reference.","examples":["FancyImage"],"type":"string"}]},"BackgroundColor":{"oneOf":[{"$ref":"#/definitions/Reference"},{"additionalProperties":false,"description":"Assigns the specified color to the background element of the control","properties":{"type":{"description":"Background type identifier","const":"color","type":"string"},"value":{"description":"The color to apply to the background","$ref":"#/definitions/HexColor"},"opacity":{"description":"The opacity of the background","$ref":"#/definitions/Opacity"}},"required":["type","value"],"type":"object"}]},"Blank":{"oneOf":[{"additionalProperties":false,"description":"Blank\\n\\nWhen creating a layout that uses control layering, the blank control is used exclusively to\\noverride existing controls on previous control layers.\\nThe blank control does not contain any functionality and does not have any renderable properties.","properties":{"type":{"description":"Control type identifier.","const":"blank","type":"string"}},"required":["type"],"type":"object"},{"$ref":"#/definitions/Reference"}]},"Button":{"oneOf":[{"additionalProperties":false,"description":"Button\\n\\nThe most basic of all control types. The button enables an action on touch start, and disables the action on touch end.\\nIf toggle is set to true, the button will alternate between enabling and disabling the action on touch start.","properties":{"action":{"$ref":"#/definitions/ActionType","description":"Action to be invoked when a user touches the button."},"pullAction":{"$ref":"#/definitions/ActionType","description":"Action to be invoked when a user pulls button during a touch."},"toggle":true,"styles":{"$ref":"#/definitions/ButtonStyles"},"visible":{"$ref":"#/definitions/ControlVisibility"},"enabled":{"$ref":"#/definitions/ControlEnabled"},"type":{"description":"Control type identifier.","const":"button","type":"string"}},"required":["type","action"],"type":"object"},{"$ref":"#/definitions/Reference"}]},"ButtonStyles":{"oneOf":[{"additionalProperties":false,"description":"Styling to be applied to the button.\\nFor each state the button can be in, each styleable component can be customized.","properties":{"default":{"$ref":"#/definitions/ButtonDefaultStyle"},"idle":{"$ref":"#/definitions/ButtonIdleStyle"},"activated":{"$ref":"#/definitions/ButtonActivatedStyle"},"disabled":{"$ref":"#/definitions/ButtonDisabledStyle"},"toggled":{"$ref":"#/definitions/ButtonToggledStyle"},"pulled":{"$ref":"#/definitions/ButtonPulledStyle"}},"type":"object"},{"$ref":"#/definitions/Reference"}]},"ButtonActivatedStyle":{"oneOf":[{"additionalProperties":false,"description":"Styling to be applied to the button\'s components while the button is in the activated state.\\nThe activated state is when the button is being interacted with (i.e. tapped) and the action being executed.","properties":{"background":{"$ref":"#/definitions/Background","description":"Background styling to be used on the button when it is in the activated state."},"faceImage":{"$ref":"#/definitions/FaceImage","description":"Face Image to be used on the button when it is in the activated state."},"opacity":{"$ref":"#/definitions/Opacity","description":"The opacity of the button when it is in the activated state."},"pullIndicator":{"$ref":"#/definitions/PullIndicator","description":"Pull action indicator styling to be applied when the button is in the activated state.\\nThe indicator is displayed when the button is in the activated or pulled state."}},"type":"object"},{"$ref":"#/definitions/Reference"}]},"ButtonDefaultStyle":{"oneOf":[{"additionalProperties":false,"description":"Default styling parameters to be applied to the button.\\nWhen a specific state\'s styling is not provided, parameters fallback to their equivalents in default.\\nIf default styling is not provided, internal defaults are used instead.","properties":{"background":{"$ref":"#/definitions/Background","description":"Default background styling to be used on the button."},"faceImage":{"$ref":"#/definitions/FaceImage","description":"Default face image to be used on the button."},"opacity":{"$ref":"#/definitions/Opacity","description":"Default opacity to set the button to."},"pullIndicator":{"$ref":"#/definitions/PullIndicator","description":"Default pull action indicator styling to be applied.\\nThe indicator is displayed when the button is in the activated or pulled state."}},"type":"object"},{"$ref":"#/definitions/Reference"}]},"ButtonDisabledStyle":{"oneOf":[{"additionalProperties":false,"description":"Styling to be applied to the button\'s components while the button is in the disabled state.\\nThe button cannot be interacted with in this state, but it still exists.","properties":{"background":{"$ref":"#/definitions/Background","description":"Background styling to be used on the button when it is in the disabled state."},"faceImage":{"$ref":"#/definitions/FaceImage","description":"Face Image to be used on the button when it is in the disabled stated."},"opacity":{"$ref":"#/definitions/Opacity","description":"The opacity of the button when it is in the disabled state."}},"type":"object"},{"$ref":"#/definitions/Reference"}]},"ButtonIdleStyle":{"oneOf":[{"additionalProperties":false,"description":"Styling to be applied to the button\'s components while it is in the idle state.\\nThe idle state is defined as when the button is not yet interacted with (i.e. not tapped).","properties":{"background":{"$ref":"#/definitions/Background","description":"Background styling to be used on the button when it is in the idle state."},"faceImage":{"$ref":"#/definitions/FaceImage","description":"Face image to be used on the button when it is in the idle state."},"opacity":{"$ref":"#/definitions/Opacity","description":"The opacity of the button when it is in the idle state."}},"type":"object"},{"$ref":"#/definitions/Reference"}]},"ButtonToggledStyle":{"oneOf":[{"additionalProperties":false,"description":"Styling to be applied to the button\'s components while the button is in the toggled state.\\nThe toggled state is when the button is defined to be a toggle button, and it is toggled.","properties":{"background":{"$ref":"#/definitions/Background","description":"Background styling to be used on the button when it is in the toggled state."},"faceImage":{"$ref":"#/definitions/FaceImage","description":"Face Image to be used on the button when it is in the toggled state."},"opacity":{"$ref":"#/definitions/Opacity","description":"The opacity of the button when it is in the toggled state."}},"type":"object"},{"$ref":"#/definitions/Reference"}]},"ButtonPulledStyle":{"oneOf":[{"additionalProperties":false,"description":"Styling to be applied to the button\'s components while the button is in the pulled state.\\nThe pulled state is when the button has a pull action defined, and the player has pulled the button to execute the pull action.","properties":{"background":{"$ref":"#/definitions/Background","description":"Background color to be used on the button when it is pulled."},"faceImage":{"$ref":"#/definitions/FaceImage","description":"Face Image to be used on the button when it is pulled."},"opacity":{"$ref":"#/definitions/Opacity","description":"The opacity of the button when it is in the pulled state."},"pullIndicator":{"$ref":"#/definitions/PullIndicator","description":"Pull action indicator styling to be applied when the button is in the pulled state.\\nThe indicator is displayed when the button is in the activated or pulled state."}},"type":"object"},{"$ref":"#/definitions/Reference"}]},"ButtonMappableType":{"anyOf":[{"$ref":"#/definitions/ControllerInput"},{"$ref":"#/definitions/LayoutAction"},{"$ref":"#/definitions/TurboAction"}]},"ButtonType":{"oneOf":[{"$ref":"#/definitions/Reference"},{"enum":["guide","gamepadA","gamepadB","gamepadX","gamepadY","view","menu","leftBumper","rightBumper","dPadLeft","dPadRight","dPadUp","dPadDown","leftThumb","rightThumb"],"type":"string"}]},"Control":{"anyOf":[{"$ref":"#/definitions/Throttle"},{"$ref":"#/definitions/Touchpad"},{"$ref":"#/definitions/Button"},{"$ref":"#/definitions/Joystick"},{"$ref":"#/definitions/DirectionalPad"},{"$ref":"#/definitions/ArcadeButtons"}]},"ControlEnabled":{"oneOf":[{"description":"Controls whether or not this control is enabled. Defaults to \'true\'. When disabled, the control receives no input but is visible.","type":"boolean"},{"$ref":"#/definitions/Reference"}]},"ControlGroup<Control>":{"items":{"$ref":"#/definitions/ControlGroupControlItem"},"maxItems":4,"minItems":1,"type":"array"},"ControlGroupControlItem":{"anyOf":[{"$ref":"#/definitions/Reference"},{"$ref":"#/definitions/Control"},{"type":"null"}]},"ControlGroup<LayerControl>":{"items":{"$ref":"#/definitions/ControlGroupLayerControlItem"},"maxItems":4,"minItems":1,"type":"array"},"ControlGroupLayerControlItem":{"anyOf":[{"$ref":"#/definitions/Reference"},{"$ref":"#/definitions/LayerControl"},{"type":"null"}]},"ControllerInput":{"anyOf":[{"$ref":"#/definitions/ButtonType"},{"$ref":"#/definitions/TriggerType"},{"$ref":"#/definitions/JoystickPolarAxisType"}]},"ControlVisibility":{"oneOf":[{"description":"Controls whether or not this control is visible. Defaults to \'true\'. When not visible, the control receives no input.","type":"boolean"},{"$ref":"#/definitions/Reference"}]},"Deadzone":{"oneOf":[{"additionalProperties":false,"properties":{"threshold":{"type":"number"}},"required":["threshold"],"type":"object"},{"$ref":"#/definitions/Reference"}]},"Deadzone2D":{"oneOf":[{"$ref":"#/definitions/Reference"},{"additionalProperties":false,"properties":{"radial":{"type":"boolean"},"threshold":{"type":"number"}},"required":["threshold","radial"],"type":"object"}]},"DirectionalPad":{"oneOf":[{"additionalProperties":false,"description":"Directional Pad typically used by 2D platformer and fighting games.","properties":{"deadzone":{"description":"Normalized size of the the directional pad inner region that will ignore touch input.\\nValue must be a number 0 and 1, with a default value of 0.5.","type":"number"},"enabled":{"$ref":"#/definitions/ControlEnabled"},"interaction":{"$ref":"#/definitions/DirectionalPadInteraction"},"scale":{"description":"Size multiplier of the directional pad control. Default value of 1.","type":"number"},"styles":{"$ref":"#/definitions/DirectionalPadStyles"},"type":{"description":"Control type identifier.","const":"directionalPad","type":"string"},"visible":{"$ref":"#/definitions/ControlVisibility"}},"required":["type"],"type":"object"},{"$ref":"#/definitions/Reference"}]},"DirectionalPadDefaultStyle":{"oneOf":[{"additionalProperties":false,"description":"Default styling parameters to be applied to the directional pad.\\nWhen a specific state\'s styling is not provided, parameters fallback to their equivalents in default.\\nIf default styling is not provided, internal defaults are used instead.","properties":{"background":{"$ref":"#/definitions/Background","description":"Background styling to be used on the directional pad."},"fill":{"$ref":"#/definitions/HexColor","description":"Fill color to be used inside the directional pad."},"gradient":{"$ref":"#/definitions/Gradient","description":"Gradient to be used on the directional pad in the activated state."},"opacity":{"$ref":"#/definitions/Opacity","description":"Opacity of the directional pad."},"stroke":{"$ref":"#/definitions/Stroke","description":"Stroke to be used on the directional pad."}},"type":"object"},{"$ref":"#/definitions/Reference"}]},"DirectionalPadIdleStyle":{"oneOf":[{"additionalProperties":false,"description":"Styling to be applied to the directional pad\'s components while it is in the idle state.\\nThe idle state is defined as when the directional pad is not yet interacted with.","properties":{"background":{"$ref":"#/definitions/Background","description":"Background styling to be used on the directional pad."},"fill":{"$ref":"#/definitions/HexColor","description":"Fill color to be used inside the directional pad."},"opacity":{"$ref":"#/definitions/Opacity","description":"Opacity of the directional pad."},"stroke":{"$ref":"#/definitions/Stroke","description":"Stroke to be used on the directional pad."}},"type":"object"},{"$ref":"#/definitions/Reference"}]},"DirectionalPadInteraction":{"oneOf":[{"additionalProperties":false,"description":"Property definitions that can alter the interaction mechanisms of the user with the control.","properties":{"activationType":{"$ref":"#/definitions/DirectionalPadInteractionActivationType"}},"type":"object"},{"$ref":"#/definitions/Reference"}]},"DirectionalPadInteractionActivationType":{"oneOf":[{"description":"Defines the type of activation that is allowed for any given direction on the directional pad.\\nCan be one of [exclusive, allowNeighboring]. Defaults to allowNeighboring.\\nWhen set to exclusive, only a single direction can be activated on the directional pad at a time. I.e., only one of \'Up\', \'Right\', \'Down\', or \'Left\' can be activated by the user at a time.\\nWhen set to allowNeighboring, a direction and either of its neighboring directions can be simultaneously activated by the user when tapping between them. I.e., the user can activate \'Up+Right\', \'Right+Down\', \'Down+Left\', or \'Left+Up\' by tapping between each of the two directions, in addition to the ability to activate each individual direction by directly tapping on them.","type":"string","enum":["exclusive","allowNeighboring"]},{"$ref":"#/definitions/Reference"}]},"DirectionalPadStyles":{"oneOf":[{"additionalProperties":false,"description":"Styling to be applied to the directional pad.\\nFor each state the directional pad can be in, each styleable component can be customized.","properties":{"activated":{"$ref":"#/definitions/DirectionalPadDefaultStyle","description":"Styling to be applied to the directional pad\'s components while it is in the activated state.\\nThe activated state is when the directional pad is being interacted with (i.e. touched) regardless of whether that touch results in a specific directional pad input or not."},"default":{"$ref":"#/definitions/DirectionalPadDefaultStyle","description":"Default styling parameters to be applied to the directional pad.\\nWhen a specific state\'s styling is not provided, parameters fallback to their equivalents in default.\\nIf default styling is not provided, internal defaults are used instead."},"disabled":{"$ref":"#/definitions/DirectionalPadIdleStyle","description":"Styling to be applied to the directional pad\'s components while it is in the disabled state.\\nThe directional pad cannot be interacted with in this state, but it still exists."},"idle":{"$ref":"#/definitions/DirectionalPadIdleStyle","description":"Styling to be applied to the directional pad\'s components while it is in the idle state.\\nThe idle state is defined as when the directional pad is not yet interacted with."}},"type":"object"},{"$ref":"#/definitions/Reference"}]},"FaceImage":{"oneOf":[{"$ref":"#/definitions/FaceImageIcon"},{"$ref":"#/definitions/FaceImageAsset"}]},"FaceImageAsset":{"additionalProperties":false,"description":"Used to create a reference to a custom asset.","properties":{"type":{"description":"Face Image type identifier","const":"asset","type":"string"},"value":{"$ref":"#/definitions/FaceImageAssetValue"},"opacity":{"description":"The opacity of the face image.","$ref":"#/definitions/Opacity"}},"type":"object","required":["type","value"]},"FaceImageAssetValue":{"oneOf":[{"description":"The file name (without extension) of the asset file to reference.","type":"string","examples":["FancyImage"]},{"$ref":"#/definitions/Reference"}]},"FaceImageIcon":{"additionalProperties":false,"description":"Used to create a reference to a built-in icon.","properties":{"type":{"description":"Face Image type identifier","const":"icon","type":"string"},"value":{"$ref":"#/definitions/FaceImageIconValue"},"opacity":{"description":"The opacity of the face image.","$ref":"#/definitions/Opacity"},"label":{"$ref":"#/definitions/FaceImageIconLabel"}},"type":"object","required":["type","value"]},"FaceImageIconLabel":{"properties":{"type":{"enum":["action","none"],"type":"string","description":"action: to display label for the action type. If multiple action types, display constant icon: --- ,none: do not display any label"}},"description":"Descriptive text for face image icons","type":"object"},"FaceImageIconValue":{"oneOf":[{"description":"The name of the icon to use.","$ref":"#/definitions/GameIcon"},{"$ref":"#/definitions/Reference"}]},"GameIcon":{"enum":["placeholder","walk","enterCar","jump","punch","weaponSelect","stealth","exitCar","handbrake","fire","aim","crouch","dPad","steering","upChevron","downChevron","leftChevron","rightChevron","gasPedal","brakePedal","reload","characterSelect","ability","lightKick","mediumKick","heavyKick","lightPunch","mediumPunch","heavyPunch","lookBehind","leftArrow","rightArrow","upArrow","downArrow","brightness","phone","close","look","smallGridView","largeGridView","interact","rewind","move","titleMenu","internet","specialAbility","leftRightArrows","sync","repeatRefresh","select","leftArrow2","rightArrow2","upArrow2","downArrow2","parameters","handbrake2","ability2","character","characterSelect2","lookBehind2","run","sprint","ram","dodge","block","cover","climbStairs","add","subtract","hourglass","stopwatch","move2","touch","lightSword","mediumSword","heavySword","lightSword2","mediumSword2","heavySword2","sword","sword2","lightKick2","mediumKick2","heavyKick2","lightKick3","mediumKick3","heavyKick3","lightKick4","mediumKick4","heavyKick4","capture","exit","lightPunch2","mediumPunch2","heavyPunch2","lightPunch3","mediumPunch3","heavyPunch3","dash","zoomIn","zoomOut","map","map2","inventory","emotes","slide","medical","armor","radio","enterDoor","exitDoor","chat","bomb","grenade","flag","waypoint","horn","selectAll","switchCamera","arrowReload","arrow","bow","roll","pickAxe","attackBehind","firePunch","golf","targetLock","radialMenu","kick"],"type":"string"},"Gradient":{"oneOf":[{"additionalProperties":false,"description":"Configuration that defines a color gradient.","properties":{"color":{"$ref":"#/definitions/HexColor","description":"The base color to be used on the gradient."}},"type":"object"},{"$ref":"#/definitions/Reference"}]},"Gyroscope":{"oneOf":[{"additionalProperties":false,"description":"Gyroscope\\n\\nLike the touchpad, the gyroscope is most typically used in first/third-person perspective games to control the player look camera.\\nWith proper axis tuning (deadzone removal and linearization of response-curves),\\nusing the gyroscope can bring mouse-like precision to the player\'s control\\n(especially when used in combination with touchpad or joystick.","properties":{"axis":{"anyOf":[{"$ref":"#/definitions/InputMappingZY"},{"items":{"$ref":"#/definitions/InputMapping2D"},"type":"array"}],"description":"Map input axis (touch) to output axis (joystick, mouse, or touch)."},"type":{"description":"Control type identifier.","const":"gyroscope","type":"string"}},"required":["type","axis"],"type":"object"},{"$ref":"#/definitions/Reference"}]},"HexColor":{"description":"Hexadecimal representation of RGBA color values.","pattern":"^#([a-fA-F0-9]{6}|[a-fA-F0-9]{8}|[a-fA-F0-9]{4}|[a-fA-F0-9]{3})$","examples":["#0099ff","#0099ffaa","#09f","#09fa"],"type":"string"},"InnerWheel<Control>":{"items":{"$ref":"#/definitions/Control"},"maxItems":4,"minItems":1,"type":"array"},"InnerWheel<LayerControl>":{"items":{"$ref":"#/definitions/LayerControl"},"maxItems":4,"minItems":1,"type":"array"},"InputAxisPolar":{"anyOf":[{"enum":["axisRight","axisLeft"],"type":"string"},{"enum":["axisUp","axisDown"],"type":"string"}]},"InputCurveType":{"anyOf":[{"$ref":"#/definitions/Reference"},{"additionalProperties":false,"description":"Circular response curve shape that widens input resolution near lower range values (0)\\nand condenses resolution near higher range values (1)","properties":{"range":{"description":"Start and end values for input curve range.","items":{"type":"number"},"maxItems":2,"minItems":2,"type":"array"},"type":{"const":"circular","type":"string"}},"required":["range","type"],"type":"object"},{"additionalProperties":false,"description":"Circular response curve shape that condenses input resolution near lower range values (0)\\nand widens resolution near higher range values (1)","properties":{"range":{"description":"Start and end values for input curve range.","items":{"type":"number"},"maxItems":2,"minItems":2,"type":"array"},"type":{"const":"circular-inverse","type":"string"}},"required":["range","type"],"type":"object"}]},"InputMapping2D":{"anyOf":[{"$ref":"#/definitions/JoystickInputMapping2D"},{"$ref":"#/definitions/MouseInputMapping2D"}]},"InputMappingZY":{"anyOf":[{"$ref":"#/definitions/InputMapping2D"},{"$ref":"#/definitions/SensorZYInputConfig"}]},"Joystick":{"oneOf":[{"additionalProperties":false,"description":"Joystick\\n\\nPrimarily used across games for player locomotion, the joystick is able to use either a single-axis, or dual-axis configuration.\\nOptional actions can be set to activate either on touch start (and release on touch end),\\nor when the user has moved the joystick to a position that meets a specified minimum threshold.","properties":{"action":{"$ref":"#/definitions/ActionType","description":"Action to be invoked while the user is touching the joystick."},"actionThreshold":{"description":"Normalized minimum joystick value (radial) required to invoke the action. Default value of 0.","type":"number"},"axis":{"anyOf":[{"$ref":"#/definitions/InputMapping2D"},{"items":{"$ref":"#/definitions/InputMapping2D"},"type":"array"}],"description":"Map input axis (touch) to output axis (joystick, mouse, or touch)."},"enabled":{"$ref":"#/definitions/ControlEnabled"},"expand":{"description":"Expand joystick range to match user ergonomic preferences when placed in a center control socket.\\nSet to false to use a standardized fixed joystick size. Default value of true.","type":"boolean"},"relative":{"description":"By default, the joystick will calculate its value using a relative calculation based on user\'s initial touch.\\nSetting this value to false will instead calculate its value based on the center point of the control.","type":"boolean"},"styles":{"$ref":"#/definitions/JoystickStyles"},"visible":{"$ref":"#/definitions/ControlVisibility"},"type":{"description":"Control type identifier.","const":"joystick","type":"string"}},"required":["type","axis"],"type":"object"},{"$ref":"#/definitions/Reference"}]},"JoystickActivatedStyle":{"oneOf":[{"additionalProperties":false,"description":"Styling to be applied to the joystick\'s components while the joystick is in the activated state.\\nThe activated state is when the joystick has an action defined and the knob is moved outside the threshold (if any) to execute the action.","properties":{"background":{"$ref":"#/definitions/Background","description":"Background styling to be used on the joystick when it is in the activated state."},"knob":{"$ref":"#/definitions/KnobStyle","description":"Styling of the joystick knob components when it is in the activated state."},"opacity":{"$ref":"#/definitions/Opacity","description":"The opacity of the joystick when it is in the activated state."},"outline":{"$ref":"#/definitions/JoystickOutlineWithIndicator","description":"Styling of the joystick outline components when it is in the activated state."}},"type":"object"},{"$ref":"#/definitions/Reference"}]},"JoystickAxisType":{"enum":["leftJoystickX","leftJoystickY","rightJoystickX","rightJoystickY"],"type":"string"},"JoystickDefaultStyle":{"oneOf":[{"additionalProperties":false,"description":"Default styling parameters to be applied to the joystick.\\nWhen a specific state\'s styling is not provided, parameters fallback to their equivalents in default.\\nIf default styling is not provided, internal defaults are used instead.","properties":{"background":{"$ref":"#/definitions/Background","description":"Default background styling to be used on the joystick."},"knob":{"$ref":"#/definitions/KnobStyle","description":"Default styling of the joystick knob components."},"opacity":{"$ref":"#/definitions/Opacity","description":"Default opacity of the joystick."},"outline":{"$ref":"#/definitions/JoystickOutlineWithIndicator","description":"Default styling of the joystick outline components."}},"type":"object"},{"$ref":"#/definitions/Reference"}]},"JoystickDirectionIndicator":{"oneOf":[{"additionalProperties":false,"description":"Styling of the directional indicator on the joystick","properties":{"type":{"description":"Joystick directional indicator type identifier","const":"color","type":"string"},"value":{"description":"The color to apply to the directional indicator","$ref":"#/definitions/HexColor"},"opacity":{"description":"The opacity of the directional indicator","$ref":"#/definitions/Opacity"}},"required":["type","value"],"type":"object"},{"$ref":"#/definitions/Reference"}]},"JoystickDisabledStyle":{"oneOf":[{"additionalProperties":false,"description":"Styling to be applied to the joystick\'s components while it is in the disabled state.\\nThe joystick cannot be interacted with in this state, but it still exists.","properties":{"background":{"$ref":"#/definitions/Background","description":"Background styling to be used on the joystick when it is in the disabled state."},"knob":{"$ref":"#/definitions/KnobStyle","description":"Styling of the joystick knob components when it is in the disabled state."},"opacity":{"$ref":"#/definitions/Opacity","description":"The opacity of the joystick when it is in the disabled state."},"outline":{"$ref":"#/definitions/JoystickOutlineWithoutIndicator","description":"Styling of the joystick outline components when it is in the disabled state."}},"type":"object"},{"$ref":"#/definitions/Reference"}]},"JoystickIdleStyle":{"oneOf":[{"additionalProperties":false,"description":"Styling to be applied to the joystick\'s components while it is in the idle state.\\nThe idle state is defined as when the joystick is not yet interacted with (i.e. not touched).","properties":{"background":{"$ref":"#/definitions/Background","description":"Background styling to be used on the joystick when it is in the idle state."},"knob":{"$ref":"#/definitions/KnobStyle","description":"Styling of the joystick knob components when it is in the idle state."},"opacity":{"$ref":"#/definitions/Opacity","description":"The opacity of the joystick when it is in the idle state."},"outline":{"$ref":"#/definitions/JoystickOutlineWithoutIndicator","description":"Styling of the joystick outline components when it is in the idle state."}},"type":"object"},{"$ref":"#/definitions/Reference"}]},"JoystickInputConfig2D":{"oneOf":[{"additionalProperties":false,"properties":{"deadzone":{"$ref":"#/definitions/Deadzone2D","description":"Normalized radius of the inner region that will ignore touch input. Value must be a number 0 and 1, with a default value of 0.5."},"input":{"description":"Touch Axis, X and Y","const":"axisXY","type":"string"},"output":{"anyOf":[{"$ref":"#/definitions/JoystickType"},{"const":"relativeMouse","type":"string"}],"description":"Axis to be mapped to virtual input device."},"responseCurve":{"$ref":"#/definitions/InputCurveType","description":"Shape of the response curve."},"sensitivity":{"description":"Value multiplier applied after deadzone and response curve calculation.","type":"number"}},"required":["input","output"],"type":"object"},{"$ref":"#/definitions/Reference"}]},"JoystickInputConfigAxial":{"oneOf":[{"additionalProperties":false,"properties":{"deadzone":{"$ref":"#/definitions/Deadzone"},"input":{"anyOf":[{"const":"axisX","type":"string"},{"const":"axisY","type":"string"}],"description":"Touch Axis, X or Y"},"output":{"$ref":"#/definitions/JoystickAxisType","description":"Axis to be mapped to virtual input device."},"responseCurve":{"$ref":"#/definitions/InputCurveType","description":"Shape of the response curve."},"sensitivity":{"description":"Value multiplier applied after deadzone and response curve calculation.","type":"number"}},"required":["input","output"],"type":"object"},{"$ref":"#/definitions/Reference"}]},"JoystickInputConfigAxialPolar":{"oneOf":[{"additionalProperties":false,"properties":{"deadzone":{"$ref":"#/definitions/Deadzone"},"input":{"$ref":"#/definitions/InputAxisPolar","description":"Touch Axis, Right, Left, Up, or Down"},"output":{"anyOf":[{"$ref":"#/definitions/JoystickPolarAxisType"},{"$ref":"#/definitions/TriggerType"}],"description":"Axis to be mapped to virtual input device."},"responseCurve":{"$ref":"#/definitions/InputCurveType","description":"Shape of the response curve."},"sensitivity":{"description":"Value multiplier applied after deadzone and response curve calculation.","type":"number"}},"required":["input","output"],"type":"object"},{"$ref":"#/definitions/Reference"}]},"JoystickInputMapping1D":{"anyOf":[{"$ref":"#/definitions/JoystickInputConfigAxial"},{"$ref":"#/definitions/JoystickInputConfigAxialPolar"}]},"JoystickInputMapping2D":{"anyOf":[{"$ref":"#/definitions/JoystickInputConfig2D"},{"$ref":"#/definitions/JoystickInputMapping1D"}]},"JoystickMovingStyle":{"oneOf":[{"additionalProperties":false,"description":"Styling to be applied to the joystick\'s components while the joystick is in the moving state.\\nThe moving state is when the joystick knob is being interacted with (i.e. touched) regardless of the deadzone defined.","properties":{"background":{"$ref":"#/definitions/Background","description":"Background styling to be used on the joystick when it is in the moving state."},"knob":{"$ref":"#/definitions/KnobStyle","description":"Styling of the joystick knob components when it is in the moving state."},"opacity":{"$ref":"#/definitions/Opacity","description":"The opacity of the joystick when it is in the moving state."},"outline":{"$ref":"#/definitions/JoystickOutlineWithIndicator","description":"Styling of the joystick outline components when it is in the moving state."}},"type":"object"},{"$ref":"#/definitions/Reference"}]},"JoystickOutlineWithIndicator":{"oneOf":[{"additionalProperties":false,"description":"Styling of the joystick\'s outline components","properties":{"stroke":{"$ref":"#/definitions/Stroke","description":"Styling of the stroke of the joystick\'s outline"},"indicator":{"$ref":"#/definitions/JoystickDirectionIndicator","description":"Styling of the directional indicator on the joystick\'s outline"},"opacity":{"$ref":"#/definitions/Opacity","description":"The opacity of the joystick outline"}},"type":"object"},{"$ref":"#/definitions/Reference"}]},"JoystickOutlineWithoutIndicator":{"oneOf":[{"additionalProperties":false,"description":"Styling of the joystick\'s outline components","properties":{"stroke":{"$ref":"#/definitions/Stroke","description":"Styling of the stroke of the joystick\'s outline"},"opacity":{"$ref":"#/definitions/Opacity","description":"The opacity of the joystick outline"}},"type":"object"},{"$ref":"#/definitions/Reference"}]},"JoystickPolarAxisType":{"enum":["leftJoystickRight","leftJoystickLeft","leftJoystickUp","leftJoystickDown","rightJoystickRight","rightJoystickLeft","rightJoystickUp","rightJoystickDown"],"type":"string"},"JoystickStyles":{"oneOf":[{"additionalProperties":false,"description":"Styling to be applied to the joystick.\\n For each state that the joystick can be in, each styleable component can be customized.","properties":{"activated":{"$ref":"#/definitions/JoystickActivatedStyle"},"default":{"$ref":"#/definitions/JoystickDefaultStyle"},"disabled":{"$ref":"#/definitions/JoystickDisabledStyle"},"idle":{"$ref":"#/definitions/JoystickIdleStyle"},"moving":{"$ref":"#/definitions/JoystickMovingStyle"}},"type":"object"},{"$ref":"#/definitions/Reference"}]},"JoystickType":{"oneOf":[{"$ref":"#/definitions/Reference"},{"enum":["rightJoystick","leftJoystick"],"type":"string"}]},"KnobStyle":{"oneOf":[{"additionalProperties":false,"description":"Styling options for a knob on controls that support it.","properties":{"background":{"$ref":"#/definitions/Background","description":"Background of the knob"},"faceImage":{"$ref":"#/definitions/FaceImage","description":"Face image on the knob"},"opacity":{"$ref":"#/definitions/Opacity","description":"Opacity of the knob"},"stroke":{"$ref":"#/definitions/Stroke","description":"Stroke of the knob"}},"type":"object"},{"$ref":"#/definitions/Reference"}]},"Layer":{"oneOf":[{"additionalProperties":false,"properties":{"center":{"$ref":"#/definitions/Wheel<LayerControl>"},"left":{"$ref":"#/definitions/Wheel<LayerControl>"},"lower":{"oneOf":[{"additionalProperties":false,"properties":{"center":{"$ref":"#/definitions/LayerControl"},"leftCenter":{"items":{"anyOf":[{"$ref":"#/definitions/LayerControl"},{"$ref":"#/definitions/Reference"},{"type":"null"}]},"type":"array"},"rightCenter":{"items":{"anyOf":[{"$ref":"#/definitions/LayerControl"},{"$ref":"#/definitions/Reference"},{"type":"null"}]},"type":"array"}},"type":"object"},{"$ref":"#/definitions/Reference"}]},"right":{"$ref":"#/definitions/Wheel<LayerControl>"},"sensors":{"items":{"$ref":"#/definitions/SensorLayerControl"},"type":"array"},"upper":{"$ref":"#/definitions/UpperLayer"}},"type":"object"},{"$ref":"#/definitions/Reference"}]},"LayerControl":{"anyOf":[{"$ref":"#/definitions/Control"},{"$ref":"#/definitions/Blank"}]},"Layout":{"additionalProperties":false,"properties":{"center":{"$ref":"#/definitions/Wheel<Control>"},"layers":{"additionalProperties":{"$ref":"#/definitions/Layer"},"description":"Construct a type with a set of properties K of type T","type":"object"},"left":{"$ref":"#/definitions/Wheel<Control>"},"lower":{"oneOf":[{"additionalProperties":false,"properties":{"center":{"$ref":"#/definitions/Control"},"leftCenter":{"items":{"anyOf":[{"$ref":"#/definitions/Control"},{"$ref":"#/definitions/Reference"},{"type":"null"}]},"type":"array"},"rightCenter":{"items":{"anyOf":[{"$ref":"#/definitions/Control"},{"$ref":"#/definitions/Reference"},{"type":"null"}]},"type":"array"}},"type":"object"},{"$ref":"#/definitions/Reference"}]},"right":{"$ref":"#/definitions/Wheel<Control>"},"sensors":{"items":{"$ref":"#/definitions/SensorControl"},"type":"array"},"upper":{"$ref":"#/definitions/UpperLayout"}},"type":"object"},"LayoutAction":{"additionalProperties":false,"properties":{"target":{"type":"string"},"type":{"const":"layer","type":"string"}},"required":["type","target"],"type":"object"},"LayoutOrientation":{"enum":["landscape-left","landscape-right","landscape","portrait-up","portrait"],"type":"string"},"MouseInputConfig2D":{"oneOf":[{"additionalProperties":false,"properties":{"input":{"const":"axisXY","type":"string"},"output":{"const":"relativeMouse","type":"string"},"sensitivity":{"type":"number"}},"required":["input","output"],"type":"object"},{"$ref":"#/definitions/Reference"}]},"MouseInputConfigAxial":{"oneOf":[{"additionalProperties":false,"properties":{"input":{"anyOf":[{"const":"axisX","type":"string"},{"const":"axisY","type":"string"}]},"output":{"enum":["relativeMouseX","relativeMouseY"],"type":"string"},"sensitivity":{"type":"number"}},"required":["input","output"],"type":"object"},{"$ref":"#/definitions/Reference"}]},"MouseInputConfigAxialPolar":{"oneOf":[{"additionalProperties":false,"properties":{"input":{"$ref":"#/definitions/InputAxisPolar"},"output":{"$ref":"#/definitions/MousePolarAxisType"},"sensitivity":{"type":"number"}},"required":["input","output"],"type":"object"},{"$ref":"#/definitions/Reference"}]},"MouseInputMapping1D":{"anyOf":[{"$ref":"#/definitions/MouseInputConfigAxial"},{"$ref":"#/definitions/MouseInputConfigAxialPolar"}]},"MouseInputMapping2D":{"anyOf":[{"$ref":"#/definitions/MouseInputConfig2D"},{"$ref":"#/definitions/MouseInputMapping1D"}]},"MousePolarAxisType":{"enum":["relativeMouseUp","relativeMouseDown","relativeMouseLeft","relativeMouseRight"],"type":"string"},"Opacity":{"oneOf":[{"description":"Opacity to be used on a control when styled in a specific state.","type":"number","minimum":0,"maximum":1},{"$ref":"#/definitions/Reference"}]},"OuterWheel<Control>":{"items":{"$ref":"#/definitions/OuterWheelControlGroup"},"maxItems":8,"minItems":1,"type":"array"},"OuterWheelControlGroup":{"anyOf":[{"$ref":"#/definitions/Reference"},{"$ref":"#/definitions/Control"},{"$ref":"#/definitions/ControlGroup<Control>"},{"type":"null"}]},"OuterWheel<LayerControl>":{"items":{"$ref":"#/definitions/OuterWheelLayerControlGroup"},"maxItems":8,"minItems":1,"type":"array"},"OuterWheelLayerControlGroup":{"anyOf":[{"$ref":"#/definitions/Reference"},{"$ref":"#/definitions/LayerControl"},{"$ref":"#/definitions/ControlGroup<LayerControl>"},{"type":"null"}]},"PullIndicator":{"oneOf":[{"additionalProperties":false,"description":"Styling options for pull action indicators on controls that support it.","properties":{"background":{"description":"Styling to be applied to the background of the pull indicator","$ref":"#/definitions/BackgroundColor"}},"type":"object"},{"$ref":"#/definitions/Reference"}]},"SensorControl":{"anyOf":[{"$ref":"#/definitions/Gyroscope"},{"$ref":"#/definitions/Accelerometer"}]},"SensorLayerControl":{"oneOf":[{"$ref":"#/definitions/SensorControl"},{"$ref":"#/definitions/Blank"},{"type":"null"}]},"SensorZYInputConfig":{"oneOf":[{"additionalProperties":false,"properties":{"deadzone":{"$ref":"#/definitions/Deadzone2D","description":"Normalized radius of the inner region that will ignore touch input. Value must be a number 0 and 1, with a default value of 0.5."},"input":{"description":"Touch Axis, X and Y","const":"axisZY","type":"string"},"output":{"anyOf":[{"$ref":"#/definitions/JoystickType"},{"const":"relativeMouse","type":"string"}],"description":"Axis to be mapped to virtual input device."},"responseCurve":{"$ref":"#/definitions/InputCurveType","description":"Shape of the response curve."},"sensitivity":{"description":"Value multiplier applied after deadzone and response curve calculation.","type":"number"}},"required":["input","output"],"type":"object"},{"$ref":"#/definitions/Reference"}]},"Stroke":{"oneOf":[{"additionalProperties":false,"properties":{"type":{"description":"Stroke type identifier","const":"solid","type":"string"},"color":{"$ref":"#/definitions/HexColor","description":"Stroke color in Hex format"},"opacity":{"$ref":"#/definitions/Opacity","description":"The opacity of the stroke"}},"required":["type"],"type":"object"},{"$ref":"#/definitions/Reference"}]},"Throttle":{"oneOf":[{"additionalProperties":false,"description":"Throttle\\n\\nSimilar to a y-axis only joystick, but tuned specifically to control gas/brake in racing games.","properties":{"axisDown":{"$ref":"#/definitions/TriggerType","description":"Map input axis (touch negative y-axis) to output axis."},"axisUp":{"$ref":"#/definitions/TriggerType","description":"Map input axis (touch positive y-axis) to output axis."},"enabled":{"$ref":"#/definitions/ControlEnabled"},"relative":{"description":"By default, the throttle will calculate its value using a relative calculation based on user\'s initial touch.\\nSetting this value to false will instead calculate its value based on the center point of the control.","type":"boolean"},"sticky":{"description":"By default, when the user stops touching the control, the axisUp and axisDown values reset back to 0. When set to true, the axisUp value will instead remain unchanged when touch is released. This has no effect on the axisDown value.\\nThis is commonly used to implement \\"cruise control\\" in driving games.","type":"boolean"},"styles":{"$ref":"#/definitions/ThrottleStyles"},"type":{"description":"Control type identifier.","const":"throttle","type":"string"},"visible":{"$ref":"#/definitions/ControlVisibility"}},"required":["type","axisDown","axisUp"],"type":"object"},{"$ref":"#/definitions/Reference"}]},"ThrottleAxisStyle":{"oneOf":[{"additionalProperties":false,"description":"Styling to be applied to the throttle axis","properties":{"cap":{"$ref":"#/definitions/AxisCap","description":"Styling to be applied to the cap sitting on the specified end of the axis."},"stroke":{"$ref":"#/definitions/Stroke","description":"Styling to be applied to the main stroke on the edge of the axis."}},"type":"object"},{"$ref":"#/definitions/Reference"}]},"ThrottleDefaultStyle":{"oneOf":[{"additionalProperties":false,"description":"Default styling parameters to be applied to the throttle.\\nWhen a specific state\'s styling is not provided, parameters fallback to their equivalents in default.\\nIf default styling is not provided, internal defaults are used instead.","properties":{"axisUp":{"$ref":"#/definitions/ThrottleAxisStyle","description":"Axis Up styling to be applied to the throttle. This styles the positive (upper) portion of the throttle axis in the state it is defined for."},"axisDown":{"$ref":"#/definitions/ThrottleAxisStyle","description":"Axis Down styling to be applied to the throttle. This styles the negative (lower) portion of the throttle axis in the state that it is defined for."},"indicator":{"$ref":"#/definitions/Stroke","description":"Indicator styling to be applied to the throttle. This styles the component connecting the throttle knob to its axis which indicating the current position of the knob along the axis."},"knob":{"$ref":"#/definitions/KnobStyle","description":"Default knob styling to be applied to the throttle."},"opacity":{"$ref":"#/definitions/Opacity","description":"The opacity of the throttle."}},"type":"object"},{"$ref":"#/definitions/Reference"}]},"ThrottleStyles":{"oneOf":[{"additionalProperties":false,"description":"Styling to be applied to the throttle.\\nFor each state the throttle can be in, each styleable component can be customized.","properties":{"activated":{"$ref":"#/definitions/ThrottleDefaultStyle","description":"Styling to be applied to the throttle\'s components while it is in the activated state.\\nThe activated state is transitioned to when a user is touching the knob, with the knob placed exactly at the 0 value along the axis (center)."},"activatedUp":{"$ref":"#/definitions/ThrottleDefaultStyle","description":"Styling to be applied to the throttle\'s components while it is in the activated up state.\\nThe activated up state is transitioned to when a user is touching the knob and has moved the knob such that it is in the positive (upper) section of the throttle axis."},"activatedDown":{"$ref":"#/definitions/ThrottleDefaultStyle","description":"Styling to be applied to the throttle\'s components while it is in the activated down state.\\nThe activated down state is transitioned to when a user is touching the knob and has moved the knob such that it is in the negative (lower) section of the throttle axis."},"default":{"$ref":"#/definitions/ThrottleDefaultStyle","description":"Default styling parameters to be applied to the throttle.\\nWhen a specific state\'s styling is not provided, parameters fallback to their equivalents in default.\\nIf default styling is not provided, internal defaults are used instead."},"disabled":{"$ref":"#/definitions/ThrottleDefaultStyle","description":"Styling to be applied to the throttle\'s components while it is in the disabled state.\\nThe disabled state is transitioned to when the throttle has enabled: false. It cannot be interacted with in this state, but it still exists."},"idle":{"$ref":"#/definitions/ThrottleDefaultStyle","description":"Styling to be applied to the throttle\'s components while it is in the idle state.\\nThe idle state is transitioned to when a user is not touching the throttle knob, while the knob is also not sticky in the upper section of the axis."},"idleUp":{"$ref":"#/definitions/ThrottleDefaultStyle","description":"Styling to be applied to the throttle\'s components while it is in the idle up state.\\nThe idle up state is transitioned to when a user releases the throttle knob in the upper section of the axis, with sticky set to true. The knob stays at its last position before the touch was released in this state."}},"type":"object"},{"$ref":"#/definitions/Reference"}]},"Touchpad":{"oneOf":[{"additionalProperties":false,"description":"Touchpad\\n\\nPrimarily used in FPS/TPS titles to control the player\'s look camera. Ideally this should be mapped to an event driven\\noutput type (touch or mouse) but it can also be used to drive joystick output (with a couple caveats).\\nFor non-cloud aware titles mapping to joystick output, it is absolutely critical to zero out the deadzone.\\nIn these situations (non-cloud aware) it is also important for the player to set their camera settings to max sensitivity in-game\\nOptional actions can be set to activate on touch start (and release on touch end).","properties":{"action":{"$ref":"#/definitions/ActionType","description":"Action to be invoked while the user is touching the touchpad."},"axis":{"anyOf":[{"$ref":"#/definitions/InputMapping2D"},{"items":{"$ref":"#/definitions/InputMapping2D"},"type":"array"}],"description":"Map input axis (touch) to output axis (joystick, mouse, or touch)."},"enabled":{"$ref":"#/definitions/ControlEnabled"},"renderAsButton":{"description":"Render the touchpad to appear visually as a button.","type":"boolean"},"styles":{"$ref":"#/definitions/TouchpadStyles"},"type":{"description":"Control type identifier.","const":"touchpad","type":"string"},"visible":{"$ref":"#/definitions/ControlVisibility"}},"required":["type","axis"],"type":"object"},{"$ref":"#/definitions/Reference"}]},"TouchpadDefaultStyle":{"oneOf":[{"additionalProperties":false,"description":"Default styling parameters to be applied to the joystick.\\nWhen a specific state\'s styling is not provided, parameters fallback to their equivalents in default.\\nIf default styling is not provided, internal defaults are used instead.","properties":{"background":{"$ref":"#/definitions/Background","description":"Background styling to be used on the touchpad."},"faceImage":{"$ref":"#/definitions/FaceImage","description":"Face image to be used on the touchpad."},"opacity":{"$ref":"#/definitions/Opacity","description":"Opacity of the whole touchpad control."}},"type":"object"},{"$ref":"#/definitions/Reference"}]},"TouchpadStyles":{"oneOf":[{"additionalProperties":false,"description":"Styling to be applied to the touchpad.\\n For each state that the touchpad can be in, each styleable component can be customized.","properties":{"activated":{"$ref":"#/definitions/TouchpadDefaultStyle","description":"Styling to be applied to the touchpad\'s components while it is in the activated state.\\nThe activated state is when the touchpad has an action defined, and is being interacted with (i.e. tapped)."},"default":{"$ref":"#/definitions/TouchpadDefaultStyle","description":"Default styling parameters to be applied to the touchpad.\\nWhen a specific state\'s styling is not provided, parameters fallback to their equivalents in default.\\nIf default styling is not provided, internal defaults are used instead."},"disabled":{"$ref":"#/definitions/TouchpadDefaultStyle","description":"Styling to be applied to the touchpad\'s components while it is in the disabled state.\\nThe touchpad cannot be interacted with in this state, but it still exists."},"idle":{"$ref":"#/definitions/TouchpadDefaultStyle","description":"Styling to be applied to the touchpad\'s components while it is in the idle state.\\nThe idle state is defined as when the touchpad is not yet interacted with (i.e. not tapped)."},"moving":{"$ref":"#/definitions/TouchpadDefaultStyle","description":"Styling to be applied to the touchpad\'s components while it is in the moving state.\\nThe moving state is when the touchpad is being interacted with (i.e. tapped), without an action defined."}},"type":"object"},{"$ref":"#/definitions/Reference"}]},"TriggerType":{"oneOf":[{"$ref":"#/definitions/Reference"},{"enum":["leftTrigger","rightTrigger"],"type":"string"}]},"TurboAction":{"additionalProperties":false,"properties":{"action":{"$ref":"#/definitions/ControllerInput"},"interval":{"type":"number"},"type":{"const":"turbo","type":"string"}},"required":["type","action","interval"],"type":"object"},"UpperLayer":{"oneOf":[{"additionalProperties":false,"properties":{"right":{"items":{"anyOf":[{"$ref":"#/definitions/LayerControl"},{"type":"null"}]},"type":"array"}},"type":"object"},{"$ref":"#/definitions/Reference"}]},"UpperLayout":{"oneOf":[{"additionalProperties":false,"properties":{"right":{"items":{"anyOf":[{"$ref":"#/definitions/Control"},{"type":"null"}]},"type":"array"}},"type":"object"},{"$ref":"#/definitions/Reference"}]},"Wheel<Control>":{"oneOf":[{"$ref":"#/definitions/Reference"},{"additionalProperties":false,"properties":{"inner":{"$ref":"#/definitions/InnerWheel<Control>"},"outer":{"$ref":"#/definitions/OuterWheel<Control>"}},"type":"object"}]},"Wheel<LayerControl>":{"oneOf":[{"$ref":"#/definitions/Reference"},{"additionalProperties":false,"properties":{"inner":{"$ref":"#/definitions/InnerWheel<LayerControl>"},"outer":{"$ref":"#/definitions/OuterWheel<LayerControl>"}},"type":"object"}]}},"properties":{"$schema":{"type":"string"},"content":{"$ref":"#/definitions/Layout"},"orientation":{"$ref":"#/definitions/LayoutOrientation"},"definitions":{"$ref":"#/definitions/Definitions"}},"required":["content"],"type":"object"}')},Z2Kv:function(e,t,i){"use strict";e.exports=function(e,t,i){var o,n=" ",r=e.level,a=e.dataLevel,s=e.schema[t],c=e.schemaPath+e.util.getProperty(t),l=e.errSchemaPath+"/"+t,u=!e.opts.allErrors,d="data"+(a||""),p="valid"+r,h=e.opts.$data&&s&&s.$data;if(h?(n+=" var schema"+r+" = "+e.util.getData(s.$data,a,e.dataPathArr)+"; ",o="schema"+r):o=s,(s||h)&&!1!==e.opts.uniqueItems){h&&(n+=" var "+p+"; if ("+o+" === false || "+o+" === undefined) "+p+" = true; else if (typeof "+o+" != 'boolean') "+p+" = false; else { "),n+=" var i = "+d+".length , "+p+" = true , j; if (i > 1) { ";var f=e.schema.items&&e.schema.items.type,y=Array.isArray(f);if(!f||"object"==f||"array"==f||y&&(f.indexOf("object")>=0||f.indexOf("array")>=0))n+=" outer: for (;i--;) { for (j = i; j--;) { if (equal("+d+"[i], "+d+"[j])) { "+p+" = false; break outer; } } } ";else{n+=" var itemIndices = {}, item; for (;i--;) { var item = "+d+"[i]; ";var g="checkDataType"+(y?"s":"");n+=" if ("+e.util[g](f,"item",e.opts.strictNumbers,!0)+") continue; ",y&&(n+=" if (typeof item == 'string') item = '\"' + item; "),n+=" if (typeof itemIndices[item] == 'number') { "+p+" = false; j = itemIndices[item]; break; } itemIndices[item] = i; } "}n+=" } ",h&&(n+="  }  "),n+=" if (!"+p+") {   ";var m=m||[];m.push(n),n="",!1!==e.createErrors?(n+=" { keyword: 'uniqueItems' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(l)+" , params: { i: i, j: j } ",!1!==e.opts.messages&&(n+=" , message: 'should NOT have duplicate items (items ## ' + j + ' and ' + i + ' are identical)' "),e.opts.verbose&&(n+=" , schema:  ",n+=h?"validate.schema"+c:""+s,n+="         , parentSchema: validate.schema"+e.schemaPath+" , data: "+d+" "),n+=" } "):n+=" {} ";var v=n;n=m.pop(),!e.compositeRule&&u?e.async?n+=" throw new ValidationError(["+v+"]); ":n+=" validate.errors = ["+v+"]; return false; ":n+=" var err = "+v+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",n+=" } ",u&&(n+=" else { ")}else u&&(n+=" if (true) { ");return n}},ZGze:function(e){e.exports=JSON.parse('{"$id":"https://raw.githubusercontent.com/microsoft/xbox-game-streaming-tools/main/touch-adaptation-kit/schemas/manifest/v1.1/manifest.json","$schema":"http://json-schema.org/draft-07/schema#","title":"JSON Schema for Touch Adaptation Bundle Manifests","type":"object","properties":{"layouts":{"type":"string","description":"Root directory for the touch layouts."},"assets":{"type":"string","description":"Root directory for all assets needed by the touch layouts."},"defaultLayout":{"type":"string","description":"Name of the layout to use by default when a game is starting"},"contextFile":{"type":"string","format":"uri-reference","description":"Relative file path to the global context file that can be referenced by all layouts."}},"required":["layouts"]}')},ZakO:function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.SocketSideEnum=t.RIGHT_INNER_4_MAPPING=t.LEFT_INNER_4_MAPPING=void 0,t.LEFT_INNER_4_MAPPING=[],t.RIGHT_INNER_4_MAPPING=[],function(e){e[e.None=0]="None",e[e.Left=1]="Left",e[e.Right=2]="Right",e[e.Center=3]="Center"}(t.SocketSideEnum||(t.SocketSideEnum={}))},"Zd/9":function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.WHITE_ALPHA_100=t.WHITE_ALPHA_90=t.WHITE_ALPHA_25=t.WHITE_ALPHA_10=t.TRANSPARENT=void 0,t.TRANSPARENT="#00000000",t.WHITE_ALPHA_10="#ffffff1a",t.WHITE_ALPHA_25="#ffffff40",t.WHITE_ALPHA_90="#ffffffe6",t.WHITE_ALPHA_100="#ffffffff"},ZnA5:function(e,t,i){"use strict";e.exports=function(e,t,i){var o,n,r=" ",a=e.level,s=e.dataLevel,c=e.schema[t],l=e.errSchemaPath+"/"+t,u=!e.opts.allErrors,d="data"+(s||""),p="valid"+a;if("#"==c||"#/"==c)e.isRoot?(o=e.async,n="validate"):(o=!0===e.root.schema.$async,n="root.refVal[0]");else{var h=e.resolveRef(e.baseId,c,e.isRoot);if(void 0===h){var f=e.MissingRefError.message(e.baseId,c);if("fail"==e.opts.missingRefs){e.logger.error(f),(v=v||[]).push(r),r="",!1!==e.createErrors?(r+=" { keyword: '$ref' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(l)+" , params: { ref: '"+e.util.escapeQuotes(c)+"' } ",!1!==e.opts.messages&&(r+=" , message: 'can\\'t resolve reference "+e.util.escapeQuotes(c)+"' "),e.opts.verbose&&(r+=" , schema: "+e.util.toQuotedString(c)+" , parentSchema: validate.schema"+e.schemaPath+" , data: "+d+" "),r+=" } "):r+=" {} ";var y=r;r=v.pop(),!e.compositeRule&&u?e.async?r+=" throw new ValidationError(["+y+"]); ":r+=" validate.errors = ["+y+"]; return false; ":r+=" var err = "+y+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",u&&(r+=" if (false) { ")}else{if("ignore"!=e.opts.missingRefs)throw new e.MissingRefError(e.baseId,c,f);e.logger.warn(f),u&&(r+=" if (true) { ")}}else if(h.inline){var g=e.util.copy(e);g.level++;var m="valid"+g.level;g.schema=h.schema,g.schemaPath="",g.errSchemaPath=c,r+=" "+e.validate(g).replace(/validate\.schema/g,h.code)+" ",u&&(r+=" if ("+m+") { ")}else o=!0===h.$async||e.async&&!1!==h.$async,n=h.code}if(n){var v;(v=v||[]).push(r),r="",e.opts.passContext?r+=" "+n+".call(this, ":r+=" "+n+"( ",r+=" "+d+", (dataPath || '')",'""'!=e.errorPath&&(r+=" + "+e.errorPath);var b=r+=" , "+(s?"data"+(s-1||""):"parentData")+" , "+(s?e.dataPathArr[s]:"parentDataProperty")+", rootData)  ";if(r=v.pop(),o){if(!e.async)throw new Error("async schema referenced by sync schema");u&&(r+=" var "+p+"; "),r+=" try { await "+b+"; ",u&&(r+=" "+p+" = true; "),r+=" } catch (e) { if (!(e instanceof ValidationError)) throw e; if (vErrors === null) vErrors = e.errors; else vErrors = vErrors.concat(e.errors); errors = vErrors.length; ",u&&(r+=" "+p+" = false; "),r+=" } ",u&&(r+=" if ("+p+") { ")}else r+=" if (!"+b+") { if (vErrors === null) vErrors = "+n+".errors; else vErrors = vErrors.concat("+n+".errors); errors = vErrors.length; } ",u&&(r+=" else { ")}return r}},a79a:function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Flags=void 0,t.Flags={IsFlagSet:(e,t)=>(e&t)===t,HasOverlap:(e,t)=>0!==(e&t),ClearFlag:(e,t)=>e&~t,SetFlag:(e,t)=>e|t}},aCuL:function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ButtonRenderPropertyManager=t.DefaultButtonRenderPropertyManagerCacheLimit=void 0;const o=i("kU1o"),n=i("yi9v"),r=i("3ggl"),a=i("25ZR"),s=i("yLlE"),c=i("H6Pt");t.DefaultButtonRenderPropertyManagerCacheLimit=3;class l extends a.RenderPropertyManager{constructor(e,t){super(e,t,Object.keys(c.ButtonState).length/2),this.styleManager=new s.ButtonStyleManager,this.reduceAction=e=>{const t=Array.isArray(e)&&e.length>1;return{action:Array.isArray(e)?1===e.length?e[0]:n.EmptyIcon:e,multiActionMode:t}},this.actionReductionMemo=new r.MemoizedConverter(e.action,this.reduceAction,3),this._renderProperties=this.primeCache(this.state,this.previousState)}updateProps(e){e.action!==this.props.action&&this.actionReductionMemo.convert(e.action),super.updateProps(e)}primeCache(e,t){const{type:i,x:n,y:r,pullAction:a,styles:s}=this.props,c=this.actionReductionMemo.lastResult,l=this.props.baseSize/2;return{type:i,x:n,y:r,radius:l,rotation:0,opacity:{value:this.styleManager.getOpacity(e.interactionState,s),energy:o.AnimationEnergy.Instant},background:this.styleManager.getBackground(e.interactionState,c,s),faceImage:this.styleManager.getFaceImage(e.interactionState,t.interactionState,c,s),pullIndicator:this.styleManager.getPullIndicator(e.interactionState,c,l,a,s),animationEnergy:o.AnimationEnergy.Instant}}completeCache(e,t){this._renderProperties.animationEnergy=this.styleManager.getAnimationEnergy(e.interactionState,t.interactionState),this._renderProperties.faceImage.animationEnergy=this.styleManager.getAnimationEnergy(e.interactionState,t.interactionState)}}t.ButtonRenderPropertyManager=l},aQA3:function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.TouchForwardingState=void 0,function(e){e[e.None=0]="None"}(t.TouchForwardingState||(t.TouchForwardingState={}))},aXAU:function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.VirtualFileSystem=void 0;const o=i("EQnm"),n=i("tTzi"),r=i("NUuW");t.VirtualFileSystem=class{constructor(){this.dataFormat="arraybuffer",this.rootDirectoryPath="",this.root=new r.VirtualFileSystemDirectory("")}async exists(e){return void 0!==this.root.find(e)}async writeFile(e,t){const i=e.lastIndexOf("/");let o;if(-1!==i){const t=e.substring(0,i),n=this.root.find(t);if(!(n instanceof r.VirtualFileSystemDirectory))throw new Error("Unable to find the destination directory.");o=n}else o=this.root;const n=e.substring(i+1);o.files.set(n,new r.VirtualFileSystemFile(n,t))}async readFile(e,t="utf-8"){const i=this.root.find(e);if(!i||!(i instanceof r.VirtualFileSystemFile))throw new Error(`Could not find the file '${e}'.`);switch(t){case"utf-8":{const e=new DataView(i.data);return new n.TextDecoder("utf-8").decode(e)}case"base64":return(0,o.encode)(i.data);default:throw new Error("Unsupported encoding: "+t)}}async readDir(e){const t=this.root.find(e);if(!t||!(t instanceof r.VirtualFileSystemDirectory))throw new Error(`Could not find the directory '${e}'.`);const i=[];return t.directories.forEach((t,o,n)=>{i.push({name:t.name,path:e?`${e}/${t.name}`:t.name,isFile:!1,isDirectory:!0})}),t.files.forEach((t,o,n)=>{i.push({name:t.name,path:e?`${e}/${t.name}`:t.name,isFile:!0,isDirectory:!1})}),i}async mkdir(e){const t=e.split("/");let i=this.root;for(const o of t){const e=i.directories.get(o);if(e)i=e;else{const e=new r.VirtualFileSystemDirectory(o);i.directories.set(o,e),i=e}}}async unlink(e){const t=e.lastIndexOf("/");let i;if(-1!==t){const o=e.substring(0,t),n=this.root.find(o);if(!(n instanceof r.VirtualFileSystemDirectory))return;i=n}else i=this.root;const o=e.substring(t+1);i.directories.delete(o),i.files.delete(o)}}},b1mO:function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.TouchpadRenderPropertyManager=void 0;const o=i("kU1o"),n=i("gJ6f"),r=i("yi9v"),a=i("3ggl"),s=i("yLlE"),c=i("H6Pt"),l=i("25ZR"),u=i("96UY"),d=i("JWEj");class p extends l.RenderPropertyManager{constructor(e,t){super(e,t,Object.keys(d.TouchpadState).length/2),this.touchpadStyleManager=new u.TouchpadStyleManager,this.buttonStyleManager=new s.ButtonStyleManager,this.reduceAction=e=>{if(e){const t=Array.isArray(e)&&e.length>1;return{action:Array.isArray(e)?1===e.length?e[0]:r.EmptyIcon:e,multiActionMode:t}}return{action:r.EmptyIcon,multiActionMode:!1}},this.actionReductionMemo=new a.MemoizedConverter(e.action,this.reduceAction,3),this._renderProperties=this.primeCache(this.state,this.previousState)}updateProps(e){e.action!==this.props.action&&this.actionReductionMemo.convert(e.action),super.updateProps(e)}primeCache(e,t){const{x:i,y:r,renderAsButton:a=!1,baseSize:s,size:c,action:l,styles:u}=this.props,d=this.actionReductionMemo.convert(l);if(a){const a=s/2,c=this.convertStateToButtonState(e),l=this.convertStateToButtonState(t),p=this.convertStylesToButtonStyles(e,u);return{type:n.ControlType.Button,x:i,y:r,rotation:0,opacity:{value:this.buttonStyleManager.getOpacity(c.interactionState,p),energy:o.AnimationEnergy.Instant},radius:a,background:this.buttonStyleManager.getBackground(c.interactionState,d,p),pullIndicator:this.buttonStyleManager.getPullIndicator(c.interactionState,d,a,void 0,p),faceImage:this.buttonStyleManager.getFaceImage(c.interactionState,l.interactionState,d,p),animationEnergy:o.AnimationEnergy.Instant}}{const a=c/2;return{type:n.ControlType.Touchpad,x:i,y:r,rotation:0,opacity:{value:this.touchpadStyleManager.getOpacity(e.interactionState,u),energy:o.AnimationEnergy.Instant},radius:a,baseSize:s,background:this.touchpadStyleManager.getBackground(e.interactionState,u),faceImage:this.touchpadStyleManager.getFaceImage(e.interactionState,t.interactionState,d.action,u),animationEnergy:o.AnimationEnergy.Instant}}}completeCache(e,t){const{renderAsButton:i,size:o}=this.props;this._renderProperties.animationEnergy=this.touchpadStyleManager.getAnimationEnergy(e.interactionState,t.interactionState),this._renderProperties.faceImage.animationEnergy=this.touchpadStyleManager.getAnimationEnergy(e.interactionState,t.interactionState),i||(this._renderProperties.radius=o/2)}convertStateToButtonState(e){const t={interactionState:c.ButtonState.Idle};switch(e.interactionState){case d.TouchpadState.Hidden:t.interactionState=c.ButtonState.Hidden;break;case d.TouchpadState.Disabled:t.interactionState=c.ButtonState.Disabled;break;case d.TouchpadState.Idle:t.interactionState=c.ButtonState.Idle;break;case d.TouchpadState.Moving:case d.TouchpadState.Activated:t.interactionState=c.ButtonState.Activated}return t}convertStylesToButtonStyles(e,t){if(!t)return;const i=Object.assign({},t);return e.interactionState===d.TouchpadState.Moving&&t.moving&&(i.activated=t.moving),t}}t.TouchpadRenderPropertyManager=p},bdvg:function(e,t,i){"use strict";var o=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.createJsonValidator=t.getSchemaContextIsValidAgainst=t.getSchemaManifestIsValidAgainst=t.getSchemaLayoutIsValidAgainst=void 0;const n=i("DfD7"),r=o(i("vLDs")),a=i("4KZH"),s="TakxValidator",c="https://raw.githubusercontent.com/microsoft/xbox-game-streaming-tools/main/touch-adaptation-kit/schemas/";function l(e,t,i,o,r){var l;const u=null!==(l=i.$schema)&&void 0!==l?l:`${c}${e}`;let d="";i.$schema||(d=`Takx ${e} schema version was not specified.`,o.log(s,n.LogLevel.Warn,d),r(d));let p=a.TakxInternalConstants.SchemaAlternateNames.get(u);if(p&&t.getSchema(p)){if(t.validate(p,i))return p;d=`Takx ${e} not valid against specified schema: ${t.errorsText(void 0,{separator:"\n",dataVar:e})}.`,o.log(s,n.LogLevel.Warn,d),r(d)}else d=`Takx ${e} schema version was not a known schema.`,o.log(s,n.LogLevel.Warn,d),r(d);if(o.log(s,n.LogLevel.Info,"Falling back to validation against latest schema"),p=`${c}${e}/latest/${e}.json`,t.getSchema(p)&&t.validate(p,i))return p;d=`Takx ${e} not valid against latest schema: ${t.errorsText(void 0,{separator:"\n",dataVar:e})}.`,o.log(s,n.LogLevel.Info,d),r(d)}t.getSchemaLayoutIsValidAgainst=function(e,t,i,o){return l("layout",e,t,i,o)},t.getSchemaManifestIsValidAgainst=function(e,t,i,o){return l("manifest",e,t,i,o)},t.getSchemaContextIsValidAgainst=function(e,t,i,o){return l("context",e,t,i,o)},t.createJsonValidator=function(e){e.log(s,n.LogLevel.Info,"Creating JSON validator");const t=new r.default({allErrors:!0});for(const i of a.TakxInternalConstants.Schemas)t.addSchema(i);return t}},bu9z:function(e,t,i){"use strict";e.exports=function(e,t,i){var o=" ",n=e.level,r=e.dataLevel,a=e.schema[t],s=e.schemaPath+e.util.getProperty(t),c=e.errSchemaPath+"/"+t,l=!e.opts.allErrors,u="data"+(r||""),d="valid"+n,p="errs__"+n,h=e.util.copy(e),f="";h.level++;var y="valid"+h.level,g=h.baseId,m="prevValid"+n,v="passingSchemas"+n;o+="var "+p+" = errors , "+m+" = false , "+d+" = false , "+v+" = null; ";var b=e.compositeRule;e.compositeRule=h.compositeRule=!0;var S=a;if(S)for(var k,P=-1,w=S.length-1;P<w;)k=S[P+=1],(e.opts.strictKeywords?"object"==typeof k&&Object.keys(k).length>0||!1===k:e.util.schemaHasRules(k,e.RULES.all))?(h.schema=k,h.schemaPath=s+"["+P+"]",h.errSchemaPath=c+"/"+P,o+="  "+e.validate(h)+" ",h.baseId=g):o+=" var "+y+" = true; ",P&&(o+=" if ("+y+" && "+m+") { "+d+" = false; "+v+" = ["+v+", "+P+"]; } else { ",f+="}"),o+=" if ("+y+") { "+d+" = "+m+" = true; "+v+" = "+P+"; }";return e.compositeRule=h.compositeRule=b,o+=f+"if (!"+d+") {   var err =   ",!1!==e.createErrors?(o+=" { keyword: 'oneOf' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(c)+" , params: { passingSchemas: "+v+" } ",!1!==e.opts.messages&&(o+=" , message: 'should match exactly one schema in oneOf' "),e.opts.verbose&&(o+=" , schema: validate.schema"+s+" , parentSchema: validate.schema"+e.schemaPath+" , data: "+u+" "),o+=" } "):o+=" {} ",o+=";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",!e.compositeRule&&l&&(e.async?o+=" throw new ValidationError(vErrors); ":o+=" validate.errors = vErrors; return false; "),o+="} else {  errors = "+p+"; if (vErrors !== null) { if ("+p+") vErrors.length = "+p+"; else vErrors = null; }",e.opts.allErrors&&(o+=" } "),o}},cAaO:function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.CaseInsensitiveMap=void 0;class o extends Map{get(e){return super.get(e.toLocaleLowerCase())}set(e,t){return super.set(e.toLocaleLowerCase(),t)}}t.CaseInsensitiveMap=o},crjp:function(e,t,i){"use strict";var o=["multipleOf","maximum","exclusiveMaximum","minimum","exclusiveMinimum","maxLength","minLength","pattern","additionalItems","maxItems","minItems","uniqueItems","maxProperties","minProperties","required","additionalProperties","enum","format","const"];e.exports=function(e,t){for(var i=0;i<t.length;i++){e=JSON.parse(JSON.stringify(e));var n,r=t[i].split("/"),a=e;for(n=1;n<r.length;n++)a=a[r[n]];for(n=0;n<o.length;n++){var s=o[n],c=a[s];c&&(a[s]={anyOf:[c,{$ref:"https://raw.githubusercontent.com/ajv-validator/ajv/master/lib/refs/data.json#"}]})}}return e}},cvzu:function(e,t,i){"use strict";var o=this&&this.__decorate||function(e,t,i,o){var n,r=arguments.length,a=r<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,i):o;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)a=Reflect.decorate(e,t,i,o);else for(var s=e.length-1;s>=0;s--)(n=e[s])&&(a=(r<3?n(a):r>3?n(t,i,a):n(t,i))||a);return r>3&&a&&Object.defineProperty(t,i,a),a},n=this&&this.__metadata||function(e,t){if("object"===typeof Reflect&&"function"===typeof Reflect.metadata)return Reflect.metadata(e,t)},r=this&&this.__param||function(e,t){return function(i,o){t(i,o,e)}};Object.defineProperty(t,"__esModule",{value:!0}),t.LatestPointerRenderControl=t.RenderControl=t.Control=void 0;const a=i("s6Xb"),s=i("LcNk"),c=i("YfSF"),l=i("dP60"),u=i("MTv4"),d=i("zrWA"),p=i("Ledy"),h=i("a79a"),f=i("AYPR"),y=i("kEja");let g=class{constructor(e){this._identifier=(0,y.getControlIdentifier)(e.getProps()),this.model=e}get identifier(){return this._identifier}get type(){return this.model.getProps().type}mount(){this.propSubscription=this.model.props$.pipe((0,c.startWith)(this.model.getProps()),(0,c.pairwise)()).subscribe(this.onPropsChanged.bind(this))}unmount(){var e;this.model.unmount(),null===(e=this.propSubscription)||void 0===e||e.unsubscribe()}onPropsChanged(e){var t;const[i,o]=e;i.type===o.type&&i.socket===o.socket||(this._identifier=(0,y.getControlIdentifier)(o)),null===(t=this.onPropsChangedInternal)||void 0===t||t.call(this,e)}};g=o([(0,a.injectable)(),n("design:paramtypes",[Function])],g),t.Control=g;let m=class extends g{constructor(e,t,i){super(t),this.compatibleTouchEventTarget=p.TouchEventTarget.TAK,this.compatibleInteractionMode=d.UIInteractionMode.Gameplay,this.pointerTracker=new l.PointerTracker,this.isRenderDirty=!1,this.isMounted=!1,this.renderFrameRefCount=0,this.inUndimmableState=new f.PairwiseValue(!1),this.state$=new s.BehaviorSubject(e),this.userInterface=i,this._renderStream=new s.ReplaySubject(1)}get renderStream(){return this._renderStream}get visible(){return!1!==this.model.getProps().visible}mount(){super.mount(),this.isMounted=!0,this.stateSubscription=this.state$.subscribe(e=>this.renderPropertyManager.updateState(e)),this.renderPropertyManager.isDimmable?this.opacityMultiplierSubscription=this.userInterface.getOpacityMultiplierStream().subscribe(this.onOpacityMultiplierChanged.bind(this)):this.updateRenderProperties(),this.mountInternal&&this.mountInternal()}unmount(){var e,t;super.unmount(),null===(e=this.stateSubscription)||void 0===e||e.unsubscribe(),null===(t=this.opacityMultiplierSubscription)||void 0===t||t.unsubscribe(),this.model.unmount(),this.isMounted=!1,this.unmountInternal&&this.unmountInternal()}getState(){return this.state$.getValue()}allowsRolloverInteraction(){return!1}canBeInteractedWith(e,t){var i;return this.visible&&h.Flags.HasOverlap(this.compatibleTouchEventTarget,null!==(i=e.touchTarget)&&void 0!==i?i:p.TouchEventTarget.All)&&h.Flags.HasOverlap(this.compatibleInteractionMode,t)}collidesWith(e){if(this.customCollider)return this.customCollider(e);{const t=this.model.getProps();if(t.socket&&t.collider)return t.collider(e)}return!1}startRenderFrame(){this.renderFrameRefCount++}endRenderFrame(){this.renderFrameRefCount--,0===this.renderFrameRefCount&&this.isRenderDirty&&(this.isRenderDirty=!1,this.updateRenderProperties())}undim(){this.renderPropertyManager.undim()}dim(){this.renderPropertyManager.dim()}onPointerDataUpdated(e){if(this.isMounted){switch(e.state){case u.PointerState.Start:this.pointerTracker.tryPushFront(e);break;case u.PointerState.Move:this.pointerTracker.updatePointerData(e);break;case u.PointerState.End:this.pointerTracker.removeByPointerIndex(e.pointerIndex)}this.triggerPointerEvent(e)}}setState(e){this.state$.next(e)}onStateChanged(e){var t;if(this.isMounted&&(this.inUndimmableState.set(this.getIsStateUndimmable(e)),this.onStateChangedInternal||this.inUndimmableState.changed)){this.startRenderFrame();try{this.isRenderDirty=!0,null===(t=this.onStateChangedInternal)||void 0===t||t.call(this,e),this.inUndimmableState.current&&!this.inUndimmableState.previous?this.undim():!this.inUndimmableState.current&&this.inUndimmableState.previous&&this.dim()}finally{this.endRenderFrame()}}}triggerPointerEvent(e){var t,i,o,n,r,a;switch(e.state){case u.PointerState.Start:(null===(t=this.onPointerStart)||void 0===t?void 0:t.call(this,e))&&(null===(i=this.onStateChanged)||void 0===i||i.call(this,this.getState()));break;case u.PointerState.Move:(null===(o=this.onPointerMove)||void 0===o?void 0:o.call(this,e))&&(null===(n=this.onStateChanged)||void 0===n||n.call(this,this.getState()));break;case u.PointerState.End:(null===(r=this.onPointerEnd)||void 0===r?void 0:r.call(this,e))&&(null===(a=this.onStateChanged)||void 0===a||a.call(this,this.getState()))}}onPropsChanged(e){const[,t]=e;super.onPropsChanged(e),this.renderPropertyManager.updateProps(t),this.onStateChanged(this.getState())}onOpacityMultiplierChanged(e){if(this.renderPropertyManager.willOpacityMultiplierChangesCauseUpdates(e)){this.startRenderFrame();try{this.isRenderDirty=!0,this.renderPropertyManager.updateOpacityMultiplier(e)}finally{this.endRenderFrame()}}}updateRenderProperties(){this._renderStream.next(this.renderPropertyManager.getRenderProperties())}};m=o([(0,a.injectable)(),r(0,(0,a.unmanaged)()),n("design:paramtypes",[Object,Function,Function])],m),t.RenderControl=m;let v=class extends m{constructor(e,t,i){super(e,t,i)}get latestPointer(){return this.pointerTracker.peekFront()}triggerPointerEvent(e){var t;switch(e.state){case u.PointerState.Start:case u.PointerState.Move:if(e.pointerIndex!==(null===(t=this.latestPointer)||void 0===t?void 0:t.pointerIndex))return;return void super.triggerPointerEvent(e);case u.PointerState.End:{const t=this.latestPointer;return t?t.state===u.PointerState.End?void 0:(t.state=u.PointerState.Move,t.lastPositionDelta.x=0,t.lastPositionDelta.y=0,void super.triggerPointerEvent(t)):void super.triggerPointerEvent(e)}}}};v=o([(0,a.injectable)(),r(0,(0,a.unmanaged)()),n("design:paramtypes",[Object,Function,Function])],v),t.LatestPointerRenderControl=v},cwRv:function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ControlContainerType=void 0,function(e){e[e.RenderControlContainer=0]="RenderControlContainer",e[e.SensorControlContainer=1]="SensorControlContainer"}(t.ControlContainerType||(t.ControlContainerType={}))},d5rz:function(e,t,i){"use strict";var o=e.exports=function(e,t,i){"function"==typeof t&&(i=t,t={}),function e(t,i,n,r,a,s,c,l,u,d){if(r&&"object"==typeof r&&!Array.isArray(r)){for(var p in i(r,a,s,c,l,u,d),r){var h=r[p];if(Array.isArray(h)){if(p in o.arrayKeywords)for(var f=0;f<h.length;f++)e(t,i,n,h[f],a+"/"+p+"/"+f,s,a,p,r,f)}else if(p in o.propsKeywords){if(h&&"object"==typeof h)for(var y in h)e(t,i,n,h[y],a+"/"+p+"/"+y.replace(/~/g,"~0").replace(/\//g,"~1"),s,a,p,r,y)}else(p in o.keywords||t.allKeys&&!(p in o.skipKeywords))&&e(t,i,n,h,a+"/"+p,s,a,p,r)}n(r,a,s,c,l,u,d)}}(t,"function"==typeof(i=t.cb||i)?i:i.pre||function(){},i.post||function(){},e,"",e)};o.keywords={additionalItems:!0,items:!0,contains:!0,additionalProperties:!0,propertyNames:!0,not:!0},o.arrayKeywords={items:!0,allOf:!0,anyOf:!0,oneOf:!0},o.propsKeywords={definitions:!0,properties:!0,patternProperties:!0,dependencies:!0},o.skipKeywords={default:!0,enum:!0,const:!0,required:!0,maximum:!0,minimum:!0,exclusiveMaximum:!0,exclusiveMinimum:!0,multipleOf:!0,maxLength:!0,minLength:!0,pattern:!0,format:!0,maxItems:!0,minItems:!0,uniqueItems:!0,maxProperties:!0,minProperties:!0}},dP60:function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.PointerTracker=void 0;const o=i("wV8u"),n=i("MTv4");class r extends o.PooledList{constructor(){super(n.MAX_SIMULTANEOUS_POINTERS)}peekAtPointerIndex(e){if(!(e>=this._nodes.length))return this._nodes[e].value}updatePointerData(e){e.pointerIndex>=this._nodes.length||(this._nodes[e.pointerIndex].value=e)}removeByPointerIndex(e){if(!(e>=this._nodes.length))return this.removeNode(this._nodes[e])}getFreeNode(e){if(e.pointerIndex>=this._nodes.length)return;const t=this._nodes[e.pointerIndex];return t.value?(this.removeNode(t),this.getFreeNode(e)):(this._freeNodeCount--,t.value=e,t)}returnFreeNode(e){e.value&&this._freeNodeCount++,e.next=void 0,e.previous=void 0,e.value=void 0}}t.PointerTracker=r},diTm:function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.stringify=void 0;t.stringify=e=>"object"!==typeof e||e instanceof Error?String(e):JSON.stringify(e)},e7V4:function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getDefaultActivatedJoystickKnobStyle=t.getDefaultActivatedJoystickOutlineStyle=t.getDefaultActivatedJoystickBackground=t.getDefaultMovingJoystickKnobStyle=t.getDefaultMovingJoystickOutlineStyle=t.getDefaultMovingJoystickBackground=t.getDefaultIdleJoystickKnobStyle=t.getDefaultIdleJostickOutlineStyle=t.getDefaultIdleJoystickBackground=t.getDefaultDisabledJoystickKnobStyle=t.getDefaultDisabledJoystickOutlineStyle=t.getDefaultDisabledJoystickBackground=t.getDefaultHiddenJoystickKnobStyle=t.getDefaultHiddenJoystickOutlineStyle=t.getDefaultHiddenJoystickBackground=t.DefaultJoystickKnobFaceImageOffset=t.DefaultJoystickKnobFaceImageAnimationEnergy=t.DefaultJoystickKnobFaceImageOpacity=t.DefaultJoystickKnobFaceImageScale=t.DefaultJoystickKnobFaceImageDisplayShadow=t.getDefaultJoystickKnobFaceImageLabel=t.getDefaultJoystickKnobFaceImageColor=t.DefaultJoystickOpacity=void 0;const o=i("Zd/9"),n=i("kU1o"),r=i("PFUz"),a=i("yi9v"),s=i("SqAV"),c=i("3/FZ");t.DefaultJoystickOpacity=1,t.getDefaultJoystickKnobFaceImageColor=function(){return{r:1,g:1,b:1,a:1,string:o.WHITE_ALPHA_100}},t.getDefaultJoystickKnobFaceImageLabel=function(){return{type:r.FaceImageLabelRenderType.None,fillType:r.FaceImageLabelRenderFillType.None,color:{r:1,g:1,b:1,a:1,string:o.WHITE_ALPHA_100},value:a.EmptyIcon,offset:{x:0,y:0}}},t.DefaultJoystickKnobFaceImageDisplayShadow=!0,t.DefaultJoystickKnobFaceImageScale=1,t.DefaultJoystickKnobFaceImageOpacity=1,t.DefaultJoystickKnobFaceImageAnimationEnergy=n.AnimationEnergy.Instant,t.DefaultJoystickKnobFaceImageOffset={x:0,y:0},t.getDefaultHiddenJoystickBackground=function(){return{type:"color",value:{r:0,g:0,b:0,a:0,string:o.TRANSPARENT},opacity:0}},t.getDefaultHiddenJoystickOutlineStyle=function(){return{stroke:{type:s.StrokeType.Solid,color:{r:0,g:0,b:0,a:0,string:o.TRANSPARENT},opacity:0},indicator:{type:"color",value:{r:0,g:0,b:0,a:0,string:o.TRANSPARENT},opacity:0,visible:!1},opacity:0}},t.getDefaultHiddenJoystickKnobStyle=function(){return{background:{type:"color",value:{r:0,g:0,b:0,a:0,string:o.TRANSPARENT},opacity:0},stroke:{type:s.StrokeType.Solid,color:{r:0,g:0,b:0,a:0,string:o.TRANSPARENT},opacity:0},opacity:0}},t.getDefaultDisabledJoystickBackground=function(){return{type:"color",value:{r:0,g:0,b:0,a:0,string:o.TRANSPARENT},opacity:1}},t.getDefaultDisabledJoystickOutlineStyle=function(e){return{stroke:{type:s.StrokeType.Solid,color:{r:1,g:1,b:1,a:.9,string:o.WHITE_ALPHA_90},opacity:e?.25:0},indicator:{type:"color",value:{r:0,g:0,b:0,a:0,string:o.TRANSPARENT},opacity:0,visible:!1},opacity:1}},t.getDefaultDisabledJoystickKnobStyle=function(){return{background:{type:"color",value:{r:1,g:1,b:1,a:.1,string:o.WHITE_ALPHA_10},opacity:1},stroke:{type:s.StrokeType.Solid,color:{r:1,g:1,b:1,a:.9,string:o.WHITE_ALPHA_90},opacity:1},opacity:1}},t.getDefaultIdleJoystickBackground=function(){return{type:"color",value:{r:0,g:0,b:0,a:0,string:o.TRANSPARENT},opacity:1}},t.getDefaultIdleJostickOutlineStyle=function(e,t){return{stroke:{type:s.StrokeType.Solid,color:{r:1,g:1,b:1,a:1,string:o.WHITE_ALPHA_100},opacity:e?.25:t?0:.1},indicator:{type:"color",value:{r:0,g:0,b:0,a:0,string:o.TRANSPARENT},opacity:0,visible:!1},opacity:1}},t.getDefaultIdleJoystickKnobStyle=function(){return{background:{type:"color",value:{r:1,g:1,b:1,a:.1,string:o.WHITE_ALPHA_10},opacity:1},stroke:{type:s.StrokeType.Solid,color:{r:1,g:1,b:1,a:.9,string:o.WHITE_ALPHA_90},opacity:1},opacity:1}},t.getDefaultMovingJoystickBackground=function(){return{type:"color",value:{r:0,g:0,b:0,a:0,string:o.TRANSPARENT},opacity:1}},t.getDefaultMovingJoystickOutlineStyle=function(e){return{indicator:{type:"color",value:{r:1,g:1,b:1,a:1,string:o.WHITE_ALPHA_100},opacity:1,visible:!0},stroke:{type:s.StrokeType.Solid,color:{r:1,g:1,b:1,a:1,string:o.WHITE_ALPHA_100},opacity:e?.75:.1},opacity:1}},t.getDefaultMovingJoystickKnobStyle=function(){return{background:{type:"color",value:{r:1,g:1,b:1,a:.1,string:o.WHITE_ALPHA_10},opacity:1},stroke:{type:s.StrokeType.Solid,color:{r:1,g:1,b:1,a:.9,string:o.WHITE_ALPHA_90},opacity:1},opacity:1}},t.getDefaultActivatedJoystickBackground=function(){return{type:"color",value:{r:0,g:0,b:0,a:0,string:o.TRANSPARENT},opacity:1}},t.getDefaultActivatedJoystickOutlineStyle=function(e,t){const i=(0,c.getActionColorRgb)(t);return{indicator:{type:"color",value:{r:i.r,g:i.g,b:i.b,a:i.a,string:i.string},opacity:1,visible:!0},stroke:{type:s.StrokeType.Solid,color:{r:i.r,g:i.g,b:i.b,a:i.a,string:i.string},opacity:e?.75:.1},opacity:1}},t.getDefaultActivatedJoystickKnobStyle=function(e){const t=(0,c.getActionColorRgb)(e);return{background:{type:"color",value:{r:1,g:1,b:1,a:.1,string:o.WHITE_ALPHA_10},opacity:1},stroke:{type:s.StrokeType.Solid,color:{r:t.r,g:t.g,b:t.b,a:t.a,string:t.string},opacity:1},opacity:1}}},ew8Q:function(e,t,i){"use strict";i.d(t,"a",(function(){return n}));var o=i("ERkP");const n=Object(o.createContext)({});n.displayName="GameStream"},fUIH:function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.DirectionalPadDirection=t.DirectionalPadState=void 0,function(e){e[e.Hidden=0]="Hidden",e[e.Disabled=1]="Disabled",e[e.Idle=2]="Idle",e[e.Activated=3]="Activated"}(t.DirectionalPadState||(t.DirectionalPadState={})),function(e){e[e.None=0]="None",e[e.Up=1]="Up",e[e.UpAndRight=2]="UpAndRight",e[e.Right=3]="Right",e[e.RightAndDown=4]="RightAndDown",e[e.Down=5]="Down",e[e.DownAndLeft=6]="DownAndLeft",e[e.Left=7]="Left",e[e.LeftAndUp=8]="LeftAndUp"}(t.DirectionalPadDirection||(t.DirectionalPadDirection={}))},g5Cp:function(e,t,i){"use strict";function o(e,t){const i=t.x-e.x,o=t.y-e.y;return Math.sqrt(i*i+o*o)}function n(e){return o(e,t.ORIGIN)}function r(e,t){return t*Math.cos(e)}function a(e,t){return t*Math.sin(e)}Object.defineProperty(t,"__esModule",{value:!0}),t.positionToAngle=t.positionToDirection=t.directionToPositionY=t.directionToPositionX=t.directionToPosition=t.calculateMagnitude=t.calculateDistance=t.loopDistance=t.loop=t.clampRadial=t.clamp=t.ORIGIN=void 0,t.ORIGIN={x:0,y:0},t.clamp=function(e,t,i){return e<t?t:e>i?i:e},t.clampRadial=function(e,t){const i=n(e);return i<=t?e:{x:e.x*t/i,y:e.y*t/i}},t.loop=function e(t,i,o){const n=o-i+1;return t<i?e(t+n,i,o):t>o?e(t-n,i,o):t},t.loopDistance=function(e,t,i,o){const n=o-i,r=Math.abs(t-e),a=Math.abs(n-r);return r<a?r:a},t.calculateDistance=o,t.calculateMagnitude=n,t.directionToPosition=function(e,t){return{x:r(e,t),y:a(e,t)}},t.directionToPositionX=r,t.directionToPositionY=a,t.positionToDirection=function(e){return{angleInRadians:Math.atan2(e.y,e.x),radius:Math.sqrt(e.x*e.x+e.y*e.y)}},t.positionToAngle=function(e,t){return Math.atan2(t,e)}},gIIS:function(e,t,i){(function(e,t){!function(e,i){"use strict";if(!e.setImmediate){var o,n=1,r={},a=!1,s=e.document,c=Object.getPrototypeOf&&Object.getPrototypeOf(e);c=c&&c.setTimeout?c:e,"[object process]"==={}.toString.call(e.process)?o=function(e){t.nextTick((function(){u(e)}))}:function(){if(e.postMessage&&!e.importScripts){var t=!0,i=e.onmessage;return e.onmessage=function(){t=!1},e.postMessage("","*"),e.onmessage=i,t}}()?function(){var t="setImmediate$"+Math.random()+"$",i=function(i){i.source===e&&"string"===typeof i.data&&0===i.data.indexOf(t)&&u(+i.data.slice(t.length))};e.addEventListener?e.addEventListener("message",i,!1):e.attachEvent("onmessage",i),o=function(i){e.postMessage(t+i,"*")}}():e.MessageChannel?function(){var e=new MessageChannel;e.port1.onmessage=function(e){u(e.data)},o=function(t){e.port2.postMessage(t)}}():s&&"onreadystatechange"in s.createElement("script")?function(){var e=s.documentElement;o=function(t){var i=s.createElement("script");i.onreadystatechange=function(){u(t),i.onreadystatechange=null,e.removeChild(i),i=null},e.appendChild(i)}}():o=function(e){setTimeout(u,0,e)},c.setImmediate=function(e){"function"!==typeof e&&(e=new Function(""+e));for(var t=new Array(arguments.length-1),i=0;i<t.length;i++)t[i]=arguments[i+1];var a={callback:e,args:t};return r[n]=a,o(n),n++},c.clearImmediate=l}function l(e){delete r[e]}function u(e){if(a)setTimeout(u,0,e);else{var t=r[e];if(t){a=!0;try{!function(e){var t=e.callback,i=e.args;switch(i.length){case 0:t();break;case 1:t(i[0]);break;case 2:t(i[0],i[1]);break;case 3:t(i[0],i[1],i[2]);break;default:t.apply(void 0,i)}}(t)}finally{l(e),a=!1}}}}}("undefined"===typeof self?"undefined"===typeof e?this:e:self)}).call(this,i("fRV1"),i("F63i"))},gJ6f:function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ControlType=void 0,function(e){e.Accelerometer="accelerometer",e.ArcadeButtons="arcadeButtons",e.Blank="blank",e.Button="button",e.DirectionalPad="directionalPad",e.ErgoAdjustor="ergoAdjustor",e.Gyroscope="gyroscope",e.Joystick="joystick",e.Throttle="throttle",e.TouchForwarding="touchForwarding",e.Touchpad="touchpad"}(t.ControlType||(t.ControlType={}))},gfMA:function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.copyRenderControlRenderProps=t.areRenderControlRenderPropsEqual=void 0;const o=i("vOfS");t.areRenderControlRenderPropsEqual=function(e,t){return!!(e===t||e&&t&&e.x===t.x&&e.y===t.y&&e.type===t.type&&e.rotation===t.rotation&&(0,o.areAnimatableValuesEqual)(e.opacity,t.opacity))},t.copyRenderControlRenderProps=function(e){return{opacity:(0,o.copyAnimatableValue)(e.opacity),rotation:e.rotation,type:e.type,x:e.x,y:e.y}}},hMoK:function(e,t,i){"use strict";var o=i("yJ6u").MissingRef;e.exports=function e(t,i,n){var r=this;if("function"!=typeof this._opts.loadSchema)throw new Error("options.loadSchema should be a function");"function"==typeof i&&(n=i,i=void 0);var a=s(t).then((function(){var e=r._addSchema(t,void 0,i);return e.validate||function e(t){try{return r._compile(t)}catch(a){if(a instanceof o)return n(a);throw a}function n(o){var n=o.missingSchema;if(l(n))throw new Error("Schema "+n+" is loaded but "+o.missingRef+" cannot be resolved");var a=r._loadingSchemas[n];return a||(a=r._loadingSchemas[n]=r._opts.loadSchema(n)).then(c,c),a.then((function(e){if(!l(n))return s(e).then((function(){l(n)||r.addSchema(e,n,void 0,i)}))})).then((function(){return e(t)}));function c(){delete r._loadingSchemas[n]}function l(e){return r._refs[e]||r._schemas[e]}}}(e)}));n&&a.then((function(e){n(null,e)}),n);return a;function s(t){var i=t.$schema;return i&&!r.getSchema(i)?e.call(r,{$ref:i},!0):Promise.resolve()}}},hPTi:function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.EmptyIcon=t.FaceImageLabelRenderType=t.FaceImageLabelRenderFillType=t.areFaceImageRenderPropsEqual=t.ControlType=t.areColorsEqual=t.areBackgroundRenderPropsEqual=t.AnimationEnergy=t.TouchEventTarget=t.PointerType=t.TelemetryEventNames=t.TAKContainer=t.TAKActionNames=t.UIInteractionMode=t.DefaultStylingConfigurations=t.DefaultRuntimeOptions=t.InputModalityTracker=t.LeastRecentlyUsedCache=t.copyTouchpadWrapperRenderProps=t.copyTouchpadRenderProps=t.areTouchpadRenderPropsEqual=t.copyThrottleRenderProps=t.areThrottleRenderPropsEqual=t.areThrottleAxesStyleRenderPropsEqual=t.areThrottleAxesRenderPropsEqual=t.JoystickType=t.copyJoystickRenderProps=t.areJoystickRenderPropsEqual=t.areJoystickOutlineStyleRenderPropsEqual=t.areJoystickOutlineRenderPropsEqual=t.copyErgoAdjustorRenderProps=t.areErgoAdjustorRenderPropsEqual=t.areErgoAdjustorOuterRingRenderPropsEqual=t.areErgoAdjustorOriginIndicatorRenderPropsEqual=t.areErgoAdjustorInnerRingRenderPropsEqual=t.DirectionalPadDirection=t.copyDirectionalPadRenderProps=t.areDirectionalPadStyleRenderPropsEqual=t.areDirectionalPadRenderPropsEqual=t.copyRenderControlRenderProps=t.areRenderControlRenderPropsEqual=t.copyButtonRenderProps=t.areButtonRenderPropsEqual=t.copyArcadeButtonsRenderProps=t.areArcadeButtonsRowActivatorsRenderPropsEqual=t.areArcadeButtonsRowActivatorRenderPropsEqual=t.areArcadeButtonsRenderPropsEqual=t.STROKE_WIDTH=t.KNOB_SIZE=t.ICON_SIZE=void 0,t.isPositionable=t.isLoadedSpritesheetFile=t.SystemLayouts=t.PreferredInputModality=t.isTouchSupportedForTitle=t.doesLayoutUseSensors=t.defaultUserOverrideLayout=t.opacityMappingUtils=t.clamp=t.gyroMappingUtils=t.ScreenOrientation=t.DeviceSensorOrientation=t.TakxConstants=t.StrokeType=t.areStrokeRenderPropsEqual=t.arePullIndicatorRenderPropsEqual=t.areKnobStyleRenderPropsEqual=t.areKnobRenderPropsEqual=void 0,i("qzOT");var o=i("2ZOr");Object.defineProperty(t,"ICON_SIZE",{enumerable:!0,get:function(){return o.ICON_SIZE}}),Object.defineProperty(t,"KNOB_SIZE",{enumerable:!0,get:function(){return o.KNOB_SIZE}}),Object.defineProperty(t,"STROKE_WIDTH",{enumerable:!0,get:function(){return o.STROKE_WIDTH}});var n=i("kJGW");Object.defineProperty(t,"areArcadeButtonsRenderPropsEqual",{enumerable:!0,get:function(){return n.areArcadeButtonsRenderPropsEqual}}),Object.defineProperty(t,"areArcadeButtonsRowActivatorRenderPropsEqual",{enumerable:!0,get:function(){return n.areArcadeButtonsRowActivatorRenderPropsEqual}}),Object.defineProperty(t,"areArcadeButtonsRowActivatorsRenderPropsEqual",{enumerable:!0,get:function(){return n.areArcadeButtonsRowActivatorsRenderPropsEqual}}),Object.defineProperty(t,"copyArcadeButtonsRenderProps",{enumerable:!0,get:function(){return n.copyArcadeButtonsRenderProps}});var r=i("Tt8o");Object.defineProperty(t,"areButtonRenderPropsEqual",{enumerable:!0,get:function(){return r.areButtonRenderPropsEqual}}),Object.defineProperty(t,"copyButtonRenderProps",{enumerable:!0,get:function(){return r.copyButtonRenderProps}});var a=i("gfMA");Object.defineProperty(t,"areRenderControlRenderPropsEqual",{enumerable:!0,get:function(){return a.areRenderControlRenderPropsEqual}}),Object.defineProperty(t,"copyRenderControlRenderProps",{enumerable:!0,get:function(){return a.copyRenderControlRenderProps}});var s=i("5F1E");Object.defineProperty(t,"areDirectionalPadRenderPropsEqual",{enumerable:!0,get:function(){return s.areDirectionalPadRenderPropsEqual}}),Object.defineProperty(t,"areDirectionalPadStyleRenderPropsEqual",{enumerable:!0,get:function(){return s.areDirectionalPadStyleRenderPropsEqual}}),Object.defineProperty(t,"copyDirectionalPadRenderProps",{enumerable:!0,get:function(){return s.copyDirectionalPadRenderProps}});var c=i("fUIH");Object.defineProperty(t,"DirectionalPadDirection",{enumerable:!0,get:function(){return c.DirectionalPadDirection}});var l=i("j047");Object.defineProperty(t,"areErgoAdjustorInnerRingRenderPropsEqual",{enumerable:!0,get:function(){return l.areErgoAdjustorInnerRingRenderPropsEqual}}),Object.defineProperty(t,"areErgoAdjustorOriginIndicatorRenderPropsEqual",{enumerable:!0,get:function(){return l.areErgoAdjustorOriginIndicatorRenderPropsEqual}}),Object.defineProperty(t,"areErgoAdjustorOuterRingRenderPropsEqual",{enumerable:!0,get:function(){return l.areErgoAdjustorOuterRingRenderPropsEqual}}),Object.defineProperty(t,"areErgoAdjustorRenderPropsEqual",{enumerable:!0,get:function(){return l.areErgoAdjustorRenderPropsEqual}}),Object.defineProperty(t,"copyErgoAdjustorRenderProps",{enumerable:!0,get:function(){return l.copyErgoAdjustorRenderProps}});var u=i("q1Ul");Object.defineProperty(t,"areJoystickOutlineRenderPropsEqual",{enumerable:!0,get:function(){return u.areJoystickOutlineRenderPropsEqual}}),Object.defineProperty(t,"areJoystickOutlineStyleRenderPropsEqual",{enumerable:!0,get:function(){return u.areJoystickOutlineStyleRenderPropsEqual}}),Object.defineProperty(t,"areJoystickRenderPropsEqual",{enumerable:!0,get:function(){return u.areJoystickRenderPropsEqual}}),Object.defineProperty(t,"copyJoystickRenderProps",{enumerable:!0,get:function(){return u.copyJoystickRenderProps}});var d=i("wQyi");Object.defineProperty(t,"JoystickType",{enumerable:!0,get:function(){return d.JoystickType}});var p=i("EArA");Object.defineProperty(t,"areThrottleAxesRenderPropsEqual",{enumerable:!0,get:function(){return p.areThrottleAxesRenderPropsEqual}}),Object.defineProperty(t,"areThrottleAxesStyleRenderPropsEqual",{enumerable:!0,get:function(){return p.areThrottleAxesStyleRenderPropsEqual}}),Object.defineProperty(t,"areThrottleRenderPropsEqual",{enumerable:!0,get:function(){return p.areThrottleRenderPropsEqual}}),Object.defineProperty(t,"copyThrottleRenderProps",{enumerable:!0,get:function(){return p.copyThrottleRenderProps}});var h=i("Cjht");Object.defineProperty(t,"areTouchpadRenderPropsEqual",{enumerable:!0,get:function(){return h.areTouchpadRenderPropsEqual}}),Object.defineProperty(t,"copyTouchpadRenderProps",{enumerable:!0,get:function(){return h.copyTouchpadRenderProps}}),Object.defineProperty(t,"copyTouchpadWrapperRenderProps",{enumerable:!0,get:function(){return h.copyTouchpadWrapperRenderProps}});var f=i("wV8u");Object.defineProperty(t,"LeastRecentlyUsedCache",{enumerable:!0,get:function(){return f.LeastRecentlyUsedCache}});var y=i("wvgg");Object.defineProperty(t,"InputModalityTracker",{enumerable:!0,get:function(){return y.InputModalityTracker}});var g=i("KhT9");Object.defineProperty(t,"DefaultRuntimeOptions",{enumerable:!0,get:function(){return g.DefaultRuntimeOptions}});var m=i("zrWA");Object.defineProperty(t,"DefaultStylingConfigurations",{enumerable:!0,get:function(){return m.DefaultStylingConfigurations}}),Object.defineProperty(t,"UIInteractionMode",{enumerable:!0,get:function(){return m.UIInteractionMode}});var v=i("DjZ3");Object.defineProperty(t,"TAKActionNames",{enumerable:!0,get:function(){return v.TAKActionNames}}),Object.defineProperty(t,"TAKContainer",{enumerable:!0,get:function(){return v.TAKContainer}});var b=i("7HJd");Object.defineProperty(t,"TelemetryEventNames",{enumerable:!0,get:function(){return b.TelemetryEventNames}});var S=i("Ledy");Object.defineProperty(t,"PointerType",{enumerable:!0,get:function(){return S.PointerType}}),Object.defineProperty(t,"TouchEventTarget",{enumerable:!0,get:function(){return S.TouchEventTarget}});var k=i("kU1o");Object.defineProperty(t,"AnimationEnergy",{enumerable:!0,get:function(){return k.AnimationEnergy}});var P=i("iZJm");Object.defineProperty(t,"areBackgroundRenderPropsEqual",{enumerable:!0,get:function(){return P.areBackgroundRenderPropsEqual}});var w=i("V2pq");Object.defineProperty(t,"areColorsEqual",{enumerable:!0,get:function(){return w.areColorsEqual}});var A=i("gJ6f");Object.defineProperty(t,"ControlType",{enumerable:!0,get:function(){return A.ControlType}});var I=i("PFUz");Object.defineProperty(t,"areFaceImageRenderPropsEqual",{enumerable:!0,get:function(){return I.areFaceImageRenderPropsEqual}}),Object.defineProperty(t,"FaceImageLabelRenderFillType",{enumerable:!0,get:function(){return I.FaceImageLabelRenderFillType}}),Object.defineProperty(t,"FaceImageLabelRenderType",{enumerable:!0,get:function(){return I.FaceImageLabelRenderType}});var T=i("yi9v");Object.defineProperty(t,"EmptyIcon",{enumerable:!0,get:function(){return T.EmptyIcon}});var C=i("j0qc");Object.defineProperty(t,"areKnobRenderPropsEqual",{enumerable:!0,get:function(){return C.areKnobRenderPropsEqual}}),Object.defineProperty(t,"areKnobStyleRenderPropsEqual",{enumerable:!0,get:function(){return C.areKnobStyleRenderPropsEqual}});var _=i("91AH");Object.defineProperty(t,"arePullIndicatorRenderPropsEqual",{enumerable:!0,get:function(){return _.arePullIndicatorRenderPropsEqual}});var E=i("SqAV");Object.defineProperty(t,"areStrokeRenderPropsEqual",{enumerable:!0,get:function(){return E.areStrokeRenderPropsEqual}}),Object.defineProperty(t,"StrokeType",{enumerable:!0,get:function(){return E.StrokeType}});var x=i("4KZH");Object.defineProperty(t,"TakxConstants",{enumerable:!0,get:function(){return x.TakxConstants}});var R=i("2++W");Object.defineProperty(t,"DeviceSensorOrientation",{enumerable:!0,get:function(){return R.DeviceSensorOrientation}}),Object.defineProperty(t,"ScreenOrientation",{enumerable:!0,get:function(){return R.ScreenOrientation}});var O=i("10bi");Object.defineProperty(t,"gyroMappingUtils",{enumerable:!0,get:function(){return O.gyroMappingUtils}});var D=i("g5Cp");Object.defineProperty(t,"clamp",{enumerable:!0,get:function(){return D.clamp}});var M=i("NUX/");Object.defineProperty(t,"opacityMappingUtils",{enumerable:!0,get:function(){return M.opacityMappingUtils}});var j=i("DG/1");Object.defineProperty(t,"defaultUserOverrideLayout",{enumerable:!0,get:function(){return j.defaultUserOverrideLayout}}),Object.defineProperty(t,"doesLayoutUseSensors",{enumerable:!0,get:function(){return j.doesLayoutUseSensors}}),Object.defineProperty(t,"isTouchSupportedForTitle",{enumerable:!0,get:function(){return j.isTouchSupportedForTitle}}),Object.defineProperty(t,"PreferredInputModality",{enumerable:!0,get:function(){return j.PreferredInputModality}}),Object.defineProperty(t,"SystemLayouts",{enumerable:!0,get:function(){return j.SystemLayouts}});var $=i("kEja");Object.defineProperty(t,"isLoadedSpritesheetFile",{enumerable:!0,get:function(){return $.isLoadedSpritesheetFile}}),Object.defineProperty(t,"isPositionable",{enumerable:!0,get:function(){return $.isPositionable}})},i0YN:function(e,t,i){"use strict";var o=i("xq3t");e.exports={$id:"https://github.com/ajv-validator/ajv/blob/master/lib/definition_schema.js",definitions:{simpleTypes:o.definitions.simpleTypes},type:"object",dependencies:{schema:["validate"],$data:["validate"],statements:["inline"],valid:{not:{required:["macro"]}}},properties:{type:o.properties.type,schema:{type:"boolean"},statements:{type:"boolean"},dependencies:{type:"array",items:{type:"string"}},metaSchema:{type:"object"},modifying:{type:"boolean"},valid:{type:"boolean"},$data:{type:"boolean"},async:{type:"boolean"},errors:{anyOf:[{type:"boolean"},{const:"full"}]}}}},iZJm:function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.copyBackgroundRenderProps=t.areBackgroundRenderPropsEqual=void 0;const o=i("V2pq");t.areBackgroundRenderPropsEqual=function(e,t){return e===t||function(e,t){return!!(e===t||e&&t&&"color"===e.type&&"color"===t.type&&e.opacity===t.opacity&&(0,o.areColorsEqual)(e.value,t.value))}(e,t)||function(e,t){return!!(e===t||e&&t&&"asset"===e.type&&"asset"===t.type&&e.opacity===t.opacity&&e.value===t.value)}(e,t)},t.copyBackgroundRenderProps=function(e){return"color"===e.type?function(e){return{opacity:e.opacity,type:e.type,value:(0,o.copyColor)(e.value)}}(e):function(e){return{opacity:e.opacity,type:e.type,value:e.value}}(e)}},iwGn:function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.buildEmptyArcadeButtonsRenderProperties=void 0;const o=i("kU1o"),n=i("gJ6f"),r=i("PFUz"),a=i("SqAV");t.buildEmptyArcadeButtonsRenderProperties=function(){return{rotation:0,rowActivators:{bottom:{radius:0,x:0,y:0},top:{radius:0,x:0,y:0}},type:n.ControlType.ArcadeButtons,x:0,y:0,lightPunch:{animationEnergy:o.AnimationEnergy.Instant,background:{opacity:0,type:"color",value:{r:0,g:0,b:0,a:0,string:"#00000000"}},faceImage:{animationEnergy:o.AnimationEnergy.Instant,color:{r:0,g:0,b:0,a:0,string:"#00000000"},displayShadow:!1,label:{color:{r:0,g:0,b:0,a:0,string:"#00000000"},fillType:r.FaceImageLabelRenderFillType.None,offset:{x:0,y:0},type:r.FaceImageLabelRenderType.None,value:"NO_ICON"},offset:{x:0,y:0},opacity:0,scale:0,type:"icon",value:"NO_ICON"},opacity:{energy:o.AnimationEnergy.Instant,value:0},pullIndicator:{color:{r:0,g:0,b:0,a:0,string:"#00000000"},opacity:0,radius:0,type:a.StrokeType.Solid,weight:0},radius:0,rotation:0,type:n.ControlType.Button,x:0,y:0},mediumPunch:{animationEnergy:o.AnimationEnergy.Instant,background:{opacity:0,type:"color",value:{r:0,g:0,b:0,a:0,string:"#00000000"}},faceImage:{animationEnergy:o.AnimationEnergy.Instant,color:{r:0,g:0,b:0,a:0,string:"#00000000"},displayShadow:!1,label:{color:{r:0,g:0,b:0,a:0,string:"#00000000"},fillType:r.FaceImageLabelRenderFillType.None,offset:{x:0,y:0},type:r.FaceImageLabelRenderType.None,value:"NO_ICON"},offset:{x:0,y:0},opacity:0,scale:0,type:"icon",value:"NO_ICON"},opacity:{energy:o.AnimationEnergy.Instant,value:0},pullIndicator:{color:{r:0,g:0,b:0,a:0,string:"#00000000"},opacity:0,radius:0,type:a.StrokeType.Solid,weight:0},radius:0,rotation:0,type:n.ControlType.Button,x:0,y:0},heavyPunch:{animationEnergy:o.AnimationEnergy.Instant,background:{opacity:0,type:"color",value:{r:0,g:0,b:0,a:0,string:"#00000000"}},faceImage:{animationEnergy:o.AnimationEnergy.Instant,color:{r:0,g:0,b:0,a:0,string:"#00000000"},displayShadow:!1,label:{color:{r:0,g:0,b:0,a:0,string:"#00000000"},fillType:r.FaceImageLabelRenderFillType.None,offset:{x:0,y:0},type:r.FaceImageLabelRenderType.None,value:"NO_ICON"},offset:{x:0,y:0},opacity:0,scale:0,type:"icon",value:"NO_ICON"},opacity:{energy:o.AnimationEnergy.Instant,value:0},pullIndicator:{color:{r:0,g:0,b:0,a:0,string:"#00000000"},opacity:0,radius:0,type:a.StrokeType.Solid,weight:0},radius:0,rotation:0,type:n.ControlType.Button,x:0,y:0},lightKick:{animationEnergy:o.AnimationEnergy.Instant,background:{opacity:0,type:"color",value:{r:0,g:0,b:0,a:0,string:"#00000000"}},faceImage:{animationEnergy:o.AnimationEnergy.Instant,color:{r:0,g:0,b:0,a:0,string:"#00000000"},displayShadow:!1,label:{color:{r:0,g:0,b:0,a:0,string:"#00000000"},fillType:r.FaceImageLabelRenderFillType.None,offset:{x:0,y:0},type:r.FaceImageLabelRenderType.None,value:"NO_ICON"},offset:{x:0,y:0},opacity:0,scale:0,type:"icon",value:"NO_ICON"},opacity:{energy:o.AnimationEnergy.Instant,value:0},pullIndicator:{color:{r:0,g:0,b:0,a:0,string:"#00000000"},opacity:0,radius:0,type:a.StrokeType.Solid,weight:0},radius:0,rotation:0,type:n.ControlType.Button,x:0,y:0},mediumKick:{animationEnergy:o.AnimationEnergy.Instant,background:{opacity:0,type:"color",value:{r:0,g:0,b:0,a:0,string:"#00000000"}},faceImage:{animationEnergy:o.AnimationEnergy.Instant,color:{r:0,g:0,b:0,a:0,string:"#00000000"},displayShadow:!1,label:{color:{r:0,g:0,b:0,a:0,string:"#00000000"},fillType:r.FaceImageLabelRenderFillType.None,offset:{x:0,y:0},type:r.FaceImageLabelRenderType.None,value:"NO_ICON"},offset:{x:0,y:0},opacity:0,scale:0,type:"icon",value:"NO_ICON"},opacity:{energy:o.AnimationEnergy.Instant,value:0},pullIndicator:{color:{r:0,g:0,b:0,a:0,string:"#00000000"},opacity:0,radius:0,type:a.StrokeType.Solid,weight:0},radius:0,rotation:0,type:n.ControlType.Button,x:0,y:0},heavyKick:{animationEnergy:o.AnimationEnergy.Instant,background:{opacity:0,type:"color",value:{r:0,g:0,b:0,a:0,string:"#00000000"}},faceImage:{animationEnergy:o.AnimationEnergy.Instant,color:{r:0,g:0,b:0,a:0,string:"#00000000"},displayShadow:!1,label:{color:{r:0,g:0,b:0,a:0,string:"#00000000"},fillType:r.FaceImageLabelRenderFillType.None,offset:{x:0,y:0},type:r.FaceImageLabelRenderType.None,value:"NO_ICON"},offset:{x:0,y:0},opacity:0,scale:0,type:"icon",value:"NO_ICON"},opacity:{energy:o.AnimationEnergy.Instant,value:0},pullIndicator:{color:{r:0,g:0,b:0,a:0,string:"#00000000"},opacity:0,radius:0,type:a.StrokeType.Solid,weight:0},radius:0,rotation:0,type:n.ControlType.Button,x:0,y:0},opacity:{energy:o.AnimationEnergy.Instant,value:1}}}},j047:function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.copyErgoAdjustorRenderProps=t.areErgoAdjustorRenderPropsEqual=t.copyErgoAdjustorOuterRingRenderProps=t.areErgoAdjustorOuterRingRenderPropsEqual=t.copyErgoAdjustorInnerRingRenderProps=t.areErgoAdjustorInnerRingRenderPropsEqual=t.copyErgoAdjustorOriginIndicatorRenderProps=t.areErgoAdjustorOriginIndicatorRenderPropsEqual=t.copyErgoAdjustorRotationIndicatorRenderProps=t.areErgoAdjustorRotationIndicatorRenderPropsEqual=void 0;const o=i("V2pq"),n=i("gfMA");function r(e,t){return!!(e===t||e&&t&&e.radius===t.radius&&(0,o.areColorsEqual)(e.color,t.color))}function a(e,t){return!!(e===t||e&&t&&e.width===t.width&&e.height===t.height&&e.rotation===t.rotation&&(0,o.areColorsEqual)(e.color,t.color))}function s(e){return{color:(0,o.copyColor)(e.color),height:e.height,rotation:e.rotation,width:e.width}}function c(e,t){return!!(e===t||e&&t&&e.width===t.width&&e.height===t.height&&e.opacity===t.opacity&&(0,o.areColorsEqual)(e.color,t.color))}function l(e){return{color:(0,o.copyColor)(e.color),height:e.height,opacity:e.opacity,width:e.width}}function u(e,t){return!!(e===t||e&&t&&e.rotation===t.rotation&&a(e.rotationIndicator,t.rotationIndicator)&&r(e,t))}function d(e){return{color:(0,o.copyColor)(e.color),radius:e.radius,rotation:e.rotation,rotationIndicator:s(e.rotationIndicator)}}function p(e,t){return!!(e===t||e&&t&&e.opacity===t.opacity&&r(e,t))}function h(e){return{color:(0,o.copyColor)(e.color),opacity:e.opacity,radius:e.radius}}t.areErgoAdjustorRotationIndicatorRenderPropsEqual=a,t.copyErgoAdjustorRotationIndicatorRenderProps=s,t.areErgoAdjustorOriginIndicatorRenderPropsEqual=c,t.copyErgoAdjustorOriginIndicatorRenderProps=l,t.areErgoAdjustorInnerRingRenderPropsEqual=u,t.copyErgoAdjustorInnerRingRenderProps=d,t.areErgoAdjustorOuterRingRenderPropsEqual=p,t.copyErgoAdjustorOuterRingRenderProps=h,t.areErgoAdjustorRenderPropsEqual=function(e,t){return!!(e===t||e&&t&&(0,n.areRenderControlRenderPropsEqual)(e,t)&&e.visible===t.visible&&u(e.innerRing,t.innerRing)&&p(e.outerRing,t.outerRing)&&c(e.originIndicator,t.originIndicator))},t.copyErgoAdjustorRenderProps=function(e){return Object.assign(Object.assign({},(0,n.copyRenderControlRenderProps)(e)),{innerRing:d(e.innerRing),originIndicator:l(e.originIndicator),outerRing:h(e.outerRing),type:e.type,visible:e.visible})}},j0qc:function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.copyThrottleKnobRenderProps=t.areKnobRenderPropsEqual=t.copyKnobRenderProps=t.copyThrottleKnobStyleRenderProps=t.copyKnobStyleRenderProps=t.areKnobStyleRenderPropsEqual=void 0;const o=i("iZJm"),n=i("PFUz"),r=i("SqAV");function a(e,t){return!!(e===t||e&&t&&e.opacity===t.opacity&&(0,o.areBackgroundRenderPropsEqual)(e.background,t.background)&&(0,n.areFaceImageRenderPropsEqual)(e.faceImage,t.faceImage)&&(0,r.areStrokeRenderPropsEqual)(e.stroke,t.stroke))}function s(e){return{background:(0,o.copyBackgroundRenderProps)(e.background),opacity:e.opacity,stroke:(0,r.copyStrokeRenderProps)(e.stroke),faceImage:e.faceImage?(0,n.copyFaceImageRenderProps)(e.faceImage):void 0}}function c(e){return{background:(0,o.copyBackgroundRenderProps)(e.background),faceImage:(0,n.copyFaceImageRenderProps)(e.faceImage),opacity:e.opacity,stroke:(0,r.copyStrokeRenderProps)(e.stroke)}}t.areKnobStyleRenderPropsEqual=a,t.copyKnobStyleRenderProps=s,t.copyThrottleKnobStyleRenderProps=c,t.copyKnobRenderProps=function(e){return{isAnimating:e.isAnimating,radius:e.radius,styleProps:s(e.styleProps),x:e.x,y:e.y}},t.areKnobRenderPropsEqual=function(e,t){return!!(e===t||e&&t&&e.x===t.x&&e.y===t.y&&e.radius===t.radius&&e.isAnimating===t.isAnimating&&a(e.styleProps,t.styleProps))},t.copyThrottleKnobRenderProps=function(e){return{isAnimating:e.isAnimating,radius:e.radius,styleProps:c(e.styleProps),x:e.x,y:e.y}}},jf7R:function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.LeastRecentlyUsedCache=void 0;const o=i("Hi9g");t.LeastRecentlyUsedCache=class{constructor(e,t){this._initialized=!1,this._cacheStorage=e,this._capacity=t,this._cacheKeys=new o.PooledList(t)}async initialize(){if(this._initialized)return;const e=await this._cacheStorage.readCacheInfo();for(const i of e)await this._cacheStorage.existCacheItem(i)&&(this._cacheKeys.size===this._capacity&&this._cacheKeys.popFront(),this._cacheKeys.tryPushBack(i));const t=await this._cacheStorage.getAllCacheKeys();for(const i of t)this.isCached(i)||await this._cacheStorage.deleteCacheItem(i);this._initialized=!0}async add(e,t){if(this._initialized){if(this._cacheKeys.removeFirstIf(t=>t===e));else if(this._cacheKeys.size===this._capacity){const e=this._cacheKeys.popFront();e&&await this._cacheStorage.deleteCacheItem(e)}this._cacheKeys.tryPushBack(e),await this.writeCacheInfo(),await this._cacheStorage.writeCacheItem(e,t)}}async get(e){if(this._initialized&&this.isCached(e))return this._cacheKeys.removeFirstIf(t=>t===e),this._cacheKeys.tryPushBack(e),await this.writeCacheInfo(),this._cacheStorage.readCacheItem(e)}async writeCacheInfo(){const e=new Array;this._cacheKeys.forEach(t=>{e.push(t)}),await this._cacheStorage.writeCacheInfo(e)}isCached(e){let t=!1;return this._cacheKeys.forEach(i=>{i===e&&(t=!0)}),t}}},kEja:function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.isSensorControl=t.getControlIdentifier=t.isFaceImageAsset=t.isFaceImageIcon=t.isLoadedSpritesheetFile=t.isTurboAction=t.isLayoutChangeAction=t.isLayoutLayerAction=t.isLayoutAction=t.isPositionable=t.isControllable=t.isContained=void 0;const o=i("gJ6f");function n(e){return e.hasOwnProperty("socket")}function r(e){return e.hasOwnProperty("type")}function a(e){return"layer"===e.type}function s(e){return"layout"===e.type}t.isContained=n,t.isControllable=r,t.isPositionable=function(e){return e.hasOwnProperty("x")&&e.hasOwnProperty("y")},t.isLayoutAction=function(e){return a(e)||s(e)},t.isLayoutLayerAction=a,t.isLayoutChangeAction=s,t.isTurboAction=function(e){return"turbo"===e.type},t.isLoadedSpritesheetFile=function(e){return void 0!==e.atlas},t.isFaceImageIcon=function(e){return"icon"===e.type},t.isFaceImageAsset=function(e){return"asset"===e.type},t.getControlIdentifier=function(e){return n(e)&&r(e)?`${e.socket}-${e.type}`:r(e)?""+e.type:"key-"+Math.random()},t.isSensorControl=function(e){return null!==e&&(e.type===o.ControlType.Gyroscope||e.type===o.ControlType.Accelerometer)}},kJGW:function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.copyArcadeButtonsRenderProps=t.areArcadeButtonsRenderPropsEqual=t.areArcadeButtonsRowActivatorsRenderPropsEqual=t.areArcadeButtonsRowActivatorRenderPropsEqual=void 0;const o=i("vOfS"),n=i("Tt8o"),r=i("gfMA");function a(e,t){return!!(e===t||e&&t&&e.radius===t.radius&&e.x===t.x&&e.y===t.y)}function s(e){return{radius:e.radius,x:e.x,y:e.y}}function c(e,t){return!!(e===t||e&&t&&a(e.top,t.top)&&a(e.bottom,t.bottom))}function l(e){return{top:s(e.top),bottom:s(e.bottom)}}t.areArcadeButtonsRowActivatorRenderPropsEqual=a,t.areArcadeButtonsRowActivatorsRenderPropsEqual=c,t.areArcadeButtonsRenderPropsEqual=function(e,t){return!!(e===t||e&&t&&(0,r.areRenderControlRenderPropsEqual)(e,t)&&c(e.rowActivators,t.rowActivators)&&(0,n.areButtonRenderPropsEqual)(e.lightPunch,t.lightPunch)&&(0,n.areButtonRenderPropsEqual)(e.mediumPunch,t.mediumPunch)&&(0,n.areButtonRenderPropsEqual)(e.heavyPunch,t.heavyPunch)&&(0,n.areButtonRenderPropsEqual)(e.specialPunch,t.specialPunch)&&(0,n.areButtonRenderPropsEqual)(e.lightKick,t.lightKick)&&(0,n.areButtonRenderPropsEqual)(e.mediumKick,t.mediumKick)&&(0,n.areButtonRenderPropsEqual)(e.heavyKick,t.heavyKick)&&(0,n.areButtonRenderPropsEqual)(e.specialKick,t.specialKick))},t.copyArcadeButtonsRenderProps=function(e){return{rotation:e.rotation,type:e.type,x:e.x,y:e.y,opacity:(0,o.copyAnimatableValue)(e.opacity),rowActivators:l(e.rowActivators),lightPunch:(0,n.copyButtonRenderProps)(e.lightPunch),mediumPunch:(0,n.copyButtonRenderProps)(e.mediumPunch),heavyPunch:(0,n.copyButtonRenderProps)(e.heavyPunch),specialPunch:e.specialPunch?(0,n.copyButtonRenderProps)(e.specialPunch):void 0,lightKick:(0,n.copyButtonRenderProps)(e.lightKick),mediumKick:(0,n.copyButtonRenderProps)(e.mediumKick),heavyKick:(0,n.copyButtonRenderProps)(e.heavyKick),specialKick:e.specialKick?(0,n.copyButtonRenderProps)(e.specialKick):void 0}}},kU1o:function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.AnimationEnergy=void 0,function(e){e[e.Instant=0]="Instant",e[e.Fastest=100]="Fastest",e[e.Fast=200]="Fast",e[e.Medium=400]="Medium",e[e.Slow=700]="Slow",e[e.Slowest=2400]="Slowest"}(t.AnimationEnergy||(t.AnimationEnergy={}))},l1ss:function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ThrottleState=void 0,function(e){e[e.Hidden=0]="Hidden",e[e.Disabled=1]="Disabled",e[e.Idle=2]="Idle",e[e.IdleUp=3]="IdleUp",e[e.Activated=4]="Activated",e[e.ActivatedUp=5]="ActivatedUp",e[e.ActivatedDown=6]="ActivatedDown"}(t.ThrottleState||(t.ThrottleState={}))},l4dA:function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.shallowCheckDistinctObjectDirty=t.isABXYButton=t.actionsAreEqual=t.hasLabel=t.getLabel=void 0;const o=i("PFUz"),n=i("yi9v"),r=i("kEja"),a=new Map([["leftTrigger","leftTriggerLetter"],["rightTrigger","rightTriggerLetter"],["leftBumper","leftBumperLetter"],["rightBumper","rightBumperLetter"],["dPadLeft","dPadLeftSolid"],["dPadRight","dPadRightSolid"],["dPadUp","dPadUpSolid"],["dPadDown","dPadDownSolid"],["leftThumb","leftThumbSolid"],["rightThumb","rightThumbSolid"],["view","viewSolid"],["menu","menuSolid"]]),s=new Map([["gamepadA","gamepadASolid"],["gamepadB","gamepadBSolid"],["gamepadX","gamepadXSolid"],["gamepadY","gamepadYSolid"]]);function c(e,t){if(null==e||null==t)return e===t;const i=(0,r.isLayoutAction)(e)&&(0,r.isLayoutAction)(t)&&function(e,t){return e.type===t.type&&("layer"===e.type&&"layer"===t.type?function(e,t){return e.target===t.target}(e,t):"layout"!==e.type||"layout"!==t.type||function(e,t){return e.layoutAction===t.layoutAction&&("show"!==e.layoutAction||"show"!==t.layoutAction||e.id===t.id)}(e,t))}(e,t),o=(0,r.isTurboAction)(e)&&(0,r.isTurboAction)(t)&&function(e,t){return e.action===t.action&&e.interval===t.interval}(e,t),n=Array.isArray(e)&&Array.isArray(t)&&function(e,t){if(e.length!==t.length)return!1;for(let i=0;i<e.length;i++)if(!c(e[i],t[i]))return!1;return!0}(e,t);return i||o||n||e===t}t.getLabel=function(e,t,i){if(i===o.FaceImageLabelRenderType.None||i===o.FaceImageLabelRenderType.Action&&e)return n.EmptyIcon;if(i===o.FaceImageLabelRenderType.Action&&t!==n.EmptyIcon){const e=a.get(t);if(e)return e}if(t!==n.EmptyIcon){const e=s.get(t);if(e)return e}return n.EmptyIcon},t.hasLabel=function(e,t,i){return!("none"===i||"action"===i&&e)&&("action"===i&&t!==n.EmptyIcon?a.has(t):t!==n.EmptyIcon&&s.has(t))},t.actionsAreEqual=c,t.isABXYButton=function(e){return"gamepadA"===e||"gamepadB"===e||"gamepadX"===e||"gamepadY"===e},t.shallowCheckDistinctObjectDirty=function(e,t){const i=Object.keys(e),o=Object.keys(t);if(i.length!==o.length)return!0;{const n=i.reduce((i,o)=>{if(i)return i;return e[o]!==t[o]},!1),r=o.reduce((i,o)=>{if(i)return i;return e[o]!==t[o]},!1);return n||r}}},mlq5:function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getDefaultThrottleAxesStyle=t.getDefaultThrottleIndicatorStyle=t.getDefaultThrottleKnobStyle=t.getDefaultThrottleKnobStrokeStyle=t.getDefaultThrottleKnobBackgroundStyle=t.getDefaultThrottleFaceImageStyle=void 0;const o=i("Zd/9"),n=i("kU1o"),r=i("PFUz"),a=i("yi9v"),s=i("SqAV"),c=i("l1ss");function l(e){return{type:"icon",color:{r:1,g:1,b:1,a:1,string:o.WHITE_ALPHA_100},displayShadow:e!==c.ThrottleState.Disabled,scale:1,value:e===c.ThrottleState.ActivatedDown?"brakePedal":"gasPedal",animationEnergy:n.AnimationEnergy.Instant,opacity:1,label:{type:r.FaceImageLabelRenderType.None,fillType:r.FaceImageLabelRenderFillType.None,color:{r:1,g:1,b:1,a:1,string:o.WHITE_ALPHA_100},value:a.EmptyIcon,offset:{x:0,y:0}},offset:{x:0,y:0}}}function u(){return{type:"color",value:{r:1,g:1,b:1,a:.1,string:o.WHITE_ALPHA_10},opacity:1}}function d(){return{type:s.StrokeType.Solid,color:{r:1,g:1,b:1,a:1,string:o.WHITE_ALPHA_100},opacity:1}}t.getDefaultThrottleFaceImageStyle=l,t.getDefaultThrottleKnobBackgroundStyle=u,t.getDefaultThrottleKnobStrokeStyle=d,t.getDefaultThrottleKnobStyle=function(e){return{background:u(),stroke:d(),faceImage:l(e),opacity:1}},t.getDefaultThrottleIndicatorStyle=function(){return{color:{r:1,g:1,b:1,a:.25,string:o.WHITE_ALPHA_25},opacity:1}},t.getDefaultThrottleAxesStyle=function(e){return{axisUp:{cap:{type:"color",value:{r:1,g:1,b:1,a:1,string:o.WHITE_ALPHA_100},opacity:1},stroke:{type:s.StrokeType.Solid,color:{r:1,g:1,b:1,a:e===c.ThrottleState.ActivatedUp||e===c.ThrottleState.IdleUp?.33:.0825,string:e===c.ThrottleState.ActivatedUp||e===c.ThrottleState.IdleUp?"#ffffff54":"#ffffff15"},opacity:1}},axisDown:{cap:{type:"color",value:{r:1,g:1,b:1,a:1,string:o.WHITE_ALPHA_100},opacity:1},stroke:{type:s.StrokeType.Solid,color:{r:1,g:1,b:1,a:e===c.ThrottleState.ActivatedDown?.33:.0825,string:e===c.ThrottleState.ActivatedDown?"#ffffff54":"#ffffff15"},opacity:1}}}}},mvuV:function(e,t,i){"use strict";e.exports=function(e,t,i){var o=" ",n=e.level,r=e.dataLevel,a=e.schema[t],s=e.schemaPath+e.util.getProperty(t),c=e.errSchemaPath+"/"+t,l=!e.opts.allErrors,u="data"+(r||""),d="valid"+n,p=e.opts.$data&&a&&a.$data;p&&(o+=" var schema"+n+" = "+e.util.getData(a.$data,r,e.dataPathArr)+"; ");var h="i"+n,f="schema"+n;p||(o+=" var "+f+" = validate.schema"+s+";"),o+="var "+d+";",p&&(o+=" if (schema"+n+" === undefined) "+d+" = true; else if (!Array.isArray(schema"+n+")) "+d+" = false; else {"),o+=d+" = false;for (var "+h+"=0; "+h+"<"+f+".length; "+h+"++) if (equal("+u+", "+f+"["+h+"])) { "+d+" = true; break; }",p&&(o+="  }  "),o+=" if (!"+d+") {   ";var y=y||[];y.push(o),o="",!1!==e.createErrors?(o+=" { keyword: 'enum' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(c)+" , params: { allowedValues: schema"+n+" } ",!1!==e.opts.messages&&(o+=" , message: 'should be equal to one of the allowed values' "),e.opts.verbose&&(o+=" , schema: validate.schema"+s+" , parentSchema: validate.schema"+e.schemaPath+" , data: "+u+" "),o+=" } "):o+=" {} ";var g=o;return o=y.pop(),!e.compositeRule&&l?e.async?o+=" throw new ValidationError(["+g+"]); ":o+=" validate.errors = ["+g+"]; return false; ":o+=" var err = "+g+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",o+=" }",l&&(o+=" else { "),o}},n40a:function(e,t,i){"use strict";e.exports=function(e,t,i){var o="",n=!0===e.schema.$async,r=e.util.schemaHasRulesExcept(e.schema,e.RULES.all,"$ref"),a=e.self._getId(e.schema);if(e.opts.strictKeywords){var s=e.util.schemaUnknownRules(e.schema,e.RULES.keywords);if(s){var c="unknown keyword: "+s;if("log"!==e.opts.strictKeywords)throw new Error(c);e.logger.warn(c)}}if(e.isTop&&(o+=" var validate = ",n&&(e.async=!0,o+="async "),o+="function(data, dataPath, parentData, parentDataProperty, rootData) { 'use strict'; ",a&&(e.opts.sourceCode||e.opts.processCode)&&(o+=" /*# sourceURL="+a+" */ ")),"boolean"==typeof e.schema||!r&&!e.schema.$ref){var l=e.level,u=e.dataLevel,d=e.schema["false schema"],p=e.schemaPath+e.util.getProperty("false schema"),h=e.errSchemaPath+"/false schema",f=!e.opts.allErrors,y="data"+(u||""),g="valid"+l;if(!1===e.schema){e.isTop?f=!0:o+=" var "+g+" = false; ",(G=G||[]).push(o),o="",!1!==e.createErrors?(o+=" { keyword: 'false schema' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(h)+" , params: {} ",!1!==e.opts.messages&&(o+=" , message: 'boolean schema is false' "),e.opts.verbose&&(o+=" , schema: false , parentSchema: validate.schema"+e.schemaPath+" , data: "+y+" "),o+=" } "):o+=" {} ";var m=o;o=G.pop(),!e.compositeRule&&f?e.async?o+=" throw new ValidationError(["+m+"]); ":o+=" validate.errors = ["+m+"]; return false; ":o+=" var err = "+m+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; "}else e.isTop?o+=n?" return data; ":" validate.errors = null; return true; ":o+=" var "+g+" = true; ";return e.isTop&&(o+=" }; return validate; "),o}if(e.isTop){var v=e.isTop;l=e.level=0,u=e.dataLevel=0,y="data";if(e.rootId=e.resolve.fullPath(e.self._getId(e.root.schema)),e.baseId=e.baseId||e.rootId,delete e.isTop,e.dataPathArr=[""],void 0!==e.schema.default&&e.opts.useDefaults&&e.opts.strictDefaults){var b="default is ignored in the schema root";if("log"!==e.opts.strictDefaults)throw new Error(b);e.logger.warn(b)}o+=" var vErrors = null; ",o+=" var errors = 0;     ",o+=" if (rootData === undefined) rootData = data; "}else{l=e.level,y="data"+((u=e.dataLevel)||"");if(a&&(e.baseId=e.resolve.url(e.baseId,a)),n&&!e.async)throw new Error("async schema in sync schema");o+=" var errs_"+l+" = errors;"}g="valid"+l,f=!e.opts.allErrors;var S="",k="",P=e.schema.type,w=Array.isArray(P);if(P&&e.opts.nullable&&!0===e.schema.nullable&&(w?-1==P.indexOf("null")&&(P=P.concat("null")):"null"!=P&&(P=[P,"null"],w=!0)),w&&1==P.length&&(P=P[0],w=!1),e.schema.$ref&&r){if("fail"==e.opts.extendRefs)throw new Error('$ref: validation keywords used in schema at path "'+e.errSchemaPath+'" (see option extendRefs)');!0!==e.opts.extendRefs&&(r=!1,e.logger.warn('$ref: keywords ignored in schema at path "'+e.errSchemaPath+'"'))}if(e.schema.$comment&&e.opts.$comment&&(o+=" "+e.RULES.all.$comment.code(e,"$comment")),P){if(e.opts.coerceTypes)var A=e.util.coerceToTypes(e.opts.coerceTypes,P);var I=e.RULES.types[P];if(A||w||!0===I||I&&!X(I)){p=e.schemaPath+".type",h=e.errSchemaPath+"/type",p=e.schemaPath+".type",h=e.errSchemaPath+"/type";var T=w?"checkDataTypes":"checkDataType";if(o+=" if ("+e.util[T](P,y,e.opts.strictNumbers,!0)+") { ",A){var C="dataType"+l,_="coerced"+l;o+=" var "+C+" = typeof "+y+"; var "+_+" = undefined; ","array"==e.opts.coerceTypes&&(o+=" if ("+C+" == 'object' && Array.isArray("+y+") && "+y+".length == 1) { "+y+" = "+y+"[0]; "+C+" = typeof "+y+"; if ("+e.util.checkDataType(e.schema.type,y,e.opts.strictNumbers)+") "+_+" = "+y+"; } "),o+=" if ("+_+" !== undefined) ; ";var E=A;if(E)for(var x,R=-1,O=E.length-1;R<O;)"string"==(x=E[R+=1])?o+=" else if ("+C+" == 'number' || "+C+" == 'boolean') "+_+" = '' + "+y+"; else if ("+y+" === null) "+_+" = ''; ":"number"==x||"integer"==x?(o+=" else if ("+C+" == 'boolean' || "+y+" === null || ("+C+" == 'string' && "+y+" && "+y+" == +"+y+" ","integer"==x&&(o+=" && !("+y+" % 1)"),o+=")) "+_+" = +"+y+"; "):"boolean"==x?o+=" else if ("+y+" === 'false' || "+y+" === 0 || "+y+" === null) "+_+" = false; else if ("+y+" === 'true' || "+y+" === 1) "+_+" = true; ":"null"==x?o+=" else if ("+y+" === '' || "+y+" === 0 || "+y+" === false) "+_+" = null; ":"array"==e.opts.coerceTypes&&"array"==x&&(o+=" else if ("+C+" == 'string' || "+C+" == 'number' || "+C+" == 'boolean' || "+y+" == null) "+_+" = ["+y+"]; ");o+=" else {   ",(G=G||[]).push(o),o="",!1!==e.createErrors?(o+=" { keyword: 'type' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(h)+" , params: { type: '",o+=w?""+P.join(","):""+P,o+="' } ",!1!==e.opts.messages&&(o+=" , message: 'should be ",o+=w?""+P.join(","):""+P,o+="' "),e.opts.verbose&&(o+=" , schema: validate.schema"+p+" , parentSchema: validate.schema"+e.schemaPath+" , data: "+y+" "),o+=" } "):o+=" {} ";m=o;o=G.pop(),!e.compositeRule&&f?e.async?o+=" throw new ValidationError(["+m+"]); ":o+=" validate.errors = ["+m+"]; return false; ":o+=" var err = "+m+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",o+=" } if ("+_+" !== undefined) {  ";var D=u?"data"+(u-1||""):"parentData";o+=" "+y+" = "+_+"; ",u||(o+="if ("+D+" !== undefined)"),o+=" "+D+"["+(u?e.dataPathArr[u]:"parentDataProperty")+"] = "+_+"; } "}else{(G=G||[]).push(o),o="",!1!==e.createErrors?(o+=" { keyword: 'type' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(h)+" , params: { type: '",o+=w?""+P.join(","):""+P,o+="' } ",!1!==e.opts.messages&&(o+=" , message: 'should be ",o+=w?""+P.join(","):""+P,o+="' "),e.opts.verbose&&(o+=" , schema: validate.schema"+p+" , parentSchema: validate.schema"+e.schemaPath+" , data: "+y+" "),o+=" } "):o+=" {} ";m=o;o=G.pop(),!e.compositeRule&&f?e.async?o+=" throw new ValidationError(["+m+"]); ":o+=" validate.errors = ["+m+"]; return false; ":o+=" var err = "+m+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; "}o+=" } "}}if(e.schema.$ref&&!r)o+=" "+e.RULES.all.$ref.code(e,"$ref")+" ",f&&(o+=" } if (errors === ",o+=v?"0":"errs_"+l,o+=") { ",k+="}");else{var M=e.RULES;if(M)for(var j=-1,$=M.length-1;j<$;)if(X(I=M[j+=1])){if(I.type&&(o+=" if ("+e.util.checkDataType(I.type,y,e.opts.strictNumbers)+") { "),e.opts.useDefaults)if("object"==I.type&&e.schema.properties){d=e.schema.properties;var B=Object.keys(d);if(B)for(var L,F=-1,N=B.length-1;F<N;){if(void 0!==(U=d[L=B[F+=1]]).default){var J=y+e.util.getProperty(L);if(e.compositeRule){if(e.opts.strictDefaults){b="default is ignored for: "+J;if("log"!==e.opts.strictDefaults)throw new Error(b);e.logger.warn(b)}}else o+=" if ("+J+" === undefined ","empty"==e.opts.useDefaults&&(o+=" || "+J+" === null || "+J+" === '' "),o+=" ) "+J+" = ","shared"==e.opts.useDefaults?o+=" "+e.useDefault(U.default)+" ":o+=" "+JSON.stringify(U.default)+" ",o+="; "}}}else if("array"==I.type&&Array.isArray(e.schema.items)){var z=e.schema.items;if(z){R=-1;for(var U,V=z.length-1;R<V;)if(void 0!==(U=z[R+=1]).default){J=y+"["+R+"]";if(e.compositeRule){if(e.opts.strictDefaults){b="default is ignored for: "+J;if("log"!==e.opts.strictDefaults)throw new Error(b);e.logger.warn(b)}}else o+=" if ("+J+" === undefined ","empty"==e.opts.useDefaults&&(o+=" || "+J+" === null || "+J+" === '' "),o+=" ) "+J+" = ","shared"==e.opts.useDefaults?o+=" "+e.useDefault(U.default)+" ":o+=" "+JSON.stringify(U.default)+" ",o+="; "}}}var K=I.rules;if(K)for(var q,H=-1,W=K.length-1;H<W;)if(Z(q=K[H+=1])){var Y=q.code(e,q.keyword,I.type);Y&&(o+=" "+Y+" ",f&&(S+="}"))}if(f&&(o+=" "+S+" ",S=""),I.type&&(o+=" } ",P&&P===I.type&&!A)){o+=" else { ";var G;p=e.schemaPath+".type",h=e.errSchemaPath+"/type";(G=G||[]).push(o),o="",!1!==e.createErrors?(o+=" { keyword: 'type' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(h)+" , params: { type: '",o+=w?""+P.join(","):""+P,o+="' } ",!1!==e.opts.messages&&(o+=" , message: 'should be ",o+=w?""+P.join(","):""+P,o+="' "),e.opts.verbose&&(o+=" , schema: validate.schema"+p+" , parentSchema: validate.schema"+e.schemaPath+" , data: "+y+" "),o+=" } "):o+=" {} ";m=o;o=G.pop(),!e.compositeRule&&f?e.async?o+=" throw new ValidationError(["+m+"]); ":o+=" validate.errors = ["+m+"]; return false; ":o+=" var err = "+m+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",o+=" } "}f&&(o+=" if (errors === ",o+=v?"0":"errs_"+l,o+=") { ",k+="}")}}function X(e){for(var t=e.rules,i=0;i<t.length;i++)if(Z(t[i]))return!0}function Z(t){return void 0!==e.schema[t.keyword]||t.implements&&function(t){for(var i=t.implements,o=0;o<i.length;o++)if(void 0!==e.schema[i[o]])return!0}(t)}return f&&(o+=" "+k+" "),v?(n?(o+=" if (errors === 0) return data;           ",o+=" else throw new ValidationError(vErrors); "):(o+=" validate.errors = vErrors; ",o+=" return errors === 0;       "),o+=" }; return validate;"):o+=" var "+g+" = errors === errs_"+l+";",o}},nQP3:function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Pointer=void 0;const o=i("Ledy"),n=i("MTv4");t.Pointer=class{constructor(e,t=n.PointerState.End,i=0,r=0,a=0,s=0,c=0,l=o.PointerType.Touch,u=o.TouchEventTarget.All){this.pendingNotification=!1,this.pointerType=l,this.state=t,this.pointerIndex=e,this.initialPosition={x:i,y:r},this.position={x:i,y:r},this.lastPositionDelta={x:0,y:0},this.additionalTouchData={pressure:a,diameter:c,orientation:s},this.touchTarget=u}attemptCollision(e,t){var i;this.ensureValidWithInteractionMode(t);e:switch(this.state){case n.PointerState.Start:if(!this.control){const o=null===(i=e.collider)||void 0===i?void 0:i.call(e,this.initialPosition);if(o&&o.size>0)for(let i=0;i<e.controls.length;i++){const n=e.controls[i];if(o.has(n.model.getProps().socket)&&n.canBeInteractedWith(this,t)&&this.tryAttachControl(n))break e}}if(!this.control)for(let i=0;i<e.controls.length;i++){const o=e.controls[i];if(o.canBeInteractedWith(this,t)&&o.collidesWith(this.initialPosition)&&this.tryAttachControl(o))break e}break;case n.PointerState.Move:if(this.control){if(this.control.allowsRolloverInteraction()&&(!this.control.canBeInteractedWith(this,t)||!this.control.collidesWith(this.position)))for(let i=0;i<e.controls.length;i++){const o=e.controls[i];if(o!==this.control&&o.allowsRolloverInteraction()&&o.canBeInteractedWith(this,t)&&o.collidesWith(this.position)){this.swapControls(o);break}}}else for(let i=0;i<e.controls.length;i++){const o=e.controls[i];if(o.canBeInteractedWith(this,t)&&o.collidesWith(this.position)&&this.tryAttachControl(o))break}this.pendingNotification=!0;break;case n.PointerState.End:this.detachControl()}}updatePointerData(e,t,i=0,r=0,a=0,s=o.PointerType.Touch,c=o.TouchEventTarget.All){const l=this.state===n.PointerState.End||this.position.x!==e||this.position.y!==t||this.additionalTouchData.pressure!==i||this.additionalTouchData.orientation!==r||this.additionalTouchData.diameter!==a||this.pointerType!==s||this.touchTarget!==c;return this.state===n.PointerState.End?(this.state=n.PointerState.Start,this.initialPosition.x=e,this.initialPosition.y=t,this.position.x=e,this.position.y=t,this.lastPositionDelta.x=0,this.lastPositionDelta.y=0):(this.state=n.PointerState.Move,this.lastPositionDelta.x=e-this.position.x,this.lastPositionDelta.y=t-this.position.y,this.position.x=e,this.position.y=t),this.additionalTouchData.pressure=i,this.additionalTouchData.orientation=r,this.additionalTouchData.diameter=a,this.touchTarget=c,this.pointerType=s,l}reset(){this.identifier=void 0,this.state=n.PointerState.End}flushNotification(){if(this.pendingNotification){if(void 0!==this.pendingState){const e=this.state;this.state=this.pendingState,this.notify(),this.state=e}else this.notify();this.pendingNotification=!1,this.pendingState=void 0}}detachControl(){if(!this.control)return;const e=this.control;this.control=void 0;const t=this.state;return this.state!==n.PointerState.End&&(this.state=n.PointerState.End),e.onPointerDataUpdated(this),this.state=t,e}swapControls(e){let t;return this.control&&(t=this.detachControl()),this.tryAttachControl(e),t}tryAttachControl(e){return!(this.control||!e)&&(this.state===n.PointerState.Move&&(this.pendingState=n.PointerState.Start,this.initialPosition.x=this.position.x,this.initialPosition.y=this.position.y,this.lastPositionDelta.x=0,this.lastPositionDelta.y=0),this.control=e,this.state!==n.PointerState.End&&(this.pendingNotification=!0),!0)}notify(){this.control&&this.control.onPointerDataUpdated(this)}ensureValidWithInteractionMode(e){this.control&&(this.control.canBeInteractedWith(this,e)||this.detachControl())}}},nSn0:function(e,t,i){!function(e){"use strict";function t(){for(var e=arguments.length,t=Array(e),i=0;i<e;i++)t[i]=arguments[i];if(t.length>1){t[0]=t[0].slice(0,-1);for(var o=t.length-1,n=1;n<o;++n)t[n]=t[n].slice(1,-1);return t[o]=t[o].slice(1),t.join("")}return t[0]}function i(e){return"(?:"+e+")"}function o(e){return void 0===e?"undefined":null===e?"null":Object.prototype.toString.call(e).split(" ").pop().split("]").shift().toLowerCase()}function n(e){return e.toUpperCase()}function r(e){var o=t("[0-9]","[A-Fa-f]"),n=i(i("%[EFef]"+o+"%"+o+o+"%"+o+o)+"|"+i("%[89A-Fa-f]"+o+"%"+o+o)+"|"+i("%"+o+o)),r="[\\!\\$\\&\\'\\(\\)\\*\\+\\,\\;\\=]",a=t("[\\:\\/\\?\\#\\[\\]\\@]",r),s=e?"[\\uE000-\\uF8FF]":"[]",c=t("[A-Za-z]","[0-9]","[\\-\\.\\_\\~]",e?"[\\xA0-\\u200D\\u2010-\\u2029\\u202F-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFEF]":"[]"),l=i("[A-Za-z]"+t("[A-Za-z]","[0-9]","[\\+\\-\\.]")+"*"),u=i(i(n+"|"+t(c,r,"[\\:]"))+"*"),d=(i(i("25[0-5]")+"|"+i("2[0-4][0-9]")+"|"+i("1[0-9][0-9]")+"|"+i("[1-9][0-9]")+"|[0-9]"),i(i("25[0-5]")+"|"+i("2[0-4][0-9]")+"|"+i("1[0-9][0-9]")+"|"+i("0?[1-9][0-9]")+"|0?0?[0-9]")),p=i(d+"\\."+d+"\\."+d+"\\."+d),h=i(o+"{1,4}"),f=i(i(h+"\\:"+h)+"|"+p),y=i(i(h+"\\:")+"{6}"+f),g=i("\\:\\:"+i(h+"\\:")+"{5}"+f),m=i(i(h)+"?\\:\\:"+i(h+"\\:")+"{4}"+f),v=i(i(i(h+"\\:")+"{0,1}"+h)+"?\\:\\:"+i(h+"\\:")+"{3}"+f),b=i(i(i(h+"\\:")+"{0,2}"+h)+"?\\:\\:"+i(h+"\\:")+"{2}"+f),S=i(i(i(h+"\\:")+"{0,3}"+h)+"?\\:\\:"+h+"\\:"+f),k=i(i(i(h+"\\:")+"{0,4}"+h)+"?\\:\\:"+f),P=i(i(i(h+"\\:")+"{0,5}"+h)+"?\\:\\:"+h),w=i(i(i(h+"\\:")+"{0,6}"+h)+"?\\:\\:"),A=i([y,g,m,v,b,S,k,P,w].join("|")),I=i(i(c+"|"+n)+"+"),T=(i(A+"\\%25"+I),i(A+i("\\%25|\\%(?!"+o+"{2})")+I)),C=i("[vV]"+o+"+\\."+t(c,r,"[\\:]")+"+"),_=i("\\["+i(T+"|"+A+"|"+C)+"\\]"),E=i(i(n+"|"+t(c,r))+"*"),x=i(_+"|"+p+"(?!"+E+")|"+E),R=i("[0-9]*"),O=i(i(u+"@")+"?"+x+i("\\:"+R)+"?"),D=i(n+"|"+t(c,r,"[\\:\\@]")),M=i(D+"*"),j=i(D+"+"),$=i(i(n+"|"+t(c,r,"[\\@]"))+"+"),B=i(i("\\/"+M)+"*"),L=i("\\/"+i(j+B)+"?"),F=i($+B),N=i(j+B),J="(?!"+D+")",z=(i(B+"|"+L+"|"+F+"|"+N+"|"+J),i(i(D+"|"+t("[\\/\\?]",s))+"*")),U=i(i(D+"|[\\/\\?]")+"*"),V=i(i("\\/\\/"+O+B)+"|"+L+"|"+N+"|"+J),K=i(l+"\\:"+V+i("\\?"+z)+"?"+i("\\#"+U)+"?"),q=i(i("\\/\\/"+O+B)+"|"+L+"|"+F+"|"+J),H=i(q+i("\\?"+z)+"?"+i("\\#"+U)+"?");return i(K+"|"+H),i(l+"\\:"+V+i("\\?"+z)+"?"),i(i("\\/\\/("+i("("+u+")@")+"?("+x+")"+i("\\:("+R+")")+"?)")+"?("+B+"|"+L+"|"+N+"|"+J+")"),i("\\?("+z+")"),i("\\#("+U+")"),i(i("\\/\\/("+i("("+u+")@")+"?("+x+")"+i("\\:("+R+")")+"?)")+"?("+B+"|"+L+"|"+F+"|"+J+")"),i("\\?("+z+")"),i("\\#("+U+")"),i(i("\\/\\/("+i("("+u+")@")+"?("+x+")"+i("\\:("+R+")")+"?)")+"?("+B+"|"+L+"|"+N+"|"+J+")"),i("\\?("+z+")"),i("\\#("+U+")"),i("("+u+")@"),i("\\:("+R+")"),{NOT_SCHEME:new RegExp(t("[^]","[A-Za-z]","[0-9]","[\\+\\-\\.]"),"g"),NOT_USERINFO:new RegExp(t("[^\\%\\:]",c,r),"g"),NOT_HOST:new RegExp(t("[^\\%\\[\\]\\:]",c,r),"g"),NOT_PATH:new RegExp(t("[^\\%\\/\\:\\@]",c,r),"g"),NOT_PATH_NOSCHEME:new RegExp(t("[^\\%\\/\\@]",c,r),"g"),NOT_QUERY:new RegExp(t("[^\\%]",c,r,"[\\:\\@\\/\\?]",s),"g"),NOT_FRAGMENT:new RegExp(t("[^\\%]",c,r,"[\\:\\@\\/\\?]"),"g"),ESCAPE:new RegExp(t("[^]",c,r),"g"),UNRESERVED:new RegExp(c,"g"),OTHER_CHARS:new RegExp(t("[^\\%]",c,a),"g"),PCT_ENCODED:new RegExp(n,"g"),IPV4ADDRESS:new RegExp("^("+p+")$"),IPV6ADDRESS:new RegExp("^\\[?("+A+")"+i(i("\\%25|\\%(?!"+o+"{2})")+"("+I+")")+"?\\]?$")}}var a=r(!1),s=r(!0),c=function(e,t){if(Array.isArray(e))return e;if(Symbol.iterator in Object(e))return function(e,t){var i=[],o=!0,n=!1,r=void 0;try{for(var a,s=e[Symbol.iterator]();!(o=(a=s.next()).done)&&(i.push(a.value),!t||i.length!==t);o=!0);}catch(c){n=!0,r=c}finally{try{!o&&s.return&&s.return()}finally{if(n)throw r}}return i}(e,t);throw new TypeError("Invalid attempt to destructure non-iterable instance")},l=2147483647,u=/^xn--/,d=/[^\0-\x7E]/,p=/[\x2E\u3002\uFF0E\uFF61]/g,h={overflow:"Overflow: input needs wider integers to process","not-basic":"Illegal input >= 0x80 (not a basic code point)","invalid-input":"Invalid input"},f=Math.floor,y=String.fromCharCode;function g(e){throw new RangeError(h[e])}function m(e,t){var i=e.split("@"),o="";i.length>1&&(o=i[0]+"@",e=i[1]);var n=function(e,t){for(var i=[],o=e.length;o--;)i[o]=t(e[o]);return i}((e=e.replace(p,".")).split("."),t).join(".");return o+n}function v(e){for(var t=[],i=0,o=e.length;i<o;){var n=e.charCodeAt(i++);if(n>=55296&&n<=56319&&i<o){var r=e.charCodeAt(i++);56320==(64512&r)?t.push(((1023&n)<<10)+(1023&r)+65536):(t.push(n),i--)}else t.push(n)}return t}var b=function(e,t){return e+22+75*(e<26)-((0!=t)<<5)},S=function(e,t,i){var o=0;for(e=i?f(e/700):e>>1,e+=f(e/t);e>455;o+=36)e=f(e/35);return f(o+36*e/(e+38))},k=function(e){var t,i=[],o=e.length,n=0,r=128,a=72,s=e.lastIndexOf("-");s<0&&(s=0);for(var c=0;c<s;++c)e.charCodeAt(c)>=128&&g("not-basic"),i.push(e.charCodeAt(c));for(var u=s>0?s+1:0;u<o;){for(var d=n,p=1,h=36;;h+=36){u>=o&&g("invalid-input");var y=(t=e.charCodeAt(u++))-48<10?t-22:t-65<26?t-65:t-97<26?t-97:36;(y>=36||y>f((l-n)/p))&&g("overflow"),n+=y*p;var m=h<=a?1:h>=a+26?26:h-a;if(y<m)break;var v=36-m;p>f(l/v)&&g("overflow"),p*=v}var b=i.length+1;a=S(n-d,b,0==d),f(n/b)>l-r&&g("overflow"),r+=f(n/b),n%=b,i.splice(n++,0,r)}return String.fromCodePoint.apply(String,i)},P=function(e){var t=[],i=(e=v(e)).length,o=128,n=0,r=72,a=!0,s=!1,c=void 0;try{for(var u,d=e[Symbol.iterator]();!(a=(u=d.next()).done);a=!0){var p=u.value;p<128&&t.push(y(p))}}catch(N){s=!0,c=N}finally{try{!a&&d.return&&d.return()}finally{if(s)throw c}}var h=t.length,m=h;for(h&&t.push("-");m<i;){var k=l,P=!0,w=!1,A=void 0;try{for(var I,T=e[Symbol.iterator]();!(P=(I=T.next()).done);P=!0){var C=I.value;C>=o&&C<k&&(k=C)}}catch(N){w=!0,A=N}finally{try{!P&&T.return&&T.return()}finally{if(w)throw A}}var _=m+1;k-o>f((l-n)/_)&&g("overflow"),n+=(k-o)*_,o=k;var E=!0,x=!1,R=void 0;try{for(var O,D=e[Symbol.iterator]();!(E=(O=D.next()).done);E=!0){var M=O.value;if(M<o&&++n>l&&g("overflow"),M==o){for(var j=n,$=36;;$+=36){var B=$<=r?1:$>=r+26?26:$-r;if(j<B)break;var L=j-B,F=36-B;t.push(y(b(B+L%F,0))),j=f(L/F)}t.push(y(b(j,0))),r=S(n,_,m==h),n=0,++m}}}catch(N){x=!0,R=N}finally{try{!E&&D.return&&D.return()}finally{if(x)throw R}}++n,++o}return t.join("")},w=function(e){return m(e,(function(e){return d.test(e)?"xn--"+P(e):e}))},A=function(e){return m(e,(function(e){return u.test(e)?k(e.slice(4).toLowerCase()):e}))},I={};function T(e){var t=e.charCodeAt(0);return t<16?"%0"+t.toString(16).toUpperCase():t<128?"%"+t.toString(16).toUpperCase():t<2048?"%"+(t>>6|192).toString(16).toUpperCase()+"%"+(63&t|128).toString(16).toUpperCase():"%"+(t>>12|224).toString(16).toUpperCase()+"%"+(t>>6&63|128).toString(16).toUpperCase()+"%"+(63&t|128).toString(16).toUpperCase()}function C(e){for(var t="",i=0,o=e.length;i<o;){var n=parseInt(e.substr(i+1,2),16);if(n<128)t+=String.fromCharCode(n),i+=3;else if(n>=194&&n<224){if(o-i>=6){var r=parseInt(e.substr(i+4,2),16);t+=String.fromCharCode((31&n)<<6|63&r)}else t+=e.substr(i,6);i+=6}else if(n>=224){if(o-i>=9){var a=parseInt(e.substr(i+4,2),16),s=parseInt(e.substr(i+7,2),16);t+=String.fromCharCode((15&n)<<12|(63&a)<<6|63&s)}else t+=e.substr(i,9);i+=9}else t+=e.substr(i,3),i+=3}return t}function _(e,t){function i(e){var i=C(e);return i.match(t.UNRESERVED)?i:e}return e.scheme&&(e.scheme=String(e.scheme).replace(t.PCT_ENCODED,i).toLowerCase().replace(t.NOT_SCHEME,"")),void 0!==e.userinfo&&(e.userinfo=String(e.userinfo).replace(t.PCT_ENCODED,i).replace(t.NOT_USERINFO,T).replace(t.PCT_ENCODED,n)),void 0!==e.host&&(e.host=String(e.host).replace(t.PCT_ENCODED,i).toLowerCase().replace(t.NOT_HOST,T).replace(t.PCT_ENCODED,n)),void 0!==e.path&&(e.path=String(e.path).replace(t.PCT_ENCODED,i).replace(e.scheme?t.NOT_PATH:t.NOT_PATH_NOSCHEME,T).replace(t.PCT_ENCODED,n)),void 0!==e.query&&(e.query=String(e.query).replace(t.PCT_ENCODED,i).replace(t.NOT_QUERY,T).replace(t.PCT_ENCODED,n)),void 0!==e.fragment&&(e.fragment=String(e.fragment).replace(t.PCT_ENCODED,i).replace(t.NOT_FRAGMENT,T).replace(t.PCT_ENCODED,n)),e}function E(e){return e.replace(/^0*(.*)/,"$1")||"0"}function x(e,t){var i=e.match(t.IPV4ADDRESS)||[],o=c(i,2)[1];return o?o.split(".").map(E).join("."):e}function R(e,t){var i=e.match(t.IPV6ADDRESS)||[],o=c(i,3),n=o[1],r=o[2];if(n){for(var a=n.toLowerCase().split("::").reverse(),s=c(a,2),l=s[0],u=s[1],d=u?u.split(":").map(E):[],p=l.split(":").map(E),h=t.IPV4ADDRESS.test(p[p.length-1]),f=h?7:8,y=p.length-f,g=Array(f),m=0;m<f;++m)g[m]=d[m]||p[y+m]||"";h&&(g[f-1]=x(g[f-1],t));var v=g.reduce((function(e,t,i){if(!t||"0"===t){var o=e[e.length-1];o&&o.index+o.length===i?o.length++:e.push({index:i,length:1})}return e}),[]).sort((function(e,t){return t.length-e.length}))[0],b=void 0;if(v&&v.length>1){var S=g.slice(0,v.index),k=g.slice(v.index+v.length);b=S.join(":")+"::"+k.join(":")}else b=g.join(":");return r&&(b+="%"+r),b}return e}var O=/^(?:([^:\/?#]+):)?(?:\/\/((?:([^\/?#@]*)@)?(\[[^\/?#\]]+\]|[^\/?#:]*)(?:\:(\d*))?))?([^?#]*)(?:\?([^#]*))?(?:#((?:.|\n|\r)*))?/i,D=void 0==="".match(/(){0}/)[1];function M(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},i={},o=!1!==t.iri?s:a;"suffix"===t.reference&&(e=(t.scheme?t.scheme+":":"")+"//"+e);var n=e.match(O);if(n){D?(i.scheme=n[1],i.userinfo=n[3],i.host=n[4],i.port=parseInt(n[5],10),i.path=n[6]||"",i.query=n[7],i.fragment=n[8],isNaN(i.port)&&(i.port=n[5])):(i.scheme=n[1]||void 0,i.userinfo=-1!==e.indexOf("@")?n[3]:void 0,i.host=-1!==e.indexOf("//")?n[4]:void 0,i.port=parseInt(n[5],10),i.path=n[6]||"",i.query=-1!==e.indexOf("?")?n[7]:void 0,i.fragment=-1!==e.indexOf("#")?n[8]:void 0,isNaN(i.port)&&(i.port=e.match(/\/\/(?:.|\n)*\:(?:\/|\?|\#|$)/)?n[4]:void 0)),i.host&&(i.host=R(x(i.host,o),o)),void 0!==i.scheme||void 0!==i.userinfo||void 0!==i.host||void 0!==i.port||i.path||void 0!==i.query?void 0===i.scheme?i.reference="relative":void 0===i.fragment?i.reference="absolute":i.reference="uri":i.reference="same-document",t.reference&&"suffix"!==t.reference&&t.reference!==i.reference&&(i.error=i.error||"URI is not a "+t.reference+" reference.");var r=I[(t.scheme||i.scheme||"").toLowerCase()];if(t.unicodeSupport||r&&r.unicodeSupport)_(i,o);else{if(i.host&&(t.domainHost||r&&r.domainHost))try{i.host=w(i.host.replace(o.PCT_ENCODED,C).toLowerCase())}catch(c){i.error=i.error||"Host's domain name can not be converted to ASCII via punycode: "+c}_(i,a)}r&&r.parse&&r.parse(i,t)}else i.error=i.error||"URI can not be parsed.";return i}function j(e,t){var i=!1!==t.iri?s:a,o=[];return void 0!==e.userinfo&&(o.push(e.userinfo),o.push("@")),void 0!==e.host&&o.push(R(x(String(e.host),i),i).replace(i.IPV6ADDRESS,(function(e,t,i){return"["+t+(i?"%25"+i:"")+"]"}))),"number"===typeof e.port&&(o.push(":"),o.push(e.port.toString(10))),o.length?o.join(""):void 0}var $=/^\.\.?\//,B=/^\/\.(\/|$)/,L=/^\/\.\.(\/|$)/,F=/^\/?(?:.|\n)*?(?=\/|$)/;function N(e){for(var t=[];e.length;)if(e.match($))e=e.replace($,"");else if(e.match(B))e=e.replace(B,"/");else if(e.match(L))e=e.replace(L,"/"),t.pop();else if("."===e||".."===e)e="";else{var i=e.match(F);if(!i)throw new Error("Unexpected dot segment condition");var o=i[0];e=e.slice(o.length),t.push(o)}return t.join("")}function J(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},i=t.iri?s:a,o=[],n=I[(t.scheme||e.scheme||"").toLowerCase()];if(n&&n.serialize&&n.serialize(e,t),e.host)if(i.IPV6ADDRESS.test(e.host));else if(t.domainHost||n&&n.domainHost)try{e.host=t.iri?A(e.host):w(e.host.replace(i.PCT_ENCODED,C).toLowerCase())}catch(l){e.error=e.error||"Host's domain name can not be converted to "+(t.iri?"Unicode":"ASCII")+" via punycode: "+l}_(e,i),"suffix"!==t.reference&&e.scheme&&(o.push(e.scheme),o.push(":"));var r=j(e,t);if(void 0!==r&&("suffix"!==t.reference&&o.push("//"),o.push(r),e.path&&"/"!==e.path.charAt(0)&&o.push("/")),void 0!==e.path){var c=e.path;t.absolutePath||n&&n.absolutePath||(c=N(c)),void 0===r&&(c=c.replace(/^\/\//,"/%2F")),o.push(c)}return void 0!==e.query&&(o.push("?"),o.push(e.query)),void 0!==e.fragment&&(o.push("#"),o.push(e.fragment)),o.join("")}function z(e,t){var i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},o=arguments[3],n={};return o||(e=M(J(e,i),i),t=M(J(t,i),i)),!(i=i||{}).tolerant&&t.scheme?(n.scheme=t.scheme,n.userinfo=t.userinfo,n.host=t.host,n.port=t.port,n.path=N(t.path||""),n.query=t.query):(void 0!==t.userinfo||void 0!==t.host||void 0!==t.port?(n.userinfo=t.userinfo,n.host=t.host,n.port=t.port,n.path=N(t.path||""),n.query=t.query):(t.path?("/"===t.path.charAt(0)?n.path=N(t.path):(void 0===e.userinfo&&void 0===e.host&&void 0===e.port||e.path?e.path?n.path=e.path.slice(0,e.path.lastIndexOf("/")+1)+t.path:n.path=t.path:n.path="/"+t.path,n.path=N(n.path)),n.query=t.query):(n.path=e.path,void 0!==t.query?n.query=t.query:n.query=e.query),n.userinfo=e.userinfo,n.host=e.host,n.port=e.port),n.scheme=e.scheme),n.fragment=t.fragment,n}function U(e,t){return e&&e.toString().replace(t&&t.iri?s.PCT_ENCODED:a.PCT_ENCODED,C)}var V={scheme:"http",domainHost:!0,parse:function(e,t){return e.host||(e.error=e.error||"HTTP URIs must have a host."),e},serialize:function(e,t){return e.port!==("https"!==String(e.scheme).toLowerCase()?80:443)&&""!==e.port||(e.port=void 0),e.path||(e.path="/"),e}},K={scheme:"https",domainHost:V.domainHost,parse:V.parse,serialize:V.serialize},q={},H="[A-Za-z0-9\\-\\.\\_\\~\\xA0-\\u200D\\u2010-\\u2029\\u202F-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFEF]",W="[0-9A-Fa-f]",Y=i(i("%[EFef]"+W+"%"+W+W+"%"+W+W)+"|"+i("%[89A-Fa-f]"+W+"%"+W+W)+"|"+i("%"+W+W)),G=t("[\\!\\$\\%\\'\\(\\)\\*\\+\\,\\-\\.0-9\\<\\>A-Z\\x5E-\\x7E]",'[\\"\\\\]'),X=new RegExp(H,"g"),Z=new RegExp(Y,"g"),Q=new RegExp(t("[^]","[A-Za-z0-9\\!\\$\\%\\'\\*\\+\\-\\^\\_\\`\\{\\|\\}\\~]","[\\.]",'[\\"]',G),"g"),ee=new RegExp(t("[^]",H,"[\\!\\$\\'\\(\\)\\*\\+\\,\\;\\:\\@]"),"g"),te=ee;function ie(e){var t=C(e);return t.match(X)?t:e}var oe={scheme:"mailto",parse:function(e,t){var i=e,o=i.to=i.path?i.path.split(","):[];if(i.path=void 0,i.query){for(var n=!1,r={},a=i.query.split("&"),s=0,c=a.length;s<c;++s){var l=a[s].split("=");switch(l[0]){case"to":for(var u=l[1].split(","),d=0,p=u.length;d<p;++d)o.push(u[d]);break;case"subject":i.subject=U(l[1],t);break;case"body":i.body=U(l[1],t);break;default:n=!0,r[U(l[0],t)]=U(l[1],t)}}n&&(i.headers=r)}i.query=void 0;for(var h=0,f=o.length;h<f;++h){var y=o[h].split("@");if(y[0]=U(y[0]),t.unicodeSupport)y[1]=U(y[1],t).toLowerCase();else try{y[1]=w(U(y[1],t).toLowerCase())}catch(g){i.error=i.error||"Email address's domain name can not be converted to ASCII via punycode: "+g}o[h]=y.join("@")}return i},serialize:function(e,t){var i,o=e,r=void 0!==(i=e.to)&&null!==i?i instanceof Array?i:"number"!==typeof i.length||i.split||i.setInterval||i.call?[i]:Array.prototype.slice.call(i):[];if(r){for(var a=0,s=r.length;a<s;++a){var c=String(r[a]),l=c.lastIndexOf("@"),u=c.slice(0,l).replace(Z,ie).replace(Z,n).replace(Q,T),d=c.slice(l+1);try{d=t.iri?A(d):w(U(d,t).toLowerCase())}catch(y){o.error=o.error||"Email address's domain name can not be converted to "+(t.iri?"Unicode":"ASCII")+" via punycode: "+y}r[a]=u+"@"+d}o.path=r.join(",")}var p=e.headers=e.headers||{};e.subject&&(p.subject=e.subject),e.body&&(p.body=e.body);var h=[];for(var f in p)p[f]!==q[f]&&h.push(f.replace(Z,ie).replace(Z,n).replace(ee,T)+"="+p[f].replace(Z,ie).replace(Z,n).replace(te,T));return h.length&&(o.query=h.join("&")),o}},ne=/^([^\:]+)\:(.*)/,re={scheme:"urn",parse:function(e,t){var i=e.path&&e.path.match(ne),o=e;if(i){var n=t.scheme||o.scheme||"urn",r=i[1].toLowerCase(),a=i[2],s=n+":"+(t.nid||r),c=I[s];o.nid=r,o.nss=a,o.path=void 0,c&&(o=c.parse(o,t))}else o.error=o.error||"URN can not be parsed.";return o},serialize:function(e,t){var i=t.scheme||e.scheme||"urn",o=e.nid,n=i+":"+(t.nid||o),r=I[n];r&&(e=r.serialize(e,t));var a=e,s=e.nss;return a.path=(o||t.nid)+":"+s,a}},ae=/^[0-9A-Fa-f]{8}(?:\-[0-9A-Fa-f]{4}){3}\-[0-9A-Fa-f]{12}$/,se={scheme:"urn:uuid",parse:function(e,t){var i=e;return i.uuid=i.nss,i.nss=void 0,t.tolerant||i.uuid&&i.uuid.match(ae)||(i.error=i.error||"UUID is not valid."),i},serialize:function(e,t){var i=e;return i.nss=(e.uuid||"").toLowerCase(),i}};I[V.scheme]=V,I[K.scheme]=K,I[oe.scheme]=oe,I[re.scheme]=re,I[se.scheme]=se,e.SCHEMES=I,e.pctEncChar=T,e.pctDecChars=C,e.parse=M,e.removeDotSegments=N,e.serialize=J,e.resolveComponents=z,e.resolve=function(e,t,i){var o=function(e,t){var i=e;if(t)for(var o in t)i[o]=t[o];return i}({scheme:"null"},i);return J(z(M(e,o),M(t,o),o,!0),o)},e.normalize=function(e,t){return"string"===typeof e?e=J(M(e,t),t):"object"===o(e)&&(e=M(J(e,t),t)),e},e.equal=function(e,t,i){return"string"===typeof e?e=J(M(e,i),i):"object"===o(e)&&(e=J(e,i)),"string"===typeof t?t=J(M(t,i),i):"object"===o(t)&&(t=J(t,i)),e===t},e.escapeComponent=function(e,t){return e&&e.toString().replace(t&&t.iri?s.ESCAPE:a.ESCAPE,T)},e.unescapeComponent=U,Object.defineProperty(e,"__esModule",{value:!0})}(t)},nVbm:function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.SettingsStateUpgradeMap=void 0;const o=i("YFNc");t.SettingsStateUpgradeMap=new Map([[1,e=>e.useErgoEditSymmetry?Object.assign(Object.assign({},e),{version:2,useErgoEditSymmetry:!1}):Object.assign(Object.assign({},e),{version:2})],[o.LATEST_SETTINGS_STATE_VERSION,e=>e]])},ncY8:function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getArcadeButtonSocketPosition=t.getArcadeButtonConfig=t.ARCADE_ROW_ACTIVATOR_DISPLACEMENT_MULTIPLIER=t.ARCADE_RADIUS_MULTIPLIER=t.ANGULAR_OFFSET_2X4=t.ANGULAR_OFFSET_2X3=t.sqrt2=void 0;const o=i("g5Cp"),n=i("Myyd");t.sqrt2=Math.sqrt(2)/2,t.ANGULAR_OFFSET_2X3=.2,t.ANGULAR_OFFSET_2X4=.4,t.ARCADE_RADIUS_MULTIPLIER=.41666,t.ARCADE_ROW_ACTIVATOR_DISPLACEMENT_MULTIPLIER=.75,t.getArcadeButtonConfig=function(e,i=0){const n=e?t.ANGULAR_OFFSET_2X4:t.ANGULAR_OFFSET_2X3;return(e?[{type:"button",x:-t.sqrt2-2*t.sqrt2+n,y:-t.sqrt2+2*t.sqrt2+n,name:"lightPunch"},{type:"button",x:-t.sqrt2,y:-t.sqrt2,name:"mediumPunch"},{type:"button",x:-t.sqrt2+2*t.sqrt2,y:-t.sqrt2-2*t.sqrt2,name:"heavyPunch"},{type:"button",x:t.sqrt2-2*t.sqrt2+n,y:t.sqrt2+2*t.sqrt2+n,name:"lightKick"},{type:"button",x:t.sqrt2,y:t.sqrt2,name:"mediumKick"},{type:"button",x:t.sqrt2+2*t.sqrt2,y:t.sqrt2-2*t.sqrt2,name:"heavyKick"},{type:"button",x:t.sqrt2+2*t.sqrt2*2+n,y:t.sqrt2-2*t.sqrt2*2+n,name:"specialKick"},{type:"button",x:-t.sqrt2+2*t.sqrt2*2+n,y:-t.sqrt2-2*t.sqrt2*2+n,name:"specialPunch"}].map(e=>(e.x-=t.sqrt2,e.y+=t.sqrt2,e)):[{type:"button",x:-t.sqrt2-2*t.sqrt2+n,y:-t.sqrt2+2*t.sqrt2+n,name:"lightPunch"},{type:"button",x:-t.sqrt2,y:-t.sqrt2,name:"mediumPunch"},{type:"button",x:-t.sqrt2+2*t.sqrt2+n,y:-t.sqrt2-2*t.sqrt2+n,name:"heavyPunch"},{type:"button",x:t.sqrt2-2*t.sqrt2+n,y:t.sqrt2+2*t.sqrt2+n,name:"lightKick"},{type:"button",x:t.sqrt2,y:t.sqrt2,name:"mediumKick"},{type:"button",x:t.sqrt2+2*t.sqrt2+n,y:t.sqrt2-2*t.sqrt2+n,name:"heavyKick"}]).map(e=>{if(void 0===i||0===i)return e;{const t=(0,o.positionToDirection)(e);return Object.assign(Object.assign({},e),(0,o.directionToPosition)(t.angleInRadians+i,t.radius))}})},t.getArcadeButtonSocketPosition=function(e,i,r=0){const a=i?t.ANGULAR_OFFSET_2X4:t.ANGULAR_OFFSET_2X3,s={x:0,y:0};switch(e){case n.ArcadeButtonSockets.LightPunch:s.x=3*-t.sqrt2+a,s.y=t.sqrt2+a;break;case n.ArcadeButtonSockets.MediumPunch:s.x=-t.sqrt2,s.y=-t.sqrt2;break;case n.ArcadeButtonSockets.HeavyPunch:s.x=i?t.sqrt2:t.sqrt2+a,s.y=i?3*-t.sqrt2:3*-t.sqrt2+a;break;case n.ArcadeButtonSockets.SpecialPunch:s.x=3*t.sqrt2+a,s.y=5*-t.sqrt2+a;break;case n.ArcadeButtonSockets.LightKick:s.x=-t.sqrt2+a,s.y=3*t.sqrt2+a;break;case n.ArcadeButtonSockets.MediumKick:s.x=t.sqrt2,s.y=t.sqrt2;break;case n.ArcadeButtonSockets.HeavyKick:s.x=i?3*t.sqrt2:3*t.sqrt2+a,s.y=i?-t.sqrt2:-t.sqrt2+a;break;case n.ArcadeButtonSockets.SpecialKick:s.x=5*t.sqrt2+a,s.y=3*-t.sqrt2+a}if(s.x-=i?t.sqrt2:0,s.y+=i?t.sqrt2:0,0!==r){const e=(0,o.positionToDirection)(s);s.x=(0,o.directionToPositionX)(e.angleInRadians+r,e.radius),s.y=(0,o.directionToPositionY)(e.angleInRadians+r,e.radius)}return s}},nyYK:function(e,t,i){"use strict";var o,n=this&&this.__decorate||function(e,t,i,o){var n,r=arguments.length,a=r<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,i):o;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)a=Reflect.decorate(e,t,i,o);else for(var s=e.length-1;s>=0;s--)(n=e[s])&&(a=(r<3?n(a):r>3?n(t,i,a):n(t,i))||a);return r>3&&a&&Object.defineProperty(t,i,a),a},r=this&&this.__metadata||function(e,t){if("object"===typeof Reflect&&"function"===typeof Reflect.metadata)return Reflect.metadata(e,t)},a=this&&this.__param||function(e,t){return function(i,o){t(i,o,e)}};Object.defineProperty(t,"__esModule",{value:!0}),t.BundleProcessor=void 0;const s=i("DfD7"),c=i("EQnm"),l=i("s6Xb"),u=i("LcNk"),d=i("YfSF"),p=i("tTzi"),h=i("2ZOr"),f=i("wV8u"),y=i("7HJd"),g=i("RDdo"),m=i("0PxE"),v=i("diTm"),b=i("DG/1"),S=i("bdvg");let k=o=class{constructor(e,t,i){this.logger=i,this._unappliedPatches=[],this._textDecoder=new p.TextDecoder("utf-8"),this.allowLayoutChanges=!1,this.titleId=void 0,this._patchLayoutChangeStream=new u.ReplaySubject(1),this.onDecodePatch=e=>this._textDecoder.decode(new Uint8Array((0,c.decode)(e))),this.onStatePatchPartialSuccess=e=>{var t;this.onShowTakNotification&&this.getString&&this.onShowTakNotification(this.getString("Stream_StatePatchPartialSuccess")),this.logger.log(o.Tag,s.LogLevel.Warn,e),null===(t=this.onTelemetry)||void 0===t||t.call(this,{name:y.TelemetryEventNames.TakError,reason:e,titleId:this.titleId})},this.onStatePatchError=e=>{var t;this.onShowTakNotification&&this.getString&&this.onShowTakNotification(this.getString("Stream_InvalidStatePatch")),this.logger.log(o.Tag,s.LogLevel.Warn,e),null===(t=this.onTelemetry)||void 0===t||t.call(this,{name:y.TelemetryEventNames.TakError,reason:e,titleId:this.titleId})},this.currentContextFileReferenceResolver=e=>{var t;return this.referenceResolver(e,null===(t=this._touchBundleState)||void 0===t?void 0:t.contextFile)},this.defaultContextFileReferenceResolver=e=>{var t;return this.referenceResolver(e,null===(t=this._touchBundle)||void 0===t?void 0:t.contextFile)},this.validateTouchLayout=e=>(0,S.getSchemaLayoutIsValidAgainst)(this.jsonValidator,e,this.logger,e=>{var t;null===(t=this.onTelemetry)||void 0===t||t.call(this,{name:y.TelemetryEventNames.TakError,reason:e,titleId:this.titleId})}),this.jsonValidator=(0,S.createJsonValidator)(i);const n=e.getFilteredCallbacksStream(e=>{var t,i;return{asset:{onUnloadRenderAsset:null===(t=e.asset)||void 0===t?void 0:t.onUnloadRenderAsset},getString:e.getString,layout:{onLoadedLayoutsChanged:null===(i=e.layout)||void 0===i?void 0:i.onLoadedLayoutsChanged},onShowTakNotification:e.onShowTakNotification,onTelemetry:e.onTelemetry}}).pipe((0,d.tap)(e=>{var t,i;this.getString=e.getString,this.onLoadedLayoutsChanged=null===(t=e.layout)||void 0===t?void 0:t.onLoadedLayoutsChanged,this.onShowTakNotification=e.onShowTakNotification,this.onTelemetry=e.onTelemetry,this.onUnloadRenderAsset=null===(i=e.asset)||void 0===i?void 0:i.onUnloadRenderAsset})),r=e.getFilteredOptionsStream(e=>({allowLayoutChanges:e.allowLayoutChanges,titleId:e.titleId})).pipe((0,d.tap)(e=>{this.allowLayoutChanges=e.allowLayoutChanges,this.titleId=e.titleId})),a=t.getBundleStream().pipe((0,d.tap)(e=>{this._touchBundle=e})),l=this._patchLayoutChangeStream.pipe((0,d.switchMap)(e=>{var t,i;return(null===(t=this._touchBundleState)||void 0===t?void 0:t.contextFile)?(0,u.of)(Object.assign(Object.assign({},this._touchBundleState),{contextFile:(0,b.applyStatePatch)(e,null===(i=this._touchBundleState)||void 0===i?void 0:i.contextFile,this.onDecodePatch,this.onStatePatchError,this.onStatePatchPartialSuccess)})):(this._unappliedPatches.push(e),u.NEVER)}));this._currentLayoutsStream=(0,u.merge)(a,l).pipe((0,d.concatMap)(async e=>(this._touchBundleState=this.applyUnappliedPatches(e),this.handleTouchBundleStateChange(this._touchBundleState))),(0,d.switchMap)(e=>e?(this._transformedLayouts=e,(0,u.of)(e)):u.NEVER),(0,d.startWith)(void 0),(0,d.distinctUntilChanged)(),(0,d.withLatestFrom)(n,r),(0,d.map)(([e])=>e),(0,d.tap)(e=>{var t;null===(t=this.onLoadedLayoutsChanged)||void 0===t||t.call(this,null!==e&&void 0!==e?e:new Map)}),(0,d.shareReplay)(1))}unmount(){var e,t,i;if(!(null===(e=this._previousTouchBundleState)||void 0===e?void 0:e.assetRenderData))return;const o=null===(t=this._previousTouchBundleState)||void 0===t?void 0:t.assetRenderData;for(const n of o)null===(i=this.onUnloadRenderAsset)||void 0===i||i.call(this,n.renderKey)}getLoadedLayoutsStream(){return this._currentLayoutsStream}async changeTouchControls(e){if(this.allowLayoutChanges)switch(e.command){case"show":return this.logger.log(o.Tag,s.LogLevel.Info,"Show command with patch received: "+e.statePatch),void(e.statePatch&&this._patchLayoutChangeStream.next(e.statePatch));case"patchState":return this.logger.log(o.Tag,s.LogLevel.Info,"PatchState command received: "+e.statePatch),void(e.statePatch&&this._patchLayoutChangeStream.next(e.statePatch));case"hide":case"showTitleDefault":default:return}}applyUnappliedPatches(e){if((null===e||void 0===e?void 0:e.contextFile)&&this._unappliedPatches.length>0){let t=e.contextFile;for(const e of this._unappliedPatches)t=(0,b.applyStatePatch)(e,t,this.onDecodePatch,this.onStatePatchError,this.onStatePatchPartialSuccess);return this._unappliedPatches=[],Object.assign(Object.assign({},e),{contextFile:t})}return e}referenceResolver(e,t){var i;const o=(0,m.normalizePath)(e);if((null===t||void 0===t?void 0:t.originalPath)===o)return Promise.resolve(t);const n=`Only the touch bundle context file can be referenced. Reference Path: ${e} \n Context File: ${null===t||void 0===t?void 0:t.originalPath}`;return null===(i=this.onTelemetry)||void 0===i||i.call(this,{name:y.TelemetryEventNames.TakError,reason:n,titleId:this.titleId}),Promise.reject(n)}async handleTouchBundleStateChange(e){var t,i,n,r,a,c,l,u;if(this.logger.log(o.Tag,s.LogLevel.Info,`Transforming [${null===(t=null===e||void 0===e?void 0:e.layoutMap)||void 0===t?void 0:t.size}] layouts.`),null===e||void 0===e?void 0:e.layoutMap){const t=new f.CaseInsensitiveMap,p=new Map,h=new Map,m=null===e||void 0===e?void 0:e.layoutMap.entries();for(const[,r]of m)try{const i=await(0,b.fullyDereferenceLayout)(r,p,this.currentContextFileReferenceResolver,this.validateTouchLayout,null===e||void 0===e?void 0:e.assetRenderData);t.set(r.id,i)}catch(d){if(this.logger.log(o.Tag,s.LogLevel.Info,"Reference resolution failed with: "+(0,v.stringify)(d)),this.onShowTakNotification&&this.getString){const e=this.getString("Stream_InvalidLayoutReferences",r.id);this.onShowTakNotification(e),this.logger.log(o.Tag,s.LogLevel.Warn,e),null===(i=this.onTelemetry)||void 0===i||i.call(this,{name:y.TelemetryEventNames.TakError,reason:e,titleId:this.titleId})}try{const i=await(0,b.fullyDereferenceLayout)(r,h,this.defaultContextFileReferenceResolver,this.validateTouchLayout,null===e||void 0===e?void 0:e.assetRenderData);t.set(r.id,i)}catch(d){this.logger.log(o.Tag,s.LogLevel.Info,"Fallback reference resolution failed with: "+(0,v.stringify)(d));const e=null===(n=this._transformedLayouts)||void 0===n?void 0:n.get(r.id);e&&t.set(r.id,e);continue}}this.logger.log(o.Tag,s.LogLevel.Debug,`setting [${t.size}] new derefed layouts.`);const S=[];for(const[,e]of t.entries())(null===(r=this._previousTouchBundleState)||void 0===r?void 0:r.assetRenderData)&&(0,g.getAssetRenderDataInLayout)(e,this._previousTouchBundleState.assetRenderData,S);if(null===(a=this._previousTouchBundleState)||void 0===a?void 0:a.assetRenderData)for(const e of this._previousTouchBundleState.assetRenderData)S.includes(e)||null===(c=this.onUnloadRenderAsset)||void 0===c||c.call(this,e.renderKey);for(const i of S)(null===(l=e.assetRenderData)||void 0===l?void 0:l.includes(i))||null===(u=e.assetRenderData)||void 0===u||u.push(i);return this._previousTouchBundleState=e,t}}};k.Tag="TakBundleProcessor",k=o=n([(0,l.injectable)(),a(0,(0,l.inject)(h.SERVICE_TYPES.RuntimeOptions)),a(1,(0,l.inject)(h.SERVICE_TYPES.BundleLoader)),a(2,(0,l.inject)(h.SERVICE_TYPES.Logger)),r("design:paramtypes",[Function,Function,Object])],k),t.BundleProcessor=k},oMWc:function(e,t,i){"use strict";e.exports=function(e,t,i){var o=" ",n=e.schema[t],r=e.errSchemaPath+"/"+t,a=(e.opts.allErrors,e.util.toQuotedString(n));return!0===e.opts.$comment?o+=" console.log("+a+");":"function"==typeof e.opts.$comment&&(o+=" self._opts.$comment("+a+", "+e.util.toQuotedString(r)+", validate.root.schema);"),o}},oTBh:function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.LayoutCoordinator=void 0;var o=i("whoM");Object.defineProperty(t,"LayoutCoordinator",{enumerable:!0,get:function(){return o.LayoutCoordinator}})},p08B:function(e,t,i){"use strict";var o=this&&this.__createBinding||(Object.create?function(e,t,i,o){void 0===o&&(o=i);var n=Object.getOwnPropertyDescriptor(t,i);n&&!("get"in n?!t.__esModule:n.writable||n.configurable)||(n={enumerable:!0,get:function(){return t[i]}}),Object.defineProperty(e,o,n)}:function(e,t,i,o){void 0===o&&(o=i),e[o]=t[i]}),n=this&&this.__exportStar||function(e,t){for(var i in e)"default"===i||Object.prototype.hasOwnProperty.call(t,i)||o(t,e,i)};Object.defineProperty(t,"__esModule",{value:!0}),n(i("+ph6"),t)},pL49:function(e,t,i){"use strict";var o=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.convertStringToGreyscaleColor=t.convertStringToColor=void 0;const n=o(i("QbNu"));function r(e){const t=e.toRgb();return t.r/=255,t.g/=255,t.b/=255,t.string=e.toHex8String(),t}t.convertStringToColor=function(e){return r((0,n.default)(e))},t.convertStringToGreyscaleColor=function(e){return r((0,n.default)(e).greyscale())}},pMbS:function(e,t,i){"use strict";e.exports=function(e,t,i){var o=" ",n=e.schema[t],r=e.schemaPath+e.util.getProperty(t),a=e.errSchemaPath+"/"+t,s=!e.opts.allErrors,c=e.util.copy(e),l="";c.level++;var u="valid"+c.level,d=c.baseId,p=!0,h=n;if(h)for(var f,y=-1,g=h.length-1;y<g;)f=h[y+=1],(e.opts.strictKeywords?"object"==typeof f&&Object.keys(f).length>0||!1===f:e.util.schemaHasRules(f,e.RULES.all))&&(p=!1,c.schema=f,c.schemaPath=r+"["+y+"]",c.errSchemaPath=a+"/"+y,o+="  "+e.validate(c)+" ",c.baseId=d,s&&(o+=" if ("+u+") { ",l+="}"));return s&&(o+=p?" if (true) { ":" "+l.slice(0,-1)+" "),o}},q19Y:function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.directionToDPadValue=void 0;const o=i("fUIH");t.directionToDPadValue=function(e,t){switch(e){case o.DirectionalPadDirection.Up:return{dPadUp:t};case o.DirectionalPadDirection.UpAndRight:return{dPadUp:t,dPadRight:t};case o.DirectionalPadDirection.Right:return{dPadRight:t};case o.DirectionalPadDirection.RightAndDown:return{dPadRight:t,dPadDown:t};case o.DirectionalPadDirection.Down:return{dPadDown:t};case o.DirectionalPadDirection.DownAndLeft:return{dPadDown:t,dPadLeft:t};case o.DirectionalPadDirection.Left:return{dPadLeft:t};case o.DirectionalPadDirection.LeftAndUp:return{dPadLeft:t,dPadUp:t};default:return{}}}},q1Ul:function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.copyJoystickRenderProps=t.areJoystickRenderPropsEqual=t.copyJoystickOutlineRenderProps=t.areJoystickOutlineRenderPropsEqual=t.copyJoystickOutlineStyleRenderProps=t.areJoystickOutlineStyleRenderPropsEqual=t.copyJoystickOutlineIndicatorStyleRenderProps=t.areJoystickOutlineIndicatorStyleRenderPropsEqual=void 0;const o=i("iZJm"),n=i("V2pq"),r=i("j0qc"),a=i("SqAV"),s=i("gfMA");function c(e,t){return!!(e===t||e&&t&&e.type===t.type&&e.opacity===t.opacity&&(0,n.areColorsEqual)(e.value,t.value)&&e.visible===t.visible)}function l(e){return{opacity:e.opacity,type:e.type,value:(0,n.copyColor)(e.value),visible:e.visible}}function u(e,t){return!!(e===t||e&&t&&e.opacity===t.opacity&&c(e.indicator,t.indicator)&&(0,a.areStrokeRenderPropsEqual)(e.stroke,t.stroke))}function d(e){return{indicator:l(e.indicator),opacity:e.opacity,stroke:(0,a.copyStrokeRenderProps)(e.stroke)}}function p(e,t){return!!(e===t||e&&t&&e.radius===t.radius&&e.rotation===t.rotation&&u(e.styleProps,t.styleProps))}function h(e){return{radius:e.radius,rotation:e.rotation,styleProps:d(e.styleProps)}}t.areJoystickOutlineIndicatorStyleRenderPropsEqual=c,t.copyJoystickOutlineIndicatorStyleRenderProps=l,t.areJoystickOutlineStyleRenderPropsEqual=u,t.copyJoystickOutlineStyleRenderProps=d,t.areJoystickOutlineRenderPropsEqual=p,t.copyJoystickOutlineRenderProps=h,t.areJoystickRenderPropsEqual=function(e,t){return!!(e===t||e&&t&&(0,s.areRenderControlRenderPropsEqual)(e,t)&&e.baseSize===t.baseSize&&e.joystickType===t.joystickType&&(0,o.areBackgroundRenderPropsEqual)(e.background,t.background)&&p(e.outline,t.outline)&&(0,r.areKnobRenderPropsEqual)(e.knob,t.knob))},t.copyJoystickRenderProps=function(e){return Object.assign(Object.assign({},(0,s.copyRenderControlRenderProps)(e)),{baseSize:e.baseSize,joystickType:e.joystickType,knob:(0,r.copyKnobRenderProps)(e.knob),outline:h(e.outline),background:(0,o.copyBackgroundRenderProps)(e.background),type:e.type})}},q7M9:function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.gameloop$=void 0;const o=i("LcNk"),n=i("YfSF");t.gameloop$=(0,o.of)(null,o.animationFrameScheduler).pipe((0,n.repeat)(),(0,n.map)(()=>Date.now()),(0,n.pairwise)(),(0,n.map)(e=>e[1]-e[0]))},qBPl:function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.JoystickStyleManager=void 0;const o=i("kU1o"),n=i("IuIz"),r=i("pL49"),a=i("wQyi"),s=i("e7V4");t.JoystickStyleManager=class{constructor(e=3){this.backgroundColorMemo=new n.LazyMemoizedConverter(r.convertStringToColor,e),this.outlineIndicatorColorMemo=new n.LazyMemoizedConverter(r.convertStringToColor,e),this.outlineStrokeColorMemo=new n.LazyMemoizedConverter(r.convertStringToColor,e),this.knobBackgroundColorMemo=new n.LazyMemoizedConverter(r.convertStringToColor,e),this.knobStrokeColorMemo=new n.LazyMemoizedConverter(r.convertStringToColor,e)}getBackground(e,t){var i,o,n,r,c,l,u,d;switch(e){case a.JoystickState.Hidden:return(0,s.getDefaultHiddenJoystickBackground)();case a.JoystickState.Disabled:{const e=(0,s.getDefaultDisabledJoystickBackground)();return t&&((null===(i=t.default)||void 0===i?void 0:i.background)&&this.extractJoystickCustomBackgroundStyles(e,t.default.background),(null===(o=t.disabled)||void 0===o?void 0:o.background)&&this.extractJoystickCustomBackgroundStyles(e,t.disabled.background)),e}case a.JoystickState.Idle:{const e=(0,s.getDefaultIdleJoystickBackground)();return t&&((null===(n=t.default)||void 0===n?void 0:n.background)&&this.extractJoystickCustomBackgroundStyles(e,t.default.background),(null===(r=t.idle)||void 0===r?void 0:r.background)&&this.extractJoystickCustomBackgroundStyles(e,t.idle.background)),e}case a.JoystickState.Moving:{const e=(0,s.getDefaultMovingJoystickBackground)();return t&&((null===(c=t.default)||void 0===c?void 0:c.background)&&this.extractJoystickCustomBackgroundStyles(e,t.default.background),(null===(l=t.moving)||void 0===l?void 0:l.background)&&this.extractJoystickCustomBackgroundStyles(e,t.moving.background)),e}case a.JoystickState.Activated:{const e=(0,s.getDefaultActivatedJoystickBackground)();return t&&((null===(u=t.default)||void 0===u?void 0:u.background)&&this.extractJoystickCustomBackgroundStyles(e,t.default.background),(null===(d=t.activated)||void 0===d?void 0:d.background)&&this.extractJoystickCustomBackgroundStyles(e,t.activated.background)),e}}}getOutlineStyle(e,t,i,o,n){var r,c,l,u,d,p,h,f;switch(e){case a.JoystickState.Hidden:return(0,s.getDefaultHiddenJoystickOutlineStyle)();case a.JoystickState.Disabled:{const e=(0,s.getDefaultDisabledJoystickOutlineStyle)(t!==a.JoystickType.Standard);return n&&((null===(r=n.default)||void 0===r?void 0:r.outline)&&this.extractJoystickOutlinestyles(e,n.default.outline),(null===(c=n.disabled)||void 0===c?void 0:c.outline)&&this.extractJoystickOutlinestyles(e,n.disabled.outline)),e}case a.JoystickState.Idle:{const e=(0,s.getDefaultIdleJostickOutlineStyle)(t!==a.JoystickType.Standard,!1!==i);return n&&((null===(l=n.default)||void 0===l?void 0:l.outline)&&this.extractJoystickOutlinestyles(e,n.default.outline),(null===(u=n.idle)||void 0===u?void 0:u.outline)&&this.extractJoystickOutlinestyles(e,n.idle.outline)),e}case a.JoystickState.Moving:{const e=(0,s.getDefaultMovingJoystickOutlineStyle)(t!==a.JoystickType.Standard);return n&&((null===(d=n.default)||void 0===d?void 0:d.outline)&&this.extractJoystickOutlinestyles(e,n.default.outline),(null===(p=n.moving)||void 0===p?void 0:p.outline)&&this.extractJoystickOutlinestyles(e,n.moving.outline)),e}case a.JoystickState.Activated:{const e=(0,s.getDefaultActivatedJoystickOutlineStyle)(t!==a.JoystickType.Standard,o);return n&&((null===(h=n.default)||void 0===h?void 0:h.outline)&&this.extractJoystickOutlinestyles(e,n.default.outline),(null===(f=n.activated)||void 0===f?void 0:f.outline)&&this.extractJoystickOutlinestyles(e,n.activated.outline)),e}}}getKnobStyle(e,t,i){var o,n,r,c,l,u,d,p,h;switch(e){case a.JoystickState.Hidden:return(0,s.getDefaultHiddenJoystickKnobStyle)();case a.JoystickState.Disabled:{const e=(0,s.getDefaultDisabledJoystickKnobStyle)();return i&&((null===(o=i.default)||void 0===o?void 0:o.knob)&&this.extractJoystickKnobstyles(e,i.default.knob),(null===(n=i.disabled)||void 0===n?void 0:n.knob)&&this.extractJoystickKnobstyles(e,i.disabled.knob),"icon"===(null===(r=e.faceImage)||void 0===r?void 0:r.type)&&(e.faceImage.displayShadow=!1)),e}case a.JoystickState.Idle:{const e=(0,s.getDefaultIdleJoystickKnobStyle)();return i&&((null===(c=i.default)||void 0===c?void 0:c.knob)&&this.extractJoystickKnobstyles(e,i.default.knob),(null===(l=i.idle)||void 0===l?void 0:l.knob)&&this.extractJoystickKnobstyles(e,i.idle.knob)),e}case a.JoystickState.Moving:{const e=(0,s.getDefaultMovingJoystickKnobStyle)();return i&&((null===(u=i.default)||void 0===u?void 0:u.knob)&&this.extractJoystickKnobstyles(e,i.default.knob),(null===(d=i.moving)||void 0===d?void 0:d.knob)&&this.extractJoystickKnobstyles(e,i.moving.knob)),e}case a.JoystickState.Activated:{const e=(0,s.getDefaultActivatedJoystickKnobStyle)(t);return i&&((null===(p=i.default)||void 0===p?void 0:p.knob)&&this.extractJoystickKnobstyles(e,i.default.knob),(null===(h=i.activated)||void 0===h?void 0:h.knob)&&this.extractJoystickKnobstyles(e,i.activated.knob)),e}}}getOpacity(e,t){var i,o,n,r,c,l,u,d,p,h;let f=s.DefaultJoystickOpacity;switch(f=null!==(o=null===(i=null===t||void 0===t?void 0:t.default)||void 0===i?void 0:i.opacity)&&void 0!==o?o:f,e){case a.JoystickState.Hidden:f=0;break;case a.JoystickState.Disabled:f*=.33,f=null!==(r=null===(n=null===t||void 0===t?void 0:t.disabled)||void 0===n?void 0:n.opacity)&&void 0!==r?r:f;break;case a.JoystickState.Idle:f=null!==(l=null===(c=null===t||void 0===t?void 0:t.idle)||void 0===c?void 0:c.opacity)&&void 0!==l?l:f;break;case a.JoystickState.Moving:f=null!==(d=null===(u=null===t||void 0===t?void 0:t.moving)||void 0===u?void 0:u.opacity)&&void 0!==d?d:f;break;case a.JoystickState.Activated:f=null!==(h=null===(p=null===t||void 0===t?void 0:t.activated)||void 0===p?void 0:p.opacity)&&void 0!==h?h:f}return f}getKnobIsAnimating(e,t){return(t===a.JoystickState.Moving||t===a.JoystickState.Activated)&&e!==a.JoystickState.Moving&&e!==a.JoystickState.Activated}extractJoystickCustomBackgroundStyles(e,t){e.type=t.type,e.value="color"===t.type?this.backgroundColorMemo.convert(t.value):t.value,void 0!==t.opacity&&(e.opacity=t.opacity)}extractJoystickOutlinestyles(e,t){e.indicator&&t.indicator&&(e.indicator.value=this.outlineIndicatorColorMemo.convert(t.indicator.value),void 0!==t.indicator.opacity&&(e.indicator.opacity=t.indicator.opacity)),t.stroke&&(e.stroke.color=t.stroke.color?this.outlineStrokeColorMemo.convert(t.stroke.color):e.stroke.color,void 0!==t.stroke.opacity&&(e.stroke.opacity=t.stroke.opacity)),void 0!==t.opacity&&(e.opacity=t.opacity)}extractJoystickKnobstyles(e,t){var i,n;if(t.background){const i=t.background;e.background.type=i.type,e.background.value="color"===i.type?this.knobBackgroundColorMemo.convert(i.value):i.value,void 0!==i.opacity&&(e.background.opacity=i.opacity)}if(t.faceImage){const r=t.faceImage;"icon"===r.type?e.faceImage={type:"icon",value:r.value,color:(0,s.getDefaultJoystickKnobFaceImageColor)(),displayShadow:s.DefaultJoystickKnobFaceImageDisplayShadow,scale:s.DefaultJoystickKnobFaceImageScale,animationEnergy:o.AnimationEnergy.Instant,opacity:null!==(i=r.opacity)&&void 0!==i?i:1,label:(0,s.getDefaultJoystickKnobFaceImageLabel)(),offset:s.DefaultJoystickKnobFaceImageOffset}:e.faceImage={type:"asset",value:r.value,scale:s.DefaultJoystickKnobFaceImageScale,animationEnergy:o.AnimationEnergy.Instant,opacity:null!==(n=r.opacity)&&void 0!==n?n:1,label:(0,s.getDefaultJoystickKnobFaceImageLabel)(),offset:s.DefaultJoystickKnobFaceImageOffset}}if(t.stroke){const i=t.stroke;e.stroke.color=i.color?this.knobStrokeColorMemo.convert(i.color):e.stroke.color,void 0!==i.opacity&&(e.stroke.opacity=i.opacity)}void 0!==t.opacity&&(e.opacity=t.opacity)}}},qYWw:function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.VirtualFileSystem=t.expandBundle=void 0;var o=i("A8be");Object.defineProperty(t,"expandBundle",{enumerable:!0,get:function(){return o.expandBundle}});var n=i("aXAU");Object.defineProperty(t,"VirtualFileSystem",{enumerable:!0,get:function(){return n.VirtualFileSystem}})},r6NY:function(e){e.exports=JSON.parse('{"$id":"https://raw.githubusercontent.com/microsoft/xbox-game-streaming-tools/main/touch-adaptation-kit/schemas/manifest/latest/manifest.json","$schema":"http://json-schema.org/draft-07/schema#","title":"JSON Schema for Touch Adaptation Bundle Manifests","type":"object","properties":{"$schema":{"type":"string"},"layouts":{"type":"string","description":"Root directory for the touch layouts."},"assets":{"type":"string","description":"Root directory for all assets needed by the touch layouts."},"defaultLayout":{"type":"string","description":"Name of the layout to use by default when a game is starting"},"contextFile":{"type":"string","format":"uri-reference","description":"Relative file path to the global context file that can be referenced by all layouts."},"version":{"type":"string","pattern":"\\\\d+\\\\.\\\\d+\\\\.\\\\d+\\\\.\\\\d+","description":"Version number of the touch adaptation bundle.","examples":["1.0.0.0"]},"versionName":{"type":"string","description":"Descriptive name of the version of the touch adaptation bundle.","examples":["DLC 2"]}},"required":["layouts","version"],"additionalProperties":false}')},r7Ei:function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ThrottleRenderProppertyManager=void 0;const o=i("2ZOr"),n=i("kU1o"),r=i("g5Cp"),a=i("25ZR"),s=i("4HWf"),c=i("l1ss");class l extends a.ValueRenderPropertyManager{constructor(e,t){super(e,t,Object.keys(c.ThrottleState).length/2),this.styleManager=new s.ThrottleStyleManager,this._renderProperties=this.primeCache(this.state)}primeCache(e){const{baseSize:t,type:i,x:r,y:a,styles:s}=this.props,c=t/2,{indicatorWidth:l,indicatorX:u,axisX:d,axisWidth:p,axisHeight:h,leftSided:f}=this.calculateHotProperties();return{type:i,rotation:0,x:r,y:a,indicator:{width:l,height:o.STROKE_WIDTH,x:u,y:0,styleProps:this.styleManager.getIndicatorStyle(e.interactionState,s)},knob:{x:0,y:0,isAnimating:!1,radius:c,styleProps:this.styleManager.getKnobStyle(e.interactionState,s)},axes:{x:d,y:0,width:p,height:h,leftSided:f,styleProps:this.styleManager.getAxesStyle(e.interactionState,s)},opacity:{value:this.styleManager.getOpacity(e.interactionState,s),energy:n.AnimationEnergy.Instant}}}completeCache({interactionState:e,value:t},{interactionState:i}){const{colliderRadius:o}=this.props,n=e!==c.ThrottleState.Disabled?o*-(0,r.clamp)(t,-1,1):0;this._renderProperties.knob.y=n,this._renderProperties.indicator.y=n,this._renderProperties.knob.isAnimating=(i===c.ThrottleState.ActivatedUp||i===c.ThrottleState.ActivatedDown||i===c.ThrottleState.IdleUp)&&(e===c.ThrottleState.Hidden||e===c.ThrottleState.Disabled||e===c.ThrottleState.Idle);const{indicatorWidth:a,indicatorX:s,axisX:l,axisWidth:u,axisHeight:d,leftSided:p}=this.calculateHotProperties();this._renderProperties.indicator.width=a,this._renderProperties.indicator.x=s,this._renderProperties.axes.x=l,this._renderProperties.axes.width=u,this._renderProperties.axes.height=d,this._renderProperties.axes.leftSided=p}calculateHotProperties(){const{baseSize:e,x:t,workspaceWidth:i,colliderRadius:o}=this.props,n=e/2,r=t<.5*i,a=r?t-n:i-t-n;return{indicatorWidth:a,indicatorX:r?-n-a:n,axisX:r?-t:-t+i,axisWidth:.5*n,axisHeight:2*o,leftSided:r}}}t.ThrottleRenderProppertyManager=l},rDNQ:function(e,t,i){"use strict";var o=/^[a-z_$][a-z0-9_$-]*$/i,n=i("utIM"),r=i("i0YN");e.exports={add:function(e,t){var i=this.RULES;if(i.keywords[e])throw new Error("Keyword "+e+" is already defined");if(!o.test(e))throw new Error("Keyword "+e+" is not a valid identifier");if(t){this.validateKeyword(t,!0);var r=t.type;if(Array.isArray(r))for(var a=0;a<r.length;a++)c(e,r[a],t);else c(e,r,t);var s=t.metaSchema;s&&(t.$data&&this._opts.$data&&(s={anyOf:[s,{$ref:"https://raw.githubusercontent.com/ajv-validator/ajv/master/lib/refs/data.json#"}]}),t.validateSchema=this.compile(s,!0))}function c(e,t,o){for(var r,a=0;a<i.length;a++){var s=i[a];if(s.type==t){r=s;break}}r||(r={type:t,rules:[]},i.push(r));var c={keyword:e,definition:o,custom:!0,code:n,implements:o.implements};r.rules.push(c),i.custom[e]=c}return i.keywords[e]=i.all[e]=!0,this},get:function(e){var t=this.RULES.custom[e];return t?t.definition:this.RULES.keywords[e]||!1},remove:function(e){var t=this.RULES;delete t.keywords[e],delete t.all[e],delete t.custom[e];for(var i=0;i<t.length;i++)for(var o=t[i].rules,n=0;n<o.length;n++)if(o[n].keyword==e){o.splice(n,1);break}return this},validate:function e(t,i){e.errors=null;var o=this._validateKeyword=this._validateKeyword||this.compile(r,!0);if(o(t))return!0;if(e.errors=o.errors,i)throw new Error("custom keyword definition is invalid: "+this.errorsText(o.errors));return!1}}},rDai:function(e,t,i){"use strict";var o=this&&this.__decorate||function(e,t,i,o){var n,r=arguments.length,a=r<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,i):o;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)a=Reflect.decorate(e,t,i,o);else for(var s=e.length-1;s>=0;s--)(n=e[s])&&(a=(r<3?n(a):r>3?n(t,i,a):n(t,i))||a);return r>3&&a&&Object.defineProperty(t,i,a),a},n=this&&this.__metadata||function(e,t){if("object"===typeof Reflect&&"function"===typeof Reflect.metadata)return Reflect.metadata(e,t)},r=this&&this.__param||function(e,t){return function(i,o){t(i,o,e)}};Object.defineProperty(t,"__esModule",{value:!0}),t.TouchForwardingControl=void 0;const a=i("s6Xb"),s=i("2ZOr"),c=i("Ledy"),l=i("cvzu"),u=i("W3G1"),d={interactionState:i("aQA3").TouchForwardingState.None};let p=class extends l.RenderControl{constructor(e,t,i){super(d,e,t),this.inputProvider=i,this.compatibleTouchEventTarget=c.TouchEventTarget.Native,this.customCollider=e=>!0,this.onPointerEnd=e=>this.forwardTouch(e.pointerIndex,"up"),this.onPointerMove=e=>this.forwardTouch(e.pointerIndex,"down",e.position,e.additionalTouchData),this.onPointerStart=e=>this.forwardTouch(e.pointerIndex,"down",e.initialPosition,e.additionalTouchData),this.forwardTouch=(e,t,i,o)=>(this.inputProvider.sendTouchEvent({pointerIndex:e,position:i,additionalTouchData:o,action:t}),!1);const o=e.getProps();this.renderPropertyManager=new u.TouchForwardingRenderPropertyManager(o,d)}getIsStateUndimmable(){return!1}};p=o([(0,a.injectable)(),r(0,(0,a.inject)(s.SERVICE_TYPES.VirtualControl)),r(1,(0,a.inject)(s.SERVICE_TYPES.UserInterface)),r(2,(0,a.inject)(s.SERVICE_TYPES.InputProvider)),n("design:paramtypes",[Object,Function,Function])],p),t.TouchForwardingControl=p},rsTb:function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getFilteredStream=void 0;const o=i("YfSF");t.getFilteredStream=function(e,t,i){return i?e.pipe((0,o.map)(e=>t(e)),(0,o.distinctUntilChanged)(i)):e.pipe((0,o.map)(e=>t(e)),(0,o.distinctUntilChanged)())}},"sa+M":function(e,t,i){"use strict";var o=this&&this.__decorate||function(e,t,i,o){var n,r=arguments.length,a=r<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,i):o;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)a=Reflect.decorate(e,t,i,o);else for(var s=e.length-1;s>=0;s--)(n=e[s])&&(a=(r<3?n(a):r>3?n(t,i,a):n(t,i))||a);return r>3&&a&&Object.defineProperty(t,i,a),a},n=this&&this.__metadata||function(e,t){if("object"===typeof Reflect&&"function"===typeof Reflect.metadata)return Reflect.metadata(e,t)},r=this&&this.__param||function(e,t){return function(i,o){t(i,o,e)}};Object.defineProperty(t,"__esModule",{value:!0}),t.VirtualControl=void 0;const a=i("s6Xb"),s=i("LcNk"),c=i("YfSF"),l=i("2ZOr"),u=i("kEja"),d=i("90Yz");let p=class{constructor(e,t,i){this.layerManager=e,this.inputProvider=t,this.initialProps=i,this.analogInput$=new s.BehaviorSubject((0,d.getResetGamepadState)()),this.hybridInput$=new s.BehaviorSubject((0,d.getResetGamepadState)()),this.turboSubscription=null,this.layerAction$=new s.BehaviorSubject(void 0),this.baseGamepad0=(0,d.getResetGamepadState)(),this.baseGamepad1=(0,d.getResetGamepadState)(),this.gamepadStateToUseNext=0,this.props$=new s.BehaviorSubject(i),this.ioStreamSubscription=(0,s.combineLatest)([this.analogInput$,this.hybridInput$]).pipe((0,c.map)(e=>{const[t,i]=e,o=0===this.gamepadStateToUseNext?this.baseGamepad0:this.baseGamepad1;return(0,d.resetGamepadState)(o),(0,d.mergeGamepadStates)(o,t,i),this.gamepadStateToUseNext=(this.gamepadStateToUseNext+1)%2,o}),(0,c.pairwise)()).subscribe(([e,t])=>{this.inputProvider.updateGamepadModel(e,t)}),this.layerSubscription=this.layerAction$.pipe((0,c.distinctUntilChanged)(),(0,c.pairwise)()).subscribe(([e,t])=>{e&&this.layerManager.trySetLayerActivated(e,!1),t&&this.layerManager.trySetLayerActivated(t,!0)})}getProps(){return this.props$.getValue()}unmount(){this.turboSubscription&&this.turboSubscription.unsubscribe(),this.resetAnalogInput(),this.ioStreamSubscription.unsubscribe(),this.layerSubscription.unsubscribe();const e=this.layerAction$.getValue();e&&this.layerManager.trySetLayerActivated(e,!1)}updateProps(e){this.props$.next(e)}setAnalogInput(e){this.analogInput$.next(e)}resetAnalogInput(){this.analogInput$.next((0,d.getResetGamepadState)()),this.hybridInput$.next((0,d.getResetGamepadState)())}commitAction(e,t,i=!0,o){const n=!!o,r=o||{};if(Array.isArray(t))t.map(t=>this.commitAction(e,t,!1,r));else if(t)if((0,u.isLayoutLayerAction)(t))this.layerAction$.next(e?t.target:void 0);else if((0,u.isLayoutChangeAction)(t))e&&this.inputProvider.sendLayoutChangeEvent(t);else if((0,u.isTurboAction)(t)){if(!e&&this.turboSubscription)this.turboSubscription.unsubscribe(),this.turboSubscription=null,this.commitAction(!1,t.action,!0,r);else if(e&&!this.turboSubscription){const e=!!r[t.action];this.turboSubscription=(0,s.interval)(t.interval).pipe((0,c.scan)(i=>{let o=i%2===0;return e&&(o=!o),this.commitAction(o,t.action,!0,r),i+1},0)).subscribe()}}else this.commitControllerInput(t,r,e);return i&&t&&(!(0,u.isLayoutAction)(t)&&!(0,u.isTurboAction)(t)||n)&&this.hybridInput$.next(r),r}commitControllerInput(e,t,i){"leftTrigger"===e||"rightTrigger"===e?t[e]=i?1:0:"rightJoystickRight"===e?t.rightJoystickX=i?1:0:"rightJoystickLeft"===e?t.rightJoystickX=i?-1:0:"rightJoystickUp"===e?t.rightJoystickY=i?-1:0:"rightJoystickDown"===e?t.rightJoystickY=i?1:0:"leftJoystickRight"===e?t.leftJoystickX=i?1:0:"leftJoystickLeft"===e?t.leftJoystickX=i?-1:0:"leftJoystickUp"===e?t.leftJoystickY=i?-1:0:"leftJoystickDown"===e?t.leftJoystickY=i?1:0:t[e]=i}};p=o([(0,a.injectable)(),r(0,(0,a.inject)(l.SERVICE_TYPES.LayerManager)),r(1,(0,a.inject)(l.SERVICE_TYPES.InputProvider)),r(2,(0,a.inject)(l.CONSTANT_TYPES.ControlConfig)),n("design:paramtypes",[Function,Function,Object])],p),t.VirtualControl=p},saGM:function(e,t,i){"use strict";var o=i("wNzh"),n=i("J4sq"),r=i("yJ6u"),a=i("GzZA"),s=i("n40a"),c=n.ucs2length,l=i("8yhB"),u=r.Validation;function d(e,t,i){var o=h.call(this,e,t,i);return o>=0?{index:o,compiling:!0}:(o=this._compilations.length,this._compilations[o]={schema:e,root:t,baseId:i},{index:o,compiling:!1})}function p(e,t,i){var o=h.call(this,e,t,i);o>=0&&this._compilations.splice(o,1)}function h(e,t,i){for(var o=0;o<this._compilations.length;o++){var n=this._compilations[o];if(n.schema==e&&n.root==t&&n.baseId==i)return o}return-1}function f(e,t){return"var pattern"+e+" = new RegExp("+n.toQuotedString(t[e])+");"}function y(e){return"var default"+e+" = defaults["+e+"];"}function g(e,t){return void 0===t[e]?"":"var refVal"+e+" = refVal["+e+"];"}function m(e){return"var customRule"+e+" = customRules["+e+"];"}function v(e,t){if(!e.length)return"";for(var i="",o=0;o<e.length;o++)i+=t(o,e);return i}e.exports=function e(t,i,h,b){var S=this,k=this._opts,P=[void 0],w={},A=[],I={},T=[],C={},_=[];i=i||{schema:t,refVal:P,refs:w};var E=d.call(this,t,i,b),x=this._compilations[E.index];if(E.compiling)return x.callValidate=function e(){var t=x.validate,i=t.apply(this,arguments);return e.errors=t.errors,i};var R=this._formats,O=this.RULES;try{var D=j(t,i,h,b);x.validate=D;var M=x.callValidate;return M&&(M.schema=D.schema,M.errors=null,M.refs=D.refs,M.refVal=D.refVal,M.root=D.root,M.$async=D.$async,k.sourceCode&&(M.source=D.source)),D}finally{p.call(this,t,i,b)}function j(t,a,d,p){var h=!a||a&&a.schema==t;if(a.schema!=i.schema)return e.call(S,t,a,d,p);var b,I=!0===t.$async,C=s({isTop:!0,schema:t,isRoot:h,baseId:p,root:a,schemaPath:"",errSchemaPath:"#",errorPath:'""',MissingRefError:r.MissingRef,RULES:O,validate:s,util:n,resolve:o,resolveRef:$,usePattern:F,useDefault:N,useCustomRule:J,opts:k,formats:R,logger:S.logger,self:S});C=v(P,g)+v(A,f)+v(T,y)+v(_,m)+C,k.processCode&&(C=k.processCode(C,t));try{b=new Function("self","RULES","formats","root","refVal","defaults","customRules","equal","ucs2length","ValidationError",C)(S,O,R,i,P,T,_,l,c,u),P[0]=b}catch(E){throw S.logger.error("Error compiling schema, function code:",C),E}return b.schema=t,b.errors=null,b.refs=w,b.refVal=P,b.root=h?b:a,I&&(b.$async=!0),!0===k.sourceCode&&(b.source={code:C,patterns:A,defaults:T}),b}function $(t,n,r){n=o.url(t,n);var a,s,c=w[n];if(void 0!==c)return L(a=P[c],s="refVal["+c+"]");if(!r&&i.refs){var l=i.refs[n];if(void 0!==l)return L(a=i.refVal[l],s=B(n,a))}s=B(n);var u=o.call(S,j,i,n);if(void 0===u){var d=h&&h[n];d&&(u=o.inlineRef(d,k.inlineRefs)?d:e.call(S,d,i,h,t))}if(void 0!==u)return function(e,t){var i=w[e];P[i]=t}(n,u),L(u,s);!function(e){delete w[e]}(n)}function B(e,t){var i=P.length;return P[i]=t,w[e]=i,"refVal"+i}function L(e,t){return"object"==typeof e||"boolean"==typeof e?{code:t,schema:e,inline:!0}:{code:t,$async:e&&!!e.$async}}function F(e){var t=I[e];return void 0===t&&(t=I[e]=A.length,A[t]=e),"pattern"+t}function N(e){switch(typeof e){case"boolean":case"number":return""+e;case"string":return n.toQuotedString(e);case"object":if(null===e)return"null";var t=a(e),i=C[t];return void 0===i&&(i=C[t]=T.length,T[i]=e),"default"+i}}function J(e,t,i,o){if(!1!==S._opts.validateSchema){var n=e.definition.dependencies;if(n&&!n.every((function(e){return Object.prototype.hasOwnProperty.call(i,e)})))throw new Error("parent schema must have all required keywords: "+n.join(","));var r=e.definition.validateSchema;if(r)if(!r(t)){var a="keyword schema is invalid: "+S.errorsText(r.errors);if("log"!=S._opts.validateSchema)throw new Error(a);S.logger.error(a)}}var s,c=e.definition.compile,l=e.definition.inline,u=e.definition.macro;if(c)s=c.call(S,t,i,o);else if(u)s=u.call(S,t,i,o),!1!==k.validateSchema&&S.validateSchema(s,!0);else if(l)s=l.call(S,o,e.keyword,t,i);else if(!(s=e.definition.validate))return;if(void 0===s)throw new Error('custom keyword "'+e.keyword+'"failed to compile');var d=_.length;return _[d]=s,{code:"customRule"+d,validate:s}}}},t2t5:function(e,t,i){"use strict";i.r(t),i.d(t,"getValueByPointer",(function(){return b})),i.d(t,"applyOperation",(function(){return S})),i.d(t,"applyPatch",(function(){return k})),i.d(t,"applyReducer",(function(){return P})),i.d(t,"validator",(function(){return w})),i.d(t,"validate",(function(){return A})),i.d(t,"_areEquals",(function(){return I})),i.d(t,"unobserve",(function(){return E})),i.d(t,"observe",(function(){return x})),i.d(t,"generate",(function(){return R})),i.d(t,"compare",(function(){return D})),i.d(t,"JsonPatchError",(function(){return f})),i.d(t,"deepClone",(function(){return l})),i.d(t,"escapePathComponent",(function(){return d})),i.d(t,"unescapePathComponent",(function(){return p}));var o={};i.r(o),i.d(o,"JsonPatchError",(function(){return y})),i.d(o,"deepClone",(function(){return g})),i.d(o,"getValueByPointer",(function(){return b})),i.d(o,"applyOperation",(function(){return S})),i.d(o,"applyPatch",(function(){return k})),i.d(o,"applyReducer",(function(){return P})),i.d(o,"validator",(function(){return w})),i.d(o,"validate",(function(){return A})),i.d(o,"_areEquals",(function(){return I}));var n={};i.r(n),i.d(n,"unobserve",(function(){return E})),i.d(n,"observe",(function(){return x})),i.d(n,"generate",(function(){return R})),i.d(n,"compare",(function(){return D}));var r=function(){var e=function(t,i){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])})(t,i)};return function(t,i){function o(){this.constructor=t}e(t,i),t.prototype=null===i?Object.create(i):(o.prototype=i.prototype,new o)}}(),a=Object.prototype.hasOwnProperty;function s(e,t){return a.call(e,t)}function c(e){if(Array.isArray(e)){for(var t=new Array(e.length),i=0;i<t.length;i++)t[i]=""+i;return t}if(Object.keys)return Object.keys(e);var o=[];for(var n in e)s(e,n)&&o.push(n);return o}function l(e){switch(typeof e){case"object":return JSON.parse(JSON.stringify(e));case"undefined":return null;default:return e}}function u(e){for(var t,i=0,o=e.length;i<o;){if(!((t=e.charCodeAt(i))>=48&&t<=57))return!1;i++}return!0}function d(e){return-1===e.indexOf("/")&&-1===e.indexOf("~")?e:e.replace(/~/g,"~0").replace(/\//g,"~1")}function p(e){return e.replace(/~1/g,"/").replace(/~0/g,"~")}function h(e,t){var i=[e];for(var o in t){var n="object"===typeof t[o]?JSON.stringify(t[o],null,2):t[o];"undefined"!==typeof n&&i.push(o+": "+n)}return i.join("\n")}var f=function(e){function t(t,i,o,n,r){var a=this.constructor,s=e.call(this,h(t,{name:i,index:o,operation:n,tree:r}))||this;return s.name=i,s.index=o,s.operation=n,s.tree=r,Object.setPrototypeOf(s,a.prototype),s.message=h(t,{name:i,index:o,operation:n,tree:r}),s}return r(t,e),t}(Error),y=f,g=l,m={add:function(e,t,i){return e[t]=this.value,{newDocument:i}},remove:function(e,t,i){var o=e[t];return delete e[t],{newDocument:i,removed:o}},replace:function(e,t,i){var o=e[t];return e[t]=this.value,{newDocument:i,removed:o}},move:function(e,t,i){var o=b(i,this.path);o&&(o=l(o));var n=S(i,{op:"remove",path:this.from}).removed;return S(i,{op:"add",path:this.path,value:n}),{newDocument:i,removed:o}},copy:function(e,t,i){var o=b(i,this.from);return S(i,{op:"add",path:this.path,value:l(o)}),{newDocument:i}},test:function(e,t,i){return{newDocument:i,test:I(e[t],this.value)}},_get:function(e,t,i){return this.value=e[t],{newDocument:i}}},v={add:function(e,t,i){return u(t)?e.splice(t,0,this.value):e[t]=this.value,{newDocument:i,index:t}},remove:function(e,t,i){return{newDocument:i,removed:e.splice(t,1)[0]}},replace:function(e,t,i){var o=e[t];return e[t]=this.value,{newDocument:i,removed:o}},move:m.move,copy:m.copy,test:m.test,_get:m._get};function b(e,t){if(""==t)return e;var i={op:"_get",path:t};return S(e,i),i.value}function S(e,t,i,o,n,r){if(void 0===i&&(i=!1),void 0===o&&(o=!0),void 0===n&&(n=!0),void 0===r&&(r=0),i&&("function"==typeof i?i(t,0,e,t.path):w(t,0)),""===t.path){var a={newDocument:e};if("add"===t.op)return a.newDocument=t.value,a;if("replace"===t.op)return a.newDocument=t.value,a.removed=e,a;if("move"===t.op||"copy"===t.op)return a.newDocument=b(e,t.from),"move"===t.op&&(a.removed=e),a;if("test"===t.op){if(a.test=I(e,t.value),!1===a.test)throw new y("Test operation failed","TEST_OPERATION_FAILED",r,t,e);return a.newDocument=e,a}if("remove"===t.op)return a.removed=e,a.newDocument=null,a;if("_get"===t.op)return t.value=e,a;if(i)throw new y("Operation `op` property is not one of operations defined in RFC-6902","OPERATION_OP_INVALID",r,t,e);return a}o||(e=l(e));var s=(t.path||"").split("/"),c=e,d=1,h=s.length,f=void 0,g=void 0,S=void 0;for(S="function"==typeof i?i:w;;){if((g=s[d])&&-1!=g.indexOf("~")&&(g=p(g)),n&&("__proto__"==g||"prototype"==g&&d>0&&"constructor"==s[d-1]))throw new TypeError("JSON-Patch: modifying `__proto__` or `constructor/prototype` prop is banned for security reasons, if this was on purpose, please set `banPrototypeModifications` flag false and pass it to this function. More info in fast-json-patch README");if(i&&void 0===f&&(void 0===c[g]?f=s.slice(0,d).join("/"):d==h-1&&(f=t.path),void 0!==f&&S(t,0,e,f)),d++,Array.isArray(c)){if("-"===g)g=c.length;else{if(i&&!u(g))throw new y("Expected an unsigned base-10 integer value, making the new referenced value the array element with the zero-based index","OPERATION_PATH_ILLEGAL_ARRAY_INDEX",r,t,e);u(g)&&(g=~~g)}if(d>=h){if(i&&"add"===t.op&&g>c.length)throw new y("The specified index MUST NOT be greater than the number of elements in the array","OPERATION_VALUE_OUT_OF_BOUNDS",r,t,e);if(!1===(a=v[t.op].call(t,c,g,e)).test)throw new y("Test operation failed","TEST_OPERATION_FAILED",r,t,e);return a}}else if(d>=h){if(!1===(a=m[t.op].call(t,c,g,e)).test)throw new y("Test operation failed","TEST_OPERATION_FAILED",r,t,e);return a}if(c=c[g],i&&d<h&&(!c||"object"!==typeof c))throw new y("Cannot perform operation at the desired path","OPERATION_PATH_UNRESOLVABLE",r,t,e)}}function k(e,t,i,o,n){if(void 0===o&&(o=!0),void 0===n&&(n=!0),i&&!Array.isArray(t))throw new y("Patch sequence must be an array","SEQUENCE_NOT_AN_ARRAY");o||(e=l(e));for(var r=new Array(t.length),a=0,s=t.length;a<s;a++)r[a]=S(e,t[a],i,!0,n,a),e=r[a].newDocument;return r.newDocument=e,r}function P(e,t,i){var o=S(e,t);if(!1===o.test)throw new y("Test operation failed","TEST_OPERATION_FAILED",i,t,e);return o.newDocument}function w(e,t,i,o){if("object"!==typeof e||null===e||Array.isArray(e))throw new y("Operation is not an object","OPERATION_NOT_AN_OBJECT",t,e,i);if(!m[e.op])throw new y("Operation `op` property is not one of operations defined in RFC-6902","OPERATION_OP_INVALID",t,e,i);if("string"!==typeof e.path)throw new y("Operation `path` property is not a string","OPERATION_PATH_INVALID",t,e,i);if(0!==e.path.indexOf("/")&&e.path.length>0)throw new y('Operation `path` property must start with "/"',"OPERATION_PATH_INVALID",t,e,i);if(("move"===e.op||"copy"===e.op)&&"string"!==typeof e.from)throw new y("Operation `from` property is not present (applicable in `move` and `copy` operations)","OPERATION_FROM_REQUIRED",t,e,i);if(("add"===e.op||"replace"===e.op||"test"===e.op)&&void 0===e.value)throw new y("Operation `value` property is not present (applicable in `add`, `replace` and `test` operations)","OPERATION_VALUE_REQUIRED",t,e,i);if(("add"===e.op||"replace"===e.op||"test"===e.op)&&function e(t){if(void 0===t)return!0;if(t)if(Array.isArray(t)){for(var i=0,o=t.length;i<o;i++)if(e(t[i]))return!0}else if("object"===typeof t)for(var n=c(t),r=n.length,a=0;a<r;a++)if(e(t[n[a]]))return!0;return!1}(e.value))throw new y("Operation `value` property is not present (applicable in `add`, `replace` and `test` operations)","OPERATION_VALUE_CANNOT_CONTAIN_UNDEFINED",t,e,i);if(i)if("add"==e.op){var n=e.path.split("/").length,r=o.split("/").length;if(n!==r+1&&n!==r)throw new y("Cannot perform an `add` operation at the desired path","OPERATION_PATH_CANNOT_ADD",t,e,i)}else if("replace"===e.op||"remove"===e.op||"_get"===e.op){if(e.path!==o)throw new y("Cannot perform the operation at a path that does not exist","OPERATION_PATH_UNRESOLVABLE",t,e,i)}else if("move"===e.op||"copy"===e.op){var a=A([{op:"_get",path:e.from,value:void 0}],i);if(a&&"OPERATION_PATH_UNRESOLVABLE"===a.name)throw new y("Cannot perform the operation from a path that does not exist","OPERATION_FROM_UNRESOLVABLE",t,e,i)}}function A(e,t,i){try{if(!Array.isArray(e))throw new y("Patch sequence must be an array","SEQUENCE_NOT_AN_ARRAY");if(t)k(l(t),l(e),i||!0);else{i=i||w;for(var o=0;o<e.length;o++)i(e[o],o,t,void 0)}}catch(n){if(n instanceof y)return n;throw n}}function I(e,t){if(e===t)return!0;if(e&&t&&"object"==typeof e&&"object"==typeof t){var i,o,n,r=Array.isArray(e),a=Array.isArray(t);if(r&&a){if((o=e.length)!=t.length)return!1;for(i=o;0!==i--;)if(!I(e[i],t[i]))return!1;return!0}if(r!=a)return!1;var s=Object.keys(e);if((o=s.length)!==Object.keys(t).length)return!1;for(i=o;0!==i--;)if(!t.hasOwnProperty(s[i]))return!1;for(i=o;0!==i--;)if(!I(e[n=s[i]],t[n]))return!1;return!0}return e!==e&&t!==t}var T=new WeakMap,C=function(e){this.observers=new Map,this.obj=e},_=function(e,t){this.callback=e,this.observer=t};function E(e,t){t.unobserve()}function x(e,t){var i,o=function(e){return T.get(e)}(e);if(o){var n=function(e,t){return e.observers.get(t)}(o,t);i=n&&n.observer}else o=new C(e),T.set(e,o);if(i)return i;if(i={},o.value=l(e),t){i.callback=t,i.next=null;var r=function(){R(i)},a=function(){clearTimeout(i.next),i.next=setTimeout(r)};"undefined"!==typeof window&&(window.addEventListener("mouseup",a),window.addEventListener("keyup",a),window.addEventListener("mousedown",a),window.addEventListener("keydown",a),window.addEventListener("change",a))}return i.patches=[],i.object=e,i.unobserve=function(){R(i),clearTimeout(i.next),function(e,t){e.observers.delete(t.callback)}(o,i),"undefined"!==typeof window&&(window.removeEventListener("mouseup",a),window.removeEventListener("keyup",a),window.removeEventListener("mousedown",a),window.removeEventListener("keydown",a),window.removeEventListener("change",a))},o.observers.set(t,new _(t,i)),i}function R(e,t){void 0===t&&(t=!1);var i=T.get(e.object);O(i.value,e.object,e.patches,"",t),e.patches.length&&k(i.value,e.patches);var o=e.patches;return o.length>0&&(e.patches=[],e.callback&&e.callback(o)),o}function O(e,t,i,o,n){if(t!==e){"function"===typeof t.toJSON&&(t=t.toJSON());for(var r=c(t),a=c(e),u=!1,p=a.length-1;p>=0;p--){var h=e[y=a[p]];if(!s(t,y)||void 0===t[y]&&void 0!==h&&!1===Array.isArray(t))Array.isArray(e)===Array.isArray(t)?(n&&i.push({op:"test",path:o+"/"+d(y),value:l(h)}),i.push({op:"remove",path:o+"/"+d(y)}),u=!0):(n&&i.push({op:"test",path:o,value:e}),i.push({op:"replace",path:o,value:t}),!0);else{var f=t[y];"object"==typeof h&&null!=h&&"object"==typeof f&&null!=f&&Array.isArray(h)===Array.isArray(f)?O(h,f,i,o+"/"+d(y),n):h!==f&&(!0,n&&i.push({op:"test",path:o+"/"+d(y),value:l(h)}),i.push({op:"replace",path:o+"/"+d(y),value:l(f)}))}}if(u||r.length!=a.length)for(p=0;p<r.length;p++){var y;s(e,y=r[p])||void 0===t[y]||i.push({op:"add",path:o+"/"+d(y),value:l(t[y])})}}}function D(e,t,i){void 0===i&&(i=!1);var o=[];return O(e,t,o,"",i),o}t.default=Object.assign({},o,n,{JsonPatchError:f,deepClone:l,escapePathComponent:d,unescapePathComponent:p})},ttr4:function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Modifier=void 0;t.Modifier=class{get value(){return this._value}updateValue(e){this._value!==e&&(this._value=e,this.calculateModifiedResult())}updateUnmodifiedResult(e){this._unmodifiedResult=e,this.calculateModifiedResult()}}},uSOI:function(e,t,i){"use strict";e.exports=function(e,t,i){var o,n=" ",r=e.level,a=e.dataLevel,s=e.schema[t],c=e.schemaPath+e.util.getProperty(t),l=e.errSchemaPath+"/"+t,u=!e.opts.allErrors,d="data"+(a||""),p=e.opts.$data&&s&&s.$data;if(p?(n+=" var schema"+r+" = "+e.util.getData(s.$data,a,e.dataPathArr)+"; ",o="schema"+r):o=s,!p&&"number"!=typeof s)throw new Error(t+" must be number");n+="if ( ",p&&(n+=" ("+o+" !== undefined && typeof "+o+" != 'number') || "),n+=" Object.keys("+d+").length "+("maxProperties"==t?">":"<")+" "+o+") { ";var h=t,f=f||[];f.push(n),n="",!1!==e.createErrors?(n+=" { keyword: '"+(h||"_limitProperties")+"' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(l)+" , params: { limit: "+o+" } ",!1!==e.opts.messages&&(n+=" , message: 'should NOT have ",n+="maxProperties"==t?"more":"fewer",n+=" than ",n+=p?"' + "+o+" + '":""+s,n+=" properties' "),e.opts.verbose&&(n+=" , schema:  ",n+=p?"validate.schema"+c:""+s,n+="         , parentSchema: validate.schema"+e.schemaPath+" , data: "+d+" "),n+=" } "):n+=" {} ";var y=n;return n=f.pop(),!e.compositeRule&&u?e.async?n+=" throw new ValidationError(["+y+"]); ":n+=" validate.errors = ["+y+"]; return false; ":n+=" var err = "+y+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",n+="} ",u&&(n+=" else { "),n}},uWzJ:function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.wrapInverseCurve=t.wrapStandardCurve=t.correctRadialDeadzone=t.correctDeadzone=void 0;const o=i("g5Cp");function n(e,t=1){const i=(0,o.clamp)(e,-1,1),n=(0,o.directionToPosition)(i*t*Math.PI*.5,1);return{x:n.x,y:n.y}}t.correctDeadzone=function(e,t,i){const o=t*i,n=e/i*(i-t);return e>0?n+o:e<0?n-o:e},t.correctRadialDeadzone=function(e,t,i){const{angleInRadians:n,radius:r}=(0,o.positionToDirection)(e),a=t*i;let s=r/i*(i-t);return r>0?s+=a:r<0&&(s-=a),(0,o.directionToPosition)(n,s)},t.wrapStandardCurve=function(e){const t=e[1],i=n(t,0);return e=>e-n(e,t).y/i.y+e},t.wrapInverseCurve=function(e){const t=e[1],i=n(t,0);return e=>n(e,t).y/i.y}},utIM:function(e,t,i){"use strict";e.exports=function(e,t,i){var o,n,r=" ",a=e.level,s=e.dataLevel,c=e.schema[t],l=e.schemaPath+e.util.getProperty(t),u=e.errSchemaPath+"/"+t,d=!e.opts.allErrors,p="data"+(s||""),h="valid"+a,f="errs__"+a,y=e.opts.$data&&c&&c.$data;y?(r+=" var schema"+a+" = "+e.util.getData(c.$data,s,e.dataPathArr)+"; ",n="schema"+a):n=c;var g,m,v,b,S,k="definition"+a,P=this.definition,w="";if(y&&P.$data){S="keywordValidate"+a;var A=P.validateSchema;r+=" var "+k+" = RULES.custom['"+t+"'].definition; var "+S+" = "+k+".validate;"}else{if(!(b=e.useCustomRule(this,c,e.schema,e)))return;n="validate.schema"+l,S=b.code,g=P.compile,m=P.inline,v=P.macro}var I=S+".errors",T="i"+a,C="ruleErr"+a,_=P.async;if(_&&!e.async)throw new Error("async keyword in sync schema");if(m||v||(r+=I+" = null;"),r+="var "+f+" = errors;var "+h+";",y&&P.$data&&(w+="}",r+=" if ("+n+" === undefined) { "+h+" = true; } else { ",A&&(w+="}",r+=" "+h+" = "+k+".validateSchema("+n+"); if ("+h+") { ")),m)P.statements?r+=" "+b.validate+" ":r+=" "+h+" = "+b.validate+"; ";else if(v){var E=e.util.copy(e);w="";E.level++;var x="valid"+E.level;E.schema=b.validate,E.schemaPath="";var R=e.compositeRule;e.compositeRule=E.compositeRule=!0;var O=e.validate(E).replace(/validate\.schema/g,S);e.compositeRule=E.compositeRule=R,r+=" "+O}else{($=$||[]).push(r),r="",r+="  "+S+".call( ",e.opts.passContext?r+="this":r+="self",g||!1===P.schema?r+=" , "+p+" ":r+=" , "+n+" , "+p+" , validate.schema"+e.schemaPath+" ",r+=" , (dataPath || '')",'""'!=e.errorPath&&(r+=" + "+e.errorPath);var D=s?"data"+(s-1||""):"parentData",M=s?e.dataPathArr[s]:"parentDataProperty",j=r+=" , "+D+" , "+M+" , rootData )  ";r=$.pop(),!1===P.errors?(r+=" "+h+" = ",_&&(r+="await "),r+=j+"; "):r+=_?" var "+(I="customErrors"+a)+" = null; try { "+h+" = await "+j+"; } catch (e) { "+h+" = false; if (e instanceof ValidationError) "+I+" = e.errors; else throw e; } ":" "+I+" = null; "+h+" = "+j+"; "}if(P.modifying&&(r+=" if ("+D+") "+p+" = "+D+"["+M+"];"),r+=""+w,P.valid)d&&(r+=" if (true) { ");else{var $;r+=" if ( ",void 0===P.valid?(r+=" !",r+=v?""+x:""+h):r+=" "+!P.valid+" ",r+=") { ",o=this.keyword,($=$||[]).push(r),r="",($=$||[]).push(r),r="",!1!==e.createErrors?(r+=" { keyword: '"+(o||"custom")+"' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(u)+" , params: { keyword: '"+this.keyword+"' } ",!1!==e.opts.messages&&(r+=" , message: 'should pass \""+this.keyword+"\" keyword validation' "),e.opts.verbose&&(r+=" , schema: validate.schema"+l+" , parentSchema: validate.schema"+e.schemaPath+" , data: "+p+" "),r+=" } "):r+=" {} ";var B=r;r=$.pop(),!e.compositeRule&&d?e.async?r+=" throw new ValidationError(["+B+"]); ":r+=" validate.errors = ["+B+"]; return false; ":r+=" var err = "+B+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ";var L=r;r=$.pop(),m?P.errors?"full"!=P.errors&&(r+="  for (var "+T+"="+f+"; "+T+"<errors; "+T+"++) { var "+C+" = vErrors["+T+"]; if ("+C+".dataPath === undefined) "+C+".dataPath = (dataPath || '') + "+e.errorPath+"; if ("+C+".schemaPath === undefined) { "+C+'.schemaPath = "'+u+'"; } ',e.opts.verbose&&(r+=" "+C+".schema = "+n+"; "+C+".data = "+p+"; "),r+=" } "):!1===P.errors?r+=" "+L+" ":(r+=" if ("+f+" == errors) { "+L+" } else {  for (var "+T+"="+f+"; "+T+"<errors; "+T+"++) { var "+C+" = vErrors["+T+"]; if ("+C+".dataPath === undefined) "+C+".dataPath = (dataPath || '') + "+e.errorPath+"; if ("+C+".schemaPath === undefined) { "+C+'.schemaPath = "'+u+'"; } ',e.opts.verbose&&(r+=" "+C+".schema = "+n+"; "+C+".data = "+p+"; "),r+=" } } "):v?(r+="   var err =   ",!1!==e.createErrors?(r+=" { keyword: '"+(o||"custom")+"' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(u)+" , params: { keyword: '"+this.keyword+"' } ",!1!==e.opts.messages&&(r+=" , message: 'should pass \""+this.keyword+"\" keyword validation' "),e.opts.verbose&&(r+=" , schema: validate.schema"+l+" , parentSchema: validate.schema"+e.schemaPath+" , data: "+p+" "),r+=" } "):r+=" {} ",r+=";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",!e.compositeRule&&d&&(e.async?r+=" throw new ValidationError(vErrors); ":r+=" validate.errors = vErrors; return false; ")):!1===P.errors?r+=" "+L+" ":(r+=" if (Array.isArray("+I+")) { if (vErrors === null) vErrors = "+I+"; else vErrors = vErrors.concat("+I+"); errors = vErrors.length;  for (var "+T+"="+f+"; "+T+"<errors; "+T+"++) { var "+C+" = vErrors["+T+"]; if ("+C+".dataPath === undefined) "+C+".dataPath = (dataPath || '') + "+e.errorPath+";  "+C+'.schemaPath = "'+u+'";  ',e.opts.verbose&&(r+=" "+C+".schema = "+n+"; "+C+".data = "+p+"; "),r+=" } } else { "+L+" } "),r+=" } ",d&&(r+=" else { ")}return r}},uwHF:function(e,t,i){(function(t,i,o){e.exports=function e(t,i,o){function n(a,s){if(!i[a]){if(!t[a]){if(r)return r(a,!0);var c=new Error("Cannot find module '"+a+"'");throw c.code="MODULE_NOT_FOUND",c}var l=i[a]={exports:{}};t[a][0].call(l.exports,(function(e){return n(t[a][1][e]||e)}),l,l.exports,e,t,i,o)}return i[a].exports}for(var r=!1,a=0;a<o.length;a++)n(o[a]);return n}({1:[function(e,t,i){"use strict";var o=e("./utils"),n=e("./support"),r="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=";i.encode=function(e){for(var t,i,n,a,s,c,l,u=[],d=0,p=e.length,h=p,f="string"!==o.getTypeOf(e);d<e.length;)h=p-d,n=f?(t=e[d++],i=d<p?e[d++]:0,d<p?e[d++]:0):(t=e.charCodeAt(d++),i=d<p?e.charCodeAt(d++):0,d<p?e.charCodeAt(d++):0),a=t>>2,s=(3&t)<<4|i>>4,c=1<h?(15&i)<<2|n>>6:64,l=2<h?63&n:64,u.push(r.charAt(a)+r.charAt(s)+r.charAt(c)+r.charAt(l));return u.join("")},i.decode=function(e){var t,i,o,a,s,c,l=0,u=0,d="data:";if(e.substr(0,d.length)===d)throw new Error("Invalid base64 input, it looks like a data url.");var p,h=3*(e=e.replace(/[^A-Za-z0-9\+\/\=]/g,"")).length/4;if(e.charAt(e.length-1)===r.charAt(64)&&h--,e.charAt(e.length-2)===r.charAt(64)&&h--,h%1!=0)throw new Error("Invalid base64 input, bad content length.");for(p=n.uint8array?new Uint8Array(0|h):new Array(0|h);l<e.length;)t=r.indexOf(e.charAt(l++))<<2|(a=r.indexOf(e.charAt(l++)))>>4,i=(15&a)<<4|(s=r.indexOf(e.charAt(l++)))>>2,o=(3&s)<<6|(c=r.indexOf(e.charAt(l++))),p[u++]=t,64!==s&&(p[u++]=i),64!==c&&(p[u++]=o);return p}},{"./support":30,"./utils":32}],2:[function(e,t,i){"use strict";var o=e("./external"),n=e("./stream/DataWorker"),r=e("./stream/Crc32Probe"),a=e("./stream/DataLengthProbe");function s(e,t,i,o,n){this.compressedSize=e,this.uncompressedSize=t,this.crc32=i,this.compression=o,this.compressedContent=n}s.prototype={getContentWorker:function(){var e=new n(o.Promise.resolve(this.compressedContent)).pipe(this.compression.uncompressWorker()).pipe(new a("data_length")),t=this;return e.on("end",(function(){if(this.streamInfo.data_length!==t.uncompressedSize)throw new Error("Bug : uncompressed data size mismatch")})),e},getCompressedWorker:function(){return new n(o.Promise.resolve(this.compressedContent)).withStreamInfo("compressedSize",this.compressedSize).withStreamInfo("uncompressedSize",this.uncompressedSize).withStreamInfo("crc32",this.crc32).withStreamInfo("compression",this.compression)}},s.createWorkerFrom=function(e,t,i){return e.pipe(new r).pipe(new a("uncompressedSize")).pipe(t.compressWorker(i)).pipe(new a("compressedSize")).withStreamInfo("compression",t)},t.exports=s},{"./external":6,"./stream/Crc32Probe":25,"./stream/DataLengthProbe":26,"./stream/DataWorker":27}],3:[function(e,t,i){"use strict";var o=e("./stream/GenericWorker");i.STORE={magic:"\0\0",compressWorker:function(e){return new o("STORE compression")},uncompressWorker:function(){return new o("STORE decompression")}},i.DEFLATE=e("./flate")},{"./flate":7,"./stream/GenericWorker":28}],4:[function(e,t,i){"use strict";var o=e("./utils"),n=function(){for(var e,t=[],i=0;i<256;i++){e=i;for(var o=0;o<8;o++)e=1&e?3988292384^e>>>1:e>>>1;t[i]=e}return t}();t.exports=function(e,t){return void 0!==e&&e.length?"string"!==o.getTypeOf(e)?function(e,t,i,o){var r=n,a=0+i;e^=-1;for(var s=0;s<a;s++)e=e>>>8^r[255&(e^t[s])];return-1^e}(0|t,e,e.length):function(e,t,i,o){var r=n,a=0+i;e^=-1;for(var s=0;s<a;s++)e=e>>>8^r[255&(e^t.charCodeAt(s))];return-1^e}(0|t,e,e.length):0}},{"./utils":32}],5:[function(e,t,i){"use strict";i.base64=!1,i.binary=!1,i.dir=!1,i.createFolders=!0,i.date=null,i.compression=null,i.compressionOptions=null,i.comment=null,i.unixPermissions=null,i.dosPermissions=null},{}],6:[function(e,t,i){"use strict";var o;o="undefined"!=typeof Promise?Promise:e("lie"),t.exports={Promise:o}},{lie:37}],7:[function(e,t,i){"use strict";var o="undefined"!=typeof Uint8Array&&"undefined"!=typeof Uint16Array&&"undefined"!=typeof Uint32Array,n=e("pako"),r=e("./utils"),a=e("./stream/GenericWorker"),s=o?"uint8array":"array";function c(e,t){a.call(this,"FlateWorker/"+e),this._pako=null,this._pakoAction=e,this._pakoOptions=t,this.meta={}}i.magic="\b\0",r.inherits(c,a),c.prototype.processChunk=function(e){this.meta=e.meta,null===this._pako&&this._createPako(),this._pako.push(r.transformTo(s,e.data),!1)},c.prototype.flush=function(){a.prototype.flush.call(this),null===this._pako&&this._createPako(),this._pako.push([],!0)},c.prototype.cleanUp=function(){a.prototype.cleanUp.call(this),this._pako=null},c.prototype._createPako=function(){this._pako=new n[this._pakoAction]({raw:!0,level:this._pakoOptions.level||-1});var e=this;this._pako.onData=function(t){e.push({data:t,meta:e.meta})}},i.compressWorker=function(e){return new c("Deflate",e)},i.uncompressWorker=function(){return new c("Inflate",{})}},{"./stream/GenericWorker":28,"./utils":32,pako:38}],8:[function(e,t,i){"use strict";function o(e,t){var i,o="";for(i=0;i<t;i++)o+=String.fromCharCode(255&e),e>>>=8;return o}function n(e,t,i,n,a,u){var d,p,h=e.file,f=e.compression,y=u!==s.utf8encode,g=r.transformTo("string",u(h.name)),m=r.transformTo("string",s.utf8encode(h.name)),v=h.comment,b=r.transformTo("string",u(v)),S=r.transformTo("string",s.utf8encode(v)),k=m.length!==h.name.length,P=S.length!==v.length,w="",A="",I="",T=h.dir,C=h.date,_={crc32:0,compressedSize:0,uncompressedSize:0};t&&!i||(_.crc32=e.crc32,_.compressedSize=e.compressedSize,_.uncompressedSize=e.uncompressedSize);var E=0;t&&(E|=8),y||!k&&!P||(E|=2048);var x=0,R=0;T&&(x|=16),"UNIX"===a?(R=798,x|=function(e,t){var i=e;return e||(i=t?16893:33204),(65535&i)<<16}(h.unixPermissions,T)):(R=20,x|=function(e){return 63&(e||0)}(h.dosPermissions)),d=C.getUTCHours(),d<<=6,d|=C.getUTCMinutes(),d<<=5,d|=C.getUTCSeconds()/2,p=C.getUTCFullYear()-1980,p<<=4,p|=C.getUTCMonth()+1,p<<=5,p|=C.getUTCDate(),k&&(A=o(1,1)+o(c(g),4)+m,w+="up"+o(A.length,2)+A),P&&(I=o(1,1)+o(c(b),4)+S,w+="uc"+o(I.length,2)+I);var O="";return O+="\n\0",O+=o(E,2),O+=f.magic,O+=o(d,2),O+=o(p,2),O+=o(_.crc32,4),O+=o(_.compressedSize,4),O+=o(_.uncompressedSize,4),O+=o(g.length,2),O+=o(w.length,2),{fileRecord:l.LOCAL_FILE_HEADER+O+g+w,dirRecord:l.CENTRAL_FILE_HEADER+o(R,2)+O+o(b.length,2)+"\0\0\0\0"+o(x,4)+o(n,4)+g+w+b}}var r=e("../utils"),a=e("../stream/GenericWorker"),s=e("../utf8"),c=e("../crc32"),l=e("../signature");function u(e,t,i,o){a.call(this,"ZipFileWorker"),this.bytesWritten=0,this.zipComment=t,this.zipPlatform=i,this.encodeFileName=o,this.streamFiles=e,this.accumulate=!1,this.contentBuffer=[],this.dirRecords=[],this.currentSourceOffset=0,this.entriesCount=0,this.currentFile=null,this._sources=[]}r.inherits(u,a),u.prototype.push=function(e){var t=e.meta.percent||0,i=this.entriesCount,o=this._sources.length;this.accumulate?this.contentBuffer.push(e):(this.bytesWritten+=e.data.length,a.prototype.push.call(this,{data:e.data,meta:{currentFile:this.currentFile,percent:i?(t+100*(i-o-1))/i:100}}))},u.prototype.openedSource=function(e){this.currentSourceOffset=this.bytesWritten,this.currentFile=e.file.name;var t=this.streamFiles&&!e.file.dir;if(t){var i=n(e,t,!1,this.currentSourceOffset,this.zipPlatform,this.encodeFileName);this.push({data:i.fileRecord,meta:{percent:0}})}else this.accumulate=!0},u.prototype.closedSource=function(e){this.accumulate=!1;var t=this.streamFiles&&!e.file.dir,i=n(e,t,!0,this.currentSourceOffset,this.zipPlatform,this.encodeFileName);if(this.dirRecords.push(i.dirRecord),t)this.push({data:function(e){return l.DATA_DESCRIPTOR+o(e.crc32,4)+o(e.compressedSize,4)+o(e.uncompressedSize,4)}(e),meta:{percent:100}});else for(this.push({data:i.fileRecord,meta:{percent:0}});this.contentBuffer.length;)this.push(this.contentBuffer.shift());this.currentFile=null},u.prototype.flush=function(){for(var e=this.bytesWritten,t=0;t<this.dirRecords.length;t++)this.push({data:this.dirRecords[t],meta:{percent:100}});var i=this.bytesWritten-e,n=function(e,t,i,n,a){var s=r.transformTo("string",a(n));return l.CENTRAL_DIRECTORY_END+"\0\0\0\0"+o(e,2)+o(e,2)+o(t,4)+o(i,4)+o(s.length,2)+s}(this.dirRecords.length,i,e,this.zipComment,this.encodeFileName);this.push({data:n,meta:{percent:100}})},u.prototype.prepareNextSource=function(){this.previous=this._sources.shift(),this.openedSource(this.previous.streamInfo),this.isPaused?this.previous.pause():this.previous.resume()},u.prototype.registerPrevious=function(e){this._sources.push(e);var t=this;return e.on("data",(function(e){t.processChunk(e)})),e.on("end",(function(){t.closedSource(t.previous.streamInfo),t._sources.length?t.prepareNextSource():t.end()})),e.on("error",(function(e){t.error(e)})),this},u.prototype.resume=function(){return!!a.prototype.resume.call(this)&&(!this.previous&&this._sources.length?(this.prepareNextSource(),!0):this.previous||this._sources.length||this.generatedError?void 0:(this.end(),!0))},u.prototype.error=function(e){var t=this._sources;if(!a.prototype.error.call(this,e))return!1;for(var i=0;i<t.length;i++)try{t[i].error(e)}catch(e){}return!0},u.prototype.lock=function(){a.prototype.lock.call(this);for(var e=this._sources,t=0;t<e.length;t++)e[t].lock()},t.exports=u},{"../crc32":4,"../signature":23,"../stream/GenericWorker":28,"../utf8":31,"../utils":32}],9:[function(e,t,i){"use strict";var o=e("../compressions"),n=e("./ZipFileWorker");i.generateWorker=function(e,t,i){var r=new n(t.streamFiles,i,t.platform,t.encodeFileName),a=0;try{e.forEach((function(e,i){a++;var n=function(e,t){var i=e||t,n=o[i];if(!n)throw new Error(i+" is not a valid compression method !");return n}(i.options.compression,t.compression),s=i.options.compressionOptions||t.compressionOptions||{},c=i.dir,l=i.date;i._compressWorker(n,s).withStreamInfo("file",{name:e,dir:c,date:l,comment:i.comment||"",unixPermissions:i.unixPermissions,dosPermissions:i.dosPermissions}).pipe(r)})),r.entriesCount=a}catch(e){r.error(e)}return r}},{"../compressions":3,"./ZipFileWorker":8}],10:[function(e,t,i){"use strict";function o(){if(!(this instanceof o))return new o;if(arguments.length)throw new Error("The constructor with parameters has been removed in JSZip 3.0, please check the upgrade guide.");this.files=Object.create(null),this.comment=null,this.root="",this.clone=function(){var e=new o;for(var t in this)"function"!=typeof this[t]&&(e[t]=this[t]);return e}}(o.prototype=e("./object")).loadAsync=e("./load"),o.support=e("./support"),o.defaults=e("./defaults"),o.version="3.7.1",o.loadAsync=function(e,t){return(new o).loadAsync(e,t)},o.external=e("./external"),t.exports=o},{"./defaults":5,"./external":6,"./load":11,"./object":15,"./support":30}],11:[function(e,t,i){"use strict";var o=e("./utils"),n=e("./external"),r=e("./utf8"),a=e("./zipEntries"),s=e("./stream/Crc32Probe"),c=e("./nodejsUtils");function l(e){return new n.Promise((function(t,i){var o=e.decompressed.getContentWorker().pipe(new s);o.on("error",(function(e){i(e)})).on("end",(function(){o.streamInfo.crc32!==e.decompressed.crc32?i(new Error("Corrupted zip : CRC32 mismatch")):t()})).resume()}))}t.exports=function(e,t){var i=this;return t=o.extend(t||{},{base64:!1,checkCRC32:!1,optimizedBinaryString:!1,createFolders:!1,decodeFileName:r.utf8decode}),c.isNode&&c.isStream(e)?n.Promise.reject(new Error("JSZip can't accept a stream when loading a zip file.")):o.prepareContent("the loaded zip file",e,!0,t.optimizedBinaryString,t.base64).then((function(e){var i=new a(t);return i.load(e),i})).then((function(e){var i=[n.Promise.resolve(e)],o=e.files;if(t.checkCRC32)for(var r=0;r<o.length;r++)i.push(l(o[r]));return n.Promise.all(i)})).then((function(e){for(var o=e.shift(),n=o.files,r=0;r<n.length;r++){var a=n[r];i.file(a.fileNameStr,a.decompressed,{binary:!0,optimizedBinaryString:!0,date:a.date,dir:a.dir,comment:a.fileCommentStr.length?a.fileCommentStr:null,unixPermissions:a.unixPermissions,dosPermissions:a.dosPermissions,createFolders:t.createFolders})}return o.zipComment.length&&(i.comment=o.zipComment),i}))}},{"./external":6,"./nodejsUtils":14,"./stream/Crc32Probe":25,"./utf8":31,"./utils":32,"./zipEntries":33}],12:[function(e,t,i){"use strict";var o=e("../utils"),n=e("../stream/GenericWorker");function r(e,t){n.call(this,"Nodejs stream input adapter for "+e),this._upstreamEnded=!1,this._bindStream(t)}o.inherits(r,n),r.prototype._bindStream=function(e){var t=this;(this._stream=e).pause(),e.on("data",(function(e){t.push({data:e,meta:{percent:0}})})).on("error",(function(e){t.isPaused?this.generatedError=e:t.error(e)})).on("end",(function(){t.isPaused?t._upstreamEnded=!0:t.end()}))},r.prototype.pause=function(){return!!n.prototype.pause.call(this)&&(this._stream.pause(),!0)},r.prototype.resume=function(){return!!n.prototype.resume.call(this)&&(this._upstreamEnded?this.end():this._stream.resume(),!0)},t.exports=r},{"../stream/GenericWorker":28,"../utils":32}],13:[function(e,t,i){"use strict";var o=e("readable-stream").Readable;function n(e,t,i){o.call(this,t),this._helper=e;var n=this;e.on("data",(function(e,t){n.push(e)||n._helper.pause(),i&&i(t)})).on("error",(function(e){n.emit("error",e)})).on("end",(function(){n.push(null)}))}e("../utils").inherits(n,o),n.prototype._read=function(){this._helper.resume()},t.exports=n},{"../utils":32,"readable-stream":16}],14:[function(e,i,o){"use strict";i.exports={isNode:"undefined"!=typeof t,newBufferFrom:function(e,i){if(t.from&&t.from!==Uint8Array.from)return t.from(e,i);if("number"==typeof e)throw new Error('The "data" argument must not be a number');return new t(e,i)},allocBuffer:function(e){if(t.alloc)return t.alloc(e);var i=new t(e);return i.fill(0),i},isBuffer:function(e){return t.isBuffer(e)},isStream:function(e){return e&&"function"==typeof e.on&&"function"==typeof e.pause&&"function"==typeof e.resume}}},{}],15:[function(e,t,i){"use strict";function o(e,t,i){var o,n=r.getTypeOf(t),s=r.extend(i||{},c);s.date=s.date||new Date,null!==s.compression&&(s.compression=s.compression.toUpperCase()),"string"==typeof s.unixPermissions&&(s.unixPermissions=parseInt(s.unixPermissions,8)),s.unixPermissions&&16384&s.unixPermissions&&(s.dir=!0),s.dosPermissions&&16&s.dosPermissions&&(s.dir=!0),s.dir&&(e=y(e)),s.createFolders&&(o=f(e))&&g.call(this,o,!0);var d,m="string"===n&&!1===s.binary&&!1===s.base64;i&&void 0!==i.binary||(s.binary=!m),(t instanceof l&&0===t.uncompressedSize||s.dir||!t||0===t.length)&&(s.base64=!1,s.binary=!0,t="",s.compression="STORE",n="string"),d=t instanceof l||t instanceof a?t:p.isNode&&p.isStream(t)?new h(e,t):r.prepareContent(e,t,s.binary,s.optimizedBinaryString,s.base64);var v=new u(e,d,s);this.files[e]=v}var n=e("./utf8"),r=e("./utils"),a=e("./stream/GenericWorker"),s=e("./stream/StreamHelper"),c=e("./defaults"),l=e("./compressedObject"),u=e("./zipObject"),d=e("./generate"),p=e("./nodejsUtils"),h=e("./nodejs/NodejsStreamInputAdapter"),f=function(e){"/"===e.slice(-1)&&(e=e.substring(0,e.length-1));var t=e.lastIndexOf("/");return 0<t?e.substring(0,t):""},y=function(e){return"/"!==e.slice(-1)&&(e+="/"),e},g=function(e,t){return t=void 0!==t?t:c.createFolders,e=y(e),this.files[e]||o.call(this,e,null,{dir:!0,createFolders:t}),this.files[e]};function m(e){return"[object RegExp]"===Object.prototype.toString.call(e)}var v={load:function(){throw new Error("This method has been removed in JSZip 3.0, please check the upgrade guide.")},forEach:function(e){var t,i,o;for(t in this.files)o=this.files[t],(i=t.slice(this.root.length,t.length))&&t.slice(0,this.root.length)===this.root&&e(i,o)},filter:function(e){var t=[];return this.forEach((function(i,o){e(i,o)&&t.push(o)})),t},file:function(e,t,i){if(1!==arguments.length)return e=this.root+e,o.call(this,e,t,i),this;if(m(e)){var n=e;return this.filter((function(e,t){return!t.dir&&n.test(e)}))}var r=this.files[this.root+e];return r&&!r.dir?r:null},folder:function(e){if(!e)return this;if(m(e))return this.filter((function(t,i){return i.dir&&e.test(t)}));var t=this.root+e,i=g.call(this,t),o=this.clone();return o.root=i.name,o},remove:function(e){e=this.root+e;var t=this.files[e];if(t||("/"!==e.slice(-1)&&(e+="/"),t=this.files[e]),t&&!t.dir)delete this.files[e];else for(var i=this.filter((function(t,i){return i.name.slice(0,e.length)===e})),o=0;o<i.length;o++)delete this.files[i[o].name];return this},generate:function(e){throw new Error("This method has been removed in JSZip 3.0, please check the upgrade guide.")},generateInternalStream:function(e){var t,i={};try{if((i=r.extend(e||{},{streamFiles:!1,compression:"STORE",compressionOptions:null,type:"",platform:"DOS",comment:null,mimeType:"application/zip",encodeFileName:n.utf8encode})).type=i.type.toLowerCase(),i.compression=i.compression.toUpperCase(),"binarystring"===i.type&&(i.type="string"),!i.type)throw new Error("No output type specified.");r.checkSupport(i.type),"darwin"!==i.platform&&"freebsd"!==i.platform&&"linux"!==i.platform&&"sunos"!==i.platform||(i.platform="UNIX"),"win32"===i.platform&&(i.platform="DOS");var o=i.comment||this.comment||"";t=d.generateWorker(this,i,o)}catch(e){(t=new a("error")).error(e)}return new s(t,i.type||"string",i.mimeType)},generateAsync:function(e,t){return this.generateInternalStream(e).accumulate(t)},generateNodeStream:function(e,t){return(e=e||{}).type||(e.type="nodebuffer"),this.generateInternalStream(e).toNodejsStream(t)}};t.exports=v},{"./compressedObject":2,"./defaults":5,"./generate":9,"./nodejs/NodejsStreamInputAdapter":12,"./nodejsUtils":14,"./stream/GenericWorker":28,"./stream/StreamHelper":29,"./utf8":31,"./utils":32,"./zipObject":35}],16:[function(e,t,i){t.exports=e("stream")},{stream:void 0}],17:[function(e,t,i){"use strict";var o=e("./DataReader");function n(e){o.call(this,e);for(var t=0;t<this.data.length;t++)e[t]=255&e[t]}e("../utils").inherits(n,o),n.prototype.byteAt=function(e){return this.data[this.zero+e]},n.prototype.lastIndexOfSignature=function(e){for(var t=e.charCodeAt(0),i=e.charCodeAt(1),o=e.charCodeAt(2),n=e.charCodeAt(3),r=this.length-4;0<=r;--r)if(this.data[r]===t&&this.data[r+1]===i&&this.data[r+2]===o&&this.data[r+3]===n)return r-this.zero;return-1},n.prototype.readAndCheckSignature=function(e){var t=e.charCodeAt(0),i=e.charCodeAt(1),o=e.charCodeAt(2),n=e.charCodeAt(3),r=this.readData(4);return t===r[0]&&i===r[1]&&o===r[2]&&n===r[3]},n.prototype.readData=function(e){if(this.checkOffset(e),0===e)return[];var t=this.data.slice(this.zero+this.index,this.zero+this.index+e);return this.index+=e,t},t.exports=n},{"../utils":32,"./DataReader":18}],18:[function(e,t,i){"use strict";var o=e("../utils");function n(e){this.data=e,this.length=e.length,this.index=0,this.zero=0}n.prototype={checkOffset:function(e){this.checkIndex(this.index+e)},checkIndex:function(e){if(this.length<this.zero+e||e<0)throw new Error("End of data reached (data length = "+this.length+", asked index = "+e+"). Corrupted zip ?")},setIndex:function(e){this.checkIndex(e),this.index=e},skip:function(e){this.setIndex(this.index+e)},byteAt:function(e){},readInt:function(e){var t,i=0;for(this.checkOffset(e),t=this.index+e-1;t>=this.index;t--)i=(i<<8)+this.byteAt(t);return this.index+=e,i},readString:function(e){return o.transformTo("string",this.readData(e))},readData:function(e){},lastIndexOfSignature:function(e){},readAndCheckSignature:function(e){},readDate:function(){var e=this.readInt(4);return new Date(Date.UTC(1980+(e>>25&127),(e>>21&15)-1,e>>16&31,e>>11&31,e>>5&63,(31&e)<<1))}},t.exports=n},{"../utils":32}],19:[function(e,t,i){"use strict";var o=e("./Uint8ArrayReader");function n(e){o.call(this,e)}e("../utils").inherits(n,o),n.prototype.readData=function(e){this.checkOffset(e);var t=this.data.slice(this.zero+this.index,this.zero+this.index+e);return this.index+=e,t},t.exports=n},{"../utils":32,"./Uint8ArrayReader":21}],20:[function(e,t,i){"use strict";var o=e("./DataReader");function n(e){o.call(this,e)}e("../utils").inherits(n,o),n.prototype.byteAt=function(e){return this.data.charCodeAt(this.zero+e)},n.prototype.lastIndexOfSignature=function(e){return this.data.lastIndexOf(e)-this.zero},n.prototype.readAndCheckSignature=function(e){return e===this.readData(4)},n.prototype.readData=function(e){this.checkOffset(e);var t=this.data.slice(this.zero+this.index,this.zero+this.index+e);return this.index+=e,t},t.exports=n},{"../utils":32,"./DataReader":18}],21:[function(e,t,i){"use strict";var o=e("./ArrayReader");function n(e){o.call(this,e)}e("../utils").inherits(n,o),n.prototype.readData=function(e){if(this.checkOffset(e),0===e)return new Uint8Array(0);var t=this.data.subarray(this.zero+this.index,this.zero+this.index+e);return this.index+=e,t},t.exports=n},{"../utils":32,"./ArrayReader":17}],22:[function(e,t,i){"use strict";var o=e("../utils"),n=e("../support"),r=e("./ArrayReader"),a=e("./StringReader"),s=e("./NodeBufferReader"),c=e("./Uint8ArrayReader");t.exports=function(e){var t=o.getTypeOf(e);return o.checkSupport(t),"string"!==t||n.uint8array?"nodebuffer"===t?new s(e):n.uint8array?new c(o.transformTo("uint8array",e)):new r(o.transformTo("array",e)):new a(e)}},{"../support":30,"../utils":32,"./ArrayReader":17,"./NodeBufferReader":19,"./StringReader":20,"./Uint8ArrayReader":21}],23:[function(e,t,i){"use strict";i.LOCAL_FILE_HEADER="PK\x03\x04",i.CENTRAL_FILE_HEADER="PK\x01\x02",i.CENTRAL_DIRECTORY_END="PK\x05\x06",i.ZIP64_CENTRAL_DIRECTORY_LOCATOR="PK\x06\x07",i.ZIP64_CENTRAL_DIRECTORY_END="PK\x06\x06",i.DATA_DESCRIPTOR="PK\x07\b"},{}],24:[function(e,t,i){"use strict";var o=e("./GenericWorker"),n=e("../utils");function r(e){o.call(this,"ConvertWorker to "+e),this.destType=e}n.inherits(r,o),r.prototype.processChunk=function(e){this.push({data:n.transformTo(this.destType,e.data),meta:e.meta})},t.exports=r},{"../utils":32,"./GenericWorker":28}],25:[function(e,t,i){"use strict";var o=e("./GenericWorker"),n=e("../crc32");function r(){o.call(this,"Crc32Probe"),this.withStreamInfo("crc32",0)}e("../utils").inherits(r,o),r.prototype.processChunk=function(e){this.streamInfo.crc32=n(e.data,this.streamInfo.crc32||0),this.push(e)},t.exports=r},{"../crc32":4,"../utils":32,"./GenericWorker":28}],26:[function(e,t,i){"use strict";var o=e("../utils"),n=e("./GenericWorker");function r(e){n.call(this,"DataLengthProbe for "+e),this.propName=e,this.withStreamInfo(e,0)}o.inherits(r,n),r.prototype.processChunk=function(e){if(e){var t=this.streamInfo[this.propName]||0;this.streamInfo[this.propName]=t+e.data.length}n.prototype.processChunk.call(this,e)},t.exports=r},{"../utils":32,"./GenericWorker":28}],27:[function(e,t,i){"use strict";var o=e("../utils"),n=e("./GenericWorker");function r(e){n.call(this,"DataWorker");var t=this;this.dataIsReady=!1,this.index=0,this.max=0,this.data=null,this.type="",this._tickScheduled=!1,e.then((function(e){t.dataIsReady=!0,t.data=e,t.max=e&&e.length||0,t.type=o.getTypeOf(e),t.isPaused||t._tickAndRepeat()}),(function(e){t.error(e)}))}o.inherits(r,n),r.prototype.cleanUp=function(){n.prototype.cleanUp.call(this),this.data=null},r.prototype.resume=function(){return!!n.prototype.resume.call(this)&&(!this._tickScheduled&&this.dataIsReady&&(this._tickScheduled=!0,o.delay(this._tickAndRepeat,[],this)),!0)},r.prototype._tickAndRepeat=function(){this._tickScheduled=!1,this.isPaused||this.isFinished||(this._tick(),this.isFinished||(o.delay(this._tickAndRepeat,[],this),this._tickScheduled=!0))},r.prototype._tick=function(){if(this.isPaused||this.isFinished)return!1;var e=null,t=Math.min(this.max,this.index+16384);if(this.index>=this.max)return this.end();switch(this.type){case"string":e=this.data.substring(this.index,t);break;case"uint8array":e=this.data.subarray(this.index,t);break;case"array":case"nodebuffer":e=this.data.slice(this.index,t)}return this.index=t,this.push({data:e,meta:{percent:this.max?this.index/this.max*100:0}})},t.exports=r},{"../utils":32,"./GenericWorker":28}],28:[function(e,t,i){"use strict";function o(e){this.name=e||"default",this.streamInfo={},this.generatedError=null,this.extraStreamInfo={},this.isPaused=!0,this.isFinished=!1,this.isLocked=!1,this._listeners={data:[],end:[],error:[]},this.previous=null}o.prototype={push:function(e){this.emit("data",e)},end:function(){if(this.isFinished)return!1;this.flush();try{this.emit("end"),this.cleanUp(),this.isFinished=!0}catch(e){this.emit("error",e)}return!0},error:function(e){return!this.isFinished&&(this.isPaused?this.generatedError=e:(this.isFinished=!0,this.emit("error",e),this.previous&&this.previous.error(e),this.cleanUp()),!0)},on:function(e,t){return this._listeners[e].push(t),this},cleanUp:function(){this.streamInfo=this.generatedError=this.extraStreamInfo=null,this._listeners=[]},emit:function(e,t){if(this._listeners[e])for(var i=0;i<this._listeners[e].length;i++)this._listeners[e][i].call(this,t)},pipe:function(e){return e.registerPrevious(this)},registerPrevious:function(e){if(this.isLocked)throw new Error("The stream '"+this+"' has already been used.");this.streamInfo=e.streamInfo,this.mergeStreamInfo(),this.previous=e;var t=this;return e.on("data",(function(e){t.processChunk(e)})),e.on("end",(function(){t.end()})),e.on("error",(function(e){t.error(e)})),this},pause:function(){return!this.isPaused&&!this.isFinished&&(this.isPaused=!0,this.previous&&this.previous.pause(),!0)},resume:function(){if(!this.isPaused||this.isFinished)return!1;var e=this.isPaused=!1;return this.generatedError&&(this.error(this.generatedError),e=!0),this.previous&&this.previous.resume(),!e},flush:function(){},processChunk:function(e){this.push(e)},withStreamInfo:function(e,t){return this.extraStreamInfo[e]=t,this.mergeStreamInfo(),this},mergeStreamInfo:function(){for(var e in this.extraStreamInfo)this.extraStreamInfo.hasOwnProperty(e)&&(this.streamInfo[e]=this.extraStreamInfo[e])},lock:function(){if(this.isLocked)throw new Error("The stream '"+this+"' has already been used.");this.isLocked=!0,this.previous&&this.previous.lock()},toString:function(){var e="Worker "+this.name;return this.previous?this.previous+" -> "+e:e}},t.exports=o},{}],29:[function(e,i,o){"use strict";var n=e("../utils"),r=e("./ConvertWorker"),a=e("./GenericWorker"),s=e("../base64"),c=e("../support"),l=e("../external"),u=null;if(c.nodestream)try{u=e("../nodejs/NodejsStreamOutputAdapter")}catch(e){}function d(e,t,i){var o=t;switch(t){case"blob":case"arraybuffer":o="uint8array";break;case"base64":o="string"}try{this._internalType=o,this._outputType=t,this._mimeType=i,n.checkSupport(o),this._worker=e.pipe(new r(o)),e.lock()}catch(e){this._worker=new a("error"),this._worker.error(e)}}d.prototype={accumulate:function(e){return function(e,i){return new l.Promise((function(o,r){var a=[],c=e._internalType,l=e._outputType,u=e._mimeType;e.on("data",(function(e,t){a.push(e),i&&i(t)})).on("error",(function(e){a=[],r(e)})).on("end",(function(){try{var e=function(e,t,i){switch(e){case"blob":return n.newBlob(n.transformTo("arraybuffer",t),i);case"base64":return s.encode(t);default:return n.transformTo(e,t)}}(l,function(e,i){var o,n=0,r=null,a=0;for(o=0;o<i.length;o++)a+=i[o].length;switch(e){case"string":return i.join("");case"array":return Array.prototype.concat.apply([],i);case"uint8array":for(r=new Uint8Array(a),o=0;o<i.length;o++)r.set(i[o],n),n+=i[o].length;return r;case"nodebuffer":return t.concat(i);default:throw new Error("concat : unsupported type '"+e+"'")}}(c,a),u);o(e)}catch(e){r(e)}a=[]})).resume()}))}(this,e)},on:function(e,t){var i=this;return"data"===e?this._worker.on(e,(function(e){t.call(i,e.data,e.meta)})):this._worker.on(e,(function(){n.delay(t,arguments,i)})),this},resume:function(){return n.delay(this._worker.resume,[],this._worker),this},pause:function(){return this._worker.pause(),this},toNodejsStream:function(e){if(n.checkSupport("nodestream"),"nodebuffer"!==this._outputType)throw new Error(this._outputType+" is not supported by this method");return new u(this,{objectMode:"nodebuffer"!==this._outputType},e)}},i.exports=d},{"../base64":1,"../external":6,"../nodejs/NodejsStreamOutputAdapter":13,"../support":30,"../utils":32,"./ConvertWorker":24,"./GenericWorker":28}],30:[function(e,i,o){"use strict";if(o.base64=!0,o.array=!0,o.string=!0,o.arraybuffer="undefined"!=typeof ArrayBuffer&&"undefined"!=typeof Uint8Array,o.nodebuffer="undefined"!=typeof t,o.uint8array="undefined"!=typeof Uint8Array,"undefined"==typeof ArrayBuffer)o.blob=!1;else{var n=new ArrayBuffer(0);try{o.blob=0===new Blob([n],{type:"application/zip"}).size}catch(e){try{var r=new(self.BlobBuilder||self.WebKitBlobBuilder||self.MozBlobBuilder||self.MSBlobBuilder);r.append(n),o.blob=0===r.getBlob("application/zip").size}catch(e){o.blob=!1}}}try{o.nodestream=!!e("readable-stream").Readable}catch(e){o.nodestream=!1}},{"readable-stream":16}],31:[function(e,t,i){"use strict";for(var o=e("./utils"),n=e("./support"),r=e("./nodejsUtils"),a=e("./stream/GenericWorker"),s=new Array(256),c=0;c<256;c++)s[c]=252<=c?6:248<=c?5:240<=c?4:224<=c?3:192<=c?2:1;function l(){a.call(this,"utf-8 decode"),this.leftOver=null}function u(){a.call(this,"utf-8 encode")}s[254]=s[254]=1,i.utf8encode=function(e){return n.nodebuffer?r.newBufferFrom(e,"utf-8"):function(e){var t,i,o,r,a,s=e.length,c=0;for(r=0;r<s;r++)55296==(64512&(i=e.charCodeAt(r)))&&r+1<s&&56320==(64512&(o=e.charCodeAt(r+1)))&&(i=65536+(i-55296<<10)+(o-56320),r++),c+=i<128?1:i<2048?2:i<65536?3:4;for(t=n.uint8array?new Uint8Array(c):new Array(c),r=a=0;a<c;r++)55296==(64512&(i=e.charCodeAt(r)))&&r+1<s&&56320==(64512&(o=e.charCodeAt(r+1)))&&(i=65536+(i-55296<<10)+(o-56320),r++),i<128?t[a++]=i:(i<2048?t[a++]=192|i>>>6:(i<65536?t[a++]=224|i>>>12:(t[a++]=240|i>>>18,t[a++]=128|i>>>12&63),t[a++]=128|i>>>6&63),t[a++]=128|63&i);return t}(e)},i.utf8decode=function(e){return n.nodebuffer?o.transformTo("nodebuffer",e).toString("utf-8"):function(e){var t,i,n,r,a=e.length,c=new Array(2*a);for(t=i=0;t<a;)if((n=e[t++])<128)c[i++]=n;else if(4<(r=s[n]))c[i++]=65533,t+=r-1;else{for(n&=2===r?31:3===r?15:7;1<r&&t<a;)n=n<<6|63&e[t++],r--;1<r?c[i++]=65533:n<65536?c[i++]=n:(n-=65536,c[i++]=55296|n>>10&1023,c[i++]=56320|1023&n)}return c.length!==i&&(c.subarray?c=c.subarray(0,i):c.length=i),o.applyFromCharCode(c)}(e=o.transformTo(n.uint8array?"uint8array":"array",e))},o.inherits(l,a),l.prototype.processChunk=function(e){var t=o.transformTo(n.uint8array?"uint8array":"array",e.data);if(this.leftOver&&this.leftOver.length){if(n.uint8array){var r=t;(t=new Uint8Array(r.length+this.leftOver.length)).set(this.leftOver,0),t.set(r,this.leftOver.length)}else t=this.leftOver.concat(t);this.leftOver=null}var a=function(e,t){var i;for((t=t||e.length)>e.length&&(t=e.length),i=t-1;0<=i&&128==(192&e[i]);)i--;return i<0||0===i?t:i+s[e[i]]>t?i:t}(t),c=t;a!==t.length&&(n.uint8array?(c=t.subarray(0,a),this.leftOver=t.subarray(a,t.length)):(c=t.slice(0,a),this.leftOver=t.slice(a,t.length))),this.push({data:i.utf8decode(c),meta:e.meta})},l.prototype.flush=function(){this.leftOver&&this.leftOver.length&&(this.push({data:i.utf8decode(this.leftOver),meta:{}}),this.leftOver=null)},i.Utf8DecodeWorker=l,o.inherits(u,a),u.prototype.processChunk=function(e){this.push({data:i.utf8encode(e.data),meta:e.meta})},i.Utf8EncodeWorker=u},{"./nodejsUtils":14,"./stream/GenericWorker":28,"./support":30,"./utils":32}],32:[function(e,t,i){"use strict";var o=e("./support"),n=e("./base64"),r=e("./nodejsUtils"),a=e("set-immediate-shim"),s=e("./external");function c(e){return e}function l(e,t){for(var i=0;i<e.length;++i)t[i]=255&e.charCodeAt(i);return t}i.newBlob=function(t,o){i.checkSupport("blob");try{return new Blob([t],{type:o})}catch(e){try{var n=new(self.BlobBuilder||self.WebKitBlobBuilder||self.MozBlobBuilder||self.MSBlobBuilder);return n.append(t),n.getBlob(o)}catch(e){throw new Error("Bug : can't construct the Blob.")}}};var u={stringifyByChunk:function(e,t,i){var o=[],n=0,r=e.length;if(r<=i)return String.fromCharCode.apply(null,e);for(;n<r;)"array"===t||"nodebuffer"===t?o.push(String.fromCharCode.apply(null,e.slice(n,Math.min(n+i,r)))):o.push(String.fromCharCode.apply(null,e.subarray(n,Math.min(n+i,r)))),n+=i;return o.join("")},stringifyByChar:function(e){for(var t="",i=0;i<e.length;i++)t+=String.fromCharCode(e[i]);return t},applyCanBeUsed:{uint8array:function(){try{return o.uint8array&&1===String.fromCharCode.apply(null,new Uint8Array(1)).length}catch(e){return!1}}(),nodebuffer:function(){try{return o.nodebuffer&&1===String.fromCharCode.apply(null,r.allocBuffer(1)).length}catch(e){return!1}}()}};function d(e){var t=65536,o=i.getTypeOf(e),n=!0;if("uint8array"===o?n=u.applyCanBeUsed.uint8array:"nodebuffer"===o&&(n=u.applyCanBeUsed.nodebuffer),n)for(;1<t;)try{return u.stringifyByChunk(e,o,t)}catch(e){t=Math.floor(t/2)}return u.stringifyByChar(e)}function p(e,t){for(var i=0;i<e.length;i++)t[i]=e[i];return t}i.applyFromCharCode=d;var h={};h.string={string:c,array:function(e){return l(e,new Array(e.length))},arraybuffer:function(e){return h.string.uint8array(e).buffer},uint8array:function(e){return l(e,new Uint8Array(e.length))},nodebuffer:function(e){return l(e,r.allocBuffer(e.length))}},h.array={string:d,array:c,arraybuffer:function(e){return new Uint8Array(e).buffer},uint8array:function(e){return new Uint8Array(e)},nodebuffer:function(e){return r.newBufferFrom(e)}},h.arraybuffer={string:function(e){return d(new Uint8Array(e))},array:function(e){return p(new Uint8Array(e),new Array(e.byteLength))},arraybuffer:c,uint8array:function(e){return new Uint8Array(e)},nodebuffer:function(e){return r.newBufferFrom(new Uint8Array(e))}},h.uint8array={string:d,array:function(e){return p(e,new Array(e.length))},arraybuffer:function(e){return e.buffer},uint8array:c,nodebuffer:function(e){return r.newBufferFrom(e)}},h.nodebuffer={string:d,array:function(e){return p(e,new Array(e.length))},arraybuffer:function(e){return h.nodebuffer.uint8array(e).buffer},uint8array:function(e){return p(e,new Uint8Array(e.length))},nodebuffer:c},i.transformTo=function(e,t){if(t=t||"",!e)return t;i.checkSupport(e);var o=i.getTypeOf(t);return h[o][e](t)},i.getTypeOf=function(e){return"string"==typeof e?"string":"[object Array]"===Object.prototype.toString.call(e)?"array":o.nodebuffer&&r.isBuffer(e)?"nodebuffer":o.uint8array&&e instanceof Uint8Array?"uint8array":o.arraybuffer&&e instanceof ArrayBuffer?"arraybuffer":void 0},i.checkSupport=function(e){if(!o[e.toLowerCase()])throw new Error(e+" is not supported by this platform")},i.MAX_VALUE_16BITS=65535,i.MAX_VALUE_32BITS=-1,i.pretty=function(e){var t,i,o="";for(i=0;i<(e||"").length;i++)o+="\\x"+((t=e.charCodeAt(i))<16?"0":"")+t.toString(16).toUpperCase();return o},i.delay=function(e,t,i){a((function(){e.apply(i||null,t||[])}))},i.inherits=function(e,t){function i(){}i.prototype=t.prototype,e.prototype=new i},i.extend=function(){var e,t,i={};for(e=0;e<arguments.length;e++)for(t in arguments[e])arguments[e].hasOwnProperty(t)&&void 0===i[t]&&(i[t]=arguments[e][t]);return i},i.prepareContent=function(e,t,r,a,c){return s.Promise.resolve(t).then((function(e){return o.blob&&(e instanceof Blob||-1!==["[object File]","[object Blob]"].indexOf(Object.prototype.toString.call(e)))&&"undefined"!=typeof FileReader?new s.Promise((function(t,i){var o=new FileReader;o.onload=function(e){t(e.target.result)},o.onerror=function(e){i(e.target.error)},o.readAsArrayBuffer(e)})):e})).then((function(t){var u=i.getTypeOf(t);return u?("arraybuffer"===u?t=i.transformTo("uint8array",t):"string"===u&&(c?t=n.decode(t):r&&!0!==a&&(t=function(e){return l(e,o.uint8array?new Uint8Array(e.length):new Array(e.length))}(t))),t):s.Promise.reject(new Error("Can't read the data of '"+e+"'. Is it in a supported JavaScript type (String, Blob, ArrayBuffer, etc) ?"))}))}},{"./base64":1,"./external":6,"./nodejsUtils":14,"./support":30,"set-immediate-shim":54}],33:[function(e,t,i){"use strict";var o=e("./reader/readerFor"),n=e("./utils"),r=e("./signature"),a=e("./zipEntry"),s=(e("./utf8"),e("./support"));function c(e){this.files=[],this.loadOptions=e}c.prototype={checkSignature:function(e){if(!this.reader.readAndCheckSignature(e)){this.reader.index-=4;var t=this.reader.readString(4);throw new Error("Corrupted zip or bug: unexpected signature ("+n.pretty(t)+", expected "+n.pretty(e)+")")}},isSignature:function(e,t){var i=this.reader.index;this.reader.setIndex(e);var o=this.reader.readString(4)===t;return this.reader.setIndex(i),o},readBlockEndOfCentral:function(){this.diskNumber=this.reader.readInt(2),this.diskWithCentralDirStart=this.reader.readInt(2),this.centralDirRecordsOnThisDisk=this.reader.readInt(2),this.centralDirRecords=this.reader.readInt(2),this.centralDirSize=this.reader.readInt(4),this.centralDirOffset=this.reader.readInt(4),this.zipCommentLength=this.reader.readInt(2);var e=this.reader.readData(this.zipCommentLength),t=s.uint8array?"uint8array":"array",i=n.transformTo(t,e);this.zipComment=this.loadOptions.decodeFileName(i)},readBlockZip64EndOfCentral:function(){this.zip64EndOfCentralSize=this.reader.readInt(8),this.reader.skip(4),this.diskNumber=this.reader.readInt(4),this.diskWithCentralDirStart=this.reader.readInt(4),this.centralDirRecordsOnThisDisk=this.reader.readInt(8),this.centralDirRecords=this.reader.readInt(8),this.centralDirSize=this.reader.readInt(8),this.centralDirOffset=this.reader.readInt(8),this.zip64ExtensibleData={};for(var e,t,i,o=this.zip64EndOfCentralSize-44;0<o;)e=this.reader.readInt(2),t=this.reader.readInt(4),i=this.reader.readData(t),this.zip64ExtensibleData[e]={id:e,length:t,value:i}},readBlockZip64EndOfCentralLocator:function(){if(this.diskWithZip64CentralDirStart=this.reader.readInt(4),this.relativeOffsetEndOfZip64CentralDir=this.reader.readInt(8),this.disksCount=this.reader.readInt(4),1<this.disksCount)throw new Error("Multi-volumes zip are not supported")},readLocalFiles:function(){var e,t;for(e=0;e<this.files.length;e++)t=this.files[e],this.reader.setIndex(t.localHeaderOffset),this.checkSignature(r.LOCAL_FILE_HEADER),t.readLocalPart(this.reader),t.handleUTF8(),t.processAttributes()},readCentralDir:function(){var e;for(this.reader.setIndex(this.centralDirOffset);this.reader.readAndCheckSignature(r.CENTRAL_FILE_HEADER);)(e=new a({zip64:this.zip64},this.loadOptions)).readCentralPart(this.reader),this.files.push(e);if(this.centralDirRecords!==this.files.length&&0!==this.centralDirRecords&&0===this.files.length)throw new Error("Corrupted zip or bug: expected "+this.centralDirRecords+" records in central dir, got "+this.files.length)},readEndOfCentral:function(){var e=this.reader.lastIndexOfSignature(r.CENTRAL_DIRECTORY_END);if(e<0)throw this.isSignature(0,r.LOCAL_FILE_HEADER)?new Error("Corrupted zip: can't find end of central directory"):new Error("Can't find end of central directory : is this a zip file ? If it is, see https://stuk.github.io/jszip/documentation/howto/read_zip.html");this.reader.setIndex(e);var t=e;if(this.checkSignature(r.CENTRAL_DIRECTORY_END),this.readBlockEndOfCentral(),this.diskNumber===n.MAX_VALUE_16BITS||this.diskWithCentralDirStart===n.MAX_VALUE_16BITS||this.centralDirRecordsOnThisDisk===n.MAX_VALUE_16BITS||this.centralDirRecords===n.MAX_VALUE_16BITS||this.centralDirSize===n.MAX_VALUE_32BITS||this.centralDirOffset===n.MAX_VALUE_32BITS){if(this.zip64=!0,(e=this.reader.lastIndexOfSignature(r.ZIP64_CENTRAL_DIRECTORY_LOCATOR))<0)throw new Error("Corrupted zip: can't find the ZIP64 end of central directory locator");if(this.reader.setIndex(e),this.checkSignature(r.ZIP64_CENTRAL_DIRECTORY_LOCATOR),this.readBlockZip64EndOfCentralLocator(),!this.isSignature(this.relativeOffsetEndOfZip64CentralDir,r.ZIP64_CENTRAL_DIRECTORY_END)&&(this.relativeOffsetEndOfZip64CentralDir=this.reader.lastIndexOfSignature(r.ZIP64_CENTRAL_DIRECTORY_END),this.relativeOffsetEndOfZip64CentralDir<0))throw new Error("Corrupted zip: can't find the ZIP64 end of central directory");this.reader.setIndex(this.relativeOffsetEndOfZip64CentralDir),this.checkSignature(r.ZIP64_CENTRAL_DIRECTORY_END),this.readBlockZip64EndOfCentral()}var i=this.centralDirOffset+this.centralDirSize;this.zip64&&(i+=20,i+=12+this.zip64EndOfCentralSize);var o=t-i;if(0<o)this.isSignature(t,r.CENTRAL_FILE_HEADER)||(this.reader.zero=o);else if(o<0)throw new Error("Corrupted zip: missing "+Math.abs(o)+" bytes.")},prepareReader:function(e){this.reader=o(e)},load:function(e){this.prepareReader(e),this.readEndOfCentral(),this.readCentralDir(),this.readLocalFiles()}},t.exports=c},{"./reader/readerFor":22,"./signature":23,"./support":30,"./utf8":31,"./utils":32,"./zipEntry":34}],34:[function(e,t,i){"use strict";var o=e("./reader/readerFor"),n=e("./utils"),r=e("./compressedObject"),a=e("./crc32"),s=e("./utf8"),c=e("./compressions"),l=e("./support");function u(e,t){this.options=e,this.loadOptions=t}u.prototype={isEncrypted:function(){return 1==(1&this.bitFlag)},useUTF8:function(){return 2048==(2048&this.bitFlag)},readLocalPart:function(e){var t,i;if(e.skip(22),this.fileNameLength=e.readInt(2),i=e.readInt(2),this.fileName=e.readData(this.fileNameLength),e.skip(i),-1===this.compressedSize||-1===this.uncompressedSize)throw new Error("Bug or corrupted zip : didn't get enough information from the central directory (compressedSize === -1 || uncompressedSize === -1)");if(null===(t=function(e){for(var t in c)if(c.hasOwnProperty(t)&&c[t].magic===e)return c[t];return null}(this.compressionMethod)))throw new Error("Corrupted zip : compression "+n.pretty(this.compressionMethod)+" unknown (inner file : "+n.transformTo("string",this.fileName)+")");this.decompressed=new r(this.compressedSize,this.uncompressedSize,this.crc32,t,e.readData(this.compressedSize))},readCentralPart:function(e){this.versionMadeBy=e.readInt(2),e.skip(2),this.bitFlag=e.readInt(2),this.compressionMethod=e.readString(2),this.date=e.readDate(),this.crc32=e.readInt(4),this.compressedSize=e.readInt(4),this.uncompressedSize=e.readInt(4);var t=e.readInt(2);if(this.extraFieldsLength=e.readInt(2),this.fileCommentLength=e.readInt(2),this.diskNumberStart=e.readInt(2),this.internalFileAttributes=e.readInt(2),this.externalFileAttributes=e.readInt(4),this.localHeaderOffset=e.readInt(4),this.isEncrypted())throw new Error("Encrypted zip are not supported");e.skip(t),this.readExtraFields(e),this.parseZIP64ExtraField(e),this.fileComment=e.readData(this.fileCommentLength)},processAttributes:function(){this.unixPermissions=null,this.dosPermissions=null;var e=this.versionMadeBy>>8;this.dir=!!(16&this.externalFileAttributes),0==e&&(this.dosPermissions=63&this.externalFileAttributes),3==e&&(this.unixPermissions=this.externalFileAttributes>>16&65535),this.dir||"/"!==this.fileNameStr.slice(-1)||(this.dir=!0)},parseZIP64ExtraField:function(e){if(this.extraFields[1]){var t=o(this.extraFields[1].value);this.uncompressedSize===n.MAX_VALUE_32BITS&&(this.uncompressedSize=t.readInt(8)),this.compressedSize===n.MAX_VALUE_32BITS&&(this.compressedSize=t.readInt(8)),this.localHeaderOffset===n.MAX_VALUE_32BITS&&(this.localHeaderOffset=t.readInt(8)),this.diskNumberStart===n.MAX_VALUE_32BITS&&(this.diskNumberStart=t.readInt(4))}},readExtraFields:function(e){var t,i,o,n=e.index+this.extraFieldsLength;for(this.extraFields||(this.extraFields={});e.index+4<n;)t=e.readInt(2),i=e.readInt(2),o=e.readData(i),this.extraFields[t]={id:t,length:i,value:o};e.setIndex(n)},handleUTF8:function(){var e=l.uint8array?"uint8array":"array";if(this.useUTF8())this.fileNameStr=s.utf8decode(this.fileName),this.fileCommentStr=s.utf8decode(this.fileComment);else{var t=this.findExtraFieldUnicodePath();if(null!==t)this.fileNameStr=t;else{var i=n.transformTo(e,this.fileName);this.fileNameStr=this.loadOptions.decodeFileName(i)}var o=this.findExtraFieldUnicodeComment();if(null!==o)this.fileCommentStr=o;else{var r=n.transformTo(e,this.fileComment);this.fileCommentStr=this.loadOptions.decodeFileName(r)}}},findExtraFieldUnicodePath:function(){var e=this.extraFields[28789];if(e){var t=o(e.value);return 1!==t.readInt(1)||a(this.fileName)!==t.readInt(4)?null:s.utf8decode(t.readData(e.length-5))}return null},findExtraFieldUnicodeComment:function(){var e=this.extraFields[25461];if(e){var t=o(e.value);return 1!==t.readInt(1)||a(this.fileComment)!==t.readInt(4)?null:s.utf8decode(t.readData(e.length-5))}return null}},t.exports=u},{"./compressedObject":2,"./compressions":3,"./crc32":4,"./reader/readerFor":22,"./support":30,"./utf8":31,"./utils":32}],35:[function(e,t,i){"use strict";function o(e,t,i){this.name=e,this.dir=i.dir,this.date=i.date,this.comment=i.comment,this.unixPermissions=i.unixPermissions,this.dosPermissions=i.dosPermissions,this._data=t,this._dataBinary=i.binary,this.options={compression:i.compression,compressionOptions:i.compressionOptions}}var n=e("./stream/StreamHelper"),r=e("./stream/DataWorker"),a=e("./utf8"),s=e("./compressedObject"),c=e("./stream/GenericWorker");o.prototype={internalStream:function(e){var t=null,i="string";try{if(!e)throw new Error("No output type specified.");var o="string"===(i=e.toLowerCase())||"text"===i;"binarystring"!==i&&"text"!==i||(i="string"),t=this._decompressWorker();var r=!this._dataBinary;r&&!o&&(t=t.pipe(new a.Utf8EncodeWorker)),!r&&o&&(t=t.pipe(new a.Utf8DecodeWorker))}catch(e){(t=new c("error")).error(e)}return new n(t,i,"")},async:function(e,t){return this.internalStream(e).accumulate(t)},nodeStream:function(e,t){return this.internalStream(e||"nodebuffer").toNodejsStream(t)},_compressWorker:function(e,t){if(this._data instanceof s&&this._data.compression.magic===e.magic)return this._data.getCompressedWorker();var i=this._decompressWorker();return this._dataBinary||(i=i.pipe(new a.Utf8EncodeWorker)),s.createWorkerFrom(i,e,t)},_decompressWorker:function(){return this._data instanceof s?this._data.getContentWorker():this._data instanceof c?this._data:new r(this._data)}};for(var l=["asText","asBinary","asNodeBuffer","asUint8Array","asArrayBuffer"],u=function(){throw new Error("This method has been removed in JSZip 3.0, please check the upgrade guide.")},d=0;d<l.length;d++)o.prototype[l[d]]=u;t.exports=o},{"./compressedObject":2,"./stream/DataWorker":27,"./stream/GenericWorker":28,"./stream/StreamHelper":29,"./utf8":31}],36:[function(e,t,o){(function(e){"use strict";var i,o,n=e.MutationObserver||e.WebKitMutationObserver;if(n){var r=0,a=new n(u),s=e.document.createTextNode("");a.observe(s,{characterData:!0}),i=function(){s.data=r=++r%2}}else if(e.setImmediate||void 0===e.MessageChannel)i="document"in e&&"onreadystatechange"in e.document.createElement("script")?function(){var t=e.document.createElement("script");t.onreadystatechange=function(){u(),t.onreadystatechange=null,t.parentNode.removeChild(t),t=null},e.document.documentElement.appendChild(t)}:function(){setTimeout(u,0)};else{var c=new e.MessageChannel;c.port1.onmessage=u,i=function(){c.port2.postMessage(0)}}var l=[];function u(){var e,t;o=!0;for(var i=l.length;i;){for(t=l,l=[],e=-1;++e<i;)t[e]();i=l.length}o=!1}t.exports=function(e){1!==l.push(e)||o||i()}}).call(this,"undefined"!=typeof i?i:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],37:[function(e,t,i){"use strict";var o=e("immediate");function n(){}var r={},a=["REJECTED"],s=["FULFILLED"],c=["PENDING"];function l(e){if("function"!=typeof e)throw new TypeError("resolver must be a function");this.state=c,this.queue=[],this.outcome=void 0,e!==n&&h(this,e)}function u(e,t,i){this.promise=e,"function"==typeof t&&(this.onFulfilled=t,this.callFulfilled=this.otherCallFulfilled),"function"==typeof i&&(this.onRejected=i,this.callRejected=this.otherCallRejected)}function d(e,t,i){o((function(){var o;try{o=t(i)}catch(o){return r.reject(e,o)}o===e?r.reject(e,new TypeError("Cannot resolve promise with itself")):r.resolve(e,o)}))}function p(e){var t=e&&e.then;if(e&&("object"==typeof e||"function"==typeof e)&&"function"==typeof t)return function(){t.apply(e,arguments)}}function h(e,t){var i=!1;function o(t){i||(i=!0,r.reject(e,t))}function n(t){i||(i=!0,r.resolve(e,t))}var a=f((function(){t(n,o)}));"error"===a.status&&o(a.value)}function f(e,t){var i={};try{i.value=e(t),i.status="success"}catch(e){i.status="error",i.value=e}return i}(t.exports=l).prototype.finally=function(e){if("function"!=typeof e)return this;var t=this.constructor;return this.then((function(i){return t.resolve(e()).then((function(){return i}))}),(function(i){return t.resolve(e()).then((function(){throw i}))}))},l.prototype.catch=function(e){return this.then(null,e)},l.prototype.then=function(e,t){if("function"!=typeof e&&this.state===s||"function"!=typeof t&&this.state===a)return this;var i=new this.constructor(n);return this.state!==c?d(i,this.state===s?e:t,this.outcome):this.queue.push(new u(i,e,t)),i},u.prototype.callFulfilled=function(e){r.resolve(this.promise,e)},u.prototype.otherCallFulfilled=function(e){d(this.promise,this.onFulfilled,e)},u.prototype.callRejected=function(e){r.reject(this.promise,e)},u.prototype.otherCallRejected=function(e){d(this.promise,this.onRejected,e)},r.resolve=function(e,t){var i=f(p,t);if("error"===i.status)return r.reject(e,i.value);var o=i.value;if(o)h(e,o);else{e.state=s,e.outcome=t;for(var n=-1,a=e.queue.length;++n<a;)e.queue[n].callFulfilled(t)}return e},r.reject=function(e,t){e.state=a,e.outcome=t;for(var i=-1,o=e.queue.length;++i<o;)e.queue[i].callRejected(t);return e},l.resolve=function(e){return e instanceof this?e:r.resolve(new this(n),e)},l.reject=function(e){var t=new this(n);return r.reject(t,e)},l.all=function(e){var t=this;if("[object Array]"!==Object.prototype.toString.call(e))return this.reject(new TypeError("must be an array"));var i=e.length,o=!1;if(!i)return this.resolve([]);for(var a=new Array(i),s=0,c=-1,l=new this(n);++c<i;)u(e[c],c);return l;function u(e,n){t.resolve(e).then((function(e){a[n]=e,++s!==i||o||(o=!0,r.resolve(l,a))}),(function(e){o||(o=!0,r.reject(l,e))}))}},l.race=function(e){if("[object Array]"!==Object.prototype.toString.call(e))return this.reject(new TypeError("must be an array"));var t=e.length,i=!1;if(!t)return this.resolve([]);for(var o,a=-1,s=new this(n);++a<t;)o=e[a],this.resolve(o).then((function(e){i||(i=!0,r.resolve(s,e))}),(function(e){i||(i=!0,r.reject(s,e))}));return s}},{immediate:36}],38:[function(e,t,i){"use strict";var o={};(0,e("./lib/utils/common").assign)(o,e("./lib/deflate"),e("./lib/inflate"),e("./lib/zlib/constants")),t.exports=o},{"./lib/deflate":39,"./lib/inflate":40,"./lib/utils/common":41,"./lib/zlib/constants":44}],39:[function(e,t,i){"use strict";var o=e("./zlib/deflate"),n=e("./utils/common"),r=e("./utils/strings"),a=e("./zlib/messages"),s=e("./zlib/zstream"),c=Object.prototype.toString;function l(e){if(!(this instanceof l))return new l(e);this.options=n.assign({level:-1,method:8,chunkSize:16384,windowBits:15,memLevel:8,strategy:0,to:""},e||{});var t=this.options;t.raw&&0<t.windowBits?t.windowBits=-t.windowBits:t.gzip&&0<t.windowBits&&t.windowBits<16&&(t.windowBits+=16),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new s,this.strm.avail_out=0;var i=o.deflateInit2(this.strm,t.level,t.method,t.windowBits,t.memLevel,t.strategy);if(0!==i)throw new Error(a[i]);if(t.header&&o.deflateSetHeader(this.strm,t.header),t.dictionary){var u;if(u="string"==typeof t.dictionary?r.string2buf(t.dictionary):"[object ArrayBuffer]"===c.call(t.dictionary)?new Uint8Array(t.dictionary):t.dictionary,0!==(i=o.deflateSetDictionary(this.strm,u)))throw new Error(a[i]);this._dict_set=!0}}function u(e,t){var i=new l(t);if(i.push(e,!0),i.err)throw i.msg||a[i.err];return i.result}l.prototype.push=function(e,t){var i,a,s=this.strm,l=this.options.chunkSize;if(this.ended)return!1;a=t===~~t?t:!0===t?4:0,"string"==typeof e?s.input=r.string2buf(e):"[object ArrayBuffer]"===c.call(e)?s.input=new Uint8Array(e):s.input=e,s.next_in=0,s.avail_in=s.input.length;do{if(0===s.avail_out&&(s.output=new n.Buf8(l),s.next_out=0,s.avail_out=l),1!==(i=o.deflate(s,a))&&0!==i)return this.onEnd(i),!(this.ended=!0);0!==s.avail_out&&(0!==s.avail_in||4!==a&&2!==a)||("string"===this.options.to?this.onData(r.buf2binstring(n.shrinkBuf(s.output,s.next_out))):this.onData(n.shrinkBuf(s.output,s.next_out)))}while((0<s.avail_in||0===s.avail_out)&&1!==i);return 4===a?(i=o.deflateEnd(this.strm),this.onEnd(i),this.ended=!0,0===i):2!==a||(this.onEnd(0),!(s.avail_out=0))},l.prototype.onData=function(e){this.chunks.push(e)},l.prototype.onEnd=function(e){0===e&&("string"===this.options.to?this.result=this.chunks.join(""):this.result=n.flattenChunks(this.chunks)),this.chunks=[],this.err=e,this.msg=this.strm.msg},i.Deflate=l,i.deflate=u,i.deflateRaw=function(e,t){return(t=t||{}).raw=!0,u(e,t)},i.gzip=function(e,t){return(t=t||{}).gzip=!0,u(e,t)}},{"./utils/common":41,"./utils/strings":42,"./zlib/deflate":46,"./zlib/messages":51,"./zlib/zstream":53}],40:[function(e,t,i){"use strict";var o=e("./zlib/inflate"),n=e("./utils/common"),r=e("./utils/strings"),a=e("./zlib/constants"),s=e("./zlib/messages"),c=e("./zlib/zstream"),l=e("./zlib/gzheader"),u=Object.prototype.toString;function d(e){if(!(this instanceof d))return new d(e);this.options=n.assign({chunkSize:16384,windowBits:0,to:""},e||{});var t=this.options;t.raw&&0<=t.windowBits&&t.windowBits<16&&(t.windowBits=-t.windowBits,0===t.windowBits&&(t.windowBits=-15)),!(0<=t.windowBits&&t.windowBits<16)||e&&e.windowBits||(t.windowBits+=32),15<t.windowBits&&t.windowBits<48&&0==(15&t.windowBits)&&(t.windowBits|=15),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new c,this.strm.avail_out=0;var i=o.inflateInit2(this.strm,t.windowBits);if(i!==a.Z_OK)throw new Error(s[i]);this.header=new l,o.inflateGetHeader(this.strm,this.header)}function p(e,t){var i=new d(t);if(i.push(e,!0),i.err)throw i.msg||s[i.err];return i.result}d.prototype.push=function(e,t){var i,s,c,l,d,p,h=this.strm,f=this.options.chunkSize,y=this.options.dictionary,g=!1;if(this.ended)return!1;s=t===~~t?t:!0===t?a.Z_FINISH:a.Z_NO_FLUSH,"string"==typeof e?h.input=r.binstring2buf(e):"[object ArrayBuffer]"===u.call(e)?h.input=new Uint8Array(e):h.input=e,h.next_in=0,h.avail_in=h.input.length;do{if(0===h.avail_out&&(h.output=new n.Buf8(f),h.next_out=0,h.avail_out=f),(i=o.inflate(h,a.Z_NO_FLUSH))===a.Z_NEED_DICT&&y&&(p="string"==typeof y?r.string2buf(y):"[object ArrayBuffer]"===u.call(y)?new Uint8Array(y):y,i=o.inflateSetDictionary(this.strm,p)),i===a.Z_BUF_ERROR&&!0===g&&(i=a.Z_OK,g=!1),i!==a.Z_STREAM_END&&i!==a.Z_OK)return this.onEnd(i),!(this.ended=!0);h.next_out&&(0!==h.avail_out&&i!==a.Z_STREAM_END&&(0!==h.avail_in||s!==a.Z_FINISH&&s!==a.Z_SYNC_FLUSH)||("string"===this.options.to?(c=r.utf8border(h.output,h.next_out),l=h.next_out-c,d=r.buf2string(h.output,c),h.next_out=l,h.avail_out=f-l,l&&n.arraySet(h.output,h.output,c,l,0),this.onData(d)):this.onData(n.shrinkBuf(h.output,h.next_out)))),0===h.avail_in&&0===h.avail_out&&(g=!0)}while((0<h.avail_in||0===h.avail_out)&&i!==a.Z_STREAM_END);return i===a.Z_STREAM_END&&(s=a.Z_FINISH),s===a.Z_FINISH?(i=o.inflateEnd(this.strm),this.onEnd(i),this.ended=!0,i===a.Z_OK):s!==a.Z_SYNC_FLUSH||(this.onEnd(a.Z_OK),!(h.avail_out=0))},d.prototype.onData=function(e){this.chunks.push(e)},d.prototype.onEnd=function(e){e===a.Z_OK&&("string"===this.options.to?this.result=this.chunks.join(""):this.result=n.flattenChunks(this.chunks)),this.chunks=[],this.err=e,this.msg=this.strm.msg},i.Inflate=d,i.inflate=p,i.inflateRaw=function(e,t){return(t=t||{}).raw=!0,p(e,t)},i.ungzip=p},{"./utils/common":41,"./utils/strings":42,"./zlib/constants":44,"./zlib/gzheader":47,"./zlib/inflate":49,"./zlib/messages":51,"./zlib/zstream":53}],41:[function(e,t,i){"use strict";var o="undefined"!=typeof Uint8Array&&"undefined"!=typeof Uint16Array&&"undefined"!=typeof Int32Array;i.assign=function(e){for(var t=Array.prototype.slice.call(arguments,1);t.length;){var i=t.shift();if(i){if("object"!=typeof i)throw new TypeError(i+"must be non-object");for(var o in i)i.hasOwnProperty(o)&&(e[o]=i[o])}}return e},i.shrinkBuf=function(e,t){return e.length===t?e:e.subarray?e.subarray(0,t):(e.length=t,e)};var n={arraySet:function(e,t,i,o,n){if(t.subarray&&e.subarray)e.set(t.subarray(i,i+o),n);else for(var r=0;r<o;r++)e[n+r]=t[i+r]},flattenChunks:function(e){var t,i,o,n,r,a;for(t=o=0,i=e.length;t<i;t++)o+=e[t].length;for(a=new Uint8Array(o),t=n=0,i=e.length;t<i;t++)r=e[t],a.set(r,n),n+=r.length;return a}},r={arraySet:function(e,t,i,o,n){for(var r=0;r<o;r++)e[n+r]=t[i+r]},flattenChunks:function(e){return[].concat.apply([],e)}};i.setTyped=function(e){e?(i.Buf8=Uint8Array,i.Buf16=Uint16Array,i.Buf32=Int32Array,i.assign(i,n)):(i.Buf8=Array,i.Buf16=Array,i.Buf32=Array,i.assign(i,r))},i.setTyped(o)},{}],42:[function(e,t,i){"use strict";var o=e("./common"),n=!0,r=!0;try{String.fromCharCode.apply(null,[0])}catch(e){n=!1}try{String.fromCharCode.apply(null,new Uint8Array(1))}catch(e){r=!1}for(var a=new o.Buf8(256),s=0;s<256;s++)a[s]=252<=s?6:248<=s?5:240<=s?4:224<=s?3:192<=s?2:1;function c(e,t){if(t<65537&&(e.subarray&&r||!e.subarray&&n))return String.fromCharCode.apply(null,o.shrinkBuf(e,t));for(var i="",a=0;a<t;a++)i+=String.fromCharCode(e[a]);return i}a[254]=a[254]=1,i.string2buf=function(e){var t,i,n,r,a,s=e.length,c=0;for(r=0;r<s;r++)55296==(64512&(i=e.charCodeAt(r)))&&r+1<s&&56320==(64512&(n=e.charCodeAt(r+1)))&&(i=65536+(i-55296<<10)+(n-56320),r++),c+=i<128?1:i<2048?2:i<65536?3:4;for(t=new o.Buf8(c),r=a=0;a<c;r++)55296==(64512&(i=e.charCodeAt(r)))&&r+1<s&&56320==(64512&(n=e.charCodeAt(r+1)))&&(i=65536+(i-55296<<10)+(n-56320),r++),i<128?t[a++]=i:(i<2048?t[a++]=192|i>>>6:(i<65536?t[a++]=224|i>>>12:(t[a++]=240|i>>>18,t[a++]=128|i>>>12&63),t[a++]=128|i>>>6&63),t[a++]=128|63&i);return t},i.buf2binstring=function(e){return c(e,e.length)},i.binstring2buf=function(e){for(var t=new o.Buf8(e.length),i=0,n=t.length;i<n;i++)t[i]=e.charCodeAt(i);return t},i.buf2string=function(e,t){var i,o,n,r,s=t||e.length,l=new Array(2*s);for(i=o=0;i<s;)if((n=e[i++])<128)l[o++]=n;else if(4<(r=a[n]))l[o++]=65533,i+=r-1;else{for(n&=2===r?31:3===r?15:7;1<r&&i<s;)n=n<<6|63&e[i++],r--;1<r?l[o++]=65533:n<65536?l[o++]=n:(n-=65536,l[o++]=55296|n>>10&1023,l[o++]=56320|1023&n)}return c(l,o)},i.utf8border=function(e,t){var i;for((t=t||e.length)>e.length&&(t=e.length),i=t-1;0<=i&&128==(192&e[i]);)i--;return i<0||0===i?t:i+a[e[i]]>t?i:t}},{"./common":41}],43:[function(e,t,i){"use strict";t.exports=function(e,t,i,o){for(var n=65535&e|0,r=e>>>16&65535|0,a=0;0!==i;){for(i-=a=2e3<i?2e3:i;r=r+(n=n+t[o++]|0)|0,--a;);n%=65521,r%=65521}return n|r<<16|0}},{}],44:[function(e,t,i){"use strict";t.exports={Z_NO_FLUSH:0,Z_PARTIAL_FLUSH:1,Z_SYNC_FLUSH:2,Z_FULL_FLUSH:3,Z_FINISH:4,Z_BLOCK:5,Z_TREES:6,Z_OK:0,Z_STREAM_END:1,Z_NEED_DICT:2,Z_ERRNO:-1,Z_STREAM_ERROR:-2,Z_DATA_ERROR:-3,Z_BUF_ERROR:-5,Z_NO_COMPRESSION:0,Z_BEST_SPEED:1,Z_BEST_COMPRESSION:9,Z_DEFAULT_COMPRESSION:-1,Z_FILTERED:1,Z_HUFFMAN_ONLY:2,Z_RLE:3,Z_FIXED:4,Z_DEFAULT_STRATEGY:0,Z_BINARY:0,Z_TEXT:1,Z_UNKNOWN:2,Z_DEFLATED:8}},{}],45:[function(e,t,i){"use strict";var o=function(){for(var e,t=[],i=0;i<256;i++){e=i;for(var o=0;o<8;o++)e=1&e?3988292384^e>>>1:e>>>1;t[i]=e}return t}();t.exports=function(e,t,i,n){var r=o,a=n+i;e^=-1;for(var s=n;s<a;s++)e=e>>>8^r[255&(e^t[s])];return-1^e}},{}],46:[function(e,t,i){"use strict";var o,n=e("../utils/common"),r=e("./trees"),a=e("./adler32"),s=e("./crc32"),c=e("./messages"),l=-2,u=258,d=262,p=113;function h(e,t){return e.msg=c[t],t}function f(e){return(e<<1)-(4<e?9:0)}function y(e){for(var t=e.length;0<=--t;)e[t]=0}function g(e){var t=e.state,i=t.pending;i>e.avail_out&&(i=e.avail_out),0!==i&&(n.arraySet(e.output,t.pending_buf,t.pending_out,i,e.next_out),e.next_out+=i,t.pending_out+=i,e.total_out+=i,e.avail_out-=i,t.pending-=i,0===t.pending&&(t.pending_out=0))}function m(e,t){r._tr_flush_block(e,0<=e.block_start?e.block_start:-1,e.strstart-e.block_start,t),e.block_start=e.strstart,g(e.strm)}function v(e,t){e.pending_buf[e.pending++]=t}function b(e,t){e.pending_buf[e.pending++]=t>>>8&255,e.pending_buf[e.pending++]=255&t}function S(e,t){var i,o,n=e.max_chain_length,r=e.strstart,a=e.prev_length,s=e.nice_match,c=e.strstart>e.w_size-d?e.strstart-(e.w_size-d):0,l=e.window,p=e.w_mask,h=e.prev,f=e.strstart+u,y=l[r+a-1],g=l[r+a];e.prev_length>=e.good_match&&(n>>=2),s>e.lookahead&&(s=e.lookahead);do{if(l[(i=t)+a]===g&&l[i+a-1]===y&&l[i]===l[r]&&l[++i]===l[r+1]){r+=2,i++;do{}while(l[++r]===l[++i]&&l[++r]===l[++i]&&l[++r]===l[++i]&&l[++r]===l[++i]&&l[++r]===l[++i]&&l[++r]===l[++i]&&l[++r]===l[++i]&&l[++r]===l[++i]&&r<f);if(o=u-(f-r),r=f-u,a<o){if(e.match_start=t,s<=(a=o))break;y=l[r+a-1],g=l[r+a]}}}while((t=h[t&p])>c&&0!=--n);return a<=e.lookahead?a:e.lookahead}function k(e){var t,i,o,r,c,l,u,p,h,f,y=e.w_size;do{if(r=e.window_size-e.lookahead-e.strstart,e.strstart>=y+(y-d)){for(n.arraySet(e.window,e.window,y,y,0),e.match_start-=y,e.strstart-=y,e.block_start-=y,t=i=e.hash_size;o=e.head[--t],e.head[t]=y<=o?o-y:0,--i;);for(t=i=y;o=e.prev[--t],e.prev[t]=y<=o?o-y:0,--i;);r+=y}if(0===e.strm.avail_in)break;if(l=e.strm,u=e.window,p=e.strstart+e.lookahead,f=void 0,(h=r)<(f=l.avail_in)&&(f=h),i=0===f?0:(l.avail_in-=f,n.arraySet(u,l.input,l.next_in,f,p),1===l.state.wrap?l.adler=a(l.adler,u,f,p):2===l.state.wrap&&(l.adler=s(l.adler,u,f,p)),l.next_in+=f,l.total_in+=f,f),e.lookahead+=i,e.lookahead+e.insert>=3)for(c=e.strstart-e.insert,e.ins_h=e.window[c],e.ins_h=(e.ins_h<<e.hash_shift^e.window[c+1])&e.hash_mask;e.insert&&(e.ins_h=(e.ins_h<<e.hash_shift^e.window[c+3-1])&e.hash_mask,e.prev[c&e.w_mask]=e.head[e.ins_h],e.head[e.ins_h]=c,c++,e.insert--,!(e.lookahead+e.insert<3)););}while(e.lookahead<d&&0!==e.strm.avail_in)}function P(e,t){for(var i,o;;){if(e.lookahead<d){if(k(e),e.lookahead<d&&0===t)return 1;if(0===e.lookahead)break}if(i=0,e.lookahead>=3&&(e.ins_h=(e.ins_h<<e.hash_shift^e.window[e.strstart+3-1])&e.hash_mask,i=e.prev[e.strstart&e.w_mask]=e.head[e.ins_h],e.head[e.ins_h]=e.strstart),0!==i&&e.strstart-i<=e.w_size-d&&(e.match_length=S(e,i)),e.match_length>=3)if(o=r._tr_tally(e,e.strstart-e.match_start,e.match_length-3),e.lookahead-=e.match_length,e.match_length<=e.max_lazy_match&&e.lookahead>=3){for(e.match_length--;e.strstart++,e.ins_h=(e.ins_h<<e.hash_shift^e.window[e.strstart+3-1])&e.hash_mask,i=e.prev[e.strstart&e.w_mask]=e.head[e.ins_h],e.head[e.ins_h]=e.strstart,0!=--e.match_length;);e.strstart++}else e.strstart+=e.match_length,e.match_length=0,e.ins_h=e.window[e.strstart],e.ins_h=(e.ins_h<<e.hash_shift^e.window[e.strstart+1])&e.hash_mask;else o=r._tr_tally(e,0,e.window[e.strstart]),e.lookahead--,e.strstart++;if(o&&(m(e,!1),0===e.strm.avail_out))return 1}return e.insert=e.strstart<2?e.strstart:2,4===t?(m(e,!0),0===e.strm.avail_out?3:4):e.last_lit&&(m(e,!1),0===e.strm.avail_out)?1:2}function w(e,t){for(var i,o,n;;){if(e.lookahead<d){if(k(e),e.lookahead<d&&0===t)return 1;if(0===e.lookahead)break}if(i=0,e.lookahead>=3&&(e.ins_h=(e.ins_h<<e.hash_shift^e.window[e.strstart+3-1])&e.hash_mask,i=e.prev[e.strstart&e.w_mask]=e.head[e.ins_h],e.head[e.ins_h]=e.strstart),e.prev_length=e.match_length,e.prev_match=e.match_start,e.match_length=2,0!==i&&e.prev_length<e.max_lazy_match&&e.strstart-i<=e.w_size-d&&(e.match_length=S(e,i),e.match_length<=5&&(1===e.strategy||3===e.match_length&&4096<e.strstart-e.match_start)&&(e.match_length=2)),e.prev_length>=3&&e.match_length<=e.prev_length){for(n=e.strstart+e.lookahead-3,o=r._tr_tally(e,e.strstart-1-e.prev_match,e.prev_length-3),e.lookahead-=e.prev_length-1,e.prev_length-=2;++e.strstart<=n&&(e.ins_h=(e.ins_h<<e.hash_shift^e.window[e.strstart+3-1])&e.hash_mask,i=e.prev[e.strstart&e.w_mask]=e.head[e.ins_h],e.head[e.ins_h]=e.strstart),0!=--e.prev_length;);if(e.match_available=0,e.match_length=2,e.strstart++,o&&(m(e,!1),0===e.strm.avail_out))return 1}else if(e.match_available){if((o=r._tr_tally(e,0,e.window[e.strstart-1]))&&m(e,!1),e.strstart++,e.lookahead--,0===e.strm.avail_out)return 1}else e.match_available=1,e.strstart++,e.lookahead--}return e.match_available&&(o=r._tr_tally(e,0,e.window[e.strstart-1]),e.match_available=0),e.insert=e.strstart<2?e.strstart:2,4===t?(m(e,!0),0===e.strm.avail_out?3:4):e.last_lit&&(m(e,!1),0===e.strm.avail_out)?1:2}function A(e,t,i,o,n){this.good_length=e,this.max_lazy=t,this.nice_length=i,this.max_chain=o,this.func=n}function I(){this.strm=null,this.status=0,this.pending_buf=null,this.pending_buf_size=0,this.pending_out=0,this.pending=0,this.wrap=0,this.gzhead=null,this.gzindex=0,this.method=8,this.last_flush=-1,this.w_size=0,this.w_bits=0,this.w_mask=0,this.window=null,this.window_size=0,this.prev=null,this.head=null,this.ins_h=0,this.hash_size=0,this.hash_bits=0,this.hash_mask=0,this.hash_shift=0,this.block_start=0,this.match_length=0,this.prev_match=0,this.match_available=0,this.strstart=0,this.match_start=0,this.lookahead=0,this.prev_length=0,this.max_chain_length=0,this.max_lazy_match=0,this.level=0,this.strategy=0,this.good_match=0,this.nice_match=0,this.dyn_ltree=new n.Buf16(1146),this.dyn_dtree=new n.Buf16(122),this.bl_tree=new n.Buf16(78),y(this.dyn_ltree),y(this.dyn_dtree),y(this.bl_tree),this.l_desc=null,this.d_desc=null,this.bl_desc=null,this.bl_count=new n.Buf16(16),this.heap=new n.Buf16(573),y(this.heap),this.heap_len=0,this.heap_max=0,this.depth=new n.Buf16(573),y(this.depth),this.l_buf=0,this.lit_bufsize=0,this.last_lit=0,this.d_buf=0,this.opt_len=0,this.static_len=0,this.matches=0,this.insert=0,this.bi_buf=0,this.bi_valid=0}function T(e){var t;return e&&e.state?(e.total_in=e.total_out=0,e.data_type=2,(t=e.state).pending=0,t.pending_out=0,t.wrap<0&&(t.wrap=-t.wrap),t.status=t.wrap?42:p,e.adler=2===t.wrap?0:1,t.last_flush=0,r._tr_init(t),0):h(e,l)}function C(e){var t=T(e);return 0===t&&function(e){e.window_size=2*e.w_size,y(e.head),e.max_lazy_match=o[e.level].max_lazy,e.good_match=o[e.level].good_length,e.nice_match=o[e.level].nice_length,e.max_chain_length=o[e.level].max_chain,e.strstart=0,e.block_start=0,e.lookahead=0,e.insert=0,e.match_length=e.prev_length=2,e.match_available=0,e.ins_h=0}(e.state),t}function _(e,t,i,o,r,a){if(!e)return l;var s=1;if(-1===t&&(t=6),o<0?(s=0,o=-o):15<o&&(s=2,o-=16),r<1||9<r||8!==i||o<8||15<o||t<0||9<t||a<0||4<a)return h(e,l);8===o&&(o=9);var c=new I;return(e.state=c).strm=e,c.wrap=s,c.gzhead=null,c.w_bits=o,c.w_size=1<<c.w_bits,c.w_mask=c.w_size-1,c.hash_bits=r+7,c.hash_size=1<<c.hash_bits,c.hash_mask=c.hash_size-1,c.hash_shift=~~((c.hash_bits+3-1)/3),c.window=new n.Buf8(2*c.w_size),c.head=new n.Buf16(c.hash_size),c.prev=new n.Buf16(c.w_size),c.lit_bufsize=1<<r+6,c.pending_buf_size=4*c.lit_bufsize,c.pending_buf=new n.Buf8(c.pending_buf_size),c.d_buf=1*c.lit_bufsize,c.l_buf=3*c.lit_bufsize,c.level=t,c.strategy=a,c.method=i,C(e)}o=[new A(0,0,0,0,(function(e,t){var i=65535;for(i>e.pending_buf_size-5&&(i=e.pending_buf_size-5);;){if(e.lookahead<=1){if(k(e),0===e.lookahead&&0===t)return 1;if(0===e.lookahead)break}e.strstart+=e.lookahead,e.lookahead=0;var o=e.block_start+i;if((0===e.strstart||e.strstart>=o)&&(e.lookahead=e.strstart-o,e.strstart=o,m(e,!1),0===e.strm.avail_out))return 1;if(e.strstart-e.block_start>=e.w_size-d&&(m(e,!1),0===e.strm.avail_out))return 1}return e.insert=0,4===t?(m(e,!0),0===e.strm.avail_out?3:4):(e.strstart>e.block_start&&(m(e,!1),e.strm.avail_out),1)})),new A(4,4,8,4,P),new A(4,5,16,8,P),new A(4,6,32,32,P),new A(4,4,16,16,w),new A(8,16,32,32,w),new A(8,16,128,128,w),new A(8,32,128,256,w),new A(32,128,258,1024,w),new A(32,258,258,4096,w)],i.deflateInit=function(e,t){return _(e,t,8,15,8,0)},i.deflateInit2=_,i.deflateReset=C,i.deflateResetKeep=T,i.deflateSetHeader=function(e,t){return e&&e.state?2!==e.state.wrap?l:(e.state.gzhead=t,0):l},i.deflate=function(e,t){var i,n,a,c;if(!e||!e.state||5<t||t<0)return e?h(e,l):l;if(n=e.state,!e.output||!e.input&&0!==e.avail_in||666===n.status&&4!==t)return h(e,0===e.avail_out?-5:l);if(n.strm=e,i=n.last_flush,n.last_flush=t,42===n.status)if(2===n.wrap)e.adler=0,v(n,31),v(n,139),v(n,8),n.gzhead?(v(n,(n.gzhead.text?1:0)+(n.gzhead.hcrc?2:0)+(n.gzhead.extra?4:0)+(n.gzhead.name?8:0)+(n.gzhead.comment?16:0)),v(n,255&n.gzhead.time),v(n,n.gzhead.time>>8&255),v(n,n.gzhead.time>>16&255),v(n,n.gzhead.time>>24&255),v(n,9===n.level?2:2<=n.strategy||n.level<2?4:0),v(n,255&n.gzhead.os),n.gzhead.extra&&n.gzhead.extra.length&&(v(n,255&n.gzhead.extra.length),v(n,n.gzhead.extra.length>>8&255)),n.gzhead.hcrc&&(e.adler=s(e.adler,n.pending_buf,n.pending,0)),n.gzindex=0,n.status=69):(v(n,0),v(n,0),v(n,0),v(n,0),v(n,0),v(n,9===n.level?2:2<=n.strategy||n.level<2?4:0),v(n,3),n.status=p);else{var d=8+(n.w_bits-8<<4)<<8;d|=(2<=n.strategy||n.level<2?0:n.level<6?1:6===n.level?2:3)<<6,0!==n.strstart&&(d|=32),d+=31-d%31,n.status=p,b(n,d),0!==n.strstart&&(b(n,e.adler>>>16),b(n,65535&e.adler)),e.adler=1}if(69===n.status)if(n.gzhead.extra){for(a=n.pending;n.gzindex<(65535&n.gzhead.extra.length)&&(n.pending!==n.pending_buf_size||(n.gzhead.hcrc&&n.pending>a&&(e.adler=s(e.adler,n.pending_buf,n.pending-a,a)),g(e),a=n.pending,n.pending!==n.pending_buf_size));)v(n,255&n.gzhead.extra[n.gzindex]),n.gzindex++;n.gzhead.hcrc&&n.pending>a&&(e.adler=s(e.adler,n.pending_buf,n.pending-a,a)),n.gzindex===n.gzhead.extra.length&&(n.gzindex=0,n.status=73)}else n.status=73;if(73===n.status)if(n.gzhead.name){a=n.pending;do{if(n.pending===n.pending_buf_size&&(n.gzhead.hcrc&&n.pending>a&&(e.adler=s(e.adler,n.pending_buf,n.pending-a,a)),g(e),a=n.pending,n.pending===n.pending_buf_size)){c=1;break}c=n.gzindex<n.gzhead.name.length?255&n.gzhead.name.charCodeAt(n.gzindex++):0,v(n,c)}while(0!==c);n.gzhead.hcrc&&n.pending>a&&(e.adler=s(e.adler,n.pending_buf,n.pending-a,a)),0===c&&(n.gzindex=0,n.status=91)}else n.status=91;if(91===n.status)if(n.gzhead.comment){a=n.pending;do{if(n.pending===n.pending_buf_size&&(n.gzhead.hcrc&&n.pending>a&&(e.adler=s(e.adler,n.pending_buf,n.pending-a,a)),g(e),a=n.pending,n.pending===n.pending_buf_size)){c=1;break}c=n.gzindex<n.gzhead.comment.length?255&n.gzhead.comment.charCodeAt(n.gzindex++):0,v(n,c)}while(0!==c);n.gzhead.hcrc&&n.pending>a&&(e.adler=s(e.adler,n.pending_buf,n.pending-a,a)),0===c&&(n.status=103)}else n.status=103;if(103===n.status&&(n.gzhead.hcrc?(n.pending+2>n.pending_buf_size&&g(e),n.pending+2<=n.pending_buf_size&&(v(n,255&e.adler),v(n,e.adler>>8&255),e.adler=0,n.status=p)):n.status=p),0!==n.pending){if(g(e),0===e.avail_out)return n.last_flush=-1,0}else if(0===e.avail_in&&f(t)<=f(i)&&4!==t)return h(e,-5);if(666===n.status&&0!==e.avail_in)return h(e,-5);if(0!==e.avail_in||0!==n.lookahead||0!==t&&666!==n.status){var S=2===n.strategy?function(e,t){for(var i;;){if(0===e.lookahead&&(k(e),0===e.lookahead)){if(0===t)return 1;break}if(e.match_length=0,i=r._tr_tally(e,0,e.window[e.strstart]),e.lookahead--,e.strstart++,i&&(m(e,!1),0===e.strm.avail_out))return 1}return e.insert=0,4===t?(m(e,!0),0===e.strm.avail_out?3:4):e.last_lit&&(m(e,!1),0===e.strm.avail_out)?1:2}(n,t):3===n.strategy?function(e,t){for(var i,o,n,a,s=e.window;;){if(e.lookahead<=u){if(k(e),e.lookahead<=u&&0===t)return 1;if(0===e.lookahead)break}if(e.match_length=0,e.lookahead>=3&&0<e.strstart&&(o=s[n=e.strstart-1])===s[++n]&&o===s[++n]&&o===s[++n]){a=e.strstart+u;do{}while(o===s[++n]&&o===s[++n]&&o===s[++n]&&o===s[++n]&&o===s[++n]&&o===s[++n]&&o===s[++n]&&o===s[++n]&&n<a);e.match_length=u-(a-n),e.match_length>e.lookahead&&(e.match_length=e.lookahead)}if(e.match_length>=3?(i=r._tr_tally(e,1,e.match_length-3),e.lookahead-=e.match_length,e.strstart+=e.match_length,e.match_length=0):(i=r._tr_tally(e,0,e.window[e.strstart]),e.lookahead--,e.strstart++),i&&(m(e,!1),0===e.strm.avail_out))return 1}return e.insert=0,4===t?(m(e,!0),0===e.strm.avail_out?3:4):e.last_lit&&(m(e,!1),0===e.strm.avail_out)?1:2}(n,t):o[n.level].func(n,t);if(3!==S&&4!==S||(n.status=666),1===S||3===S)return 0===e.avail_out&&(n.last_flush=-1),0;if(2===S&&(1===t?r._tr_align(n):5!==t&&(r._tr_stored_block(n,0,0,!1),3===t&&(y(n.head),0===n.lookahead&&(n.strstart=0,n.block_start=0,n.insert=0))),g(e),0===e.avail_out))return n.last_flush=-1,0}return 4!==t?0:n.wrap<=0?1:(2===n.wrap?(v(n,255&e.adler),v(n,e.adler>>8&255),v(n,e.adler>>16&255),v(n,e.adler>>24&255),v(n,255&e.total_in),v(n,e.total_in>>8&255),v(n,e.total_in>>16&255),v(n,e.total_in>>24&255)):(b(n,e.adler>>>16),b(n,65535&e.adler)),g(e),0<n.wrap&&(n.wrap=-n.wrap),0!==n.pending?0:1)},i.deflateEnd=function(e){var t;return e&&e.state?42!==(t=e.state.status)&&69!==t&&73!==t&&91!==t&&103!==t&&t!==p&&666!==t?h(e,l):(e.state=null,t===p?h(e,-3):0):l},i.deflateSetDictionary=function(e,t){var i,o,r,s,c,u,d,p,h=t.length;if(!e||!e.state)return l;if(2===(s=(i=e.state).wrap)||1===s&&42!==i.status||i.lookahead)return l;for(1===s&&(e.adler=a(e.adler,t,h,0)),i.wrap=0,h>=i.w_size&&(0===s&&(y(i.head),i.strstart=0,i.block_start=0,i.insert=0),p=new n.Buf8(i.w_size),n.arraySet(p,t,h-i.w_size,i.w_size,0),t=p,h=i.w_size),c=e.avail_in,u=e.next_in,d=e.input,e.avail_in=h,e.next_in=0,e.input=t,k(i);i.lookahead>=3;){for(o=i.strstart,r=i.lookahead-2;i.ins_h=(i.ins_h<<i.hash_shift^i.window[o+3-1])&i.hash_mask,i.prev[o&i.w_mask]=i.head[i.ins_h],i.head[i.ins_h]=o,o++,--r;);i.strstart=o,i.lookahead=2,k(i)}return i.strstart+=i.lookahead,i.block_start=i.strstart,i.insert=i.lookahead,i.lookahead=0,i.match_length=i.prev_length=2,i.match_available=0,e.next_in=u,e.input=d,e.avail_in=c,i.wrap=s,0},i.deflateInfo="pako deflate (from Nodeca project)"},{"../utils/common":41,"./adler32":43,"./crc32":45,"./messages":51,"./trees":52}],47:[function(e,t,i){"use strict";t.exports=function(){this.text=0,this.time=0,this.xflags=0,this.os=0,this.extra=null,this.extra_len=0,this.name="",this.comment="",this.hcrc=0,this.done=!1}},{}],48:[function(e,t,i){"use strict";t.exports=function(e,t){var i,o,n,r,a,s,c,l,u,d,p,h,f,y,g,m,v,b,S,k,P,w,A,I,T;i=e.state,o=e.next_in,I=e.input,n=o+(e.avail_in-5),r=e.next_out,T=e.output,a=r-(t-e.avail_out),s=r+(e.avail_out-257),c=i.dmax,l=i.wsize,u=i.whave,d=i.wnext,p=i.window,h=i.hold,f=i.bits,y=i.lencode,g=i.distcode,m=(1<<i.lenbits)-1,v=(1<<i.distbits)-1;e:do{f<15&&(h+=I[o++]<<f,f+=8,h+=I[o++]<<f,f+=8),b=y[h&m];t:for(;;){if(h>>>=S=b>>>24,f-=S,0===(S=b>>>16&255))T[r++]=65535&b;else{if(!(16&S)){if(0==(64&S)){b=y[(65535&b)+(h&(1<<S)-1)];continue t}if(32&S){i.mode=12;break e}e.msg="invalid literal/length code",i.mode=30;break e}k=65535&b,(S&=15)&&(f<S&&(h+=I[o++]<<f,f+=8),k+=h&(1<<S)-1,h>>>=S,f-=S),f<15&&(h+=I[o++]<<f,f+=8,h+=I[o++]<<f,f+=8),b=g[h&v];i:for(;;){if(h>>>=S=b>>>24,f-=S,!(16&(S=b>>>16&255))){if(0==(64&S)){b=g[(65535&b)+(h&(1<<S)-1)];continue i}e.msg="invalid distance code",i.mode=30;break e}if(P=65535&b,f<(S&=15)&&(h+=I[o++]<<f,(f+=8)<S&&(h+=I[o++]<<f,f+=8)),c<(P+=h&(1<<S)-1)){e.msg="invalid distance too far back",i.mode=30;break e}if(h>>>=S,f-=S,(S=r-a)<P){if(u<(S=P-S)&&i.sane){e.msg="invalid distance too far back",i.mode=30;break e}if(A=p,(w=0)===d){if(w+=l-S,S<k){for(k-=S;T[r++]=p[w++],--S;);w=r-P,A=T}}else if(d<S){if(w+=l+d-S,(S-=d)<k){for(k-=S;T[r++]=p[w++],--S;);if(w=0,d<k){for(k-=S=d;T[r++]=p[w++],--S;);w=r-P,A=T}}}else if(w+=d-S,S<k){for(k-=S;T[r++]=p[w++],--S;);w=r-P,A=T}for(;2<k;)T[r++]=A[w++],T[r++]=A[w++],T[r++]=A[w++],k-=3;k&&(T[r++]=A[w++],1<k&&(T[r++]=A[w++]))}else{for(w=r-P;T[r++]=T[w++],T[r++]=T[w++],T[r++]=T[w++],2<(k-=3););k&&(T[r++]=T[w++],1<k&&(T[r++]=T[w++]))}break}}break}}while(o<n&&r<s);o-=k=f>>3,h&=(1<<(f-=k<<3))-1,e.next_in=o,e.next_out=r,e.avail_in=o<n?n-o+5:5-(o-n),e.avail_out=r<s?s-r+257:257-(r-s),i.hold=h,i.bits=f}},{}],49:[function(e,t,i){"use strict";var o=e("../utils/common"),n=e("./adler32"),r=e("./crc32"),a=e("./inffast"),s=e("./inftrees"),c=-2;function l(e){return(e>>>24&255)+(e>>>8&65280)+((65280&e)<<8)+((255&e)<<24)}function u(){this.mode=0,this.last=!1,this.wrap=0,this.havedict=!1,this.flags=0,this.dmax=0,this.check=0,this.total=0,this.head=null,this.wbits=0,this.wsize=0,this.whave=0,this.wnext=0,this.window=null,this.hold=0,this.bits=0,this.length=0,this.offset=0,this.extra=0,this.lencode=null,this.distcode=null,this.lenbits=0,this.distbits=0,this.ncode=0,this.nlen=0,this.ndist=0,this.have=0,this.next=null,this.lens=new o.Buf16(320),this.work=new o.Buf16(288),this.lendyn=null,this.distdyn=null,this.sane=0,this.back=0,this.was=0}function d(e){var t;return e&&e.state?(t=e.state,e.total_in=e.total_out=t.total=0,e.msg="",t.wrap&&(e.adler=1&t.wrap),t.mode=1,t.last=0,t.havedict=0,t.dmax=32768,t.head=null,t.hold=0,t.bits=0,t.lencode=t.lendyn=new o.Buf32(852),t.distcode=t.distdyn=new o.Buf32(592),t.sane=1,t.back=-1,0):c}function p(e){var t;return e&&e.state?((t=e.state).wsize=0,t.whave=0,t.wnext=0,d(e)):c}function h(e,t){var i,o;return e&&e.state?(o=e.state,t<0?(i=0,t=-t):(i=1+(t>>4),t<48&&(t&=15)),t&&(t<8||15<t)?c:(null!==o.window&&o.wbits!==t&&(o.window=null),o.wrap=i,o.wbits=t,p(e))):c}function f(e,t){var i,o;return e?(o=new u,(e.state=o).window=null,0!==(i=h(e,t))&&(e.state=null),i):c}var y,g,m=!0;function v(e){if(m){var t;for(y=new o.Buf32(512),g=new o.Buf32(32),t=0;t<144;)e.lens[t++]=8;for(;t<256;)e.lens[t++]=9;for(;t<280;)e.lens[t++]=7;for(;t<288;)e.lens[t++]=8;for(s(1,e.lens,0,288,y,0,e.work,{bits:9}),t=0;t<32;)e.lens[t++]=5;s(2,e.lens,0,32,g,0,e.work,{bits:5}),m=!1}e.lencode=y,e.lenbits=9,e.distcode=g,e.distbits=5}function b(e,t,i,n){var r,a=e.state;return null===a.window&&(a.wsize=1<<a.wbits,a.wnext=0,a.whave=0,a.window=new o.Buf8(a.wsize)),n>=a.wsize?(o.arraySet(a.window,t,i-a.wsize,a.wsize,0),a.wnext=0,a.whave=a.wsize):(n<(r=a.wsize-a.wnext)&&(r=n),o.arraySet(a.window,t,i-n,r,a.wnext),(n-=r)?(o.arraySet(a.window,t,i-n,n,0),a.wnext=n,a.whave=a.wsize):(a.wnext+=r,a.wnext===a.wsize&&(a.wnext=0),a.whave<a.wsize&&(a.whave+=r))),0}i.inflateReset=p,i.inflateReset2=h,i.inflateResetKeep=d,i.inflateInit=function(e){return f(e,15)},i.inflateInit2=f,i.inflate=function(e,t){var i,u,d,p,h,f,y,g,m,S,k,P,w,A,I,T,C,_,E,x,R,O,D,M,j=0,$=new o.Buf8(4),B=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15];if(!e||!e.state||!e.output||!e.input&&0!==e.avail_in)return c;12===(i=e.state).mode&&(i.mode=13),h=e.next_out,d=e.output,y=e.avail_out,p=e.next_in,u=e.input,f=e.avail_in,g=i.hold,m=i.bits,S=f,k=y,O=0;e:for(;;)switch(i.mode){case 1:if(0===i.wrap){i.mode=13;break}for(;m<16;){if(0===f)break e;f--,g+=u[p++]<<m,m+=8}if(2&i.wrap&&35615===g){$[i.check=0]=255&g,$[1]=g>>>8&255,i.check=r(i.check,$,2,0),m=g=0,i.mode=2;break}if(i.flags=0,i.head&&(i.head.done=!1),!(1&i.wrap)||(((255&g)<<8)+(g>>8))%31){e.msg="incorrect header check",i.mode=30;break}if(8!=(15&g)){e.msg="unknown compression method",i.mode=30;break}if(m-=4,R=8+(15&(g>>>=4)),0===i.wbits)i.wbits=R;else if(R>i.wbits){e.msg="invalid window size",i.mode=30;break}i.dmax=1<<R,e.adler=i.check=1,i.mode=512&g?10:12,m=g=0;break;case 2:for(;m<16;){if(0===f)break e;f--,g+=u[p++]<<m,m+=8}if(i.flags=g,8!=(255&i.flags)){e.msg="unknown compression method",i.mode=30;break}if(57344&i.flags){e.msg="unknown header flags set",i.mode=30;break}i.head&&(i.head.text=g>>8&1),512&i.flags&&($[0]=255&g,$[1]=g>>>8&255,i.check=r(i.check,$,2,0)),m=g=0,i.mode=3;case 3:for(;m<32;){if(0===f)break e;f--,g+=u[p++]<<m,m+=8}i.head&&(i.head.time=g),512&i.flags&&($[0]=255&g,$[1]=g>>>8&255,$[2]=g>>>16&255,$[3]=g>>>24&255,i.check=r(i.check,$,4,0)),m=g=0,i.mode=4;case 4:for(;m<16;){if(0===f)break e;f--,g+=u[p++]<<m,m+=8}i.head&&(i.head.xflags=255&g,i.head.os=g>>8),512&i.flags&&($[0]=255&g,$[1]=g>>>8&255,i.check=r(i.check,$,2,0)),m=g=0,i.mode=5;case 5:if(1024&i.flags){for(;m<16;){if(0===f)break e;f--,g+=u[p++]<<m,m+=8}i.length=g,i.head&&(i.head.extra_len=g),512&i.flags&&($[0]=255&g,$[1]=g>>>8&255,i.check=r(i.check,$,2,0)),m=g=0}else i.head&&(i.head.extra=null);i.mode=6;case 6:if(1024&i.flags&&(f<(P=i.length)&&(P=f),P&&(i.head&&(R=i.head.extra_len-i.length,i.head.extra||(i.head.extra=new Array(i.head.extra_len)),o.arraySet(i.head.extra,u,p,P,R)),512&i.flags&&(i.check=r(i.check,u,P,p)),f-=P,p+=P,i.length-=P),i.length))break e;i.length=0,i.mode=7;case 7:if(2048&i.flags){if(0===f)break e;for(P=0;R=u[p+P++],i.head&&R&&i.length<65536&&(i.head.name+=String.fromCharCode(R)),R&&P<f;);if(512&i.flags&&(i.check=r(i.check,u,P,p)),f-=P,p+=P,R)break e}else i.head&&(i.head.name=null);i.length=0,i.mode=8;case 8:if(4096&i.flags){if(0===f)break e;for(P=0;R=u[p+P++],i.head&&R&&i.length<65536&&(i.head.comment+=String.fromCharCode(R)),R&&P<f;);if(512&i.flags&&(i.check=r(i.check,u,P,p)),f-=P,p+=P,R)break e}else i.head&&(i.head.comment=null);i.mode=9;case 9:if(512&i.flags){for(;m<16;){if(0===f)break e;f--,g+=u[p++]<<m,m+=8}if(g!==(65535&i.check)){e.msg="header crc mismatch",i.mode=30;break}m=g=0}i.head&&(i.head.hcrc=i.flags>>9&1,i.head.done=!0),e.adler=i.check=0,i.mode=12;break;case 10:for(;m<32;){if(0===f)break e;f--,g+=u[p++]<<m,m+=8}e.adler=i.check=l(g),m=g=0,i.mode=11;case 11:if(0===i.havedict)return e.next_out=h,e.avail_out=y,e.next_in=p,e.avail_in=f,i.hold=g,i.bits=m,2;e.adler=i.check=1,i.mode=12;case 12:if(5===t||6===t)break e;case 13:if(i.last){g>>>=7&m,m-=7&m,i.mode=27;break}for(;m<3;){if(0===f)break e;f--,g+=u[p++]<<m,m+=8}switch(i.last=1&g,m-=1,3&(g>>>=1)){case 0:i.mode=14;break;case 1:if(v(i),i.mode=20,6!==t)break;g>>>=2,m-=2;break e;case 2:i.mode=17;break;case 3:e.msg="invalid block type",i.mode=30}g>>>=2,m-=2;break;case 14:for(g>>>=7&m,m-=7&m;m<32;){if(0===f)break e;f--,g+=u[p++]<<m,m+=8}if((65535&g)!=(g>>>16^65535)){e.msg="invalid stored block lengths",i.mode=30;break}if(i.length=65535&g,m=g=0,i.mode=15,6===t)break e;case 15:i.mode=16;case 16:if(P=i.length){if(f<P&&(P=f),y<P&&(P=y),0===P)break e;o.arraySet(d,u,p,P,h),f-=P,p+=P,y-=P,h+=P,i.length-=P;break}i.mode=12;break;case 17:for(;m<14;){if(0===f)break e;f--,g+=u[p++]<<m,m+=8}if(i.nlen=257+(31&g),g>>>=5,m-=5,i.ndist=1+(31&g),g>>>=5,m-=5,i.ncode=4+(15&g),g>>>=4,m-=4,286<i.nlen||30<i.ndist){e.msg="too many length or distance symbols",i.mode=30;break}i.have=0,i.mode=18;case 18:for(;i.have<i.ncode;){for(;m<3;){if(0===f)break e;f--,g+=u[p++]<<m,m+=8}i.lens[B[i.have++]]=7&g,g>>>=3,m-=3}for(;i.have<19;)i.lens[B[i.have++]]=0;if(i.lencode=i.lendyn,i.lenbits=7,D={bits:i.lenbits},O=s(0,i.lens,0,19,i.lencode,0,i.work,D),i.lenbits=D.bits,O){e.msg="invalid code lengths set",i.mode=30;break}i.have=0,i.mode=19;case 19:for(;i.have<i.nlen+i.ndist;){for(;T=(j=i.lencode[g&(1<<i.lenbits)-1])>>>16&255,C=65535&j,!((I=j>>>24)<=m);){if(0===f)break e;f--,g+=u[p++]<<m,m+=8}if(C<16)g>>>=I,m-=I,i.lens[i.have++]=C;else{if(16===C){for(M=I+2;m<M;){if(0===f)break e;f--,g+=u[p++]<<m,m+=8}if(g>>>=I,m-=I,0===i.have){e.msg="invalid bit length repeat",i.mode=30;break}R=i.lens[i.have-1],P=3+(3&g),g>>>=2,m-=2}else if(17===C){for(M=I+3;m<M;){if(0===f)break e;f--,g+=u[p++]<<m,m+=8}m-=I,R=0,P=3+(7&(g>>>=I)),g>>>=3,m-=3}else{for(M=I+7;m<M;){if(0===f)break e;f--,g+=u[p++]<<m,m+=8}m-=I,R=0,P=11+(127&(g>>>=I)),g>>>=7,m-=7}if(i.have+P>i.nlen+i.ndist){e.msg="invalid bit length repeat",i.mode=30;break}for(;P--;)i.lens[i.have++]=R}}if(30===i.mode)break;if(0===i.lens[256]){e.msg="invalid code -- missing end-of-block",i.mode=30;break}if(i.lenbits=9,D={bits:i.lenbits},O=s(1,i.lens,0,i.nlen,i.lencode,0,i.work,D),i.lenbits=D.bits,O){e.msg="invalid literal/lengths set",i.mode=30;break}if(i.distbits=6,i.distcode=i.distdyn,D={bits:i.distbits},O=s(2,i.lens,i.nlen,i.ndist,i.distcode,0,i.work,D),i.distbits=D.bits,O){e.msg="invalid distances set",i.mode=30;break}if(i.mode=20,6===t)break e;case 20:i.mode=21;case 21:if(6<=f&&258<=y){e.next_out=h,e.avail_out=y,e.next_in=p,e.avail_in=f,i.hold=g,i.bits=m,a(e,k),h=e.next_out,d=e.output,y=e.avail_out,p=e.next_in,u=e.input,f=e.avail_in,g=i.hold,m=i.bits,12===i.mode&&(i.back=-1);break}for(i.back=0;T=(j=i.lencode[g&(1<<i.lenbits)-1])>>>16&255,C=65535&j,!((I=j>>>24)<=m);){if(0===f)break e;f--,g+=u[p++]<<m,m+=8}if(T&&0==(240&T)){for(_=I,E=T,x=C;T=(j=i.lencode[x+((g&(1<<_+E)-1)>>_)])>>>16&255,C=65535&j,!(_+(I=j>>>24)<=m);){if(0===f)break e;f--,g+=u[p++]<<m,m+=8}g>>>=_,m-=_,i.back+=_}if(g>>>=I,m-=I,i.back+=I,i.length=C,0===T){i.mode=26;break}if(32&T){i.back=-1,i.mode=12;break}if(64&T){e.msg="invalid literal/length code",i.mode=30;break}i.extra=15&T,i.mode=22;case 22:if(i.extra){for(M=i.extra;m<M;){if(0===f)break e;f--,g+=u[p++]<<m,m+=8}i.length+=g&(1<<i.extra)-1,g>>>=i.extra,m-=i.extra,i.back+=i.extra}i.was=i.length,i.mode=23;case 23:for(;T=(j=i.distcode[g&(1<<i.distbits)-1])>>>16&255,C=65535&j,!((I=j>>>24)<=m);){if(0===f)break e;f--,g+=u[p++]<<m,m+=8}if(0==(240&T)){for(_=I,E=T,x=C;T=(j=i.distcode[x+((g&(1<<_+E)-1)>>_)])>>>16&255,C=65535&j,!(_+(I=j>>>24)<=m);){if(0===f)break e;f--,g+=u[p++]<<m,m+=8}g>>>=_,m-=_,i.back+=_}if(g>>>=I,m-=I,i.back+=I,64&T){e.msg="invalid distance code",i.mode=30;break}i.offset=C,i.extra=15&T,i.mode=24;case 24:if(i.extra){for(M=i.extra;m<M;){if(0===f)break e;f--,g+=u[p++]<<m,m+=8}i.offset+=g&(1<<i.extra)-1,g>>>=i.extra,m-=i.extra,i.back+=i.extra}if(i.offset>i.dmax){e.msg="invalid distance too far back",i.mode=30;break}i.mode=25;case 25:if(0===y)break e;if(P=k-y,i.offset>P){if((P=i.offset-P)>i.whave&&i.sane){e.msg="invalid distance too far back",i.mode=30;break}w=P>i.wnext?(P-=i.wnext,i.wsize-P):i.wnext-P,P>i.length&&(P=i.length),A=i.window}else A=d,w=h-i.offset,P=i.length;for(y<P&&(P=y),y-=P,i.length-=P;d[h++]=A[w++],--P;);0===i.length&&(i.mode=21);break;case 26:if(0===y)break e;d[h++]=i.length,y--,i.mode=21;break;case 27:if(i.wrap){for(;m<32;){if(0===f)break e;f--,g|=u[p++]<<m,m+=8}if(k-=y,e.total_out+=k,i.total+=k,k&&(e.adler=i.check=i.flags?r(i.check,d,k,h-k):n(i.check,d,k,h-k)),k=y,(i.flags?g:l(g))!==i.check){e.msg="incorrect data check",i.mode=30;break}m=g=0}i.mode=28;case 28:if(i.wrap&&i.flags){for(;m<32;){if(0===f)break e;f--,g+=u[p++]<<m,m+=8}if(g!==(4294967295&i.total)){e.msg="incorrect length check",i.mode=30;break}m=g=0}i.mode=29;case 29:O=1;break e;case 30:O=-3;break e;case 31:return-4;case 32:default:return c}return e.next_out=h,e.avail_out=y,e.next_in=p,e.avail_in=f,i.hold=g,i.bits=m,(i.wsize||k!==e.avail_out&&i.mode<30&&(i.mode<27||4!==t))&&b(e,e.output,e.next_out,k-e.avail_out)?(i.mode=31,-4):(S-=e.avail_in,k-=e.avail_out,e.total_in+=S,e.total_out+=k,i.total+=k,i.wrap&&k&&(e.adler=i.check=i.flags?r(i.check,d,k,e.next_out-k):n(i.check,d,k,e.next_out-k)),e.data_type=i.bits+(i.last?64:0)+(12===i.mode?128:0)+(20===i.mode||15===i.mode?256:0),(0==S&&0===k||4===t)&&0===O&&(O=-5),O)},i.inflateEnd=function(e){if(!e||!e.state)return c;var t=e.state;return t.window&&(t.window=null),e.state=null,0},i.inflateGetHeader=function(e,t){var i;return e&&e.state?0==(2&(i=e.state).wrap)?c:((i.head=t).done=!1,0):c},i.inflateSetDictionary=function(e,t){var i,o=t.length;return e&&e.state?0!==(i=e.state).wrap&&11!==i.mode?c:11===i.mode&&n(1,t,o,0)!==i.check?-3:b(e,t,o,o)?(i.mode=31,-4):(i.havedict=1,0):c},i.inflateInfo="pako inflate (from Nodeca project)"},{"../utils/common":41,"./adler32":43,"./crc32":45,"./inffast":48,"./inftrees":50}],50:[function(e,t,i){"use strict";var o=e("../utils/common"),n=[3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,0,0],r=[16,16,16,16,16,16,16,16,17,17,17,17,18,18,18,18,19,19,19,19,20,20,20,20,21,21,21,21,16,72,78],a=[1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577,0,0],s=[16,16,16,16,17,17,18,18,19,19,20,20,21,21,22,22,23,23,24,24,25,25,26,26,27,27,28,28,29,29,64,64];t.exports=function(e,t,i,c,l,u,d,p){var h,f,y,g,m,v,b,S,k,P=p.bits,w=0,A=0,I=0,T=0,C=0,_=0,E=0,x=0,R=0,O=0,D=null,M=0,j=new o.Buf16(16),$=new o.Buf16(16),B=null,L=0;for(w=0;w<=15;w++)j[w]=0;for(A=0;A<c;A++)j[t[i+A]]++;for(C=P,T=15;1<=T&&0===j[T];T--);if(T<C&&(C=T),0===T)return l[u++]=20971520,l[u++]=20971520,p.bits=1,0;for(I=1;I<T&&0===j[I];I++);for(C<I&&(C=I),w=x=1;w<=15;w++)if(x<<=1,(x-=j[w])<0)return-1;if(0<x&&(0===e||1!==T))return-1;for($[1]=0,w=1;w<15;w++)$[w+1]=$[w]+j[w];for(A=0;A<c;A++)0!==t[i+A]&&(d[$[t[i+A]]++]=A);if(v=0===e?(D=B=d,19):1===e?(D=n,M-=257,B=r,L-=257,256):(D=a,B=s,-1),w=I,m=u,E=A=O=0,y=-1,g=(R=1<<(_=C))-1,1===e&&852<R||2===e&&592<R)return 1;for(;;){for(b=w-E,k=d[A]<v?(S=0,d[A]):d[A]>v?(S=B[L+d[A]],D[M+d[A]]):(S=96,0),h=1<<w-E,I=f=1<<_;l[m+(O>>E)+(f-=h)]=b<<24|S<<16|k|0,0!==f;);for(h=1<<w-1;O&h;)h>>=1;if(0!==h?(O&=h-1,O+=h):O=0,A++,0==--j[w]){if(w===T)break;w=t[i+d[A]]}if(C<w&&(O&g)!==y){for(0===E&&(E=C),m+=I,x=1<<(_=w-E);_+E<T&&!((x-=j[_+E])<=0);)_++,x<<=1;if(R+=1<<_,1===e&&852<R||2===e&&592<R)return 1;l[y=O&g]=C<<24|_<<16|m-u|0}}return 0!==O&&(l[m+O]=w-E<<24|64<<16|0),p.bits=C,0}},{"../utils/common":41}],51:[function(e,t,i){"use strict";t.exports={2:"need dictionary",1:"stream end",0:"","-1":"file error","-2":"stream error","-3":"data error","-4":"insufficient memory","-5":"buffer error","-6":"incompatible version"}},{}],52:[function(e,t,i){"use strict";var o=e("../utils/common");function n(e){for(var t=e.length;0<=--t;)e[t]=0}var r=256,a=286,s=30,c=15,l=[0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0],u=[0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13],d=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,2,3,7],p=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15],h=new Array(576);n(h);var f=new Array(60);n(f);var y=new Array(512);n(y);var g=new Array(256);n(g);var m=new Array(29);n(m);var v,b,S,k=new Array(s);function P(e,t,i,o,n){this.static_tree=e,this.extra_bits=t,this.extra_base=i,this.elems=o,this.max_length=n,this.has_stree=e&&e.length}function w(e,t){this.dyn_tree=e,this.max_code=0,this.stat_desc=t}function A(e){return e<256?y[e]:y[256+(e>>>7)]}function I(e,t){e.pending_buf[e.pending++]=255&t,e.pending_buf[e.pending++]=t>>>8&255}function T(e,t,i){e.bi_valid>16-i?(e.bi_buf|=t<<e.bi_valid&65535,I(e,e.bi_buf),e.bi_buf=t>>16-e.bi_valid,e.bi_valid+=i-16):(e.bi_buf|=t<<e.bi_valid&65535,e.bi_valid+=i)}function C(e,t,i){T(e,i[2*t],i[2*t+1])}function _(e,t){for(var i=0;i|=1&e,e>>>=1,i<<=1,0<--t;);return i>>>1}function E(e,t,i){var o,n,r=new Array(16),a=0;for(o=1;o<=c;o++)r[o]=a=a+i[o-1]<<1;for(n=0;n<=t;n++){var s=e[2*n+1];0!==s&&(e[2*n]=_(r[s]++,s))}}function x(e){var t;for(t=0;t<a;t++)e.dyn_ltree[2*t]=0;for(t=0;t<s;t++)e.dyn_dtree[2*t]=0;for(t=0;t<19;t++)e.bl_tree[2*t]=0;e.dyn_ltree[512]=1,e.opt_len=e.static_len=0,e.last_lit=e.matches=0}function R(e){8<e.bi_valid?I(e,e.bi_buf):0<e.bi_valid&&(e.pending_buf[e.pending++]=e.bi_buf),e.bi_buf=0,e.bi_valid=0}function O(e,t,i,o){var n=2*t,r=2*i;return e[n]<e[r]||e[n]===e[r]&&o[t]<=o[i]}function D(e,t,i){for(var o=e.heap[i],n=i<<1;n<=e.heap_len&&(n<e.heap_len&&O(t,e.heap[n+1],e.heap[n],e.depth)&&n++,!O(t,o,e.heap[n],e.depth));)e.heap[i]=e.heap[n],i=n,n<<=1;e.heap[i]=o}function M(e,t,i){var o,n,a,s,c=0;if(0!==e.last_lit)for(;o=e.pending_buf[e.d_buf+2*c]<<8|e.pending_buf[e.d_buf+2*c+1],n=e.pending_buf[e.l_buf+c],c++,0===o?C(e,n,t):(C(e,(a=g[n])+r+1,t),0!==(s=l[a])&&T(e,n-=m[a],s),C(e,a=A(--o),i),0!==(s=u[a])&&T(e,o-=k[a],s)),c<e.last_lit;);C(e,256,t)}function j(e,t){var i,o,n,r=t.dyn_tree,a=t.stat_desc.static_tree,s=t.stat_desc.has_stree,l=t.stat_desc.elems,u=-1;for(e.heap_len=0,e.heap_max=573,i=0;i<l;i++)0!==r[2*i]?(e.heap[++e.heap_len]=u=i,e.depth[i]=0):r[2*i+1]=0;for(;e.heap_len<2;)r[2*(n=e.heap[++e.heap_len]=u<2?++u:0)]=1,e.depth[n]=0,e.opt_len--,s&&(e.static_len-=a[2*n+1]);for(t.max_code=u,i=e.heap_len>>1;1<=i;i--)D(e,r,i);for(n=l;i=e.heap[1],e.heap[1]=e.heap[e.heap_len--],D(e,r,1),o=e.heap[1],e.heap[--e.heap_max]=i,e.heap[--e.heap_max]=o,r[2*n]=r[2*i]+r[2*o],e.depth[n]=(e.depth[i]>=e.depth[o]?e.depth[i]:e.depth[o])+1,r[2*i+1]=r[2*o+1]=n,e.heap[1]=n++,D(e,r,1),2<=e.heap_len;);e.heap[--e.heap_max]=e.heap[1],function(e,t){var i,o,n,r,a,s,l=t.dyn_tree,u=t.max_code,d=t.stat_desc.static_tree,p=t.stat_desc.has_stree,h=t.stat_desc.extra_bits,f=t.stat_desc.extra_base,y=t.stat_desc.max_length,g=0;for(r=0;r<=c;r++)e.bl_count[r]=0;for(l[2*e.heap[e.heap_max]+1]=0,i=e.heap_max+1;i<573;i++)y<(r=l[2*l[2*(o=e.heap[i])+1]+1]+1)&&(r=y,g++),l[2*o+1]=r,u<o||(e.bl_count[r]++,a=0,f<=o&&(a=h[o-f]),s=l[2*o],e.opt_len+=s*(r+a),p&&(e.static_len+=s*(d[2*o+1]+a)));if(0!==g){do{for(r=y-1;0===e.bl_count[r];)r--;e.bl_count[r]--,e.bl_count[r+1]+=2,e.bl_count[y]--,g-=2}while(0<g);for(r=y;0!==r;r--)for(o=e.bl_count[r];0!==o;)u<(n=e.heap[--i])||(l[2*n+1]!==r&&(e.opt_len+=(r-l[2*n+1])*l[2*n],l[2*n+1]=r),o--)}}(e,t),E(r,u,e.bl_count)}function $(e,t,i){var o,n,r=-1,a=t[1],s=0,c=7,l=4;for(0===a&&(c=138,l=3),t[2*(i+1)+1]=65535,o=0;o<=i;o++)n=a,a=t[2*(o+1)+1],++s<c&&n===a||(s<l?e.bl_tree[2*n]+=s:0!==n?(n!==r&&e.bl_tree[2*n]++,e.bl_tree[32]++):s<=10?e.bl_tree[34]++:e.bl_tree[36]++,r=n,l=(s=0)===a?(c=138,3):n===a?(c=6,3):(c=7,4))}function B(e,t,i){var o,n,r=-1,a=t[1],s=0,c=7,l=4;for(0===a&&(c=138,l=3),o=0;o<=i;o++)if(n=a,a=t[2*(o+1)+1],!(++s<c&&n===a)){if(s<l)for(;C(e,n,e.bl_tree),0!=--s;);else 0!==n?(n!==r&&(C(e,n,e.bl_tree),s--),C(e,16,e.bl_tree),T(e,s-3,2)):s<=10?(C(e,17,e.bl_tree),T(e,s-3,3)):(C(e,18,e.bl_tree),T(e,s-11,7));r=n,l=(s=0)===a?(c=138,3):n===a?(c=6,3):(c=7,4)}}n(k);var L=!1;function F(e,t,i,n){T(e,0+(n?1:0),3),function(e,t,i,n){R(e),I(e,i),I(e,~i),o.arraySet(e.pending_buf,e.window,t,i,e.pending),e.pending+=i}(e,t,i)}i._tr_init=function(e){L||(function(){var e,t,i,o,n,r=new Array(16);for(o=i=0;o<28;o++)for(m[o]=i,e=0;e<1<<l[o];e++)g[i++]=o;for(g[i-1]=o,o=n=0;o<16;o++)for(k[o]=n,e=0;e<1<<u[o];e++)y[n++]=o;for(n>>=7;o<s;o++)for(k[o]=n<<7,e=0;e<1<<u[o]-7;e++)y[256+n++]=o;for(t=0;t<=c;t++)r[t]=0;for(e=0;e<=143;)h[2*e+1]=8,e++,r[8]++;for(;e<=255;)h[2*e+1]=9,e++,r[9]++;for(;e<=279;)h[2*e+1]=7,e++,r[7]++;for(;e<=287;)h[2*e+1]=8,e++,r[8]++;for(E(h,287,r),e=0;e<s;e++)f[2*e+1]=5,f[2*e]=_(e,5);v=new P(h,l,257,a,c),b=new P(f,u,0,s,c),S=new P(new Array(0),d,0,19,7)}(),L=!0),e.l_desc=new w(e.dyn_ltree,v),e.d_desc=new w(e.dyn_dtree,b),e.bl_desc=new w(e.bl_tree,S),e.bi_buf=0,e.bi_valid=0,x(e)},i._tr_stored_block=F,i._tr_flush_block=function(e,t,i,o){var n,a,s=0;0<e.level?(2===e.strm.data_type&&(e.strm.data_type=function(e){var t,i=4093624447;for(t=0;t<=31;t++,i>>>=1)if(1&i&&0!==e.dyn_ltree[2*t])return 0;if(0!==e.dyn_ltree[18]||0!==e.dyn_ltree[20]||0!==e.dyn_ltree[26])return 1;for(t=32;t<r;t++)if(0!==e.dyn_ltree[2*t])return 1;return 0}(e)),j(e,e.l_desc),j(e,e.d_desc),s=function(e){var t;for($(e,e.dyn_ltree,e.l_desc.max_code),$(e,e.dyn_dtree,e.d_desc.max_code),j(e,e.bl_desc),t=18;3<=t&&0===e.bl_tree[2*p[t]+1];t--);return e.opt_len+=3*(t+1)+5+5+4,t}(e),n=e.opt_len+3+7>>>3,(a=e.static_len+3+7>>>3)<=n&&(n=a)):n=a=i+5,i+4<=n&&-1!==t?F(e,t,i,o):4===e.strategy||a===n?(T(e,2+(o?1:0),3),M(e,h,f)):(T(e,4+(o?1:0),3),function(e,t,i,o){var n;for(T(e,t-257,5),T(e,i-1,5),T(e,o-4,4),n=0;n<o;n++)T(e,e.bl_tree[2*p[n]+1],3);B(e,e.dyn_ltree,t-1),B(e,e.dyn_dtree,i-1)}(e,e.l_desc.max_code+1,e.d_desc.max_code+1,s+1),M(e,e.dyn_ltree,e.dyn_dtree)),x(e),o&&R(e)},i._tr_tally=function(e,t,i){return e.pending_buf[e.d_buf+2*e.last_lit]=t>>>8&255,e.pending_buf[e.d_buf+2*e.last_lit+1]=255&t,e.pending_buf[e.l_buf+e.last_lit]=255&i,e.last_lit++,0===t?e.dyn_ltree[2*i]++:(e.matches++,t--,e.dyn_ltree[2*(g[i]+r+1)]++,e.dyn_dtree[2*A(t)]++),e.last_lit===e.lit_bufsize-1},i._tr_align=function(e){T(e,2,3),C(e,256,h),function(e){16===e.bi_valid?(I(e,e.bi_buf),e.bi_buf=0,e.bi_valid=0):8<=e.bi_valid&&(e.pending_buf[e.pending++]=255&e.bi_buf,e.bi_buf>>=8,e.bi_valid-=8)}(e)}},{"../utils/common":41}],53:[function(e,t,i){"use strict";t.exports=function(){this.input=null,this.next_in=0,this.avail_in=0,this.total_in=0,this.output=null,this.next_out=0,this.avail_out=0,this.total_out=0,this.msg="",this.state=null,this.data_type=2,this.adler=0}},{}],54:[function(e,t,i){"use strict";t.exports="function"==typeof o?o:function(){var e=[].slice.apply(arguments);e.splice(1,0,0),setTimeout.apply(null,e)}},{}]},{},[10])(10)}).call(this,i("GmLw").Buffer,i("fRV1"),i("/Qos").setImmediate)},vHJf:function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.JoystickRenderPropertyManager=void 0;const o=i("kU1o"),n=i("g5Cp"),r=i("25ZR"),a=i("qBPl"),s=i("wQyi"),c=.5*Math.PI;class l extends r.ValueRenderPropertyManager{constructor(e,t,i){super(e,t,Object.keys(s.JoystickState).length/2),this.styleManager=new a.JoystickStyleManager,this.joystickType=i,this._renderProperties=this.primeCache(this.state)}updateJoystickType(e){this.joystickType=e}primeCache(e){const{type:t,baseSize:i,x:n,y:r,relative:a=!0,action:s,styles:c}=this.props;return{type:t,baseSize:i,rotation:0,x:n,y:r,joystickType:this.joystickType,knob:{radius:i/2,styleProps:this.styleManager.getKnobStyle(e.interactionState,s,c),isAnimating:!1,x:0,y:0},outline:{radius:0,rotation:0,styleProps:this.styleManager.getOutlineStyle(e.interactionState,this.joystickType,a,s,c)},background:this.styleManager.getBackground(e.interactionState,c),opacity:{value:this.styleManager.getOpacity(e.interactionState,c),energy:o.AnimationEnergy.Instant}}}completeCache(e,t){const{baseSize:i,colliderRadius:o,expand:r}=this.props,a=i/2,l=this.calculateJoystickRadius(o,a,r),u=l+a,d=(0,n.positionToAngle)(e.value.x,e.value.y)+c;let p=0,h=0;switch(this.joystickType){case s.JoystickType.Standard:{const t=(0,n.clampRadial)(e.value,1);p=l*t.x,h=l*t.y}break;case s.JoystickType.Horizontal:p=l*(0,n.clamp)(e.value.x,-1,1),h=0;break;case s.JoystickType.Vertical:h=l*(0,n.clamp)(e.value.y,-1,1),p=0}this._renderProperties.knob.x=e.interactionState===s.JoystickState.Moving||e.interactionState===s.JoystickState.Activated?p:0,this._renderProperties.knob.y=e.interactionState===s.JoystickState.Moving||e.interactionState===s.JoystickState.Activated?h:0,this._renderProperties.knob.isAnimating=this.styleManager.getKnobIsAnimating(e.interactionState,t.interactionState),this._renderProperties.outline.radius=u,this._renderProperties.outline.rotation=d,this._renderProperties.outline.styleProps.indicator.visible=(e.interactionState===s.JoystickState.Moving||e.interactionState===s.JoystickState.Activated)&&(0!==e.value.x||0!==e.value.y)}calculateJoystickRadius(e,t,i=!0){return i||t>e?(0,n.clamp)(e-t,t,e):t}}t.JoystickRenderPropertyManager=l},vLDs:function(e,t,i){"use strict";var o=i("saGM"),n=i("wNzh"),r=i("1/s2"),a=i("9vRB"),s=i("GzZA"),c=i("SALw"),l=i("ygE9"),u=i("crjp"),d=i("J4sq");e.exports=m,m.prototype.validate=function(e,t){var i;if("string"==typeof e){if(!(i=this.getSchema(e)))throw new Error('no schema with key or ref "'+e+'"')}else{var o=this._addSchema(e);i=o.validate||this._compile(o)}var n=i(t);!0!==i.$async&&(this.errors=i.errors);return n},m.prototype.compile=function(e,t){var i=this._addSchema(e,void 0,t);return i.validate||this._compile(i)},m.prototype.addSchema=function(e,t,i,o){if(Array.isArray(e)){for(var r=0;r<e.length;r++)this.addSchema(e[r],void 0,i,o);return this}var a=this._getId(e);if(void 0!==a&&"string"!=typeof a)throw new Error("schema id must be string");return w(this,t=n.normalizeId(t||a)),this._schemas[t]=this._addSchema(e,i,o,!0),this},m.prototype.addMetaSchema=function(e,t,i){return this.addSchema(e,t,i,!0),this},m.prototype.validateSchema=function(e,t){var i=e.$schema;if(void 0!==i&&"string"!=typeof i)throw new Error("$schema must be a string");if(!(i=i||this._opts.defaultMeta||function(e){var t=e._opts.meta;return e._opts.defaultMeta="object"==typeof t?e._getId(t)||t:e.getSchema(f)?f:void 0,e._opts.defaultMeta}(this)))return this.logger.warn("meta-schema not available"),this.errors=null,!0;var o=this.validate(i,e);if(!o&&t){var n="schema is invalid: "+this.errorsText();if("log"!=this._opts.validateSchema)throw new Error(n);this.logger.error(n)}return o},m.prototype.getSchema=function(e){var t=v(this,e);switch(typeof t){case"object":return t.validate||this._compile(t);case"string":return this.getSchema(t);case"undefined":return function(e,t){var i=n.schema.call(e,{schema:{}},t);if(i){var r=i.schema,s=i.root,c=i.baseId,l=o.call(e,r,s,void 0,c);return e._fragments[t]=new a({ref:t,fragment:!0,schema:r,root:s,baseId:c,validate:l}),l}}(this,e)}},m.prototype.removeSchema=function(e){if(e instanceof RegExp)return b(this,this._schemas,e),b(this,this._refs,e),this;switch(typeof e){case"undefined":return b(this,this._schemas),b(this,this._refs),this._cache.clear(),this;case"string":var t=v(this,e);return t&&this._cache.del(t.cacheKey),delete this._schemas[e],delete this._refs[e],this;case"object":var i=this._opts.serialize,o=i?i(e):e;this._cache.del(o);var r=this._getId(e);r&&(r=n.normalizeId(r),delete this._schemas[r],delete this._refs[r])}return this},m.prototype.addFormat=function(e,t){"string"==typeof t&&(t=new RegExp(t));return this._formats[e]=t,this},m.prototype.errorsText=function(e,t){if(!(e=e||this.errors))return"No errors";for(var i=void 0===(t=t||{}).separator?", ":t.separator,o=void 0===t.dataVar?"data":t.dataVar,n="",r=0;r<e.length;r++){var a=e[r];a&&(n+=o+a.dataPath+" "+a.message+i)}return n.slice(0,-i.length)},m.prototype._addSchema=function(e,t,i,o){if("object"!=typeof e&&"boolean"!=typeof e)throw new Error("schema should be object or boolean");var r=this._opts.serialize,s=r?r(e):e,c=this._cache.get(s);if(c)return c;o=o||!1!==this._opts.addUsedSchema;var l=n.normalizeId(this._getId(e));l&&o&&w(this,l);var u,d=!1!==this._opts.validateSchema&&!t;d&&!(u=l&&l==n.normalizeId(e.$schema))&&this.validateSchema(e,!0);var p=n.ids.call(this,e),h=new a({id:l,schema:e,localRefs:p,cacheKey:s,meta:i});"#"!=l[0]&&o&&(this._refs[l]=h);this._cache.put(s,h),d&&u&&this.validateSchema(e,!0);return h},m.prototype._compile=function(e,t){if(e.compiling)return e.validate=r,r.schema=e.schema,r.errors=null,r.root=t||r,!0===e.schema.$async&&(r.$async=!0),r;var i,n;e.compiling=!0,e.meta&&(i=this._opts,this._opts=this._metaOpts);try{n=o.call(this,e.schema,t,e.localRefs)}catch(a){throw delete e.validate,a}finally{e.compiling=!1,e.meta&&(this._opts=i)}return e.validate=n,e.refs=n.refs,e.refVal=n.refVal,e.root=n.root,n;function r(){var t=e.validate,i=t.apply(this,arguments);return r.errors=t.errors,i}},m.prototype.compileAsync=i("hMoK");var p=i("rDNQ");m.prototype.addKeyword=p.add,m.prototype.getKeyword=p.get,m.prototype.removeKeyword=p.remove,m.prototype.validateKeyword=p.validate;var h=i("yJ6u");m.ValidationError=h.Validation,m.MissingRefError=h.MissingRef,m.$dataMetaSchema=u;var f="http://json-schema.org/draft-07/schema",y=["removeAdditional","useDefaults","coerceTypes","strictDefaults"],g=["/properties"];function m(e){if(!(this instanceof m))return new m(e);e=this._opts=d.copy(e)||{},function(e){var t=e._opts.logger;if(!1===t)e.logger={log:A,warn:A,error:A};else{if(void 0===t&&(t=console),!("object"==typeof t&&t.log&&t.warn&&t.error))throw new Error("logger must implement log, warn and error methods");e.logger=t}}(this),this._schemas={},this._refs={},this._fragments={},this._formats=c(e.format),this._cache=e.cache||new r,this._loadingSchemas={},this._compilations=[],this.RULES=l(),this._getId=function(e){switch(e.schemaId){case"auto":return P;case"id":return S;default:return k}}(e),e.loopRequired=e.loopRequired||1/0,"property"==e.errorDataPath&&(e._errorDataPathProperty=!0),void 0===e.serialize&&(e.serialize=s),this._metaOpts=function(e){for(var t=d.copy(e._opts),i=0;i<y.length;i++)delete t[y[i]];return t}(this),e.formats&&function(e){for(var t in e._opts.formats){var i=e._opts.formats[t];e.addFormat(t,i)}}(this),e.keywords&&function(e){for(var t in e._opts.keywords){var i=e._opts.keywords[t];e.addKeyword(t,i)}}(this),function(e){var t;e._opts.$data&&(t=i("OkwS"),e.addMetaSchema(t,t.$id,!0));if(!1===e._opts.meta)return;var o=i("xq3t");e._opts.$data&&(o=u(o,g));e.addMetaSchema(o,f,!0),e._refs["http://json-schema.org/schema"]=f}(this),"object"==typeof e.meta&&this.addMetaSchema(e.meta),e.nullable&&this.addKeyword("nullable",{metaSchema:{type:"boolean"}}),function(e){var t=e._opts.schemas;if(!t)return;if(Array.isArray(t))e.addSchema(t);else for(var i in t)e.addSchema(t[i],i)}(this)}function v(e,t){return t=n.normalizeId(t),e._schemas[t]||e._refs[t]||e._fragments[t]}function b(e,t,i){for(var o in t){var n=t[o];n.meta||i&&!i.test(o)||(e._cache.del(n.cacheKey),delete t[o])}}function S(e){return e.$id&&this.logger.warn("schema $id ignored",e.$id),e.id}function k(e){return e.id&&this.logger.warn("schema id ignored",e.id),e.$id}function P(e){if(e.$id&&e.id&&e.$id!=e.id)throw new Error("schema $id is different from id");return e.$id||e.id}function w(e,t){if(e._schemas[t]||e._refs[t])throw new Error('schema with key or id "'+t+'" already exists')}function A(){}},vOfS:function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.areAnimatableValuesEqual=t.copyAnimatableValue=t.copyPositionable=void 0,t.copyPositionable=function(e){return{x:e.x,y:e.y}},t.copyAnimatableValue=function(e){return{value:e.value,energy:e.energy}},t.areAnimatableValuesEqual=function(e,t){return e===t||e.value===t.value&&e.energy===t.energy}},wIlS:function(e,t,i){"use strict";i.d(t,"a",(function(){return r}));var o=i("ERkP"),n=i("ew8Q");function r(e){const{gameStream:t}=Object(o.useContext)(null!==e&&void 0!==e?e:n.a);return t}},wNzh:function(e,t,i){"use strict";var o=i("nSn0"),n=i("8yhB"),r=i("J4sq"),a=i("9vRB"),s=i("d5rz");function c(e,t,i){var o=this._refs[i];if("string"==typeof o){if(!this._refs[o])return c.call(this,e,t,o);o=this._refs[o]}if((o=o||this._schemas[i])instanceof a)return f(o.schema,this._opts.inlineRefs)?o.schema:o.validate||this._compile(o);var n,r,s,u=l.call(this,t,i);return u&&(n=u.schema,t=u.root,s=u.baseId),n instanceof a?r=n.validate||e.call(this,n.schema,t,void 0,s):void 0!==n&&(r=f(n,this._opts.inlineRefs)?n:e.call(this,n,t,void 0,s)),r}function l(e,t){var i=o.parse(t),n=g(i),r=y(this._getId(e.schema));if(0===Object.keys(e.schema).length||n!==r){var s=v(n),c=this._refs[s];if("string"==typeof c)return u.call(this,e,c,i);if(c instanceof a)c.validate||this._compile(c),e=c;else{if(!((c=this._schemas[s])instanceof a))return;if(c.validate||this._compile(c),s==v(t))return{schema:c,root:e,baseId:r};e=c}if(!e.schema)return;r=y(this._getId(e.schema))}return p.call(this,i,r,e.schema,e)}function u(e,t,i){var o=l.call(this,e,t);if(o){var n=o.schema,r=o.baseId;e=o.root;var a=this._getId(n);return a&&(r=b(r,a)),p.call(this,i,r,n,e)}}e.exports=c,c.normalizeId=v,c.fullPath=y,c.url=b,c.ids=function(e){var t=v(this._getId(e)),i={"":t},a={"":y(t,!1)},c={},l=this;return s(e,{allKeys:!0},(function(e,t,s,u,d,p,h){if(""!==t){var f=l._getId(e),y=i[u],g=a[u]+"/"+d;if(void 0!==h&&(g+="/"+("number"==typeof h?h:r.escapeFragment(h))),"string"==typeof f){f=y=v(y?o.resolve(y,f):f);var m=l._refs[f];if("string"==typeof m&&(m=l._refs[m]),m&&m.schema){if(!n(e,m.schema))throw new Error('id "'+f+'" resolves to more than one schema')}else if(f!=v(g))if("#"==f[0]){if(c[f]&&!n(e,c[f]))throw new Error('id "'+f+'" resolves to more than one schema');c[f]=e}else l._refs[f]=g}i[t]=y,a[t]=g}})),c},c.inlineRef=f,c.schema=l;var d=r.toHash(["properties","patternProperties","enum","dependencies","definitions"]);function p(e,t,i,o){if(e.fragment=e.fragment||"","/"==e.fragment.slice(0,1)){for(var n=e.fragment.split("/"),a=1;a<n.length;a++){var s=n[a];if(s){if(void 0===(i=i[s=r.unescapeFragment(s)]))break;var c;if(!d[s]&&((c=this._getId(i))&&(t=b(t,c)),i.$ref)){var u=b(t,i.$ref),p=l.call(this,o,u);p&&(i=p.schema,o=p.root,t=p.baseId)}}}return void 0!==i&&i!==o.schema?{schema:i,root:o,baseId:t}:void 0}}var h=r.toHash(["type","format","pattern","maxLength","minLength","maxProperties","minProperties","maxItems","minItems","maximum","minimum","uniqueItems","multipleOf","required","enum"]);function f(e,t){return!1!==t&&(void 0===t||!0===t?function e(t){var i;if(Array.isArray(t)){for(var o=0;o<t.length;o++)if("object"==typeof(i=t[o])&&!e(i))return!1}else for(var n in t){if("$ref"==n)return!1;if("object"==typeof(i=t[n])&&!e(i))return!1}return!0}(e):t?function e(t){var i,o=0;if(Array.isArray(t)){for(var n=0;n<t.length;n++)if("object"==typeof(i=t[n])&&(o+=e(i)),o==1/0)return 1/0}else for(var r in t){if("$ref"==r)return 1/0;if(h[r])o++;else if("object"==typeof(i=t[r])&&(o+=e(i)+1),o==1/0)return 1/0}return o}(e)<=t:void 0)}function y(e,t){return!1!==t&&(e=v(e)),g(o.parse(e))}function g(e){return o.serialize(e).split("#")[0]+"#"}var m=/#\/?$/;function v(e){return e?e.replace(m,""):""}function b(e,t){return t=v(t),o.resolve(e,t)}},wQyi:function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.JoystickType=t.JoystickState=void 0,function(e){e[e.Hidden=0]="Hidden",e[e.Disabled=1]="Disabled",e[e.Idle=2]="Idle",e[e.Activated=3]="Activated",e[e.Moving=4]="Moving"}(t.JoystickState||(t.JoystickState={})),function(e){e[e.Standard=0]="Standard",e[e.Horizontal=1]="Horizontal",e[e.Vertical=2]="Vertical"}(t.JoystickType||(t.JoystickType={}))},wV8u:function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.PooledList=t.LeastRecentlyUsedCache=t.CircularBuffer=t.CaseInsensitiveMap=void 0;var o=i("cAaO");Object.defineProperty(t,"CaseInsensitiveMap",{enumerable:!0,get:function(){return o.CaseInsensitiveMap}});var n=i("0meX");Object.defineProperty(t,"CircularBuffer",{enumerable:!0,get:function(){return n.CircularBuffer}});var r=i("jf7R");Object.defineProperty(t,"LeastRecentlyUsedCache",{enumerable:!0,get:function(){return r.LeastRecentlyUsedCache}});var a=i("Hi9g");Object.defineProperty(t,"PooledList",{enumerable:!0,get:function(){return a.PooledList}})},whoM:function(e,t,i){"use strict";var o,n=this&&this.__decorate||function(e,t,i,o){var n,r=arguments.length,a=r<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,i):o;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)a=Reflect.decorate(e,t,i,o);else for(var s=e.length-1;s>=0;s--)(n=e[s])&&(a=(r<3?n(a):r>3?n(t,i,a):n(t,i))||a);return r>3&&a&&Object.defineProperty(t,i,a),a},r=this&&this.__metadata||function(e,t){if("object"===typeof Reflect&&"function"===typeof Reflect.metadata)return Reflect.metadata(e,t)},a=this&&this.__param||function(e,t){return function(i,o){t(i,o,e)}};Object.defineProperty(t,"__esModule",{value:!0}),t.LayoutCoordinator=void 0;const s=i("DfD7"),c=i("s6Xb"),l=i("LcNk"),u=i("YfSF"),d=i("2ZOr"),p=i("7HJd"),h=i("diTm"),f=i("DG/1");let y=o=class{constructor(e,t,i,o,n){this.takBridge=o,this.logger=n,this.allowLayoutChanges=!1,this.allowMouseInteraction=!1,this.disableTak=!1,this.preferredInputModality=void 0,this.titleId=void 0,this._gameLayoutStream=new l.BehaviorSubject(void 0),this._userLayoutStream=new l.BehaviorSubject(void 0);const r=e.getFilteredCallbacksStream(e=>{var t;return{getString:e.getString,layout:{onCurrentLayoutChanged:null===(t=e.layout)||void 0===t?void 0:t.onCurrentLayoutChanged},onShowTakNotification:e.onShowTakNotification,onTelemetry:e.onTelemetry}}).pipe((0,u.tap)(e=>{var t;this.getString=e.getString,this.onCurrentLayoutChanged=null===(t=e.layout)||void 0===t?void 0:t.onCurrentLayoutChanged,this.onShowTakNotification=e.onShowTakNotification,this.onTelemetry=e.onTelemetry})),a=e.getFilteredOptionsStream(e=>({allowLayoutChanges:e.allowLayoutChanges,allowMouseInteraction:e.allowMouseInteraction,disableTak:e.disableTak,preferredInputModality:e.preferredInputModality,titleId:e.titleId})).pipe((0,u.tap)(e=>{this.allowLayoutChanges=e.allowLayoutChanges,this.allowMouseInteraction=e.allowMouseInteraction,this.disableTak=e.disableTak,this.preferredInputModality=e.preferredInputModality,this.titleId=e.titleId})),s=i.getLoadedLayoutsStream().pipe((0,u.switchMap)(e=>e?(this._transformedLayouts=e,this.handleTransformedLayoutsChanged(),(0,l.of)(e)):l.NEVER),(0,u.startWith)(void 0),(0,u.distinctUntilChanged)()),c=(0,l.combineLatest)([t.getBundleStream(),s,a]).pipe((0,u.switchMap)(([e,t])=>{const i=this.updateDefaultLayout(e,t);return i?(0,l.of)(i):l.NEVER}),(0,u.startWith)(void 0),(0,u.distinctUntilChanged)());this._currentLayoutStream=(0,l.combineLatest)([this._userLayoutStream,this._gameLayoutStream,c,r,a]).pipe((0,u.map)(([e,t,i])=>Object.assign(Object.assign({},this.recomputeRenderLayout(e,t,i)),{scope:this.titleId})),(0,u.distinctUntilChanged)(),(0,u.tap)(e=>{var t;null===(t=this.onCurrentLayoutChanged)||void 0===t||t.call(this,e)}),(0,u.shareReplay)(1))}getCurrentLayoutStream(){return this._currentLayoutStream}async changeTouchControls(e){var t,i;if(null===(t=this.onTelemetry)||void 0===t||t.call(this,{name:p.TelemetryEventNames.TakServerLayoutChange,command:e.command,layoutId:e.layoutId,titleId:this.titleId}),this.allowLayoutChanges)switch(this.logger.log(o.Tag,s.LogLevel.Info,`Server request to change touch controls. Command: ${e.command} with layout id: ${e.layoutId}`),e.command){case"hide":return void this.handleLayoutChangeRequest({type:e.command,scope:"game"});case"show":return void(null===e.layoutId||void 0===e.layoutId?this.handleLayoutChangeRequest({type:"hide",scope:"game"}):this.handleLayoutChangeRequest({type:e.command,id:e.layoutId,scope:"game"}));case"showTitleDefault":return this.logger.log(o.Tag,s.LogLevel.Info,"Showing title default touch controls"),this._unappliedLayoutChange=void 0,void this._gameLayoutStream.next(void 0);case"patchState":return;default:{const t="Unknown command received: "+e.command;return this.logger.log(o.Tag,s.LogLevel.Warn,t),void(null===(i=this.onTelemetry)||void 0===i||i.call(this,{name:p.TelemetryEventNames.TakError,reason:t,titleId:this.titleId}))}}else{const t="Command received but not allowed to make layout changes: "+e.command;this.logger.log(o.Tag,s.LogLevel.Info,t)}}onLayoutChange(e){var t;null===(t=this.onTelemetry)||void 0===t||t.call(this,{name:p.TelemetryEventNames.TakUserLayoutChange,command:e.type,scope:e.scope,layoutId:"show"===e.type?e.id:void 0,titleId:this.titleId}),this.handleLayoutChangeRequest(e)}setLayoutOverride(e){var t,i,o;e.id!==f.defaultUserOverrideLayout.id?(this._unappliedLayoutChange=void 0,this._gameLayoutStream.next(e)):this._userLayoutStream.next(e),null===(i=(t=this.takBridge).onTouchInputActive)||void 0===i||i.call(t,!0),null===(o=this.onTelemetry)||void 0===o||o.call(this,{name:p.TelemetryEventNames.TakDeveloperLayoutChange,layoutId:e.id,titleId:this.titleId})}updateDefaultLayout(e,t){const i=null===e||void 0===e?void 0:e.defaultLayoutId,o=(0,f.getLayoutForId)(i,t);if(o)return o;i&&this.onShowTakNotification&&this.getString&&t&&t.size>0&&this.onShowTakNotification(this.getString("Stream_InvalidLayoutMessage",i))}recomputeRenderLayout(e,t,i){return this.disableTak?f.blankLayout:(0,f.getLayoutToRender)(this.preferredInputModality,null!==t&&void 0!==t?t:i,e,this.allowMouseInteraction)}handleTransformedLayoutsChanged(){const e=this._gameLayoutStream.getValue();if((!e||!f.SystemLayouts.has(e.id))&&this._transformedLayouts){let t=null===e||void 0===e?void 0:e.id;if(void 0!==this._unappliedLayoutChange&&(t=this._unappliedLayoutChange,this._unappliedLayoutChange=void 0),t){const e=this._transformedLayouts.get(t);if(e)return void this._gameLayoutStream.next(e);if(this.onShowTakNotification&&this.getString)return void this.onShowTakNotification(this.getString("Stream_InvalidLayoutMessage",t))}}}handleLayoutChangeRequest(e){var t,i,n,r;switch(e.type){case"hide":if(this.logger.log(o.Tag,s.LogLevel.Info,"Request to hide touch controls for scope: "+e.scope),"userOverride"===e.scope)return void this._userLayoutStream.next(void 0);if(e.scope&&"game"!==e.scope){const i="Error: unknown tak layout change scope: "+e.scope;return this.logger.log(o.Tag,s.LogLevel.Error,i),void(null===(t=this.onTelemetry)||void 0===t||t.call(this,{name:p.TelemetryEventNames.TakError,reason:i,titleId:this.titleId}))}return this._unappliedLayoutChange=void 0,void this._gameLayoutStream.next(f.blankLayout);case"show":if(this.logger.log(o.Tag,s.LogLevel.Info,`Request to show touch control layout: ${e.id}  for scope: ${e.scope}`),"userOverride"===e.scope)return void this._userLayoutStream.next(f.SystemLayouts.get(e.id));if(e.scope&&"game"!==e.scope){const t="Error: unknown tak layout change scope: "+e.scope;return this.logger.log(o.Tag,s.LogLevel.Error,t),void(null===(n=this.onTelemetry)||void 0===n||n.call(this,{name:p.TelemetryEventNames.TakError,reason:t,titleId:this.titleId}))}{const t=(0,f.getLayoutForId)(e.id,this._transformedLayouts);if(this._transformedLayouts||t){if(this._transformedLayouts&&!t){this.onShowTakNotification&&this.getString&&this.onShowTakNotification(this.getString("Stream_InvalidLayoutMessage",e.id||""));const t="Error: unknown tak layout id passed: "+e.id;return this.logger.log(o.Tag,s.LogLevel.Error,t),void(null===(i=this.onTelemetry)||void 0===i||i.call(this,{name:p.TelemetryEventNames.TakError,reason:t,titleId:this.titleId}))}return this._unappliedLayoutChange=void 0,void this._gameLayoutStream.next(t)}return void(this._unappliedLayoutChange=e.id)}default:{const t="Unknown layout change type received: "+(0,h.stringify)(e);return this.logger.log(o.Tag,s.LogLevel.Warn,t),void(null===(r=this.onTelemetry)||void 0===r||r.call(this,{name:p.TelemetryEventNames.TakError,reason:t,titleId:this.titleId}))}}}};y.Tag="TakLayoutCoordinator",y=o=n([(0,c.injectable)(),a(0,(0,c.inject)(d.SERVICE_TYPES.RuntimeOptions)),a(1,(0,c.inject)(d.SERVICE_TYPES.BundleLoader)),a(2,(0,c.inject)(d.SERVICE_TYPES.BundleProcessor)),a(3,(0,c.inject)(d.CONFIG_TYPES.TAKBridge)),a(4,(0,c.inject)(d.SERVICE_TYPES.Logger)),r("design:paramtypes",[Function,Function,Function,Object,Object])],y),t.LayoutCoordinator=y},wrGj:function(e,t,i){"use strict";var o=this&&this.__decorate||function(e,t,i,o){var n,r=arguments.length,a=r<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,i):o;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)a=Reflect.decorate(e,t,i,o);else for(var s=e.length-1;s>=0;s--)(n=e[s])&&(a=(r<3?n(a):r>3?n(t,i,a):n(t,i))||a);return r>3&&a&&Object.defineProperty(t,i,a),a},n=this&&this.__metadata||function(e,t){if("object"===typeof Reflect&&"function"===typeof Reflect.metadata)return Reflect.metadata(e,t)},r=this&&this.__param||function(e,t){return function(i,o){t(i,o,e)}};Object.defineProperty(t,"__esModule",{value:!0}),t.Settings=t.TAK_SETTINGS_KEY=void 0;const a=i("s6Xb"),s=i("LcNk"),c=i("YfSF"),l=i("2ZOr"),u=i("rsTb"),d=i("nVbm"),p=i("YFNc");t.TAK_SETTINGS_KEY="takSettings";let h=class{constructor(e){this.settingsProvider=e,this.isDirty=!1,this.settingsReadStream$=new s.BehaviorSubject(p.DefaultSettingsState),this.settingsWriteStream$=new s.BehaviorSubject(void 0);(async()=>{const e=await this.settingsProvider.getSettingValue(t.TAK_SETTINGS_KEY);this.addToReadStream(e)})(),this.settingsStream$=(0,s.combineLatest)([this.settingsReadStream$,this.settingsWriteStream$]).pipe((0,c.map)(e=>{const[t,i]=e;return void 0===i?t:null===i?p.DefaultSettingsState:i}),(0,c.distinctUntilChanged)(),(0,c.tap)(e=>{this.currentSettings=e}),(0,c.shareReplay)(1)),this.settingsWriteStream$.subscribe(e=>{void 0!==e&&(this.isDirty=!0,null===e?this.settingsProvider.setSettingValue(t.TAK_SETTINGS_KEY,void 0):this.settingsProvider.setSettingValue(t.TAK_SETTINGS_KEY,e))})}getSettingsStream(){return this.settingsStream$}getScopedSettingsStream(e){return(0,u.getFilteredStream)(this.getSettingsStream(),t=>{var i;return Object.assign({version:t.version,useErgoEditSymmetry:t.useErgoEditSymmetry},e?null!==(i=t.scopedSettings[e])&&void 0!==i?i:p.DefaultPerScopeSettingsState:t.system)},(e,t)=>e===t||e.version===t.version&&e.useErgoEditSymmetry===t.useErgoEditSymmetry&&(0,p.areOrientationErgoSettingsStatesEqual)(e.portrait,t.portrait)&&(0,p.areOrientationErgoSettingsStatesEqual)(e.landscape,t.landscape)&&(0,p.areOrientationErgoSettingsStatesEqual)(e.landscapeSpanned,t.landscapeSpanned)&&(0,p.areOrientationErgoSettingsStatesEqual)(e.portraitSpanned,t.portraitSpanned)&&(0,p.areStyleSettingStatesEqual)(e.style,t.style)&&(0,p.areSensorSettingsStatesEqual)(e.gyro,t.gyro)&&(0,p.areSensorSettingsStatesEqual)(e.accelerometer,t.accelerometer))}updateSettings(e){var t;this.settingsWriteStream$.next(this.reduceState(null!==(t=this.currentSettings)&&void 0!==t?t:p.DefaultSettingsState,e))}commitSettings(){this.isDirty&&(this.isDirty=!1,this.settingsProvider.commitSettings())}reduceState(e,t){var i,o,n,r,a,s,c,l,u,d,h;switch(t.action){case p.SettingsUpdateActionNames.DeleteAll:return null;case p.SettingsUpdateActionNames.ResetSettingsForScope:return t.scope?Object.assign(Object.assign({},e),{scopedSettings:this.removeScopedSettingFromRecord(t.scope,e.scopedSettings)}):Object.assign(Object.assign({},e),{system:p.DefaultPerScopeSettingsState});case p.SettingsUpdateActionNames.UpdateUseErgoEditSymmetry:return Object.assign(Object.assign({},e),{useErgoEditSymmetry:t.useErgoEditSymmetry});case p.SettingsUpdateActionNames.UpdateWheelErgoForScope:return t.scope?Object.assign(Object.assign({},e),{scopedSettings:Object.assign(Object.assign({},e.scopedSettings),{[t.scope]:Object.assign(Object.assign({},null!==(i=e.scopedSettings[t.scope])&&void 0!==i?i:p.DefaultPerScopeSettingsState),{[t.orientation]:Object.assign(Object.assign({},(null!==(o=e.scopedSettings[t.scope])&&void 0!==o?o:p.DefaultPerScopeSettingsState)[t.orientation]),{[t.wheel]:t.ergo})})})}):Object.assign(Object.assign({},e),{system:Object.assign(Object.assign({},e.system),{[t.orientation]:Object.assign(Object.assign({},e.system[t.orientation]),{[t.wheel]:t.ergo})})});case p.SettingsUpdateActionNames.UpdateAllWheelsErgoForScope:return t.scope?Object.assign(Object.assign({},e),{scopedSettings:Object.assign(Object.assign({},e.scopedSettings),{[t.scope]:Object.assign(Object.assign({},null!==(n=e.scopedSettings[t.scope])&&void 0!==n?n:p.DefaultPerScopeSettingsState),{[t.orientation]:Object.assign(Object.assign({},(null!==(r=e.scopedSettings[t.scope])&&void 0!==r?r:p.DefaultPerScopeSettingsState)[t.orientation]),{left:t.left,right:t.right,center:t.center})})})}):Object.assign(Object.assign({},e),{system:Object.assign(Object.assign({},e.system),{[t.orientation]:Object.assign(Object.assign({},e.system[t.orientation]),{left:t.left,right:t.right,center:t.center})})});case p.SettingsUpdateActionNames.UpdateSensorsForScope:return t.scope?Object.assign(Object.assign({},e),{scopedSettings:Object.assign(Object.assign({},e.scopedSettings),{[t.scope]:Object.assign(Object.assign({},null!==(a=e.scopedSettings[t.scope])&&void 0!==a?a:p.DefaultPerScopeSettingsState),{gyro:t.gyro,accelerometer:t.accelerometer})})}):Object.assign(Object.assign({},e),{system:Object.assign(Object.assign({},e.system),{gyro:t.gyro,accelerometer:t.accelerometer})});case p.SettingsUpdateActionNames.UpdateGyroEnabledForScope:return t.scope?Object.assign(Object.assign({},e),{scopedSettings:Object.assign(Object.assign({},e.scopedSettings),{[t.scope]:Object.assign(Object.assign({},null!==(s=e.scopedSettings[t.scope])&&void 0!==s?s:p.DefaultPerScopeSettingsState),{gyro:Object.assign(Object.assign({},(null!==(c=e.scopedSettings[t.scope])&&void 0!==c?c:p.DefaultPerScopeSettingsState).gyro),{enabled:t.enabled})})})}):Object.assign(Object.assign({},e),{system:Object.assign(Object.assign({},e.system),{gyro:Object.assign(Object.assign({},e.system.gyro),{enabled:t.enabled})})});case p.SettingsUpdateActionNames.UpdateGyroSensitivityForScope:return t.scope?Object.assign(Object.assign({},e),{scopedSettings:Object.assign(Object.assign({},e.scopedSettings),{[t.scope]:Object.assign(Object.assign({},null!==(l=e.scopedSettings[t.scope])&&void 0!==l?l:p.DefaultPerScopeSettingsState),{gyro:Object.assign(Object.assign({},(null!==(u=e.scopedSettings[t.scope])&&void 0!==u?u:p.DefaultPerScopeSettingsState).gyro),{sensitivity:t.sensitivity})})})}):Object.assign(Object.assign({},e),{system:Object.assign(Object.assign({},e.system),{gyro:Object.assign(Object.assign({},e.system.gyro),{sensitivity:t.sensitivity})})});case p.SettingsUpdateActionNames.UpdateOpacityMultiplierForScope:return t.scope?Object.assign(Object.assign({},e),{scopedSettings:Object.assign(Object.assign({},e.scopedSettings),{[t.scope]:Object.assign(Object.assign({},null!==(d=e.scopedSettings[t.scope])&&void 0!==d?d:p.DefaultPerScopeSettingsState),{style:Object.assign(Object.assign({},(null!==(h=e.scopedSettings[t.scope])&&void 0!==h?h:p.DefaultPerScopeSettingsState).style),{opacityMultiplier:t.value})})})}):Object.assign(Object.assign({},e),{system:Object.assign(Object.assign({},e.system),{style:Object.assign(Object.assign({},e.system.style),{opacityMultiplier:t.value})})})}}updateOrientationSettings(e,t){return t?{left:Object.assign(Object.assign({},e.left),t.left),center:Object.assign(Object.assign({},e.center),t.center),right:Object.assign(Object.assign({},e.right),t.right)}:e}updateScopedSettings(e,t){return t?{portrait:this.updateOrientationSettings(e.portrait,t.portrait),landscape:this.updateOrientationSettings(e.landscape,t.landscape),landscapeSpanned:this.updateOrientationSettings(e.landscapeSpanned,t.landscapeSpanned),portraitSpanned:this.updateOrientationSettings(e.portraitSpanned,t.portraitSpanned),gyro:Object.assign(Object.assign({},e.gyro),null===t||void 0===t?void 0:t.gyro),style:Object.assign(Object.assign({},e.style),null===t||void 0===t?void 0:t.style),accelerometer:Object.assign(Object.assign({},e.accelerometer),null===t||void 0===t?void 0:t.accelerometer)}:e}updateScopedSettingsRecord(e){if(!e)return;return Object.entries(e).reduce((e,t)=>(e[t[0]]=this.updateScopedSettings(p.DefaultPerScopeSettingsState,t[1]),e),{})}removeScopedSettingFromRecord(e,t){return Object.entries(t).filter(t=>t[0]!==e).reduce((e,t)=>(e[t[0]]=t[1],e),{})}addToReadStream(e){var t;if(!e||!e.version)return;let i=d.SettingsStateUpgradeMap.get(e.version);if(!i)return;let o=i(e);for(;void 0!==o.version&&o.version!==p.LATEST_SETTINGS_STATE_VERSION;){if(i=d.SettingsStateUpgradeMap.get(o.version),!i)return;o=i(o)}const n=Object.assign(Object.assign(Object.assign({},p.DefaultSettingsState),o),{system:this.updateScopedSettings(p.DefaultPerScopeSettingsState,o.system),scopedSettings:null!==(t=this.updateScopedSettingsRecord(o.scopedSettings))&&void 0!==t?t:p.DefaultSettingsState.scopedSettings});this.settingsReadStream$.next(n)}};h=o([(0,a.injectable)(),r(0,(0,a.inject)(l.SERVICE_TYPES.SettingsProvider)),n("design:paramtypes",[Object])],h),t.Settings=h},wvgg:function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.InputModalityTracker=void 0;const o=i("DfD7"),n=i("7HJd"),r=i("DG/1");class a{constructor(e,t,i,o,n){this.onPreferredInputModalityChange=e,this.requireGamepad=t,this.isPhysicalControllerConnected=i,this.showGamepadDisconnectModal=o,this.logger=n,this.started=!1,this._isTouchCapable=!1,this._isMouseConnected=!1,this.isMouseActive=!1,this.isControllerConnected=!1,this._isScreenReaderEnabled=!1,this._isAppActive=!1,this._streamConnected=!1,this.telemetrySequenceNumber=0,this.currentPreferredInputModalityStartTime=0,this.pollControllerConnection=async()=>{this.setIsControllerConnected(await this.isPhysicalControllerConnected())}}get preferredInputModality(){return this._preferredInputModality}set isTouchCapable(e){this._isTouchCapable=e,this.tryShowDisconnectModal()}set isMouseConnected(e){this._isMouseConnected=e}set allowLayoutChanges(e){this._allowLayoutChanges=e,this.tryShowDisconnectModal()}set isStreamConnected(e){this._streamConnected!==e&&(this.trySendTelemetry(this._preferredInputModality,e,this._isAppActive),this._streamConnected=e,this.tryShowDisconnectModal())}set playerOptedIntoStandardLayoutFallback(e){this._playerOptedIntoStandardLayoutFallback=e,this.tryShowDisconnectModal()}set isScreenReaderEnabled(e){this._isScreenReaderEnabled=e,this.tryShowDisconnectModal()}set isAppActive(e){this._isAppActive!==e&&(this.trySendTelemetry(this._preferredInputModality,this._streamConnected,e),this._isAppActive=e)}set onTelemetry(e){this._onTelemetry=e}async start(){this.started||(this.started=!0,this.isControllerConnected=await this.isPhysicalControllerConnected(),this.isControllerConnected||(this.pollControllerConnectionIntervalId=setInterval(this.pollControllerConnection,1e3)),this.currentPreferredInputModalityStartTime=Date.now(),this.isControllerConnected?this.setPreferredInputModality(r.PreferredInputModality.Controller):this._isMouseConnected&&this.setPreferredInputModality(r.PreferredInputModality.MouseAndKeyboard),this.tryShowDisconnectModal())}stop(){this.trySendTelemetry(this._preferredInputModality,this._streamConnected,this._isAppActive),this.pollControllerConnectionIntervalId&&(clearInterval(this.pollControllerConnectionIntervalId),this.pollControllerConnectionIntervalId=void 0),this._preferredInputModality=void 0,this.started=!1}onPhysicalControllerDisconnected(){this.setIsControllerConnected(!1)}onPhysicalControllerInput(){this.setIsControllerConnected(!0),this.setPreferredInputModality(r.PreferredInputModality.Controller)}onMouseInputActive(e){this.isMouseActive=e,this.isMouseActive&&this.setPreferredInputModality(r.PreferredInputModality.MouseAndKeyboard)}onTouchInputActive(e){e&&this.setPreferredInputModality(r.PreferredInputModality.Touch)}setIsControllerConnected(e){this.isControllerConnected!==e&&(this.isControllerConnected=e,this.tryShowDisconnectModal(),this.isControllerConnected?this.pollControllerConnectionIntervalId&&(clearInterval(this.pollControllerConnectionIntervalId),this.pollControllerConnectionIntervalId=void 0):(this.trackTrailingEdge(),this.pollControllerConnectionIntervalId=setInterval(this.pollControllerConnection,1e3)))}setPreferredInputModality(e){this._preferredInputModality!==e&&(this.trySendTelemetry(e,this._streamConnected,this._isAppActive),this._preferredInputModality=e,this.onPreferredInputModalityChange(this._preferredInputModality))}trackTrailingEdge(){this.isControllerConnected||this._preferredInputModality!==r.PreferredInputModality.Controller||(this.isMouseActive?this.setPreferredInputModality(r.PreferredInputModality.MouseAndKeyboard):this._isTouchCapable&&this.setPreferredInputModality(r.PreferredInputModality.Touch))}trySendTelemetry(e,t,i){this.logger.log(a.Tag,o.LogLevel.Debug,`Preferred Input Modality changed to: ${e}, is stream connected: ${t}, is app active: ${i}`);const r=Date.now(),s=t&&i&&(!this._streamConnected||!this._isAppActive);(this._onTelemetry&&this._streamConnected&&this._isAppActive||(this.currentPreferredInputModalityStartTime=r,s&&this._onTelemetry))&&(this._onTelemetry({name:n.TelemetryEventNames.TakInputModalitySession,modality:this._preferredInputModality,startTime:this.currentPreferredInputModalityStartTime,endTime:r,duration:r-this.currentPreferredInputModalityStartTime,sequenceNumber:this.telemetrySequenceNumber,newModality:e}),this.currentPreferredInputModalityStartTime=r,this.telemetrySequenceNumber=this.telemetrySequenceNumber+1)}tryShowDisconnectModal(){this.started&&((0,r.shouldShowGamepadDisconnectModal)(this.requireGamepad,this._streamConnected,this._isTouchCapable,this._isScreenReaderEnabled,this._playerOptedIntoStandardLayoutFallback,this._allowLayoutChanges,this.isControllerConnected,this._preferredInputModality)?(this.logger.log(a.Tag,o.LogLevel.Info,"Showing Gamepad Disconnect Modal"),this.showGamepadDisconnectModal(!0,this._allowLayoutChanges,this._isTouchCapable)):this.showGamepadDisconnectModal(!1))}}t.InputModalityTracker=a,a.Tag="InputModality"},wwc2:function(e,t,i){"use strict";i.d(t,"a",(function(){return a}));var o=i("jg1C"),n=i("ERkP"),r=i("ew8Q");function a(e){let{gameStream:t,context:i,children:a}=e;const s=Object(n.useMemo)(()=>({gameStream:t}),[t]),c=null!==i&&void 0!==i?i:r.a;return Object(o.jsx)(c.Provider,{value:s,children:a})}},wwjJ:function(e,t,i){"use strict";i.d(t,"a",(function(){return c}));var o=i("44ng"),n=i("8pkF"),r=i("+vWn");var a=i("wIlS"),s=i("/R13");function c(){var e;const t=Object(a.a)();Object(s.a)(n.a.type);return((Object(r.a)()?o.a.UNKNOWN:"ontouchstart"in window||navigator.maxTouchPoints>0?o.a.YES:o.a.NO)===o.a.YES||t.tak.config.allowMouseInteraction)&&!!(t.isDeveloperMode||t.tak.config.isSideloading||(null===(e=t.session)||void 0===e?void 0:e.configuration.inputConfiguration.enableTouchInput)||t.tak.config.supportedTabs.length>0)}},x3wu:function(e,t,i){"use strict";e.exports=function(e,t,i){var o=" ",n=e.level,r=e.dataLevel,a=e.schema[t],s=e.schemaPath+e.util.getProperty(t),c=e.errSchemaPath+"/"+t,l=!e.opts.allErrors,u="data"+(r||""),d="errs__"+n,p=e.util.copy(e),h="";p.level++;var f="valid"+p.level,y={},g={},m=e.opts.ownProperties;for(k in a)if("__proto__"!=k){var v=a[k],b=Array.isArray(v)?g:y;b[k]=v}o+="var "+d+" = errors;";var S=e.errorPath;for(var k in o+="var missing"+n+";",g)if((b=g[k]).length){if(o+=" if ( "+u+e.util.getProperty(k)+" !== undefined ",m&&(o+=" && Object.prototype.hasOwnProperty.call("+u+", '"+e.util.escapeQuotes(k)+"') "),l){o+=" && ( ";var P=b;if(P)for(var w=-1,A=P.length-1;w<A;){x=P[w+=1],w&&(o+=" || "),o+=" ( ( "+(M=u+(D=e.util.getProperty(x)))+" === undefined ",m&&(o+=" || ! Object.prototype.hasOwnProperty.call("+u+", '"+e.util.escapeQuotes(x)+"') "),o+=") && (missing"+n+" = "+e.util.toQuotedString(e.opts.jsonPointers?x:D)+") ) "}o+=")) {  ";var I="missing"+n,T="' + "+I+" + '";e.opts._errorDataPathProperty&&(e.errorPath=e.opts.jsonPointers?e.util.getPathExpr(S,I,!0):S+" + "+I);var C=C||[];C.push(o),o="",!1!==e.createErrors?(o+=" { keyword: 'dependencies' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(c)+" , params: { property: '"+e.util.escapeQuotes(k)+"', missingProperty: '"+T+"', depsCount: "+b.length+", deps: '"+e.util.escapeQuotes(1==b.length?b[0]:b.join(", "))+"' } ",!1!==e.opts.messages&&(o+=" , message: 'should have ",1==b.length?o+="property "+e.util.escapeQuotes(b[0]):o+="properties "+e.util.escapeQuotes(b.join(", ")),o+=" when property "+e.util.escapeQuotes(k)+" is present' "),e.opts.verbose&&(o+=" , schema: validate.schema"+s+" , parentSchema: validate.schema"+e.schemaPath+" , data: "+u+" "),o+=" } "):o+=" {} ";var _=o;o=C.pop(),!e.compositeRule&&l?e.async?o+=" throw new ValidationError(["+_+"]); ":o+=" validate.errors = ["+_+"]; return false; ":o+=" var err = "+_+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; "}else{o+=" ) { ";var E=b;if(E)for(var x,R=-1,O=E.length-1;R<O;){x=E[R+=1];var D=e.util.getProperty(x),M=(T=e.util.escapeQuotes(x),u+D);e.opts._errorDataPathProperty&&(e.errorPath=e.util.getPath(S,x,e.opts.jsonPointers)),o+=" if ( "+M+" === undefined ",m&&(o+=" || ! Object.prototype.hasOwnProperty.call("+u+", '"+e.util.escapeQuotes(x)+"') "),o+=") {  var err =   ",!1!==e.createErrors?(o+=" { keyword: 'dependencies' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(c)+" , params: { property: '"+e.util.escapeQuotes(k)+"', missingProperty: '"+T+"', depsCount: "+b.length+", deps: '"+e.util.escapeQuotes(1==b.length?b[0]:b.join(", "))+"' } ",!1!==e.opts.messages&&(o+=" , message: 'should have ",1==b.length?o+="property "+e.util.escapeQuotes(b[0]):o+="properties "+e.util.escapeQuotes(b.join(", ")),o+=" when property "+e.util.escapeQuotes(k)+" is present' "),e.opts.verbose&&(o+=" , schema: validate.schema"+s+" , parentSchema: validate.schema"+e.schemaPath+" , data: "+u+" "),o+=" } "):o+=" {} ",o+=";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; } "}}o+=" }   ",l&&(h+="}",o+=" else { ")}e.errorPath=S;var j=p.baseId;for(var k in y){v=y[k];(e.opts.strictKeywords?"object"==typeof v&&Object.keys(v).length>0||!1===v:e.util.schemaHasRules(v,e.RULES.all))&&(o+=" "+f+" = true; if ( "+u+e.util.getProperty(k)+" !== undefined ",m&&(o+=" && Object.prototype.hasOwnProperty.call("+u+", '"+e.util.escapeQuotes(k)+"') "),o+=") { ",p.schema=v,p.schemaPath=s+e.util.getProperty(k),p.errSchemaPath=c+"/"+e.util.escapeFragment(k),o+="  "+e.validate(p)+" ",p.baseId=j,o+=" }  ",l&&(o+=" if ("+f+") { ",h+="}"))}return l&&(o+="   "+h+" if ("+d+" == errors) {"),o}},xPvz:function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.GetDefaultActivatedDirectionalPadStyle=t.GetDefaultIdleDirectionalPadStyle=t.GetDefaultDisabledDirectionalPadStyle=t.GetDefaultHiddenDirectionalPadStyle=t.GetDefaultRestingDirectionalPadGradient=t.DefaultDirectionalPadOpacity=void 0;const o=i("Zd/9"),n=i("SqAV");t.DefaultDirectionalPadOpacity=1,t.GetDefaultRestingDirectionalPadGradient=function(){return{r:0,g:0,b:0,a:0,string:o.TRANSPARENT}},t.GetDefaultHiddenDirectionalPadStyle=function(){return{background:{type:"color",value:{r:0,g:0,b:0,a:0,string:o.TRANSPARENT},opacity:0},fill:{r:0,g:0,b:0,a:0,string:o.TRANSPARENT},gradient:{r:0,g:0,b:0,a:0,string:o.TRANSPARENT},stroke:{type:n.StrokeType.Solid,color:{r:0,g:0,b:0,a:0,string:o.TRANSPARENT},opacity:0}}},t.GetDefaultDisabledDirectionalPadStyle=function(){return{background:{type:"color",value:{r:0,g:0,b:0,a:0,string:o.TRANSPARENT},opacity:1},fill:{r:1,g:1,b:1,a:.1,string:o.WHITE_ALPHA_10},gradient:{r:0,g:0,b:0,a:0,string:o.TRANSPARENT},stroke:{type:n.StrokeType.Solid,color:{r:1,g:1,b:1,a:.9,string:o.WHITE_ALPHA_90},opacity:1}}},t.GetDefaultIdleDirectionalPadStyle=function(){return{background:{type:"color",value:{r:0,g:0,b:0,a:0,string:o.TRANSPARENT},opacity:1},fill:{r:1,g:1,b:1,a:.1,string:o.WHITE_ALPHA_10},gradient:{r:0,g:0,b:0,a:0,string:o.TRANSPARENT},stroke:{type:n.StrokeType.Solid,color:{r:1,g:1,b:1,a:.9,string:o.WHITE_ALPHA_90},opacity:1}}},t.GetDefaultActivatedDirectionalPadStyle=function(){return{background:{type:"color",value:{r:0,g:0,b:0,a:0,string:o.TRANSPARENT},opacity:1},fill:{r:1,g:1,b:1,a:.1,string:o.WHITE_ALPHA_10},gradient:{r:1,g:1,b:1,a:1,string:o.WHITE_ALPHA_100},stroke:{type:n.StrokeType.Solid,color:{r:1,g:1,b:1,a:.9,string:o.WHITE_ALPHA_90},opacity:1}}}},xbHb:function(e,t,i){"use strict";var o=this&&this.__decorate||function(e,t,i,o){var n,r=arguments.length,a=r<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,i):o;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)a=Reflect.decorate(e,t,i,o);else for(var s=e.length-1;s>=0;s--)(n=e[s])&&(a=(r<3?n(a):r>3?n(t,i,a):n(t,i))||a);return r>3&&a&&Object.defineProperty(t,i,a),a},n=this&&this.__metadata||function(e,t){if("object"===typeof Reflect&&"function"===typeof Reflect.metadata)return Reflect.metadata(e,t)},r=this&&this.__param||function(e,t){return function(i,o){t(i,o,e)}};Object.defineProperty(t,"__esModule",{value:!0}),t.BundleLoader=void 0;const a=i("s6Xb"),s=i("LcNk"),c=i("YfSF"),l=i("2ZOr"),u=i("4P5o"),d=i("7HJd"),p=i("4KZH"),h=i("bdvg"),f=i("SXpu");let y=class{constructor(e,t){this.logger=t,this.titleId=void 0,this.sentTakTelemetry=!1,this.trackEvent=e=>{var t,i;null===(i=(t=this.callbacks).onTelemetry)||void 0===i||i.call(t,{name:d.TelemetryEventNames.TakError,reason:e,titleId:this.titleId})},this.jsonValidator=(0,h.createJsonValidator)(t),this.callbacks={};const i=e.getFilteredCallbacksStream(e=>{var t;return{asset:{onLoadAssetFile:null===(t=e.asset)||void 0===t?void 0:t.onLoadAssetFile},fetchTouchAdaptationBundle:e.fetchTouchAdaptationBundle,onBundleChanged:e.onBundleChanged,onTelemetry:e.onTelemetry}}),o=e.getFilteredOptionsStream(e=>({allowMouseInteraction:e.allowMouseInteraction,desiredDpi:e.desiredDpi,isTouchCapableDevice:e.isTouchCapableDevice,locale:e.locale,showStandardLayoutAsFallback:e.showStandardLayoutAsFallback,supportedTabs:e.supportedTabs,titleId:e.titleId}));this.bundleStream=(0,s.combineLatest)([i,o]).pipe((0,c.map)(([e,t])=>(this.callbacks=e,this.sentTakTelemetry&&this.titleId===t.titleId||(this.titleId=t.titleId,this.sendTakInfoTelemetry(t.titleId)),t)),(0,c.concatMap)(e=>this.loadBundle(e)),(0,c.startWith)(void 0),(0,c.distinctUntilChanged)(),(0,c.tap)(e=>{var t,i;null===(i=(t=this.callbacks).onBundleChanged)||void 0===i||i.call(t,e)}),(0,c.shareReplay)(1))}getBundleStream(){return this.bundleStream}async loadBundle(e){var t,i,o,n,r;if(e.isTouchCapableDevice||e.allowMouseInteraction){const a=Date.now(),s=await(0,f.fetchTouchAdaptationBundleContents)(this.jsonValidator,null!==(t=this.callbacks.fetchTouchAdaptationBundle)&&void 0!==t?t:async()=>{throw new Error("No fetchTouchAdaptationBundle has been provided")},e.locale,e.desiredDpi,this.logger,this.trackEvent,null===(i=this.callbacks.asset)||void 0===i?void 0:i.onLoadAssetFile,e.supportedTabs,()=>!1);if(s)return null===(n=(o=this.callbacks).onTelemetry)||void 0===n||n.call(o,{name:d.TelemetryEventNames.TakBundleFetch,duration:Date.now()-a,id:null!==(r=s.id)&&void 0!==r?r:"",titleId:e.titleId}),s}if(e.showStandardLayoutAsFallback)return{defaultLayoutId:""}}sendTakInfoTelemetry(e){this.callbacks.onTelemetry&&(this.sentTakTelemetry=!0,this.callbacks.onTelemetry({name:d.TelemetryEventNames.TakInfo,packageVersion:u.version,layoutVersion:p.TakxConstants.LayoutVersion,manifestVersion:p.TakxConstants.ManifestVersion,titleId:e}))}};y=o([(0,a.injectable)(),r(0,(0,a.inject)(l.SERVICE_TYPES.RuntimeOptions)),r(1,(0,a.inject)(l.SERVICE_TYPES.Logger)),n("design:paramtypes",[Function,Object])],y),t.BundleLoader=y},xq3t:function(e){e.exports=JSON.parse('{"$schema":"http://json-schema.org/draft-07/schema#","$id":"http://json-schema.org/draft-07/schema#","title":"Core schema meta-schema","definitions":{"schemaArray":{"type":"array","minItems":1,"items":{"$ref":"#"}},"nonNegativeInteger":{"type":"integer","minimum":0},"nonNegativeIntegerDefault0":{"allOf":[{"$ref":"#/definitions/nonNegativeInteger"},{"default":0}]},"simpleTypes":{"enum":["array","boolean","integer","null","number","object","string"]},"stringArray":{"type":"array","items":{"type":"string"},"uniqueItems":true,"default":[]}},"type":["object","boolean"],"properties":{"$id":{"type":"string","format":"uri-reference"},"$schema":{"type":"string","format":"uri"},"$ref":{"type":"string","format":"uri-reference"},"$comment":{"type":"string"},"title":{"type":"string"},"description":{"type":"string"},"default":true,"readOnly":{"type":"boolean","default":false},"examples":{"type":"array","items":true},"multipleOf":{"type":"number","exclusiveMinimum":0},"maximum":{"type":"number"},"exclusiveMaximum":{"type":"number"},"minimum":{"type":"number"},"exclusiveMinimum":{"type":"number"},"maxLength":{"$ref":"#/definitions/nonNegativeInteger"},"minLength":{"$ref":"#/definitions/nonNegativeIntegerDefault0"},"pattern":{"type":"string","format":"regex"},"additionalItems":{"$ref":"#"},"items":{"anyOf":[{"$ref":"#"},{"$ref":"#/definitions/schemaArray"}],"default":true},"maxItems":{"$ref":"#/definitions/nonNegativeInteger"},"minItems":{"$ref":"#/definitions/nonNegativeIntegerDefault0"},"uniqueItems":{"type":"boolean","default":false},"contains":{"$ref":"#"},"maxProperties":{"$ref":"#/definitions/nonNegativeInteger"},"minProperties":{"$ref":"#/definitions/nonNegativeIntegerDefault0"},"required":{"$ref":"#/definitions/stringArray"},"additionalProperties":{"$ref":"#"},"definitions":{"type":"object","additionalProperties":{"$ref":"#"},"default":{}},"properties":{"type":"object","additionalProperties":{"$ref":"#"},"default":{}},"patternProperties":{"type":"object","additionalProperties":{"$ref":"#"},"propertyNames":{"format":"regex"},"default":{}},"dependencies":{"type":"object","additionalProperties":{"anyOf":[{"$ref":"#"},{"$ref":"#/definitions/stringArray"}]}},"propertyNames":{"$ref":"#"},"const":true,"enum":{"type":"array","items":true,"minItems":1,"uniqueItems":true},"type":{"anyOf":[{"$ref":"#/definitions/simpleTypes"},{"type":"array","items":{"$ref":"#/definitions/simpleTypes"},"minItems":1,"uniqueItems":true}]},"format":{"type":"string"},"contentMediaType":{"type":"string"},"contentEncoding":{"type":"string"},"if":{"$ref":"#"},"then":{"$ref":"#"},"else":{"$ref":"#"},"allOf":{"$ref":"#/definitions/schemaArray"},"anyOf":{"$ref":"#/definitions/schemaArray"},"oneOf":{"$ref":"#/definitions/schemaArray"},"not":{"$ref":"#"}},"default":true}')},yJ6u:function(e,t,i){"use strict";var o=i("wNzh");function n(e,t,i){this.message=i||n.message(e,t),this.missingRef=o.url(e,t),this.missingSchema=o.normalizeId(o.fullPath(this.missingRef))}function r(e){return e.prototype=Object.create(Error.prototype),e.prototype.constructor=e,e}e.exports={Validation:r((function(e){this.message="validation failed",this.errors=e,this.ajv=this.validation=!0})),MissingRef:r(n)},n.message=function(e,t){return"can't resolve reference "+t+" from id "+e}},yLlE:function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ButtonStyleManager=void 0;const o=i("kU1o"),n=i("SqAV"),r=i("IuIz"),a=i("pL49"),s=i("H6Pt"),c=i("Fr07"),l=i("RbPY");t.ButtonStyleManager=class{constructor(e=3){this.backgroundColorMemo=new r.LazyMemoizedConverter(a.convertStringToColor,e),this.pullIndicatorColorMemo=new r.LazyMemoizedConverter(a.convertStringToColor,e),this.faceImageGreyscaleColorMemo=new r.LazyMemoizedConverter(a.convertStringToGreyscaleColor,e),this.faceImageLabelGreyscaleColorMemo=new r.LazyMemoizedConverter(a.convertStringToGreyscaleColor,e),this.faceImageLabelTypeMemo=new r.LazyMemoizedConverter(l.convertFaceImageLabelType,e),this.faceImageLabelFillTypeMemo=new r.LazyMemoizedConverter(l.convertFaceImageLabelFillType,e)}getBackground(e,t,i){var o,n,r,a,l,u;const d=(0,c.getDefaultButtonBackground)(t.action);switch(this.assignCustomBackground(d,null===(o=null===i||void 0===i?void 0:i.default)||void 0===o?void 0:o.background),e){case s.ButtonState.Hidden:break;case s.ButtonState.Disabled:d.opacity=0,this.assignCustomBackground(d,null===(n=null===i||void 0===i?void 0:i.disabled)||void 0===n?void 0:n.background);break;case s.ButtonState.Idle:d.opacity=0,this.assignCustomBackground(d,null===(r=null===i||void 0===i?void 0:i.idle)||void 0===r?void 0:r.background);break;case s.ButtonState.Toggled:this.assignCustomBackground(d,null===(a=null===i||void 0===i?void 0:i.toggled)||void 0===a?void 0:a.background);break;case s.ButtonState.Activated:this.assignCustomBackground(d,null===(l=null===i||void 0===i?void 0:i.activated)||void 0===l?void 0:l.background);break;case s.ButtonState.Pulled:this.assignCustomBackground(d,null===(u=null===i||void 0===i?void 0:i.pulled)||void 0===u?void 0:u.background)}return d}getFaceImage(e,t,i,n){var r,a,u,d,p,h;const f=(0,c.getDefaultButtonFaceImage)(i.action);switch(this.assignCustomFaceImage(f,null===(r=null===n||void 0===n?void 0:n.default)||void 0===r?void 0:r.faceImage),e){case s.ButtonState.Hidden:f.animationEnergy=o.AnimationEnergy.Slow;break;case s.ButtonState.Disabled:"icon"===f.type&&(f.color=this.faceImageGreyscaleColorMemo.convert(f.color.string),f.label.color=this.faceImageLabelGreyscaleColorMemo.convert(f.label.color.string),f.displayShadow=!1),f.animationEnergy=o.AnimationEnergy.Medium,this.assignCustomFaceImage(f,null===(a=null===n||void 0===n?void 0:n.disabled)||void 0===a?void 0:a.faceImage);break;case s.ButtonState.Idle:f.animationEnergy=o.AnimationEnergy.Medium,this.assignCustomFaceImage(f,null===(u=null===n||void 0===n?void 0:n.idle)||void 0===u?void 0:u.faceImage);break;case s.ButtonState.Toggled:f.animationEnergy=o.AnimationEnergy.Medium,f.scale=.75,this.assignCustomFaceImage(f,null===(d=null===n||void 0===n?void 0:n.toggled)||void 0===d?void 0:d.faceImage);break;case s.ButtonState.Activated:{const i=t<e;f.animationEnergy=i?o.AnimationEnergy.Instant:o.AnimationEnergy.Medium,f.scale=.75,this.assignCustomFaceImage(f,null===(p=null===n||void 0===n?void 0:n.activated)||void 0===p?void 0:p.faceImage);break}case s.ButtonState.Pulled:{const i=t<e;f.animationEnergy=i?o.AnimationEnergy.Instant:o.AnimationEnergy.Medium,f.scale=.75,this.assignCustomFaceImage(f,null===(h=null===n||void 0===n?void 0:n.pulled)||void 0===h?void 0:h.faceImage);break}}return(0,l.finalizeButtonLabel)(f,i,this.faceImageLabelFillTypeMemo),f}getPullIndicator(e,t,i,o,r){var a,l,u;const d=(0,c.getDefaultButtonPullIndicator)(i,t.action,o);switch(this.assignCustomPullIndicator(d,null===(a=null===r||void 0===r?void 0:r.default)||void 0===a?void 0:a.pullIndicator),e){case s.ButtonState.Hidden:case s.ButtonState.Disabled:case s.ButtonState.Idle:case s.ButtonState.Toggled:d.opacity=0;break;case s.ButtonState.Activated:d.type=n.StrokeType.Dashed,this.assignCustomPullIndicator(d,null===(l=null===r||void 0===r?void 0:r.activated)||void 0===l?void 0:l.pullIndicator),o||(d.opacity=0);break;case s.ButtonState.Pulled:d.type=n.StrokeType.Solid,this.assignCustomPullIndicator(d,null===(u=null===r||void 0===r?void 0:r.pulled)||void 0===u?void 0:u.pullIndicator),o||(d.opacity=0)}return d}getOpacity(e,t){var i,o,n,r,a,l,u,d,p,h,f,y;let g=c.DefaultButtonOpacity;switch(g=null!==(o=null===(i=null===t||void 0===t?void 0:t.default)||void 0===i?void 0:i.opacity)&&void 0!==o?o:g,e){case s.ButtonState.Hidden:g=0;break;case s.ButtonState.Disabled:g*=.33,g=null!==(r=null===(n=null===t||void 0===t?void 0:t.disabled)||void 0===n?void 0:n.opacity)&&void 0!==r?r:g;break;case s.ButtonState.Idle:g=null!==(l=null===(a=null===t||void 0===t?void 0:t.idle)||void 0===a?void 0:a.opacity)&&void 0!==l?l:g;break;case s.ButtonState.Toggled:g=null!==(d=null===(u=null===t||void 0===t?void 0:t.toggled)||void 0===u?void 0:u.opacity)&&void 0!==d?d:g;break;case s.ButtonState.Activated:g=null!==(h=null===(p=null===t||void 0===t?void 0:t.activated)||void 0===p?void 0:p.opacity)&&void 0!==h?h:g;break;case s.ButtonState.Pulled:g=null!==(y=null===(f=null===t||void 0===t?void 0:t.pulled)||void 0===f?void 0:f.opacity)&&void 0!==y?y:g}return g}getAnimationEnergy(e,t){let i=c.DefaultButtonAnimationEnergy;switch(e){case s.ButtonState.Hidden:i=o.AnimationEnergy.Slow;break;case s.ButtonState.Disabled:case s.ButtonState.Idle:case s.ButtonState.Toggled:i=o.AnimationEnergy.Medium;break;case s.ButtonState.Activated:i=t===s.ButtonState.Toggled||t===s.ButtonState.Idle||t===s.ButtonState.Disabled||t===s.ButtonState.Hidden?o.AnimationEnergy.Instant:o.AnimationEnergy.Medium;break;case s.ButtonState.Pulled:i=t===s.ButtonState.Activated||t===s.ButtonState.Idle||t===s.ButtonState.Disabled||t===s.ButtonState.Toggled||t===s.ButtonState.Hidden?o.AnimationEnergy.Instant:o.AnimationEnergy.Medium;break}return i}assignCustomBackground(e,t){var i;t&&(e.opacity=1,e.type=t.type,e.value="color"===t.type?this.backgroundColorMemo.convert(t.value):t.value,e.opacity=null!==(i=t.opacity)&&void 0!==i?i:e.opacity)}assignCustomFaceImage(e,t){var i,o;t&&(e.type=t.type,e.value=t.value,e.opacity=null!==(i=t.opacity)&&void 0!==i?i:e.opacity,"icon"===t.type&&(e.label.type=this.faceImageLabelTypeMemo.convert(null===(o=t.label)||void 0===o?void 0:o.type)))}assignCustomPullIndicator(e,t){var i;t&&t.background&&(e.color=this.pullIndicatorColorMemo.convert(t.background.value),e.opacity=null!==(i=t.background.opacity)&&void 0!==i?i:e.opacity)}}},yOeK:function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getEdgeSockets=void 0;const o=i("LBtb");t.getEdgeSockets=function(e,t,i){const{windowWidth:n,windowHeight:r}=i,a=.5*t,s={x:n/2,y:r-t/2},c=e.lower&&e.lower.leftCenter?e.lower.leftCenter.reduce((e,i,c,l)=>{const u="CENTERLEFT_LOWER_SYSTEM";return e[`${u}_${c}`]=(0,o.buildSimpleSocket)({x:s.x-t*(c+1),y:s.y},a,t,t,n,r),c===l.length-1&&(e[`${u}_${l.length}`]=(0,o.buildSimpleSocket)({x:s.x-t*(l.length+1),y:s.y},a,t,t,n,r)),e},{}):{},l=e.lower&&e.lower.rightCenter?e.lower.rightCenter.reduce((e,i,c,l)=>{const u="CENTERRIGHT_LOWER_SYSTEM";return e[`${u}_${c}`]=(0,o.buildSimpleSocket)({x:s.x+t*(c+1),y:s.y},a,t,t,n,r),c===l.length-1&&(e[`${u}_${l.length}`]=(0,o.buildSimpleSocket)({x:s.x+t*(l.length+1),y:s.y},a,t,t,n,r)),e},{}):{},u={x:n/2-t,y:r-t/2},d={x:n-t/2,y:t/2},p=e.upper&&e.upper.right?e.upper.right.reduce((e,i,s,c)=>(e["RIGHT_SYSTEM_"+s]=(0,o.buildSimpleSocket)({x:d.x-t*s,y:d.y},a,t,t,n,r),s===c.length-1&&(e["RIGHT_SYSTEM_"+c.length]=(0,o.buildSimpleSocket)({x:d.x-t*(c.length+1),y:d.y},a,t,t,n,r)),e),{}):{};return{upper:Object.assign({},p),lower:Object.assign(Object.assign(Object.assign({},c),l),{CENTER_LOWER_SYSTEM:(0,o.buildSimpleSocket)(s,a,t,t,n,r),CENTERLEFT_LOWER_SYSTEM:(0,o.buildSimpleSocket)(u,a,t,t,n,r),CENTERRIGHT_LOWER_SYSTEM:(0,o.buildSimpleSocket)((0,o.reflectValue)(u,n),a,t,t,n,r)})}}},yXhs:function(e,t,i){"use strict";i.d(t,"a",(function(){return l}));i("jQ/y");var o=i("y8Az"),n=i("ERkP"),r=i("/arO");const a=[],s=[];let c;function l(){const e=Object(n.useMemo)(()=>new r.a("useControlGamepadNavigation"),[]),t=Object(n.useRef)(Symbol("id"));0===a.length&&(c=Object(o.isGamepadNavigationEnabled)(),e.debug("Initial isEnabled value is: ".concat(c))),a.includes(t.current)||a.push(t.current),Object(n.useEffect)(()=>()=>{setTimeout(()=>{const i=a.indexOf(t.current);-1===i?e.error("Hook was not present in hook ref"):a.splice(i,1);const n=s.indexOf(t.current);n>-1&&s.splice(n,1),0===a.length&&(e.debug("All hooks unmounted - Setting isEnabled value back to initial state of ".concat(c)),s.length>0&&(e.error("Dangling reference encountered in enabled hooks list"),s.length=0),c?(e.debug("Enabling gamepad navigation"),Object(o.enableGamepadNavigation)()):(e.debug("Disabling gamepad navigation"),Object(o.disableGamepadNavigation)()))},0)},[e]);const i=Object(n.useCallback)(()=>{if(!a.includes(t.current))return;const i=s.indexOf(t.current);i>-1&&s.splice(i,1),0===s.length&&Object(o.isGamepadNavigationEnabled)()&&(e.debug("Disabling gamepad navigation"),Object(o.disableGamepadNavigation)())},[e]),l=Object(n.useCallback)(()=>{a.includes(t.current)&&(Object(o.isGamepadNavigationEnabled)()||(e.debug("Enabling gamepad navigation"),Object(o.enableGamepadNavigation)()),s.includes(t.current)||s.push(t.current))},[e]);return Object(n.useMemo)(()=>({disableControllerNavigation:i,enableControllerNavigation:l}),[i,l])}},ygE9:function(e,t,i){"use strict";var o=i("IpJ1"),n=i("J4sq").toHash;e.exports=function(){var e=[{type:"number",rules:[{maximum:["exclusiveMaximum"]},{minimum:["exclusiveMinimum"]},"multipleOf","format"]},{type:"string",rules:["maxLength","minLength","pattern","format"]},{type:"array",rules:["maxItems","minItems","items","contains","uniqueItems"]},{type:"object",rules:["maxProperties","minProperties","required","dependencies","propertyNames",{properties:["additionalProperties","patternProperties"]}]},{rules:["$ref","const","enum","not","anyOf","oneOf","allOf","if"]}],t=["type","$comment"];return e.all=n(t),e.types=n(["number","integer","string","array","object","boolean","null"]),e.forEach((function(i){i.rules=i.rules.map((function(i){var n;if("object"==typeof i){var r=Object.keys(i)[0];n=i[r],i=r,n.forEach((function(i){t.push(i),e.all[i]=!0}))}return t.push(i),e.all[i]={keyword:i,code:o[i],implements:n}})),e.all.$comment={keyword:"$comment",code:o.$comment},i.type&&(e.types[i.type]=i)})),e.keywords=n(t.concat(["$schema","$id","id","$data","$async","title","description","default","definitions","examples","readOnly","writeOnly","contentMediaType","contentEncoding","additionalItems","then","else"])),e.custom={},e}},yi9v:function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.EmptyIcon=void 0,t.EmptyIcon="NO_ICON"},znPh:function(e,t,i){"use strict";e.exports=function(e,t,i){var o=" ",n=e.level,r=e.dataLevel,a=e.schema[t],s=e.schemaPath+e.util.getProperty(t),c=e.errSchemaPath+"/"+t,l=!e.opts.allErrors,u="data"+(r||""),d="valid"+n,p="errs__"+n,h=e.util.copy(e);h.level++;var f="valid"+h.level,y="i"+n,g=h.dataLevel=e.dataLevel+1,m="data"+g,v=e.baseId,b=e.opts.strictKeywords?"object"==typeof a&&Object.keys(a).length>0||!1===a:e.util.schemaHasRules(a,e.RULES.all);if(o+="var "+p+" = errors;var "+d+";",b){var S=e.compositeRule;e.compositeRule=h.compositeRule=!0,h.schema=a,h.schemaPath=s,h.errSchemaPath=c,o+=" var "+f+" = false; for (var "+y+" = 0; "+y+" < "+u+".length; "+y+"++) { ",h.errorPath=e.util.getPathExpr(e.errorPath,y,e.opts.jsonPointers,!0);var k=u+"["+y+"]";h.dataPathArr[g]=y;var P=e.validate(h);h.baseId=v,e.util.varOccurences(P,m)<2?o+=" "+e.util.varReplace(P,m,k)+" ":o+=" var "+m+" = "+k+"; "+P+" ",o+=" if ("+f+") break; }  ",e.compositeRule=h.compositeRule=S,o+="  if (!"+f+") {"}else o+=" if ("+u+".length == 0) {";var w=w||[];w.push(o),o="",!1!==e.createErrors?(o+=" { keyword: 'contains' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(c)+" , params: {} ",!1!==e.opts.messages&&(o+=" , message: 'should contain a valid item' "),e.opts.verbose&&(o+=" , schema: validate.schema"+s+" , parentSchema: validate.schema"+e.schemaPath+" , data: "+u+" "),o+=" } "):o+=" {} ";var A=o;return o=w.pop(),!e.compositeRule&&l?e.async?o+=" throw new ValidationError(["+A+"]); ":o+=" validate.errors = ["+A+"]; return false; ":o+=" var err = "+A+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",o+=" } else { ",b&&(o+="  errors = "+p+"; if (vErrors !== null) { if ("+p+") vErrors.length = "+p+"; else vErrors = null; } "),e.opts.allErrors&&(o+=" } "),o}},zrWA:function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.DefaultStylingConfigurations=t.UIInteractionMode=void 0;const o=i("kU1o");!function(e){e[e.None=0]="None",e[e.Gameplay=2]="Gameplay",e[e.UserCustomization=4]="UserCustomization"}(t.UIInteractionMode||(t.UIInteractionMode={})),t.DefaultStylingConfigurations={controls:{opacityMultiplier:{animationEnergy:o.AnimationEnergy.Slowest,acceptedRange:{minimum:0,maximum:1}}},containers:{adjustors:{opacity:{value:0,energy:o.AnimationEnergy.Instant}}}}}}]);
//# sourceMappingURL=vendors~dev-tools~game-stream.7162b773.chunk.js.map