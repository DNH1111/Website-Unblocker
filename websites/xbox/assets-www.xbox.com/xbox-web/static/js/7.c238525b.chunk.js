(window.__LOADABLE_LOADED_CHUNKS__=window.__LOADABLE_LOADED_CHUNKS__||[]).push([[7],{"+PEE":function(e,t,o){"use strict";o("jQ/y"),Object.defineProperty(t,"__esModule",{value:!0}),t.FeedService=void 0,t.FeedService=Symbol("FeedService")},"/5yt":function(e,t,o){"use strict";Object.defineProperty(t,"__esModule",{value:!0})},"/SYO":function(e,t,o){"use strict";e.exports=o("ptLC")},"0+MI":function(e,t,o){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.FeedSagaManager=t.feedReducer=t.FeedActionType=t.FeedAction=void 0;const n=o("JIVc");n.__exportStar(o("zyTX"),t);var i=o("3roD");Object.defineProperty(t,"FeedAction",{enumerable:!0,get:function(){return i.FeedAction}}),Object.defineProperty(t,"FeedActionType",{enumerable:!0,get:function(){return i.FeedActionType}});var r=o("IJMz");Object.defineProperty(t,"feedReducer",{enumerable:!0,get:function(){return r.feedReducer}});var s=o("hWyi");Object.defineProperty(t,"FeedSagaManager",{enumerable:!0,get:function(){return s.FeedSagaManager}}),n.__exportStar(o("Ak6n"),t)},"2b3M":function(e,t,o){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.completeFetchWithPrevious=t.getContentOrPrevious=t.getUnexpiredDataOrPrevious=t.getDataOrPrevious=void 0;var n=o("V4bc"),i=o("4khb");t.getDataOrPrevious=function(e){return n.isContent(e)?e.data:n.isError(e)||n.isFetching(e)?e.previousContent&&e.previousContent.data:void 0},t.getUnexpiredDataOrPrevious=function(e){return n.isUnexpiredContent(e)?e.data:(n.isError(e)||n.isFetching(e))&&n.isUnexpiredContent(e.previousContent)?e.previousContent.data:void 0},t.getContentOrPrevious=function(e){return n.isContent(e)?e:n.isError(e)||n.isFetching(e)?e.previousContent:void 0},t.completeFetchWithPrevious=function(e){return n.isFetching(e)?e.previousContent?e.previousContent:i.lceNotRequested():e}},"3roD":function(e,t,o){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.FeedAction=t.FeedActionType=void 0;const n=o("/SYO");var i;!function(e){e.GetFeedItem="@gaming/xbl-feed/GetFeedItem",e.GetFeedItemCompleted="@gaming/xbl-feed/GetFeedItemCompleted",e.GetFeedItems="@gaming/xbl-feed/GetFeedItems",e.GetFeedItemsCompleted="@gaming/xbl-feed/GetFeedItemsCompleted",e.GetClubActivityFeed="@gaming/xbl-feed/GetClubActivityFeed",e.GetClubActivityFeedCompleted="@gaming/xbl-feed/GetClubActivityFeedCompleted",e.GetClubActivityFeedContinued="@gaming/xbl-feed/GetClubActivityFeedContinued",e.GetClubActivityFeedContinuedCompleted="@gaming/xbl-feed/GetClubActivityFeedContinuedCompleted",e.GetUserActivityFeed="@gaming/xbl-feed/GetUserActivityFeed",e.GetUserActivityFeedCompleted="@gaming/xbl-feed/GetUserActivityFeedCompleted",e.GetUserActivityFeedContinued="@gaming/xbl-feed/GetUserActivityFeedContinued",e.GetUserActivityFeedContinuedCompleted="@gaming/xbl-feed/GetUserActivityFeedContinuedCompleted",e.GetTrending="@gaming/xbl-feed/GetTrending",e.GetTrendingCompleted="@gaming/xbl-feed/GetTrendingCompleted",e.GetTrendingContinued="@gaming/xbl-feed/GetTrendingContinued",e.GetTrendingContinuedCompleted="@gaming/xbl-feed/GetTrendingContinuedCompleted",e.GetAggregateStoryFeed="@gaming/xbl-feed/GetAggregateStoryFeed",e.GetAggregateStoryFeedCompleted="@gaming/xbl-feed/GetAggregateStoryFeedCompleted",e.GetUserStory="@gaming/xbl-feed/GetUserStory",e.GetUserStoryCompleted="@gaming/xbl-feed/GetUserStoryCompleted",e.GetFeedItemComments="@gaming/xbl-feed/GetFeedItemComments",e.GetFeedItemCommentsCompleted="@gaming/xbl-feed/GetFeedItemCommentsCompleted",e.GetFeedItemCommentsContinued="@gaming/xbl-feed/GetFeedItemCommentsContinued",e.GetFeedItemCommentsContinuedCompleted="@gaming/xbl-feed/GetFeedItemCommentsContinuedCompleted",e.PostFeedItemComment="@gaming/xbl-feed/PostFeedItemComment",e.PostFeedItemCommentCompleted="@gaming/xbl-feed/PostFeedItemCompleted",e.DeletedFeedItemComment="@gaming/xbl-feed/DeletedFeedItemComment",e.DeletedFeedItem="@gaming/xbl-feed/DeletedFeedItem",e.DismissFeedItemCommentPostingStatus="@gaming/xbl-feed/DismissFeedItemCommentPostingStatus",e.FeedItemViewed="@gaming/xbl-feed/FeedItemViewed",e.LikedFeedItem="@gaming/xbl-feed/LikedFeedItem",e.UnlikedFeedItem="@gaming/xbl-feed/UnlikedFeedItem",e.LikedFeedItemComment="@gaming/xbl-feed/LikedFeedItemComment",e.UnlikedFeedItemComment="@gaming/xbl-feed/UnlikedFeedItemComment",e.BallotVoteCast="@gaming/xbl-feed/BallotVoteCast",e.CreateLink="@gaming/xbl-feed/CreateLink",e.CreateLinkCompleted="@gaming/xbl-feed/CreateLinkCompleted",e.GetLinkPreview="@gaming/xbl-feed/GetLinkPreview",e.GetLinkPreviewCompleted="@gaming/xbl-feed/GetLinkPreviewCompleted"}(i=t.FeedActionType||(t.FeedActionType={})),t.FeedAction={getFeedItem:n.createAsyncAction(i.GetFeedItem,i.GetFeedItemCompleted,(e,t)=>({type:i.GetFeedItem,itemId:e,forceRefresh:t}),(e,t)=>({type:i.GetFeedItemCompleted,itemId:e,feedItem:t}),(e,t)=>({type:i.GetFeedItemCompleted,itemId:e,error:t})),getFeedItems:n.createAsyncAction(i.GetFeedItems,i.GetFeedItemsCompleted,e=>({type:i.GetFeedItems,itemIds:e}),e=>({type:i.GetFeedItemsCompleted,feedItems:e}),(e,t)=>({type:i.GetFeedItemsCompleted,itemIds:e,error:t})),getClubActivityFeed:n.createAsyncAction(i.GetClubActivityFeed,i.GetClubActivityFeedCompleted,(e,t)=>({type:i.GetClubActivityFeed,clubId:e,options:t}),(e,t,o)=>({type:i.GetClubActivityFeedCompleted,clubId:e,feed:t,feedItems:o}),(e,t,o)=>({type:i.GetClubActivityFeedCompleted,clubId:e,options:t,error:o})),getClubActivityFeedContinued:n.createAsyncAction(i.GetClubActivityFeedContinued,i.GetClubActivityFeedContinuedCompleted,(e,t)=>({type:i.GetClubActivityFeedContinued,clubId:e,options:t}),(e,t)=>({type:i.GetClubActivityFeedContinuedCompleted,clubId:e,result:t}),(e,t,o)=>({type:i.GetClubActivityFeedContinuedCompleted,clubId:e,options:t,error:o})),getUserActivityFeed:n.createAsyncAction(i.GetUserActivityFeed,i.GetUserActivityFeedCompleted,(e,t)=>({type:i.GetUserActivityFeed,xuid:e,options:t}),(e,t,o)=>({type:i.GetUserActivityFeedCompleted,xuid:e,feed:t,feedItems:o}),(e,t,o)=>({type:i.GetUserActivityFeedCompleted,xuid:e,options:t,error:o})),getUserActivityFeedContinued:n.createAsyncAction(i.GetUserActivityFeedContinued,i.GetUserActivityFeedContinuedCompleted,(e,t)=>({type:i.GetUserActivityFeedContinued,xuid:e,options:t}),(e,t)=>({type:i.GetUserActivityFeedContinuedCompleted,xuid:e,result:t}),(e,t,o)=>({type:i.GetUserActivityFeedContinuedCompleted,xuid:e,options:t,error:o})),getTrending:n.createAsyncAction(i.GetTrending,i.GetTrendingCompleted,e=>({type:i.GetTrending,options:e}),(e,t,o)=>({type:i.GetTrendingCompleted,options:e,feed:t,feedItems:o}),(e,t)=>({type:i.GetTrendingCompleted,options:e,error:t})),getTrendingContinued:n.createAsyncAction(i.GetTrendingContinued,i.GetTrendingContinuedCompleted,e=>({type:i.GetTrendingContinued,options:e}),(e,t)=>({type:i.GetTrendingContinuedCompleted,options:e,result:t}),(e,t)=>({type:i.GetTrendingContinuedCompleted,options:e,error:t})),getAggregateStoryFeed:n.createAsyncAction(i.GetAggregateStoryFeed,i.GetAggregateStoryFeedCompleted,(e,t)=>({type:i.GetAggregateStoryFeed,options:e,forceRefresh:t}),(e,t)=>({type:i.GetAggregateStoryFeedCompleted,options:e,result:t}),(e,t)=>({type:i.GetAggregateStoryFeedCompleted,options:e,error:t})),getUserStory:n.createAsyncAction(i.GetUserStory,i.GetUserStoryCompleted,(e,t)=>({type:i.GetUserStory,xuid:e,options:t}),(e,t,o)=>({type:i.GetUserStoryCompleted,xuid:e,story:t,feedItems:o}),(e,t)=>({type:i.GetUserStoryCompleted,xuid:e,error:t})),getFeedItemComments:n.createAsyncAction(i.GetFeedItemComments,i.GetFeedItemCommentsCompleted,(e,t)=>({type:i.GetFeedItemComments,locator:e,options:t}),(e,t)=>({type:i.GetFeedItemCommentsCompleted,locator:e,result:t}),(e,t,o)=>({type:i.GetFeedItemCommentsCompleted,locator:e,options:t,error:o})),getFeedItemCommentsContinued:n.createAsyncAction(i.GetFeedItemCommentsContinued,i.GetFeedItemCommentsContinuedCompleted,(e,t)=>({type:i.GetFeedItemCommentsContinued,locator:e,options:t}),(e,t)=>({type:i.GetFeedItemCommentsContinuedCompleted,locator:e,result:t}),(e,t,o)=>({type:i.GetFeedItemCommentsContinuedCompleted,locator:e,options:t,error:o})),postFeedItemComment:n.createAsyncAction(i.PostFeedItemComment,i.PostFeedItemCommentCompleted,(e,t,o)=>({type:i.PostFeedItemComment,locator:e,commentText:t,xuid:o}),(e,t)=>({type:i.PostFeedItemCommentCompleted,locator:e,commentItem:t}),(e,t)=>({type:i.PostFeedItemCommentCompleted,locator:e,error:t})),deletedFeedItemComment:n.createAction(i.DeletedFeedItemComment,(e,t)=>({type:i.DeletedFeedItemComment,locator:e,commentId:t})),deletedFeedItem:n.createAction(i.DeletedFeedItem,(e,t)=>({type:i.DeletedFeedItem,locator:e,xuid:t})),dismissFeedItemCommentPostingError:n.createAction(i.DismissFeedItemCommentPostingStatus,e=>({type:i.DismissFeedItemCommentPostingStatus,locator:e})),likedFeedItem:n.createAction(i.LikedFeedItem,e=>({type:i.LikedFeedItem,locator:e})),unlikedFeedItem:n.createAction(i.UnlikedFeedItem,e=>({type:i.UnlikedFeedItem,locator:e})),likedFeedItemComment:n.createAction(i.LikedFeedItemComment,(e,t)=>({type:i.LikedFeedItemComment,locator:e,commentId:t})),unlikedFeedItemComment:n.createAction(i.UnlikedFeedItemComment,(e,t)=>({type:i.UnlikedFeedItemComment,locator:e,commentId:t})),feedItemViewed:n.createAction(i.FeedItemViewed,e=>({type:i.FeedItemViewed,itemLocator:e})),ballotVoteCast:n.createAction(i.BallotVoteCast,(e,t)=>({type:i.BallotVoteCast,itemLocator:e,ballot:t})),createLink:n.createAsyncAction(i.CreateLink,i.CreateLinkCompleted,(e,t)=>({type:i.CreateLink,locator:e,forceRefresh:t}),(e,t)=>({type:i.CreateLinkCompleted,locator:e,target:t}),(e,t)=>({type:i.CreateLinkCompleted,locator:e,error:t})),getLinkPreview:n.createAsyncAction(i.GetLinkPreview,i.GetLinkPreviewCompleted,(e,t,o)=>({type:i.GetLinkPreview,locator:e,anonymous:t,forceRefresh:o}),(e,t)=>({type:i.GetLinkPreviewCompleted,locator:e,content:t}),(e,t)=>({type:i.GetLinkPreviewCompleted,locator:e,error:t}))}},"4khb":function(e,t,o){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.lceMapContent=t.lceError=t.lceContent=t.lceFetching=t.LCE_NOT_REQUESTED=t.lceNotRequested=void 0;var n=o("V4bc");function i(){return{notRequested:!0}}function r(e,t,o){return{data:e,lastFetched:(o=o||new Date).toUTCString(),cacheTimeInMS:t}}t.lceNotRequested=i,t.LCE_NOT_REQUESTED={notRequested:!0},t.lceFetching=function(e){return n.isContent(e)?{isFetching:!0,previousContent:e}:e&&"previousContent"in e?{isFetching:!0,previousContent:e.previousContent}:{isFetching:!0}},t.lceContent=r,t.lceError=function(e,t){return n.isContent(t)?{error:e,occurredOn:(new Date).toUTCString(),previousContent:t}:t&&"previousContent"in t?{error:e,occurredOn:(new Date).toUTCString(),previousContent:t.previousContent}:{error:e,occurredOn:(new Date).toUTCString()}},t.lceMapContent=function(e,t,o){for(var n={},i=0,s=Object.keys(e);i<s.length;i++){var a=s[i];n[a]=r(e[a],t,o)}return n}},"7+uD":function(e,t,o){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const n=o("JIVc");n.__exportStar(o("Ia0S"),t),n.__exportStar(o("9E2I"),t),n.__exportStar(o("ZN+q"),t)},"7Ipv":function(e,t,o){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.TimelineTypes=void 0,function(e){e.Club="Club",e.User="User",e.UserStory="UserStory",e.MatchCard="MatchCard",e.Title="Title",e.Page="Page"}(t.TimelineTypes||(t.TimelineTypes={}))},"8i/T":function(e,t,o){"use strict";Object.defineProperty(t,"__esModule",{value:!0})},"94rg":function(e,t,o){"use strict";Object.defineProperty(t,"__esModule",{value:!0})},"9E2I":function(e,t,o){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.PostType=void 0,function(e){e.Unknown="Unknown",e.Link="Link",e.Text="Text",e.XboxLink="XboxLink",e.Leaderboard="Leaderboard",e.Lfg="Lfg",e.PostV2="PostV2",e.NameChange="NameChange",e.Ballot="Ballot",e.Mod="Mod"}(t.PostType||(t.PostType={}))},"9EOV":function(e,t,o){"use strict";o("x4t0"),o("kYxP"),o("sZjt"),o("udXp"),o("HBCE"),o("6pI8"),o("ReG1"),o("4QA/index.html"),o("OVwY"),o("gpa9"),o("tclo"),o("m6pu"),o("MyZA"),o("3e/+"),o("jeUp"),o("JlMe"),o("dv4H"),o("uYDL"),o("tQbP"),Object.defineProperty(t,"__esModule",{value:!0}),t.generateAggregateStoryKey=void 0;const n=o("ZZL/index.html");t.generateAggregateStoryKey=e=>(!e||0===e.length||e.includes(n.StoryFeedSource.All)?[n.StoryFeedSource.All]:[...new Set(e)]).sort().join("_")},"9SD5":function(e,t,o){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.isExpired=t.isUnexpired=void 0;t.isUnexpired=function(e){if(void 0===e.cacheTimeInMS)throw new Error("cacheTimeInMS not set on "+JSON.stringify(e));return e.cacheTimeInMS-(t=new Date(e.lastFetched),Date.now()-t.valueOf())>0;var t},t.isExpired=function(e){return!t.isUnexpired(e)}},Ak6n:function(e,t,o){"use strict";o("jQ/y"),o("kYxP"),o("IAdD"),Object.defineProperty(t,"__esModule",{value:!0}),t.makeFeedSelectors=t.promoteFeedSelectors=t.FeedSelectors=void 0;const n=o("BWTW"),i=o("w0DB"),r=o("W/w3"),s=o("ZZL/index.html"),a=o("9EOV"),c=i.lceNotRequested();t.FeedSelectors=Symbol("FeedSelectors");const d={isFeedItemUpToDate:(e,t)=>{var o;return void 0!==i.getUnexpiredDataOrPrevious(null!==(o=e.feedItemMap[t])&&void 0!==o?o:c)},getFeedItemLCE:(e,t)=>{var o;return null!==(o=e.feedItemMap[t])&&void 0!==o?o:c},getFeedItemsLCE:n.createSelector([(e,t)=>e,(e,t)=>t],(e,t)=>t.map(t=>d.getFeedItemLCE(e,t))),getClubActivityFeed:n.createSelector([(e,t)=>e,(e,t)=>t],(e,t)=>{var o;return l(null!==(o=e.clubActivityFeeds[t])&&void 0!==o?o:c,e)}),doesClubActivityFeedHaveMoreResults:(e,t)=>!!d.getClubActivityFeedContinuationToken(e,t),getClubActivityFeedContinuationToken:(e,t)=>{const o=e.clubActivityFeeds[t],n=i.getUnexpiredDataOrPrevious(o);return null===n||void 0===n?void 0:n.continuationToken},getUserActivityFeed:n.createSelector([(e,t)=>e,(e,t)=>t],(e,t)=>{var o;return l(null!==(o=e.userActivityFeeds[t])&&void 0!==o?o:c,e)}),getUserStory:(e,t)=>{var o;return null!==(o=e.userStories[t])&&void 0!==o?o:c},doesUserActivityFeedHaveMoreResults:(e,t)=>!!d.getUserActivityFeedContinuationToken(e,t),getUserActivityFeedContinuationToken:(e,t)=>{const o=e.userActivityFeeds[t],n=i.getUnexpiredDataOrPrevious(o);return null===n||void 0===n?void 0:n.continuationToken},getTrending:n.createSelector([(e,t)=>e,(e,t)=>t],(e,t)=>{var o;return l(null!==(o=e.trending[t])&&void 0!==o?o:c,e)}),doesTrendingHaveMoreResults:(e,t)=>!!d.getTrendingContinuationToken(e,t),getTrendingContinuationToken:(e,t)=>{const o=e.trending[t],n=i.getUnexpiredDataOrPrevious(o);return null===n||void 0===n?void 0:n.continuationToken},getAggregateStoryFeed:n.createSelector([(e,t)=>e.aggregateStoryFeed,(e,t)=>e.clubAggregateStoryFeeds,(e,t)=>e.userStories,(e,t)=>t],(e,t,o,n)=>e[a.generateAggregateStoryKey(n)]?i.lceTransform(e[a.generateAggregateStoryKey(n)],e=>{const n=[];for(const r of e.storySources){let e;switch(r.type){case s.StorySourceType.Club:e=t[r.clubId];break;case s.StorySourceType.User:e=i.getUnexpiredDataOrPrevious(o[r.xuid])}e&&n.push(Object.assign(Object.assign({},r),e))}return n}):i.lceNotRequested()),isAggregateStoryFeedUpToDate:(e,t)=>!!i.getUnexpiredDataOrPrevious(e.aggregateStoryFeed[a.generateAggregateStoryKey(t)]),getViewedFeedItemLocators:e=>e.viewedFeedItemLocators,getFeedItemComments:(e,t)=>{var o;return null!==(o=e.commentsMap[t])&&void 0!==o?o:c},getFeedItemCommentsContinuationToken:(e,t)=>{const o=e.commentsMap[t],n=i.getUnexpiredDataOrPrevious(o);return null===n||void 0===n?void 0:n.continuationToken},doesFeedItemHaveMoreComments:(e,t)=>!!d.getFeedItemCommentsContinuationToken(e,t),getCommentPostingState:(e,t)=>{var o;return null!==(o=e.commentPostStatus[t])&&void 0!==o?o:c},getCreatedLinkLCE:(e,t)=>{var o;return null!==(o=e.createdLinks[t])&&void 0!==o?o:c},isLinkPreviewUpToDate:(e,t,o)=>{var n;const r=i.getUnexpiredDataOrPrevious(null!==(n=e.linkPreviews[t])&&void 0!==n?n:c);return!!(null===r||void 0===r?void 0:r.item)&&r.anonymous===o},getLinkPreviewLCE:(e,t)=>{var o;return null!==(o=e.linkPreviews[t])&&void 0!==o?o:c}};function l(e,t){return i.lceTransform(e,e=>{const o=[];for(const n of e.feedItemLocators){const e=d.getFeedItemLCE(t,n);i.isContent(e)&&null===e.data||o.push(e)}return o})}function u(e){return r.promoteSelectors(d,e)}t.promoteFeedSelectors=u,t.makeFeedSelectors=function(){return u(e=>e.feed)}},BHFi:function(e,t,o){"use strict";Object.defineProperty(t,"__esModule",{value:!0})},BWTW:function(e,t,o){"use strict";function n(e,t){return e===t}function i(e,t,o){if(null===t||null===o||t.length!==o.length)return!1;for(var n=t.length,i=0;i<n;i++)if(!e(t[i],o[i]))return!1;return!0}function r(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:n,o=null,r=null;return function(){return i(t,o,arguments)||(r=e.apply(null,arguments)),o=arguments,r}}function s(e){var t=Array.isArray(e[0])?e[0]:e;if(!t.every((function(e){return"function"===typeof e}))){var o=t.map((function(e){return typeof e})).join(", ");throw new Error("Selector creators expect all input-selectors to be functions, instead received the following types: ["+o+"]")}return t}function a(e){for(var t=arguments.length,o=Array(t>1?t-1:0),n=1;n<t;n++)o[n-1]=arguments[n];return function(){for(var t=arguments.length,n=Array(t),i=0;i<t;i++)n[i]=arguments[i];var r=0,a=n.pop(),c=s(n),d=e.apply(void 0,[function(){return r++,a.apply(null,arguments)}].concat(o)),l=e((function(){for(var e=[],t=c.length,o=0;o<t;o++)e.push(c[o].apply(null,arguments));return d.apply(null,e)}));return l.resultFunc=a,l.dependencies=c,l.recomputations=function(){return r},l.resetRecomputations=function(){return r=0},l}}o.r(t),o.d(t,"defaultMemoize",(function(){return r})),o.d(t,"createSelectorCreator",(function(){return a})),o.d(t,"createSelector",(function(){return c})),o.d(t,"createStructuredSelector",(function(){return d}));var c=a(r);function d(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:c;if("object"!==typeof e)throw new Error("createStructuredSelector expects first argument to be an object where each property is a selector, instead received a "+typeof e);var o=Object.keys(e);return t(o.map((function(t){return e[t]})),(function(){for(var e=arguments.length,t=Array(e),n=0;n<e;n++)t[n]=arguments[n];return t.reduce((function(e,t,n){return e[o[n]]=t,e}),{})}))}},FiLY:function(e,t,o){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.bindFeedDependencies=t.feedContainerModule=void 0;const n=o("s6Xb"),i=o("0+MI"),r=o("Pf0/index.html");t.feedContainerModule=new n.ContainerModule((e,t,o,n)=>{o(r.FeedService)||e(r.FeedService).to(r.XblFeedService),o(i.FeedSagaManager)||e(i.FeedSagaManager).toSelf()}),t.bindFeedDependencies=function(e,o){e.load(t.feedContainerModule),e.isBound(i.FeedSelectors)||e.bind(i.FeedSelectors).toConstantValue(o)}},HyHF:function(e,t,o){"use strict";Object.defineProperty(t,"__esModule",{value:!0})},I4p5:function(e,t,o){"use strict";Object.defineProperty(t,"__esModule",{value:!0})},I7gs:function(e,t,o){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const n=o("JIVc");n.__exportStar(o("KRWz"),t),n.__exportStar(o("8i/T"),t),n.__exportStar(o("I4p5"),t),n.__exportStar(o("QSmy"),t)},IJMz:function(e,t,o){"use strict";o("kYxP"),o("IAdD"),Object.defineProperty(t,"__esModule",{value:!0}),t.feedReducer=t.initialState=void 0;const n=o("JIVc"),i=o("9OUN"),r=o("w0DB"),s=o("/SYO"),a=o("W/w3"),c=o("ZZL/index.html"),d=o("3roD"),l=o("9EOV");t.initialState={feedItemMap:{},clubActivityFeeds:{},userActivityFeeds:{},aggregateStoryFeed:{},userStories:{},trending:{},clubAggregateStoryFeeds:{},viewedFeedItemLocators:{},commentsMap:{},commentPostStatus:{},createdLinks:{},linkPreviews:{}};const u=(e,t)=>Object.entries(t).reduce((t,o)=>{let[n,i]=o;return Object.assign(Object.assign({},t),{[n]:r.isError(i)?r.lceError(i.error,e[n]):i})},e),m=(e,t)=>t.reduce((e,t)=>Object.assign(Object.assign({},e),{[t.data.locator]:t}),e),p=e=>{switch(e.type){case c.StorySourceType.Club:return{type:c.StorySourceType.Club,clubId:e.clubId};case c.StorySourceType.User:return{type:c.StorySourceType.User,xuid:e.xuid}}},g=e=>{const{itemLocators:t,allViewed:o}=e;return{itemLocators:t,allViewed:o}},y=(e,t)=>t.itemLocators.some(t=>!e.viewedFeedItemLocators[t]),v=i.combineReducers({feedItemMap:function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:t.initialState.feedItemMap,o=arguments.length>1?arguments[1]:void 0;switch(o.type){case d.FeedActionType.GetFeedItem:return Object.assign(Object.assign({},e),{[o.itemId]:r.lceFetching(e[o.itemId])});case d.FeedActionType.GetFeedItemCompleted:return s.isErrorAction(o)?Object.assign(Object.assign({},e),{[o.itemId]:r.lceError(o.error,e[o.itemId])}):Object.assign(Object.assign({},e),{[o.itemId]:r.isError(o.feedItem)?r.lceError(o.feedItem.error,e[o.itemId]):o.feedItem});case d.FeedActionType.GetFeedItems:return o.itemIds.reduce((t,o)=>Object.assign(Object.assign({},t),{[o]:r.lceFetching(e[o])}),e);case d.FeedActionType.GetFeedItemsCompleted:return s.isErrorAction(o)?o.itemIds.reduce((t,n)=>Object.assign(Object.assign({},t),{[n]:r.lceError(o.error,e[n])}),e):u(e,o.feedItems);case d.FeedActionType.GetUserStoryCompleted:case d.FeedActionType.GetClubActivityFeedCompleted:case d.FeedActionType.GetUserActivityFeedCompleted:case d.FeedActionType.GetTrendingCompleted:return s.isErrorAction(o)?e:m(e,o.feedItems);case d.FeedActionType.GetClubActivityFeedContinuedCompleted:case d.FeedActionType.GetUserActivityFeedContinuedCompleted:case d.FeedActionType.GetTrendingContinuedCompleted:return s.isErrorAction(o)||o.result.useCache?e:m(e,o.result.feedItems);case d.FeedActionType.FeedItemViewed:{const t=e[o.itemLocator];if(t){const o=r.getDataOrPrevious(t);if(o&&!o.hasViewed){const n=Object.assign(Object.assign({},t),{data:Object.assign(Object.assign({},o),{hasViewed:!0})});return u(e,{[n.data.locator]:n})}}return e}case d.FeedActionType.LikedFeedItem:{const t=e[o.locator];if(t){const o=r.getDataOrPrevious(t);if(o){const n=Object.assign(Object.assign({},t),{data:Object.assign(Object.assign({},o),{likeCount:o.likeCount+1,hasLiked:!0})});return u(e,{[n.data.locator]:n})}}return e}case d.FeedActionType.UnlikedFeedItem:{const t=e[o.locator];if(t){const o=r.getDataOrPrevious(t);if(o){const n=Object.assign(Object.assign({},t),{data:Object.assign(Object.assign({},o),{likeCount:Math.max(o.likeCount-1,0),hasLiked:!1})});return u(e,{[n.data.locator]:n})}}return e}case d.FeedActionType.BallotVoteCast:{const t=e[o.itemLocator];return r.isContent(t)&&t.data?u(e,{[o.itemLocator]:Object.assign(Object.assign({},t),{data:Object.assign(Object.assign({},t.data),o.ballot)})}):e}case d.FeedActionType.PostFeedItemCommentCompleted:{const t=e[o.locator];if(t){const o=r.getDataOrPrevious(t);if(o){const n=Object.assign(Object.assign({},t),{data:Object.assign(Object.assign({},o),{commentCount:o.commentCount+1})});return u(e,{[n.data.locator]:n})}}return e}case d.FeedActionType.DeletedFeedItemComment:{const t=e[o.locator];if(t){const n=r.lceTransform(t,e=>null!==e?Object.assign(Object.assign({},e),{commentCount:e.commentCount-1}):null);return u(e,{[o.locator]:n})}return e}case d.FeedActionType.DeletedFeedItem:{const t=e,i=o.locator;t[i];return n.__rest(t,["symbol"===typeof i?i:i+""])}default:return e}},clubActivityFeeds:function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:t.initialState.clubActivityFeeds,o=arguments.length>1?arguments[1]:void 0;var n,i;switch(o.type){case d.FeedActionType.GetClubActivityFeed:return Object.assign(Object.assign({},e),{[o.clubId]:r.lceFetching(e[o.clubId])});case d.FeedActionType.GetClubActivityFeedCompleted:return s.isErrorAction(o)?Object.assign(Object.assign({},e),{[o.clubId]:r.lceError(o.error,e[o.clubId])}):Object.assign(Object.assign({},e),{[o.clubId]:o.feed});case d.FeedActionType.GetClubActivityFeedContinued:return Object.assign(Object.assign({},e),{[o.clubId]:r.lceFetching(e[o.clubId])});case d.FeedActionType.GetClubActivityFeedContinuedCompleted:if(s.isErrorAction(o))return Object.assign(Object.assign({},e),{[o.clubId]:r.lceError(o.error,e[o.clubId])});{if(o.result.useCache)return Object.assign(Object.assign({},e),{[o.clubId]:r.completeFetchWithPrevious(e[o.clubId])});const t={feedItemLocators:[...null!==(i=null===(n=r.getDataOrPrevious(e[o.clubId]))||void 0===n?void 0:n.feedItemLocators)&&void 0!==i?i:[],...o.result.feed.data.feedItemLocators],continuationToken:o.result.feed.data.continuationToken};return Object.assign(Object.assign({},e),{[o.clubId]:Object.assign(Object.assign({},o.result.feed),{data:t})})}default:return e}},userActivityFeeds:function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:t.initialState.userActivityFeeds,o=arguments.length>1?arguments[1]:void 0;var n,i;switch(o.type){case d.FeedActionType.GetUserActivityFeed:return Object.assign(Object.assign({},e),{[o.xuid]:r.lceFetching(e[o.xuid])});case d.FeedActionType.GetUserActivityFeedCompleted:return s.isErrorAction(o)?Object.assign(Object.assign({},e),{[o.xuid]:r.lceError(o.error,e[o.xuid])}):Object.assign(Object.assign({},e),{[o.xuid]:o.feed});case d.FeedActionType.GetUserActivityFeedContinued:return Object.assign(Object.assign({},e),{[o.xuid]:r.lceFetching(e[o.xuid])});case d.FeedActionType.GetUserActivityFeedContinuedCompleted:if(s.isErrorAction(o))return Object.assign(Object.assign({},e),{[o.xuid]:r.lceError(o.error,e[o.xuid])});{if(o.result.useCache)return Object.assign(Object.assign({},e),{[o.xuid]:r.completeFetchWithPrevious(e[o.xuid])});const t={feedItemLocators:[...null!==(i=null===(n=r.getDataOrPrevious(e[o.xuid]))||void 0===n?void 0:n.feedItemLocators)&&void 0!==i?i:[],...o.result.feed.data.feedItemLocators],continuationToken:o.result.feed.data.continuationToken};return Object.assign(Object.assign({},e),{[o.xuid]:Object.assign(Object.assign({},o.result.feed),{data:t})})}case d.FeedActionType.DeletedFeedItem:if(e[o.xuid]){let t=!1;const n=r.lceTransform(e[o.xuid],e=>{const n=e.feedItemLocators.filter(e=>e!==o.locator);return t=n.length!==e.feedItemLocators.length,Object.assign(Object.assign({},e),{feedItemLocators:n})});if(t)return Object.assign(Object.assign({},e),{[o.xuid]:n})}return e;default:return e}},userStories:function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:t.initialState.userStories,o=arguments.length>1?arguments[1]:void 0;var n;switch(o.type){case d.FeedActionType.GetUserStory:return Object.assign(Object.assign({},e),{[o.xuid]:r.lceFetching(e[o.xuid])});case d.FeedActionType.GetUserStoryCompleted:return s.isErrorAction(o)?Object.assign(Object.assign({},e),{[o.xuid]:r.lceError(o.error,e[o.xuid])}):Object.assign(Object.assign({},e),{[o.xuid]:o.story});case d.FeedActionType.GetAggregateStoryFeedCompleted:{const t=null!==(n=o.options.sources)&&void 0!==n?n:[c.StoryFeedSource.All];if(s.isErrorAction(o)||o.result.useCache||!t.some(e=>e===c.StoryFeedSource.All||e===c.StoryFeedSource.Friends))return e;{const t=o.result.stories.data,n={};for(const e of t)e.type===c.StorySourceType.User&&(n[e.xuid]=r.lceContent(g(e),o.result.stories.cacheTimeInMS,new Date(o.result.stories.lastFetchedMS)));return Object.assign(Object.assign({},e),n)}}case d.FeedActionType.DeletedFeedItem:if(e[o.xuid]){let t=!1;const n=r.lceTransform(e[o.xuid],e=>{const n=e.itemLocators.filter(e=>e!==o.locator);return t=n.length!==e.itemLocators.length,Object.assign(Object.assign({},e),{itemLocators:n})});if(t)return Object.assign(Object.assign({},e),{[o.xuid]:n})}return e;default:return e}},trending:function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:t.initialState.trending,o=arguments.length>1?arguments[1]:void 0;var n,i;switch(o.type){case d.FeedActionType.GetTrending:return Object.assign(Object.assign({},e),{[o.options.titleCategory]:r.lceFetching(e[o.options.titleCategory])});case d.FeedActionType.GetTrendingCompleted:return s.isErrorAction(o)?Object.assign(Object.assign({},e),{[o.options.titleCategory]:r.lceError(o.error,e[o.options.titleCategory])}):Object.assign(Object.assign({},e),{[o.options.titleCategory]:o.feed});case d.FeedActionType.GetTrendingContinued:return Object.assign(Object.assign({},e),{[o.options.titleCategory]:r.lceFetching(e[o.options.titleCategory])});case d.FeedActionType.GetTrendingContinuedCompleted:if(s.isErrorAction(o))return Object.assign(Object.assign({},e),{[o.options.titleCategory]:r.lceError(o.error,e[o.options.titleCategory])});{if(o.result.useCache)return Object.assign(Object.assign({},e),{[o.options.titleCategory]:r.completeFetchWithPrevious(e[o.options.titleCategory])});const t={feedItemLocators:[...null!==(i=null===(n=r.getDataOrPrevious(e[o.options.titleCategory]))||void 0===n?void 0:n.feedItemLocators)&&void 0!==i?i:[],...o.result.feed.data.feedItemLocators],continuationToken:o.result.feed.data.continuationToken};return Object.assign(Object.assign({},e),{[o.options.titleCategory]:Object.assign(Object.assign({},o.result.feed),{data:t})})}default:return e}},aggregateStoryFeed:function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:t.initialState.aggregateStoryFeed,o=arguments.length>1?arguments[1]:void 0;var n,i;switch(o.type){case d.FeedActionType.GetAggregateStoryFeed:{const t=l.generateAggregateStoryKey(o.options.sources),i=null!==(n=e[t])&&void 0!==n?n:void 0;return Object.assign(Object.assign({},e),{[t]:r.lceFetching(i)})}case d.FeedActionType.GetAggregateStoryFeedCompleted:{const t=l.generateAggregateStoryKey(o.options.sources),n=null!==(i=e[t])&&void 0!==i?i:void 0;return s.isErrorAction(o)?Object.assign(Object.assign({},e),{[t]:r.lceError(o.error,n)}):o.result.useCache?Object.assign(Object.assign({},e),{[t]:r.completeFetchWithPrevious(n)}):Object.assign(Object.assign({},e),{[t]:r.lceTransform(o.result.stories,e=>({storySources:e.map(p)}))})}default:return e}},clubAggregateStoryFeeds:function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:t.initialState.clubAggregateStoryFeeds,o=arguments.length>1?arguments[1]:void 0;var n;switch(o.type){case d.FeedActionType.GetAggregateStoryFeedCompleted:{const t=null!==(n=o.options.sources)&&void 0!==n?n:[c.StoryFeedSource.All];if(s.isErrorAction(o)||o.result.useCache||!t.some(e=>e===c.StoryFeedSource.All||e===c.StoryFeedSource.Games))return e;{const e=o.result.stories.data,t={};for(const o of e)o.type===c.StorySourceType.Club&&(t[o.clubId]=g(o));return t}}default:return e}},viewedFeedItemLocators:function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:t.initialState.viewedFeedItemLocators,o=arguments.length>1?arguments[1]:void 0;switch(o.type){case d.FeedActionType.FeedItemViewed:return e[o.itemLocator]?e:Object.assign(Object.assign({},e),{[o.itemLocator]:Date.now().valueOf()});default:return e}},commentsMap:function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:t.initialState.commentsMap,o=arguments.length>1?arguments[1]:void 0;var n,i,a,c,l,u,m,p,g,y,v,f,h,F;switch(o.type){case d.FeedActionType.GetFeedItemComments:return Object.assign(Object.assign({},e),{[o.locator]:r.lceFetching(e[o.locator])});case d.FeedActionType.GetFeedItemCommentsCompleted:return s.isErrorAction(o)?Object.assign(Object.assign({},e),{[o.locator]:r.lceError(o.error,e[o.locator])}):Object.assign(Object.assign({},e),{[o.locator]:o.result});case d.FeedActionType.GetFeedItemCommentsContinued:return Object.assign(Object.assign({},e),{[o.locator]:r.lceFetching(e[o.locator])});case d.FeedActionType.GetFeedItemCommentsContinuedCompleted:if(s.isErrorAction(o))return Object.assign(Object.assign({},e),{[o.locator]:r.lceError(o.error,e[o.locator])});{if(o.result.useCache)return Object.assign(Object.assign({},e),{[o.locator]:r.completeFetchWithPrevious(e[o.locator])});const t={comments:[...null!==(i=null===(n=r.getDataOrPrevious(e[o.locator]))||void 0===n?void 0:n.comments)&&void 0!==i?i:[],...o.result.content.data.comments],isCommentThreadLocked:o.result.content.data.isCommentThreadLocked,continuationToken:o.result.content.data.continuationToken};return Object.assign(Object.assign({},e),{[o.locator]:Object.assign(Object.assign({},o.result.content),{data:t})})}case d.FeedActionType.PostFeedItemCommentCompleted:if(!s.isErrorAction(o)&&o.commentItem){const t=r.getDataOrPrevious(e[o.locator]),n=null!==(a=null===t||void 0===t?void 0:t.comments)&&void 0!==a?a:[],i=[o.commentItem,...n],s=r.lceTransform(e[o.locator],e=>Object.assign(Object.assign({},e),{comments:i}));return Object.assign(Object.assign({},e),{[o.locator]:s})}return e;case d.FeedActionType.DeletedFeedItemComment:{const t=r.getDataOrPrevious(e[o.locator]),n=null!==(c=null===t||void 0===t?void 0:t.comments.filter(e=>e.id!==o.commentId))&&void 0!==c?c:[],i=r.lceTransform(e[o.locator],e=>Object.assign(Object.assign({},e),{comments:n}));return Object.assign(Object.assign({},e),{[o.locator]:i})}case d.FeedActionType.LikedFeedItemComment:if(!s.isErrorAction(o)){const t={comments:(null!==(u=null===(l=r.getDataOrPrevious(e[o.locator]))||void 0===l?void 0:l.comments)&&void 0!==u?u:[]).map(e=>e.id===o.commentId?Object.assign(Object.assign({},e),{isLiked:!0,numLikes:e.numLikes+1}):e),isCommentThreadLocked:null!==(p=null===(m=r.getDataOrPrevious(e[o.locator]))||void 0===m?void 0:m.isCommentThreadLocked)&&void 0!==p&&p,continuationToken:null===(g=r.getDataOrPrevious(e[o.locator]))||void 0===g?void 0:g.continuationToken};return Object.assign(Object.assign({},e),{[o.locator]:Object.assign(Object.assign({},e[o.locator]),{data:t})})}return e;case d.FeedActionType.UnlikedFeedItemComment:if(!s.isErrorAction(o)){const t={comments:(null!==(v=null===(y=r.getDataOrPrevious(e[o.locator]))||void 0===y?void 0:y.comments)&&void 0!==v?v:[]).map(e=>e.id===o.commentId?Object.assign(Object.assign({},e),{isLiked:!1,numLikes:e.numLikes>0?e.numLikes-1:0}):e),isCommentThreadLocked:null!==(h=null===(f=r.getDataOrPrevious(e[o.locator]))||void 0===f?void 0:f.isCommentThreadLocked)&&void 0!==h&&h,continuationToken:null===(F=r.getDataOrPrevious(e[o.locator]))||void 0===F?void 0:F.continuationToken};return Object.assign(Object.assign({},e),{[o.locator]:Object.assign(Object.assign({},e[o.locator]),{data:t})})}return e;default:return e}},commentPostStatus:function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:t.initialState.commentPostStatus,o=arguments.length>1?arguments[1]:void 0;var i;switch(o.type){case d.FeedActionType.PostFeedItemComment:return Object.assign(Object.assign({},e),{[o.locator]:r.lceFetching()});case d.FeedActionType.PostFeedItemCommentCompleted:{if(s.isErrorAction(o)){const t=null!==(i=e[o.locator])&&void 0!==i?i:r.lceNotRequested();return Object.assign(Object.assign({},e),{[o.locator]:r.lceError(o.error,t)})}const t=e,a=o.locator,c=(t[a],n.__rest(t,["symbol"===typeof a?a:a+""]));return Object.assign({},c)}case d.FeedActionType.DismissFeedItemCommentPostingStatus:{const t=e,i=o.locator,r=(t[i],n.__rest(t,["symbol"===typeof i?i:i+""]));return Object.assign({},r)}default:return e}},createdLinks:function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:t.initialState.createdLinks,o=arguments.length>1?arguments[1]:void 0;switch(o.type){case d.FeedActionType.CreateLink:return Object.assign(Object.assign({},e),{[o.locator]:r.lceFetching(e[o.locator])});case d.FeedActionType.CreateLinkCompleted:return s.isErrorAction(o)?Object.assign(Object.assign({},e),{[o.locator]:r.lceError(o.error,e[o.locator])}):Object.assign(Object.assign({},e),{[o.locator]:o.target});default:return e}},linkPreviews:function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:t.initialState.linkPreviews,o=arguments.length>1?arguments[1]:void 0;switch(o.type){case d.FeedActionType.GetLinkPreview:return Object.assign(Object.assign({},e),{[o.locator]:r.lceFetching(e[o.locator])});case d.FeedActionType.GetLinkPreviewCompleted:return s.isErrorAction(o)?Object.assign(Object.assign({},e),{[o.locator]:r.lceError(o.error,e[o.locator])}):Object.assign(Object.assign({},e),{[o.locator]:o.content});default:return e}}});t.feedReducer=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:t.initialState,o=arguments.length>1?arguments[1]:void 0;const n=v(e,o);switch(o.type){case d.FeedActionType.FeedItemViewed:{const e=r.getDataOrPrevious(n.feedItemMap[o.itemLocator]);if(e&&e.timeline){const t=e.timeline.id;switch(e.timeline.type){case c.TimelineType.Club:{const e=n.clubAggregateStoryFeeds[t];if(!1===(null===e||void 0===e?void 0:e.allViewed)&&!y(n,e))return Object.assign(Object.assign({},n),{clubAggregateStoryFeeds:Object.assign(Object.assign({},n.clubAggregateStoryFeeds),{[t]:Object.assign(Object.assign({},e),{allViewed:!0})})})}break;case c.TimelineType.User:case c.TimelineType.UserStory:{const e=n.userStories[t];if(e){const o=r.getDataOrPrevious(e);if(!1===(null===o||void 0===o?void 0:o.allViewed)&&!y(n,o))return Object.assign(Object.assign({},n),{userStories:Object.assign(Object.assign({},n.userStories),{[t]:r.lceTransform(e,e=>Object.assign(Object.assign({},e),{allViewed:!0}))})})}}}}break}case d.FeedActionType.DeletedFeedItem:{const e=n.userStories[o.xuid];if(e){const t=r.getDataOrPrevious(e);if(!1===(null===t||void 0===t?void 0:t.allViewed)&&!y(n,t))return Object.assign(Object.assign({},n),{userStories:Object.assign(Object.assign({},n.userStories),{[o.xuid]:r.lceTransform(e,e=>Object.assign(Object.assign({},e),{allViewed:!0}))})})}break}case a.CommonActionType.UserSignedOut:return t.initialState}return n}},ILMu:function(e,t,o){"use strict";Object.defineProperty(t,"__esModule",{value:!0})},Ia0S:function(e,t,o){"use strict";Object.defineProperty(t,"__esModule",{value:!0})},JIVc:function(e,t,o){"use strict";o.r(t),o.d(t,"__extends",(function(){return i})),o.d(t,"__assign",(function(){return r})),o.d(t,"__rest",(function(){return s})),o.d(t,"__decorate",(function(){return a})),o.d(t,"__param",(function(){return c})),o.d(t,"__metadata",(function(){return d})),o.d(t,"__awaiter",(function(){return l})),o.d(t,"__generator",(function(){return u})),o.d(t,"__createBinding",(function(){return m})),o.d(t,"__exportStar",(function(){return p})),o.d(t,"__values",(function(){return g})),o.d(t,"__read",(function(){return y})),o.d(t,"__spread",(function(){return v})),o.d(t,"__spreadArrays",(function(){return f})),o.d(t,"__spreadArray",(function(){return h})),o.d(t,"__await",(function(){return F})),o.d(t,"__asyncGenerator",(function(){return C})),o.d(t,"__asyncDelegator",(function(){return b})),o.d(t,"__asyncValues",(function(){return T})),o.d(t,"__makeTemplateObject",(function(){return S})),o.d(t,"__importStar",(function(){return A})),o.d(t,"__importDefault",(function(){return _})),o.d(t,"__classPrivateFieldGet",(function(){return O})),o.d(t,"__classPrivateFieldSet",(function(){return j}));o("IAdD"),o("M3Ze"),o("JtPf"),o("jQ/y"),o("kYxP"),o("PqcW");var n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)};function i(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}var r=function(){return(r=Object.assign||function(e){for(var t,o=1,n=arguments.length;o<n;o++)for(var i in t=arguments[o])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e}).apply(this,arguments)};function s(e,t){var o={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0&&(o[n]=e[n]);if(null!=e&&"function"===typeof Object.getOwnPropertySymbols){var i=0;for(n=Object.getOwnPropertySymbols(e);i<n.length;i++)t.indexOf(n[i])<0&&Object.prototype.propertyIsEnumerable.call(e,n[i])&&(o[n[i]]=e[n[i]])}return o}function a(e,t,o,n){var i,r=arguments.length,s=r<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)s=Reflect.decorate(e,t,o,n);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(s=(r<3?i(s):r>3?i(t,o,s):i(t,o))||s);return r>3&&s&&Object.defineProperty(t,o,s),s}function c(e,t){return function(o,n){t(o,n,e)}}function d(e,t){if("object"===typeof Reflect&&"function"===typeof Reflect.metadata)return Reflect.metadata(e,t)}function l(e,t,o,n){return new(o||(o=Promise))((function(i,r){function s(e){try{c(n.next(e))}catch(t){r(t)}}function a(e){try{c(n.throw(e))}catch(t){r(t)}}function c(e){var t;e.done?i(e.value):(t=e.value,t instanceof o?t:new o((function(e){e(t)}))).then(s,a)}c((n=n.apply(e,t||[])).next())}))}function u(e,t){var o,n,i,r,s={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return r={next:a(0),throw:a(1),return:a(2)},"function"===typeof Symbol&&(r[Symbol.iterator]=function(){return this}),r;function a(r){return function(a){return function(r){if(o)throw new TypeError("Generator is already executing.");for(;s;)try{if(o=1,n&&(i=2&r[0]?n.return:r[0]?n.throw||((i=n.return)&&i.call(n),0):n.next)&&!(i=i.call(n,r[1])).done)return i;switch(n=0,i&&(r=[2&r[0],i.value]),r[0]){case 0:case 1:i=r;break;case 4:return s.label++,{value:r[1],done:!1};case 5:s.label++,n=r[1],r=[0];continue;case 7:r=s.ops.pop(),s.trys.pop();continue;default:if(!(i=(i=s.trys).length>0&&i[i.length-1])&&(6===r[0]||2===r[0])){s=0;continue}if(3===r[0]&&(!i||r[1]>i[0]&&r[1]<i[3])){s.label=r[1];break}if(6===r[0]&&s.label<i[1]){s.label=i[1],i=r;break}if(i&&s.label<i[2]){s.label=i[2],s.ops.push(r);break}i[2]&&s.ops.pop(),s.trys.pop();continue}r=t.call(e,s)}catch(a){r=[6,a],n=0}finally{o=i=0}if(5&r[0])throw r[1];return{value:r[0]?r[1]:void 0,done:!0}}([r,a])}}}var m=Object.create?function(e,t,o,n){void 0===n&&(n=o),Object.defineProperty(e,n,{enumerable:!0,get:function(){return t[o]}})}:function(e,t,o,n){void 0===n&&(n=o),e[n]=t[o]};function p(e,t){for(var o in e)"default"===o||Object.prototype.hasOwnProperty.call(t,o)||m(t,e,o)}function g(e){var t="function"===typeof Symbol&&Symbol.iterator,o=t&&e[t],n=0;if(o)return o.call(e);if(e&&"number"===typeof e.length)return{next:function(){return e&&n>=e.length&&(e=void 0),{value:e&&e[n++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")}function y(e,t){var o="function"===typeof Symbol&&e[Symbol.iterator];if(!o)return e;var n,i,r=o.call(e),s=[];try{for(;(void 0===t||t-- >0)&&!(n=r.next()).done;)s.push(n.value)}catch(a){i={error:a}}finally{try{n&&!n.done&&(o=r.return)&&o.call(r)}finally{if(i)throw i.error}}return s}function v(){for(var e=[],t=0;t<arguments.length;t++)e=e.concat(y(arguments[t]));return e}function f(){for(var e=0,t=0,o=arguments.length;t<o;t++)e+=arguments[t].length;var n=Array(e),i=0;for(t=0;t<o;t++)for(var r=arguments[t],s=0,a=r.length;s<a;s++,i++)n[i]=r[s];return n}function h(e,t){for(var o=0,n=t.length,i=e.length;o<n;o++,i++)e[i]=t[o];return e}function F(e){return this instanceof F?(this.v=e,this):new F(e)}function C(e,t,o){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var n,i=o.apply(e,t||[]),r=[];return n={},s("next"),s("throw"),s("return"),n[Symbol.asyncIterator]=function(){return this},n;function s(e){i[e]&&(n[e]=function(t){return new Promise((function(o,n){r.push([e,t,o,n])>1||a(e,t)}))})}function a(e,t){try{(o=i[e](t)).value instanceof F?Promise.resolve(o.value.v).then(c,d):l(r[0][2],o)}catch(n){l(r[0][3],n)}var o}function c(e){a("next",e)}function d(e){a("throw",e)}function l(e,t){e(t),r.shift(),r.length&&a(r[0][0],r[0][1])}}function b(e){var t,o;return t={},n("next"),n("throw",(function(e){throw e})),n("return"),t[Symbol.iterator]=function(){return this},t;function n(n,i){t[n]=e[n]?function(t){return(o=!o)?{value:F(e[n](t)),done:"return"===n}:i?i(t):t}:i}}function T(e){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var t,o=e[Symbol.asyncIterator];return o?o.call(e):(e=g(e),t={},n("next"),n("throw"),n("return"),t[Symbol.asyncIterator]=function(){return this},t);function n(o){t[o]=e[o]&&function(t){return new Promise((function(n,i){(function(e,t,o,n){Promise.resolve(n).then((function(t){e({value:t,done:o})}),t)})(n,i,(t=e[o](t)).done,t.value)}))}}}function S(e,t){return Object.defineProperty?Object.defineProperty(e,"raw",{value:t}):e.raw=t,e}var I=Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t};function A(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var o in e)"default"!==o&&Object.prototype.hasOwnProperty.call(e,o)&&m(t,e,o);return I(t,e),t}function _(e){return e&&e.__esModule?e:{default:e}}function O(e,t,o,n){if("a"===o&&!n)throw new TypeError("Private accessor was defined without a getter");if("function"===typeof t?e!==t||!n:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===o?n:"a"===o?n.call(e):n?n.value:t.get(e)}function j(e,t,o,n,i){if("m"===n)throw new TypeError("Private method is not writable");if("a"===n&&!i)throw new TypeError("Private accessor was defined without a setter");if("function"===typeof t?e!==t||!i:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return"a"===n?i.call(e,o):i?i.value=o:t.set(e,o),o}},JqKr:function(e,t,o){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=o("JIVc");n.__exportStar(o("4khb"),t),n.__exportStar(o("2b3M"),t),n.__exportStar(o("9SD5"),t),n.__exportStar(o("ILMu"),t),n.__exportStar(o("rNnW"),t),n.__exportStar(o("obip"),t),n.__exportStar(o("V4bc"),t)},Jxsh:function(e,t,o){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.StorySourceType=void 0,function(e){e.Club="Club",e.User="User"}(t.StorySourceType||(t.StorySourceType={}))},KRWz:function(e,t,o){"use strict";Object.defineProperty(t,"__esModule",{value:!0})},M4Rv:function(e,t,o){"use strict";Object.defineProperty(t,"__esModule",{value:!0})},"Pf0/":function(e,t,o){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.XblFeedService=void 0;o("JIVc").__exportStar(o("+PEE"),t);var n=o("zQW/index.html");Object.defineProperty(t,"XblFeedService",{enumerable:!0,get:function(){return n.XblFeedService}})},QPz5:function(e,t,o){"use strict";Object.defineProperty(t,"__esModule",{value:!0})},QSmy:function(e,t,o){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.StorySourceType=void 0,function(e){e.Club="Club",e.User="User"}(t.StorySourceType||(t.StorySourceType={}))},R8kO:function(e,t,o){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.AuthorTypes=void 0,function(e){e.User="User",e.TitleUser="TitleUser",e.Title="Title",e.PageUser="PageUser",e.Club="Club"}(t.AuthorTypes||(t.AuthorTypes={}))},RQzm:function(e,t,o){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.feedContainerModule=t.bindFeedDependencies=t.XblFeedService=t.FeedService=void 0;const n=o("JIVc");n.__exportStar(o("ZZL/index.html"),t),n.__exportStar(o("0+MI"),t);var i=o("Pf0/index.html");Object.defineProperty(t,"FeedService",{enumerable:!0,get:function(){return i.FeedService}}),Object.defineProperty(t,"XblFeedService",{enumerable:!0,get:function(){return i.XblFeedService}});var r=o("FiLY");Object.defineProperty(t,"bindFeedDependencies",{enumerable:!0,get:function(){return r.bindFeedDependencies}}),Object.defineProperty(t,"feedContainerModule",{enumerable:!0,get:function(){return r.feedContainerModule}})},RwRl:function(e,t,o){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.StoryFeedSource=t.TitleCategory=t.FeedItemSource=void 0,function(e){e[e.All=0]="All",e[e.Clubs=1]="Clubs",e[e.Favorites=2]="Favorites",e[e.Friends=3]="Friends",e[e.Games=4]="Games",e[e.None=5]="None",e[e.Pages=6]="Pages",e[e.Recommendations=7]="Recommendations",e[e.Trending=8]="Trending"}(t.FeedItemSource||(t.FeedItemSource={})),function(e){e.None="None",e.Global="Global",e.XCloudPlayFeed="XCloudPlayFeed",e.PlayFeed="PlayFeed"}(t.TitleCategory||(t.TitleCategory={})),function(e){e[e.All=0]="All",e[e.Games=1]="Games",e[e.Friends=2]="Friends"}(t.StoryFeedSource||(t.StoryFeedSource={}))},SZFV:function(e,t,o){"use strict";Object.defineProperty(t,"__esModule",{value:!0})},SZNj:function(e,t,o){"use strict";Object.defineProperty(t,"__esModule",{value:!0})},Tnco:function(e,t,o){"use strict";Object.defineProperty(t,"__esModule",{value:!0})},UmsL:function(e,t,o){"use strict";Object.defineProperty(t,"__esModule",{value:!0})},V4bc:function(e,t,o){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.isLCE=t.isError=t.isExpiredContent=t.isUnexpiredContent=t.isContent=t.isFetching=t.isNotRequested=t.isValidContent=void 0;var n=o("9SD5"),i=function(e){return!("previousContent"in e)||t.isContent(e.previousContent)};t.isValidContent=function(e){if(null===e)return!0;switch(typeof e){case"object":case"boolean":case"number":case"string":return!0;default:return!1}},t.isNotRequested=function(e){return"object"===typeof e&&!!e&&"notRequested"in e&&e.notRequested},t.isFetching=function(e){return"object"===typeof e&&!!e&&!0===e.isFetching&&i(e)},t.isContent=function(e){return!!e&&"object"===typeof e&&t.isValidContent(e.data)&&!!e.lastFetched&&(!e.cacheTimeInMS||"number"===typeof e.cacheTimeInMS)},t.isUnexpiredContent=function(e){return t.isContent(e)&&n.isUnexpired(e)},t.isExpiredContent=function(e){return t.isContent(e)&&n.isExpired(e)},t.isError=function(e){return!!e&&"object"===typeof e&&!!e.error&&"object"===typeof e.error&&!!e.occurredOn&&i(e)},t.isLCE=function(e){return t.isNotRequested(e)||t.isFetching(e)||t.isContent(e)||t.isError(e)}},ViLT:function(e,t,o){"use strict";Object.defineProperty(t,"__esModule",{value:!0})},VlVw:function(e,t,o){"use strict";Object.defineProperty(t,"__esModule",{value:!0})},WQZy:function(e,t,o){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const n=o("JIVc");n.__exportStar(o("t2Ci"),t),n.__exportStar(o("tFqf"),t),n.__exportStar(o("oI1b"),t),n.__exportStar(o("I7gs"),t),n.__exportStar(o("7+uD"),t)},YmNk:function(e,t,o){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=o("q6I/index.html");function i(e,t,o){if(!e)throw new Error("isActionOf failed. actionCreatorOrCreators is undefined");var n=Array.isArray(e)?e:[e],i=function(e){return n.some((function(t){return!!t&&!!t.getType&&"function"===typeof t.getType&&e.type===t.getType()&&(!o||o(e))}))};return void 0===t?i:i(t)}t.isActionOf=function(e,t){return i(e,t)},t.isSuccessActionOf=function(e,t){return i(e,t,(function(e){return!n.isErrorAction(e)}))},t.isErrorActionOf=function(e,t){return i(e,t,n.isErrorAction)}},"ZN+q":function(e,t,o){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.TimelineOwnerType=void 0,function(e){e.User="User",e.UserStory="UserStory",e.Club="Club",e.Session="Session",e.MatchCard="MatchCard"}(t.TimelineOwnerType||(t.TimelineOwnerType={}))},"ZZL/":function(e,t,o){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const n=o("JIVc");n.__exportStar(o("BHFi"),t),n.__exportStar(o("bgFG"),t),n.__exportStar(o("lWav"),t),n.__exportStar(o("M4Rv"),t),n.__exportStar(o("SZFV"),t),n.__exportStar(o("RwRl"),t),n.__exportStar(o("ViLT"),t),n.__exportStar(o("Jxsh"),t)},a55P:function(e,t,o){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.createAction=function(e,t){var o=t;return o||(o=function(){return{type:e}}),o.getType=function(){return e},o}},bgFG:function(e,t,o){"use strict";Object.defineProperty(t,"__esModule",{value:!0})},"bt8/":function(e,t,o){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.TitleCategory=t.ActivityItemTypes=void 0,function(e){e.Achievement="Achievement",e.Achievements="Achievements",e.Ballot="Ballot",e.BroadcastStart="BroadcastStart",e.BroadcastEnd="BroadcastEnd",e.GameDVR="GameDVR",e.Leaderboard="Leaderboard",e.Lfg="Lfg",e.Screenshot="Screenshot",e.TextPost="TextPost",e.Tournament="Tournament",e.UserPost="UserPost",e.SocialRecommendation="SocialRecommendation",e.Container="Container"}(t.ActivityItemTypes||(t.ActivityItemTypes={})),function(e){e.None="None",e.Global="Global",e.XCloudPlayFeed="XCloudPlayFeed",e.PlayFeed="PlayFeed"}(t.TitleCategory||(t.TitleCategory={}))},chK8:function(e,t,o){"use strict";Object.defineProperty(t,"__esModule",{value:!0})},dsTB:function(e,t,o){"use strict";Object.defineProperty(t,"__esModule",{value:!0})},f8zy:function(e,t,o){"use strict";Object.defineProperty(t,"__esModule",{value:!0})},ft9Z:function(e,t,o){"use strict";Object.defineProperty(t,"__esModule",{value:!0})},"g/TM":function(e,t,o){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ActivityItemSource=void 0,function(e){e.All="all",e.Clubs="clubs",e.Favorites="favorites",e.Friends="friends",e.Games="games",e.None="none",e.Pages="pages",e.Recommendations="recommendations",e.Trending="trending"}(t.ActivityItemSource||(t.ActivityItemSource={}))},hWyi:function(e,t,o){"use strict";o("IAdD"),o("sZjt"),o("udXp"),o("HBCE"),o("6pI8"),o("ReG1"),o("4QA/index.html"),o("OVwY"),o("gpa9"),o("tclo"),o("m6pu"),o("MyZA"),o("3e/+"),o("jeUp"),o("JlMe"),o("dv4H"),o("uYDL"),o("kYxP"),Object.defineProperty(t,"__esModule",{value:!0}),t.FeedSagaManager=t.MAX_COMMENT_LENGTH=void 0;const n=o("JIVc"),i=o("s6Xb"),r=o("OrNH"),s=o("CT5i"),a=o("w0DB"),c=o("DfD7"),d=o("ZZL/index.html"),l=o("Pf0/index.html"),u=o("3roD"),m=o("Ak6n");t.MAX_COMMENT_LENGTH=500;const p=e=>a.lceContent({feedItemLocators:e.feedItems.map(e=>e.locator),continuationToken:e.continuationToken},18e5);let g=class{constructor(e,t,o){this.feedService=e,this.selectors=t,this.logger=o,this.watchForActions=this.watchForActions.bind(this),this.handleGetFeedItem=this.handleGetFeedItem.bind(this),this.handleGetFeedItems=this.handleGetFeedItems.bind(this),this.handleGetClubActivityFeed=this.handleGetClubActivityFeed.bind(this),this.handleGetClubActivityFeedContinued=this.handleGetClubActivityFeedContinued.bind(this),this.handleGetUserActivityFeed=this.handleGetUserActivityFeed.bind(this),this.handleGetUserActivityFeedContinued=this.handleGetUserActivityFeedContinued.bind(this),this.handleGetAggregateStoryFeed=this.handleGetAggregateStoryFeed.bind(this),this.handleGetUserStory=this.handleGetUserStory.bind(this),this.handleGetTrending=this.handleGetTrending.bind(this),this.handleGetTrendingContinued=this.handleGetTrendingContinued.bind(this),this.handleGetFeedItemComments=this.handleGetFeedItemComments.bind(this),this.handleGetFeedItemCommentsContinued=this.handleGetFeedItemCommentsContinued.bind(this),this.handlePostFeedItemComment=this.handlePostFeedItemComment.bind(this),this.handleCreateLink=this.handleCreateLink.bind(this),this.handleGetLinkPreview=this.handleGetLinkPreview.bind(this)}*watchForActions(){yield r.all([r.takeEvery(u.FeedActionType.GetFeedItem,this.handleGetFeedItem),r.takeEvery(u.FeedActionType.GetFeedItems,this.handleGetFeedItems),r.takeLatest(u.FeedActionType.GetClubActivityFeed,this.handleGetClubActivityFeed),r.takeLatest(u.FeedActionType.GetClubActivityFeedContinued,this.handleGetClubActivityFeedContinued),r.takeLatest(u.FeedActionType.GetUserActivityFeed,this.handleGetUserActivityFeed),r.takeLatest(u.FeedActionType.GetUserActivityFeedContinued,this.handleGetUserActivityFeedContinued),r.takeLatest(u.FeedActionType.GetTrending,this.handleGetTrending),r.takeLatest(u.FeedActionType.GetTrendingContinued,this.handleGetTrendingContinued),r.takeLatest(u.FeedActionType.GetAggregateStoryFeed,this.handleGetAggregateStoryFeed),r.takeLatest(u.FeedActionType.GetFeedItemComments,this.handleGetFeedItemComments),r.takeLatest(u.FeedActionType.GetFeedItemCommentsContinued,this.handleGetFeedItemCommentsContinued),r.takeLatest(u.FeedActionType.PostFeedItemComment,this.handlePostFeedItemComment),r.takeLatest(u.FeedActionType.GetUserStory,this.handleGetUserStory),r.takeEvery(u.FeedActionType.CreateLink,this.handleCreateLink),r.takeEvery(u.FeedActionType.GetLinkPreview,this.handleGetLinkPreview)])}*handleGetFeedItemComments(e){var t;const o=null!==(t=e.options.numItems)&&void 0!==t?t:30;let n;try{n=yield r.call([this.feedService,this.feedService.getComments],e.locator,o,e.options)}catch(p){const t=s.toError(p);return this.logger.log("FeedSagaManager-handleGetFeedItemComments",c.LogLevel.Error,"Failed to get comments for ".concat(e.locator,": ").concat(t.message)),void(yield r.put(u.FeedAction.getFeedItemComments.error(e.locator,e.options,t)))}const{comments:i,isCommentThreadLocked:d,continuationToken:l}=n,m={comments:i,isCommentThreadLocked:d,continuationToken:l};yield r.put(u.FeedAction.getFeedItemComments.success(e.locator,a.lceContent(m,18e5)))}*handleGetFeedItemCommentsContinued(e){var t;const o="FeedSagaManager-handleGetFeedItemCommentsContinued",n=yield r.select(t=>this.selectors.getFeedItemCommentsContinuationToken(t,e.locator)),i=null!==(t=e.options.numItems)&&void 0!==t?t:30;if(!n)return this.logger.log(o,c.LogLevel.Warn,"No continuation token present for ".concat(e.locator,";  use doesFeedItemHaveMoreComments to check whether there are more results available")),void(yield r.put(u.FeedAction.getFeedItemCommentsContinued.success(e.locator,{useCache:!0})));const d=Object.assign(Object.assign({},e.options),{continuationToken:n});let l;try{l=yield r.call([this.feedService,this.feedService.getComments],e.locator,i,d)}catch(v){const t=s.toError(v);return this.logger.log(o,c.LogLevel.Error,"Failed to get feed item comments for ".concat(e.locator,": ").concat(t.message)),void(yield r.put(u.FeedAction.getFeedItemCommentsContinued.error(e.locator,d,t)))}const{comments:m,isCommentThreadLocked:p,continuationToken:g}=l,y={comments:m,isCommentThreadLocked:p,continuationToken:g};yield r.put(u.FeedAction.getFeedItemCommentsContinued.success(e.locator,{useCache:!1,content:a.lceContent(y,18e5)}))}*handlePostFeedItemComment(e){const{locator:o,commentText:n,xuid:i}=e;try{if(n.length>t.MAX_COMMENT_LENGTH)throw new Error("Comment too long. Received ".concat(n.length,"."));const e=yield r.call([this.feedService,this.feedService.postComment],o,n,i);yield r.put(u.FeedAction.postFeedItemComment.success(o,e))}catch(a){const e=s.toError(a);yield r.put(u.FeedAction.postFeedItemComment.error(o,e))}}*handleGetFeedItem(e){const t="FeedSagaManager-handleGetFeedItem";try{if(!e.forceRefresh){if(yield r.select(this.selectors.isFeedItemUpToDate,e.itemId)){const t=yield r.select(this.selectors.getFeedItemLCE,e.itemId);return void(yield r.put(u.FeedAction.getFeedItem.success(e.itemId,a.completeFetchWithPrevious(t))))}}const o=yield r.call([this.feedService,this.feedService.getFeedItemPreview],e.itemId);if(o){const t=yield r.select(this.selectors.getViewedFeedItemLocators);yield r.put(u.FeedAction.getFeedItem.success(e.itemId,this.prepareFeedItemForState(t,o)))}else{const o=new Error("Could not hydrate feed item");this.logger.log(t,c.LogLevel.Error,"Error: ".concat(o.message)),yield r.put(u.FeedAction.getFeedItem.success(e.itemId,a.lceError(o)))}}catch(o){const n=s.toError(o);this.logger.log(t,c.LogLevel.Error,"Error: ".concat(n.message)),yield r.put(u.FeedAction.getFeedItem.error(e.itemId,n))}}*handleGetFeedItems(e){const t=new Set,o={},n=yield r.select();for(const r of e.itemIds){if(this.selectors.isFeedItemUpToDate(n,r)){const e=this.selectors.getFeedItemLCE(n,r);o[r]=a.completeFetchWithPrevious(e)}else t.add(r)}if(Object.keys(o).length>0&&(yield r.put(u.FeedAction.getFeedItems.success(o))),t.size>0)try{const e=yield r.call([this.feedService,this.feedService.getBatchFeedItemsPreview],[...t]),o=yield r.select(this.selectors.getViewedFeedItemLocators);yield r.put(u.FeedAction.getFeedItems.success(this.getFeedItemDictionary(e,t,o)))}catch(i){const e=s.toError(i);this.logger.log("FeedSagaManager-handleGetFeedItems",c.LogLevel.Error,"Error: ".concat(e.message)),yield r.put(u.FeedAction.getFeedItems.error([...t],e))}}*handleGetClubActivityFeed(e){let t;try{t=yield r.call([this.feedService,this.feedService.getClubFeed],e.clubId,e.options)}catch(a){const t=s.toError(a);return this.logger.log("FeedSagaManager-handleGetClubActivityFeed",c.LogLevel.Error,"Failed to get club activity feed for ".concat(e.clubId,": ").concat(t.message)),void(yield r.put(u.FeedAction.getClubActivityFeed.error(e.clubId,e.options,t)))}const o=yield r.select(this.selectors.getViewedFeedItemLocators),n=p(t),i=t.feedItems.map(e=>this.prepareFeedItemForState(o,e));yield r.put(u.FeedAction.getClubActivityFeed.success(e.clubId,n,i))}*handleGetClubActivityFeedContinued(e){const t="FeedSagaManager-handleGetClubActivityFeedContinued",o=yield r.select(t=>this.selectors.getClubActivityFeedContinuationToken(t,e.clubId));if(!o)return this.logger.log(t,c.LogLevel.Warn,"No continuation token present for ".concat(e.clubId,"; use doesClubActivityFeedHaveMoreResults to check whether there are more results available")),void(yield r.put(u.FeedAction.getClubActivityFeedContinued.success(e.clubId,{useCache:!0})));const n=Object.assign(Object.assign({},e.options),{continuationToken:o});let i;try{i=yield r.call([this.feedService,this.feedService.getClubFeed],e.clubId,n)}catch(m){const o=s.toError(m);return this.logger.log(t,c.LogLevel.Error,"Failed to get club activity feed for ".concat(e.clubId,": ").concat(o.message)),void(yield r.put(u.FeedAction.getClubActivityFeedContinued.error(e.clubId,e.options,o)))}const a=yield r.select(this.selectors.getViewedFeedItemLocators),d=p(i),l=i.feedItems.map(e=>this.prepareFeedItemForState(a,e));yield r.put(u.FeedAction.getClubActivityFeedContinued.success(e.clubId,{useCache:!1,feed:d,feedItems:l}))}*handleGetUserActivityFeed(e){let t;try{t=yield r.call([this.feedService,this.feedService.getUserFeed],e.xuid,e.options)}catch(i){const t=s.toError(i);return this.logger.log("FeedSagaManager-handleGetUserActivityFeed",c.LogLevel.Error,"Failed to get user activity feed for ".concat(e.xuid,": ").concat(t.message)),void(yield r.put(u.FeedAction.getUserActivityFeed.error(e.xuid,e.options,t)))}const o=p(t),n=t.feedItems.map(e=>a.lceContent(e,this.getCacheTimeForFeedItem(e)));yield r.put(u.FeedAction.getUserActivityFeed.success(e.xuid,o,n))}*handleGetUserActivityFeedContinued(e){const t="FeedSagaManager-handleGetUserActivityFeedContinued",o=yield r.select(t=>this.selectors.getUserActivityFeedContinuationToken(t,e.xuid));if(!o)return this.logger.log(t,c.LogLevel.Warn,"No continuation token present for ".concat(e.xuid,"; use doesUserActivityFeedHaveMoreResults to check whether there are more results available")),void(yield r.put(u.FeedAction.getUserActivityFeedContinued.success(e.xuid,{useCache:!0})));const n=Object.assign(Object.assign({},e.options),{continuationToken:o});let i;try{i=yield r.call([this.feedService,this.feedService.getUserFeed],e.xuid,n)}catch(m){const o=s.toError(m);return this.logger.log(t,c.LogLevel.Error,"Failed to get user activity feed for ".concat(e.xuid,": ").concat(o.message)),void(yield r.put(u.FeedAction.getUserActivityFeedContinued.error(e.xuid,e.options,o)))}const d=p(i),l=i.feedItems.map(e=>a.lceContent(e,this.getCacheTimeForFeedItem(e)));yield r.put(u.FeedAction.getUserActivityFeedContinued.success(e.xuid,{useCache:!1,feed:d,feedItems:l}))}*handleGetTrending(e){try{const t=yield r.call([this.feedService,this.feedService.getTrending],e.options),o=p(t),n=t.feedItems.map(e=>a.lceContent(e,this.getCacheTimeForFeedItem(e)));yield r.put(u.FeedAction.getTrending.success(e.options,o,n))}catch(t){const o=s.toError(t);this.logger.log("FeedSagaManager-handleGetTrending",c.LogLevel.Error,"Failed to get trending feed items for ".concat(e.options.titleCategory,": ").concat(o.message)),yield r.put(u.FeedAction.getTrending.error(e.options,o))}}*handleGetTrendingContinued(e){const t="FeedSagaManager-handleGetTrendingContinued",o=yield r.select(t=>this.selectors.getTrendingContinuationToken(t,e.options.titleCategory));if(!o)return this.logger.log(t,c.LogLevel.Warn,"No continuation token present for ".concat(e.options.titleCategory,"; use doesTrendingHaveMoreResults to check whether there are more results available")),void(yield r.put(u.FeedAction.getTrendingContinued.success(e.options,{useCache:!0})));const n=Object.assign(Object.assign({},e.options),{continuationToken:o});let i;try{i=yield r.call([this.feedService,this.feedService.getTrending],n)}catch(m){const o=s.toError(m);return this.logger.log(t,c.LogLevel.Error,"Failed to get trending feed items for ".concat(e.options.titleCategory,": ").concat(o.message)),void(yield r.put(u.FeedAction.getTrendingContinued.error(e.options,o)))}const d=p(i),l=i.feedItems.map(e=>a.lceContent(e,this.getCacheTimeForFeedItem(e)));yield r.put(u.FeedAction.getTrendingContinued.success(e.options,{useCache:!1,feed:d,feedItems:l}))}*handleGetAggregateStoryFeed(e){const t="FeedSagaManager-handleGetAggregateStoryFeed";if(!e.forceRefresh){if(yield r.select(this.selectors.isAggregateStoryFeedUpToDate,e.options.sources))return this.logger.log(t,c.LogLevel.Info,"Aggregate story feed is cached and unexpired; completing with cached feed"),void(yield r.put(u.FeedAction.getAggregateStoryFeed.success(e.options,{useCache:!0})))}this.logger.log(t,c.LogLevel.Info,"Fetching aggregate story feed");let o,n=e.options;n.startDateTime||(n=Object.assign(Object.assign({},n),{startDateTime:new Date((new Date).getTime()-864e5)}));try{const e=yield r.select(this.selectors.getViewedFeedItemLocators);o=yield r.call([this.feedService,this.feedService.getStoryFeed],n,Object.keys(e))}catch(i){const o=s.toError(i);return this.logger.log(t,c.LogLevel.Error,"Failed to fetch aggregate story feed: ".concat(o.message)),void(yield r.put(u.FeedAction.getAggregateStoryFeed.error(e.options,o)))}this.logger.log(t,c.LogLevel.Info,"Successfully fetched story feed"),yield r.put(u.FeedAction.getAggregateStoryFeed.success(e.options,{useCache:!1,stories:a.lceContent(o.stories,18e5)}))}*handleGetUserStory(e){let t;try{t=yield r.call([this.feedService,this.feedService.getUserStory],e.xuid,Object.assign(Object.assign({},e.options),{startDateTime:e.options.startDateTime||new Date((new Date).getTime()-864e5)}))}catch(m){const t=s.toError(m);return this.logger.log("FeedSagaManager-handleGetUserStory",c.LogLevel.Error,"Error: ".concat(t.message)),void(yield r.put(u.FeedAction.getUserStory.error(e.xuid,t)))}const o=yield r.select(this.selectors.getViewedFeedItemLocators);let n=!0;const i=[],d=t.feedItems.map(e=>{const t=this.prepareFeedItemForState(o,e);return n=n&&t.data.hasViewed,i.push(e.locator),t}),l={itemLocators:i,allViewed:n};yield r.put(u.FeedAction.getUserStory.success(e.xuid,a.lceContent(l,18e5),d))}*handleCreateLink(e){if(!e.forceRefresh){const t=yield r.select(this.selectors.getCreatedLinkLCE,e.locator);if(void 0!==a.getDataOrPrevious(t))return void(yield r.put(u.FeedAction.createLink.success(e.locator,a.completeFetchWithPrevious(t))))}try{const t=yield r.call([this.feedService,this.feedService.createLink],e.locator);yield r.put(u.FeedAction.createLink.success(e.locator,a.lceContent(t)))}catch(t){const o=s.toError(t);this.logger.log("FeedSagaManager-handleCreateLink",c.LogLevel.Error,"Error: ".concat(o.message)),yield r.put(u.FeedAction.createLink.error(e.locator,o))}}*handleGetLinkPreview(e){const{locator:t,anonymous:o,forceRefresh:n}=e;if(!n){if(yield r.select(this.selectors.isLinkPreviewUpToDate,t,o)){const e=yield r.select(this.selectors.getLinkPreviewLCE,t);return void(yield r.put(u.FeedAction.getLinkPreview.success(t,a.completeFetchWithPrevious(e))))}}try{const e=yield r.call([this.feedService,this.feedService.getLinkPreview],t,o);yield r.put(u.FeedAction.getLinkPreview.success(t,a.lceContent({item:e,anonymous:o})))}catch(i){const e=s.toError(i);this.logger.log("FeedSagaManager-handleGetLinkPreview",c.LogLevel.Error,"Error: ".concat(e.message)),yield r.put(u.FeedAction.getLinkPreview.error(t,e))}}getFeedItemDictionary(e,t,o){const n={};for(const i of t){const t=e.get(i);n[i]=null===t?a.lceContent(null,this.getCacheTimeForFeedItem()):t?this.prepareFeedItemForState(o,t):a.lceError(new Error("Feed item not returned by service"))}return n}getCacheTimeForFeedItem(e){if(e&&e.type===d.FeedItemType.GameClip){const t=new Date;let o=e.expirationInMs-t.getTime();return o<=0&&(this.logger.log("FeedSagaManager-getCacheTimeForFeedItem",c.LogLevel.Error,"GameClip has already expired, cache time is ".concat(o)),o=0),o}return Number.MAX_VALUE}mergeHasViewedData(e,t){const o=!!e[t.locator];return Object.assign(Object.assign({},t),{hasViewed:t.hasViewed||o})}prepareFeedItemForState(e,t){const o=this.mergeHasViewedData(e,t);return a.lceContent(o,this.getCacheTimeForFeedItem(o))}};g=n.__decorate([i.injectable(),n.__param(0,i.inject(l.FeedService)),n.__param(1,i.inject(m.FeedSelectors)),n.__param(2,i.inject(c.Logger)),n.__metadata("design:paramtypes",[Object,Object,Object])],g),t.FeedSagaManager=g},"lS/d":function(e,t,o){"use strict";Object.defineProperty(t,"__esModule",{value:!0})},lWav:function(e,t,o){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.TimelineType=t.FeedItemType=void 0,function(e){e.Achievement="Achievement",e.Ballot="Ballot",e.GameClip="GameClip",e.Link="Link",e.Screenshot="Screenshot",e.StoreLink="StoreLink",e.TextPost="TextPost",e.Unknown="Unknown"}(t.FeedItemType||(t.FeedItemType={})),function(e){e[e.User=0]="User",e[e.UserStory=1]="UserStory",e[e.Club=2]="Club"}(t.TimelineType||(t.TimelineType={}))},mup6:function(e,t,o){"use strict";o("IAdD"),o("DZ+c"),o("jQ/y"),o("qK/h"),o("hQIz"),o("9QGs"),o("uuHm"),o("5Z+y"),o("hBgl"),o("8H/u"),o("0NZM"),o("AkTu"),o("pbH6"),o("zZCX"),o("tVjb"),o("AUjp"),o("kYxP"),Object.defineProperty(t,"__esModule",{value:!0}),t.sanitizeContinuationToken=t.mapBatchSummaryResponseToDomain=t.mapEntitySummaryDataToDomain=t.mapDomainTitleCategoryToService=t.mapStoryFeedSourceToActivityItemSource=t.mapStoryFeedResponseToStories=t.mapAchievementFeedItemRarity=t.mapFeedItemToTitleData=t.mapNewFeedItemPayloadToPostContract=t.mapFeedItemSourceArrayToActivityItemSourceArray=t.mapFeedItemTypeArrayToActivityItemTypeArray=t.mapCommentsBatchResponseToDomain=t.mapServiceBallotToDomainBallot=t.mapServiceCommentToDomainComment=t.mapServiceLikeToDomainLike=t.mapBatchResponseToItems=t.mapActivityFeedResponseToDomain=t.mapActivityFeedBatchResponseToDomain=void 0;const n=o("CT5i"),i=o("DfD7"),r=o("ZZL/index.html"),s=o("WQZy");function a(e){const t=n.asString(e);if(!t)throw new n.ValidationError("Value is not a non-empty string",e);return t}const c=n.createStringEnumMatcher(s.TimelineTypes,"TimelineType",n.EnumMatchBehavior.CaseInsensitive);function d(e,t){var o,a,d,l,p,g,y,v,f,h,F;let C,b,T;if(e.timeline)try{T=c(e.timeline.timelineType)}catch(I){null===t||void 0===t||t.log("asTimelineType",i.LogLevel.Warn,"Encountered an unexpected timeline type on a feed item: ".concat(e.timeline.timelineType))}if(e.timeline&&e.timeline.timelineImage&&e.timeline.timelineName){const t={id:n.asString(e.timeline.timelineId),image:n.asString(e.timeline.timelineImage),name:n.asString(e.timeline.timelineName)};switch(T){case s.TimelineTypes.Club:C=Object.assign({type:r.TimelineType.Club,isOfficialClub:null!==(o=n.asOptionalBool(e.timeline.isOfficialClub))&&void 0!==o&&o},t);break;case s.TimelineTypes.User:C=Object.assign({type:r.TimelineType.User},t);break;case s.TimelineTypes.UserStory:C=Object.assign({type:r.TimelineType.UserStory},t)}}else if(e.authorInfo.authorType===s.AuthorTypes.User){const t=n.asOptionalString(e.authorInfo.id),o=n.asOptionalString(e.authorInfo.imageUrl),i=n.asOptionalString(e.authorInfo.name),c=null!==(a=n.asOptionalString(e.authorInfo.modernGamertag))&&void 0!==a?a:i,d=n.asOptionalString(e.authorInfo.modernGamertagSuffix),l=n.asOptionalString(e.authorInfo.secondName),u=T===s.TimelineTypes.UserStory?r.TimelineType.UserStory:r.TimelineType.User;t&&o&&i&&(C={type:u,id:t,image:o,name:i}),b={gamertag:c,modernGamertagSuffix:d,name:l,gamerpicUrl:o}}const S={authorXuid:n.asString(e.authorInfo.id),authorInfo:b,commentCount:null!==(d=n.asOptionalNumber(e.numComments))&&void 0!==d?d:0,likeCount:null!==(l=n.asOptionalNumber(e.numLikes))&&void 0!==l?l:0,shareCount:null!==(p=n.asOptionalNumber(e.numShares))&&void 0!==p?p:0,itemViewCount:null!==(g=n.asOptionalNumber(e.numViews))&&void 0!==g?g:0,hasLiked:null!==(y=n.asOptionalBool(e.hasLiked))&&void 0!==y&&y,postedDateInMs:n.asDate(e.date).getTime(),pinned:null!==(v=n.asOptionalBool(e.pinned))&&void 0!==v&&v,ugcCaption:n.asOptionalString(e.ugcCaption),itemText:n.asString(e.itemText),locator:n.asString(e.itemRoot),timeline:C,hasViewed:null!==(f=n.asOptionalBool(e.hasViewed))&&void 0!==f&&f,id:n.asString(e.feedItemId),itemSource:n.asOptionalString(e.itemSource)};switch(e.activityItemType){case s.ActivityItemTypes.Screenshot:return Object.assign({type:r.FeedItemType.Screenshot,screenshotId:n.asString(e.screenshotId),originalContentUri:n.asString(e.itemImage),previewThumbnailUri:n.asString(e.itemImage),viewCount:n.asNumber(e.viewCount),title:u(e)},S);case s.ActivityItemTypes.GameDVR:return Object.assign({type:r.FeedItemType.GameClip,clipId:n.asString(e.clipId),originalContentUri:n.asString(e.downloadUri),previewThumbnailUri:n.asString(e.itemImage),expirationInMs:n.asDate(e.gameMediaContentLocators[0].Expiration).getTime(),viewCount:n.asNumber(e.viewCount),title:u(e)},S);case s.ActivityItemTypes.TextPost:return Object.assign({type:r.FeedItemType.TextPost},S);case s.ActivityItemTypes.Ballot:{const t=e;return Object.assign({type:r.FeedItemType.Ballot,question:n.asString(t.PollQuestion),closeDateInMs:n.asDate(t.EndTime).getTime(),canVote:n.asBool(t.CanVote),myChoice:n.asNumber(t.MyChoice),choices:t.Choices.map(e=>({choice:n.asString(e.Choice),numVotes:n.asNumber(e.NumVotes),voteUri:n.asString(e.VoteUri)})),pollId:n.asString(t.PollId),creatorId:"string"===typeof t.CreatorId?t.CreatorId:n.asNumber(t.CreatorId).toString()},S)}case s.ActivityItemTypes.Achievement:{const t=e;return Object.assign({type:r.FeedItemType.Achievement,achievementId:n.asString(t.achievementId),titleName:n.asString(t.contentTitle),name:n.asString(t.achievementName),description:n.asString(t.achievementDescription),itemImage:n.asString(t.itemImage),gamerscore:null!==(h=n.asOptionalNumber(t.gamerscore))&&void 0!==h?h:0,title:Object.assign(Object.assign({},u(t)),{scid:t.achievementScid}),rarity:m(t),isSecret:null!==(F=n.asOptionalBool(t.isSecret))&&void 0!==F&&F},S)}case s.ActivityItemTypes.UserPost:return"PostV2"===e.postType?e.postDetails.links?Object.assign({type:r.FeedItemType.StoreLink,postType:n.asString(e.postType),itemImage:n.asOptionalString(e.itemImage),postDetails:{title:n.asString(e.postDetails.title),description:n.asOptionalString(e.postDetails.description),links:e.postDetails.links.map(e=>({link:n.asString(e.link),linkType:n.asString(e.linkType),displayLink:n.asString(e.displayLink)}))}},S):Object.assign({type:r.FeedItemType.Unknown},S):Object.assign({type:r.FeedItemType.Link,postType:n.asString(e.postType),itemImage:n.asString(e.itemImage),postDetails:{title:n.asString(e.postDetails.title),description:n.asOptionalString(e.postDetails.description),link:n.asString(e.postDetails.link),displayLink:n.asString(e.postDetails.displayLink),linkType:n.asString(e.postDetails.linkType)}},S);default:return Object.assign({type:r.FeedItemType.Unknown},S)}}function l(e,t,o,r){var s;try{return{id:n.asString(e.id),xuid:n.asString(e.xuid),text:n.asString(e.text),postedTimeInMs:n.asDate(e.date).getTime(),numLikes:null!==(s=null===t||void 0===t?void 0:t.likeCount)&&void 0!==s?s:0,isLiked:!!o,path:n.asString(e.path),rootPath:n.asString(e.rootPath)}}catch(a){null===r||void 0===r||r.log("mapServiceCommentToDomainComment",i.LogLevel.Warn,"Failed to parse comment ".concat(null===e||void 0===e?void 0:e.id,": ").concat(n.toError(a)))}}function u(e){const t=n.asObjectWithSchema(e,{titleId:n.asString,contentTitle:n.asString,contentImageUri:n.asOptionalString});return{titleId:t.titleId,name:t.contentTitle,imageUri:t.contentImageUri}}function m(e){const{rarityCategory:t,rarityPercentage:o}=n.asObjectWithSchema(e,{rarityCategory:n.asOptionalString,rarityPercentage:n.asOptionalNumber});if(t&&void 0!==o)return{isRare:"Rare"===t,rarityPercentage:o}}t.mapActivityFeedBatchResponseToDomain=function(e,t){const o=new Map;if(e.activityItems)for(const s of e.activityItems)try{o.set(s.itemRoot,d(s))}catch(r){null===t||void 0===t||t.log("mapActivityFeedBatchResponseToDomain",i.LogLevel.Error,"Error mapping feed item: ".concat(n.toError(r).message)),s.itemRoot&&o.set(s.itemRoot,null)}return o},t.mapActivityFeedResponseToDomain=function(e,t){if(e.item){const r=e.item;try{return d(r)}catch(o){null===t||void 0===t||t.log("mapActivityFeedResponseToDomain",i.LogLevel.Warn,"Failed to parse activityFeedItem ".concat(null===r||void 0===r?void 0:r.itemRoot," in activityFeedResponse: ").concat(n.toError(o)))}}return null},t.mapBatchResponseToItems=function(e,t){return n.asCompactArray(e.activityItems,e=>d(e),(e,o)=>{null===t||void 0===t||t.log("mapBatchResponseToItems",i.LogLevel.Warn,"Failed to parse activityFeedItem ".concat(e.itemRoot," in activityFeedBatchResponse. Error: ").concat(o.message))})},t.mapServiceLikeToDomainLike=function(e,t){try{return{id:n.asString(e.id),xuid:n.asString(e.xuid),postedTimeInMs:n.asDate(e.date).getTime()}}catch(o){null===t||void 0===t||t.log("mapServiceLikeToDomainLike",i.LogLevel.Warn,"Failed to parse like ".concat(null===e||void 0===e?void 0:e.id,": ").concat(n.toError(o)))}},t.mapServiceCommentToDomainComment=l,t.mapServiceBallotToDomainBallot=function(e,t){try{return{question:n.asString(e.PollQuestion),closeDateInMs:n.asDate(e.EndTime).getTime(),canVote:n.asBool(e.CanVote),myChoice:n.asNumber(e.MyChoice),choices:e.Choices.map(e=>({choice:n.asString(e.Choice),numVotes:n.asNumber(e.NumVotes),voteUri:n.asString(e.VoteUri)})),pollId:n.asString(e.PollId),creatorId:n.asString(e.CreatorId)}}catch(o){null===t||void 0===t||t.log("mapServiceBallotToDomainBallot",i.LogLevel.Warn,"Failed to parse ballot ".concat(null===e||void 0===e?void 0:e.PollId,": ").concat(n.toError(o)))}},t.mapCommentsBatchResponseToDomain=function(e,t,o,n){const r=[];if(e.comments){t&&t.length!==e.comments.length&&(null===n||void 0===n||n.log("mapCommentsBatchResponseToDomain",i.LogLevel.Error,"Number of summaries (".concat(t.length,") does not match the number of comments (").concat(e.comments.length,"). Ignoring the summaries.")),t=void 0),o&&o.length!==e.comments.length&&(null===n||void 0===n||n.log("mapCommentsBatchResponseToDomain",i.LogLevel.Error,"Number of user likes (".concat(o.length,") does not match the number of comments (").concat(e.comments.length,"). Ignoring the user likes.")),o=void 0);for(let i=0;i<e.comments.length;i++){const s=l(e.comments[i],null===t||void 0===t?void 0:t[i],null===o||void 0===o?void 0:o[i],n);s&&r.push(s)}}return r},t.mapFeedItemTypeArrayToActivityItemTypeArray=function(e){return null===e||void 0===e?void 0:e.map(e=>{switch(e){case r.FeedItemType.Ballot:return s.ActivityItemTypes.Ballot;case r.FeedItemType.GameClip:return s.ActivityItemTypes.GameDVR;case r.FeedItemType.Link:case r.FeedItemType.StoreLink:return s.ActivityItemTypes.UserPost;case r.FeedItemType.Screenshot:return s.ActivityItemTypes.Screenshot;case r.FeedItemType.TextPost:return s.ActivityItemTypes.TextPost;case r.FeedItemType.Achievement:return s.ActivityItemTypes.Achievement;case r.FeedItemType.Unknown:throw new n.ValidationError("FeedItemType.Unknown is not supported");default:{const t=e;throw new n.ValidationError("Unable to convert FeedItemType: ".concat(t))}}})},t.mapFeedItemSourceArrayToActivityItemSourceArray=function(e){return null===e||void 0===e?void 0:e.map(e=>{switch(e){case r.FeedItemSource.All:return s.ActivityItemSource.All;case r.FeedItemSource.Clubs:return s.ActivityItemSource.Clubs;case r.FeedItemSource.Favorites:return s.ActivityItemSource.Favorites;case r.FeedItemSource.Friends:return s.ActivityItemSource.Friends;case r.FeedItemSource.Games:return s.ActivityItemSource.Games;case r.FeedItemSource.None:return s.ActivityItemSource.None;case r.FeedItemSource.Pages:return s.ActivityItemSource.Pages;case r.FeedItemSource.Recommendations:return s.ActivityItemSource.Recommendations;case r.FeedItemSource.Trending:return s.ActivityItemSource.Trending;default:{const t=e;throw new n.ValidationError("Unable to convert FeedItemSource: ".concat(t))}}})},t.mapNewFeedItemPayloadToPostContract=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:s.TimelineOwnerType.User;const o={postText:e.postText,timelines:[{timelineType:t,timelineOwner:e.xuid}]};switch(e.postType){case r.FeedItemType.TextPost:return Object.assign({postType:s.PostType.Text},o);case r.FeedItemType.Screenshot:case r.FeedItemType.GameClip:return Object.assign({postType:s.PostType.XboxLink,postTypeData:{locator:e.locator}},o);case r.FeedItemType.Ballot:return Object.assign({postType:s.PostType.Ballot,postTypeData:{pollId:e.pollId,creatorId:e.creatorId}},o);case r.FeedItemType.Achievement:return Object.assign({postType:s.PostType.XboxLink,postTypeData:{locator:"achievements.xboxlive.com/users/xuid(".concat(e.xuid,")/achievements/index.html").concat(e.scid,"https://www.xbox.com/").concat(e.achievementId)}},o);default:{const t=e;throw new n.ValidationError("Unable to convert payload: ".concat(t))}}},t.mapFeedItemToTitleData=u,t.mapAchievementFeedItemRarity=m;const p=e=>n.asArray(e,a),g=e=>n.asBool(e);function y(e){if(!e)throw new n.ValidationError("Invalid storySource");const t=e,o=n.asObjectWithSchema(t,{itemLocators:p,allViewed:g}),i=a(t.sourceID);switch(t.sourceType){case s.StorySourceType.Club:return Object.assign({type:r.StorySourceType.Club,clubId:i},o);case s.StorySourceType.User:return Object.assign({type:r.StorySourceType.User,xuid:i},o);default:{const e=t.sourceType;throw new n.ValidationError("Unknown story source type: ".concat(e))}}}function v(e,t){var o,i;const r=null===(o=e.relationshipCounts)||void 0===o?void 0:o.find(e=>"TotalViews"===e.relationshipCountType),s=null===(i=e.relationshipCounts)||void 0===i?void 0:i.find(e=>"UniqueViews"===e.relationshipCountType);return{path:t,rootPath:n.asString(e.path),likeCount:n.asNumber(e.likeCount),commentCount:n.asNumber(e.commentCount),shareCount:n.asNumber(e.shareCount),totalViewCount:n.asOptionalNumber(null===r||void 0===r?void 0:r.relationshipCount),uniqueViewCount:n.asOptionalNumber(null===s||void 0===s?void 0:s.relationshipCount)}}t.mapStoryFeedResponseToStories=function(e){return n.asArray(null===e||void 0===e?void 0:e.storySources,y)},t.mapStoryFeedSourceToActivityItemSource=function(e){switch(e){case r.StoryFeedSource.All:return s.ActivityItemSource.All;case r.StoryFeedSource.Games:return s.ActivityItemSource.Games;case r.StoryFeedSource.Friends:return s.ActivityItemSource.Friends;default:{const t=e;throw new n.ValidationError("Unable to convert StorySourceType: ".concat(t))}}},t.mapDomainTitleCategoryToService=function(e){switch(e){case r.TitleCategory.None:return s.TitleCategory.None;case r.TitleCategory.Global:return s.TitleCategory.Global;case r.TitleCategory.XCloudPlayFeed:return s.TitleCategory.XCloudPlayFeed;case r.TitleCategory.PlayFeed:return s.TitleCategory.PlayFeed;default:{const t=e;throw new n.ValidationError("Unable to convert TitleCategory: ".concat(t))}}},t.mapEntitySummaryDataToDomain=v,t.mapBatchSummaryResponseToDomain=function(e,t,o){const r=[];return e.summaries.length===t.length?e.summaries.forEach((e,s)=>{try{r.push(v(e,t[s]))}catch(a){null===o||void 0===o||o.log("mapBatchSummaryResponseToDomain",i.LogLevel.Warn,"Failed to parse summary for ".concat(t[s],": ").concat(n.toError(a)))}}):null===o||void 0===o||o.log("mapBatchSummaryResponseToDomain",i.LogLevel.Warn,"Failed to parse summaries: mismatch in number of expected results. Requested ".concat(t.length," locators. Received ").concat(e.summaries.length," summaries from the service.")),r},t.sanitizeContinuationToken=function(e){if(e&&"string"===typeof e&&"0"!==e)return e}},oI1b:function(e,t,o){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const n=o("JIVc");n.__exportStar(o("UmsL"),t),n.__exportStar(o("SZNj"),t),n.__exportStar(o("lS/d"),t),n.__exportStar(o("Tnco"),t),n.__exportStar(o("f8zy"),t),n.__exportStar(o("wc59"),t),n.__exportStar(o("QPz5"),t),n.__exportStar(o("/5yt"),t)},obip:function(e,t,o){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.lceTransform=void 0;var n=o("JIVc"),i=o("V4bc"),r=o("4khb");t.lceTransform=function(e,o){return i.isNotRequested(e)?r.lceNotRequested():i.isFetching(e)?e.previousContent?r.lceFetching(t.lceTransform(e.previousContent,o)):r.lceFetching():i.isError(e)?e.previousContent?n.__assign(n.__assign({},r.lceError(e.error)),{previousContent:{data:o(e.previousContent.data),lastFetched:e.previousContent.lastFetched,cacheTimeInMS:e.previousContent.cacheTimeInMS}}):r.lceError(e.error):r.lceContent(o(e.data),e.cacheTimeInMS,new Date(e.lastFetched))}},ptLC:function(e,t,o){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=o("JIVc");n.__exportStar(o("a55P"),t),n.__exportStar(o("vtqD"),t),n.__exportStar(o("vHrc"),t),n.__exportStar(o("YmNk"),t),n.__exportStar(o("q6I/index.html"),t)},"q6I/":function(e,t,o){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.isErrorAction=function(e){return!!(e&&e.type&&e.error)}},rNnW:function(e,t,o){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.lceSelect=void 0;var n=o("V4bc");t.lceSelect=function(e,t){return n.isNotRequested(e)?t.isNotRequested?t.isNotRequested():t.default&&t.default(e):n.isFetching(e)?t.isFetching?t.isFetching(e):t.default&&t.default(e):n.isContent(e)?t.content?t.content(e):t.default&&t.default(e):n.isError(e)&&t.error?t.error(e):t.default&&t.default(e)}},t2Ci:function(e,t,o){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const n=o("JIVc");n.__exportStar(o("94rg"),t),n.__exportStar(o("chK8"),t),n.__exportStar(o("g/TM"),t),n.__exportStar(o("R8kO"),t),n.__exportStar(o("HyHF"),t),n.__exportStar(o("bt8/index.html"),t),n.__exportStar(o("ft9Z"),t),n.__exportStar(o("VlVw"),t),n.__exportStar(o("7Ipv"),t),n.__exportStar(o("dsTB"),t)},tFqf:function(e,t,o){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.BallotResultAvailability=void 0,function(e){e[e.BeforeVoting=0]="BeforeVoting",e[e.AfterVoting=1]="AfterVoting",e[e.AfterClose=2]="AfterClose"}(t.BallotResultAvailability||(t.BallotResultAvailability={}))},vHrc:function(e,t,o){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getType=function(e){if(!e)throw new Error("Argument 'actionCreator' is null");if("function"!==typeof e||!("getType"in e)||"function"!==typeof e.getType)throw new Error("Invalid action creator does not have 'getType'");return e.getType()}},vtqD:function(e,t,o){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.createAsyncAction=function(e,t,o,n,i){var r=o;r.getType=function(){return e};var s=n;s.getType=function(){return t};var a=i;return a.getType=function(){return t},{start:r,success:s,error:a}}},w0DB:function(e,t,o){"use strict";e.exports=o("JqKr")},wc59:function(e,t,o){"use strict";Object.defineProperty(t,"__esModule",{value:!0})},"zQW/":function(e,t,o){"use strict";var n,i,r,s,a,c,d;o("JtPf"),o("qK/h"),o("hQIz"),o("9QGs"),o("uuHm"),o("5Z+y"),o("hBgl"),o("8H/u"),o("0NZM"),o("AkTu"),o("pbH6"),o("zZCX"),o("tVjb"),o("AUjp"),o("kYxP"),o("IAdD"),o("3voH"),o("P2R4"),Object.defineProperty(t,"__esModule",{value:!0}),t.XblFeedService=void 0;const l=o("JIVc"),u=o("s6Xb"),m=o("CT5i"),p=o("E0xh"),g=o("rzN3"),y=o("9v3z"),v=o("DfD7"),f=o("mup6"),h=o("WQZy");let F=class{constructor(e,t,o,u,m,v){n.set(this,void 0),i.set(this,void 0),r.set(this,void 0),s.set(this,void 0),a.set(this,void 0),c.set(this,void 0),d.set(this,void 0);const f=(new p.HttpClientBuilder).requestInterceptor(new y.AcceptLanguageInterceptor(t)).requestInterceptor(new y.CorrelationVectorInterceptor(o)).requestInterceptor(new y.ContentRestrictionInterceptor(u)).interceptors(m);l.__classPrivateFieldSet(this,i,f.build()),l.__classPrivateFieldSet(this,n,f.authenticator(new g.TokenAuthenticator(e)).build()),l.__classPrivateFieldSet(this,r,p.RequestFactory.withBaseUrl("https://avty.xboxlive.com/").setCommonHeaders({[p.HttpHeader.XXBLContractVersion]:"18",[p.HttpHeader.Accept]:"application/json"})),l.__classPrivateFieldSet(this,s,p.RequestFactory.withBaseUrl("https://ballotbox.xboxlive.com/").setCommonHeaders({[p.HttpHeader.XXBLContractVersion]:"2",[p.HttpHeader.Accept]:"application/json"})),l.__classPrivateFieldSet(this,a,p.RequestFactory.withBaseUrl("https://comments.xboxlive.com/").setCommonHeaders({[p.HttpHeader.XXBLContractVersion]:"3"})),l.__classPrivateFieldSet(this,c,p.RequestFactory.withBaseUrl("https://userposts.xboxlive.com/").setCommonHeaders({[p.HttpHeader.XXBLContractVersion]:"2"})),l.__classPrivateFieldSet(this,d,v)}async createPoll(e){if(e.choices.length<2||e.choices.length>3)throw new Error("Polls must be created with exactly 2 or 3 choices");const t=l.__classPrivateFieldGet(this,s).post("users/me/ballots",JSON.stringify({PollQuestion:e.question,Choices:e.choices,EndTime:new Date(e.endTimeMS).toISOString()}),{headers:{[p.HttpHeader.ContentType]:"application/json"}}),o=await l.__classPrivateFieldGet(this,n).execute(t),i=f.mapServiceBallotToDomainBallot(o.data,l.__classPrivateFieldGet(this,d));if(!i)throw new m.ValidationError("Could not map ballot response to expected client contract");return i}async getFeedItemPreview(e){const t=l.__classPrivateFieldGet(this,r).post("preview",JSON.stringify({locator:e}),{headers:{[p.HttpHeader.ContentType]:"application/json"}}),o=(await l.__classPrivateFieldGet(this,n).execute(t)).data;return o?f.mapActivityFeedResponseToDomain(o,l.__classPrivateFieldGet(this,d)):null}async getBatchFeedItemsPreview(e){const t=l.__classPrivateFieldGet(this,r).post("preview/batch",JSON.stringify({locators:e}),{headers:{[p.HttpHeader.ContentType]:"application/json"}}),o=(await l.__classPrivateFieldGet(this,n).execute(t)).data;return o?f.mapActivityFeedBatchResponseToDomain(o,l.__classPrivateFieldGet(this,d)):(l.__classPrivateFieldGet(this,d).log("getBatchFeedItemsPreview",v.LogLevel.Warn,"No Feed items returned from service"),new Map)}async getClubFeed(e,t){let o={numItems:t.numItems};t.pollingToken&&(o=Object.assign(o,{pollingToken:t.pollingToken})),t.continuationToken&&(o=Object.assign(o,{contToken:t.continuationToken}));const s="clubs/clubId(".concat(e,")/activity/feed"),a=l.__classPrivateFieldGet(this,r).get(s,{params:o}),c=(t.isAnonymous?await l.__classPrivateFieldGet(this,i).execute(a):await l.__classPrivateFieldGet(this,n).execute(a)).data;return{feedItems:f.mapBatchResponseToItems(c,l.__classPrivateFieldGet(this,d)),pollingToken:m.asString(c.pollingToken),continuationToken:f.sanitizeContinuationToken(c.contToken)}}async getUserFeed(e,t){let o={numItems:t.numItems};t.pollingToken&&(o=Object.assign(o,{pollingToken:t.pollingToken})),t.continuationToken&&(o=Object.assign(o,{contToken:t.continuationToken}));const i=f.mapFeedItemTypeArrayToActivityItemTypeArray(t.itemTypes);i&&(o=Object.assign(o,{activityTypes:i.join(";")}));const s="timelines/user/".concat(e),a=l.__classPrivateFieldGet(this,r).get(s,{params:o}),c=(await l.__classPrivateFieldGet(this,n).execute(a)).data;return{feedItems:f.mapBatchResponseToItems(c,l.__classPrivateFieldGet(this,d)),pollingToken:m.asString(c.pollingToken),continuationToken:f.sanitizeContinuationToken(c.contToken)}}async getActivityFeed(e){var t;let o={numItems:e.numItems,includeSelf:JSON.stringify(null===(t=e.includeSelf)||void 0===t||t)};e.startDateTime&&(o=Object.assign(o,{startDateTime:e.startDateTime.toISOString()}));const i=f.mapFeedItemTypeArrayToActivityItemTypeArray(e.itemTypes);i&&(o=Object.assign(o,{activityTypes:i.join(";")}));const s=f.mapFeedItemSourceArrayToActivityItemSourceArray(e.sources);s&&(o=Object.assign(o,{scope:s.join(";")})),e.pollingToken&&(o=Object.assign(o,{pollingToken:e.pollingToken})),e.continuationToken&&(o=Object.assign(o,{contToken:e.continuationToken}));const a=l.__classPrivateFieldGet(this,r).get("users/me/XboxFeed",{params:o}),c=(await l.__classPrivateFieldGet(this,n).execute(a)).data;return{feedItems:f.mapBatchResponseToItems(c,l.__classPrivateFieldGet(this,d)),pollingToken:m.asString(c.pollingToken),continuationToken:f.sanitizeContinuationToken(c.contToken)}}async getUserStory(e,t){const o="users/xuid(".concat(e,")/stories"),i={};t.startDateTime&&(i.startDateTime=t.startDateTime.toISOString()),t.endDateTime&&(i.endDateTime=t.endDateTime.toISOString()),t.continuationToken&&(i.continuationToken=t.continuationToken);const s=f.mapFeedItemTypeArrayToActivityItemTypeArray(t.itemTypes);s&&(i.activityTypes=s.join(";"));const a=l.__classPrivateFieldGet(this,r).get(o,{params:i}),c=(await l.__classPrivateFieldGet(this,n).execute(a)).data;return{feedItems:f.mapBatchResponseToItems(c,l.__classPrivateFieldGet(this,d)),pollingToken:m.asString(c.pollingToken),continuationToken:f.sanitizeContinuationToken(c.contToken)}}async getStoryFeed(e,t){const o={viewedLocators:t},i={};e.sources&&(i.scope=e.sources.map(f.mapStoryFeedSourceToActivityItemSource).join(";"));const s=f.mapFeedItemTypeArrayToActivityItemTypeArray(e.itemTypes);s&&(i.activityTypes=s.join(";")),e.startDateTime&&(i.startDateTime=e.startDateTime.toISOString()),e.endDateTime&&(i.endDateTime=e.endDateTime.toISOString());const a=l.__classPrivateFieldGet(this,r).post("users/me/StoryFeed",JSON.stringify(o),{params:i,headers:{[p.HttpHeader.ContentType]:"application/json"}}),c=await l.__classPrivateFieldGet(this,n).execute(a);return{stories:f.mapStoryFeedResponseToStories(c.data)}}async getComments(e,t,o){var i,r;let s={maxItems:t};o.continuationToken&&(s=Object.assign(s,{continuationToken:o.continuationToken}));const c="".concat(e,"/comments"),u=l.__classPrivateFieldGet(this,a).get(c,{params:s}),m=await l.__classPrivateFieldGet(this,n).execute(u);if(m.status>=300||!m.data)throw new Error("Failed to get comments: status ".concat(m.status,", text ").concat(m.statusText));const p=m.data,g=null!==(i=p.commentThreadLocked)&&void 0!==i&&i;if(!(null===(r=p.comments)||void 0===r?void 0:r.length))return{comments:[],isCommentThreadLocked:g,continuationToken:f.sanitizeContinuationToken(p.continuationToken)};const y=p.comments.map(e=>e.path),[v,h]=await Promise.all([this.getBatchSummaries(y).catch(e=>{}),this.getBatchLikesForUser(y).catch(e=>{})]);return{comments:f.mapCommentsBatchResponseToDomain(p,v,h,l.__classPrivateFieldGet(this,d)),isCommentThreadLocked:g,continuationToken:f.sanitizeContinuationToken(p.continuationToken)}}async postComment(e,t,o){const i="".concat(e,"/comments"),r=l.__classPrivateFieldGet(this,a).post(i,JSON.stringify({text:t,xuid:o}),{headers:{[p.HttpHeader.ContentType]:"application/json"}}),s=await l.__classPrivateFieldGet(this,n).execute(r);if(s.status>=300||!s.data)throw new Error("Failed to post comment: status ".concat(s.status,", text ").concat(s.statusText));const c=f.mapServiceCommentToDomainComment(s.data,void 0,void 0,l.__classPrivateFieldGet(this,d));if(!c)throw new Error("Failed to convert response to a FeedItemComment");return c}async deleteComment(e,t){const o="".concat(e,"https://www.xbox.com/comments/").concat(t),i=l.__classPrivateFieldGet(this,a).delete(o),r=await l.__classPrivateFieldGet(this,n).execute(i);if(r.status>=300)throw new Error("Failed to delete comment: status ".concat(r.status,", text ").concat(r.statusText))}async likeItem(e){const t="".concat(e,"/likes/me"),o=l.__classPrivateFieldGet(this,a).put(t),i=await l.__classPrivateFieldGet(this,n).execute(o);if(i.status>=300||!i.data)throw new Error("Failed to add like: status ".concat(i.status,", text ").concat(i.statusText));const r=f.mapServiceLikeToDomainLike(i.data,l.__classPrivateFieldGet(this,d));if(!r)throw new Error("Failed to convert response to a FeedItemLike");return r}async unlikeItem(e){const t="".concat(e,"/likes/me"),o=l.__classPrivateFieldGet(this,a).delete(t),i=await l.__classPrivateFieldGet(this,n).execute(o);if(i.status>=300)throw new Error("Failed to remove like: status ".concat(i.status,", text ").concat(i.statusText))}async likeComment(e,t){const o="".concat(e,"https://www.xbox.com/comments/").concat(t,"/likes/me"),i=l.__classPrivateFieldGet(this,a).put(o),r=await l.__classPrivateFieldGet(this,n).execute(i);if(r.status>=300||!r.data)throw new Error("Failed to add like: status ".concat(r.status,", text ").concat(r.statusText));const s=f.mapServiceLikeToDomainLike(r.data,l.__classPrivateFieldGet(this,d));if(!s)throw new Error("Failed to convert response to a FeedItemLike");return s}async unlikeComment(e,t){const o="".concat(e,"https://www.xbox.com/comments/").concat(t,"/likes/me"),i=l.__classPrivateFieldGet(this,a).delete(o),r=await l.__classPrivateFieldGet(this,n).execute(i);if(r.status>=300)throw new Error("Failed to remove like: status ".concat(r.status,", text ").concat(r.statusText))}async castVote(e){const t="".concat(e),o=l.__classPrivateFieldGet(this,s).put(t),i=await l.__classPrivateFieldGet(this,n).execute(o);if(i.status>=300||!i.data)throw new Error("Failed to cast vote: status ".concat(i.status,", text ").concat(i.statusText));const r=f.mapServiceBallotToDomainBallot(i.data,l.__classPrivateFieldGet(this,d));if(!r)throw new Error("Failed to convert response to a BallotData");return r}postToFeed(e){return this.postToTimeline(e,h.TimelineOwnerType.User)}postToStory(e){return this.postToTimeline(e,h.TimelineOwnerType.UserStory)}async deletePost(e){const t={url:e.startsWith("http://")||e.startsWith("https:///")?e:"https://"+e,headers:{[p.HttpHeader.XXBLContractVersion]:"3"},method:"delete"},o=await l.__classPrivateFieldGet(this,n).execute(t);if(o.status>=300)throw new Error("Failed to delete post: status ".concat(o.status,", text ").concat(o.statusText))}async getSummary(e){const t="".concat(e,"/summary"),o=l.__classPrivateFieldGet(this,a).get(t),i=(await l.__classPrivateFieldGet(this,n).execute(o)).data;return f.mapEntitySummaryDataToDomain(i,e)}async getBatchSummaries(e){const t=l.__classPrivateFieldGet(this,a).post("summaries/batch",JSON.stringify({rootPaths:e}),{headers:{[p.HttpHeader.ContentType]:"application/json"}}),o=(await l.__classPrivateFieldGet(this,n).execute(t)).data;return f.mapBatchSummaryResponseToDomain(o,e,l.__classPrivateFieldGet(this,d))}async getBatchLikesForUser(e){var t;const o=l.__classPrivateFieldGet(this,a).post("users/me/likes/batch",JSON.stringify({rootPaths:e}),{headers:{[p.HttpHeader.ContentType]:"application/json"}}),i=await l.__classPrivateFieldGet(this,n).execute(o);if(i.status>=300||!i.data)throw new Error("Failed to get batch likes for a user: status ".concat(i.status,", text ").concat(i.statusText));return null!==(t=i.data.likes)&&void 0!==t?t:[]}async createLink(e){var t;const o=l.__classPrivateFieldGet(this,r).post("links/create",JSON.stringify({locator:e}),{headers:{[p.HttpHeader.ContentType]:"application/json"}}),i=await l.__classPrivateFieldGet(this,n).execute(o);if(!(null===(t=i.data)||void 0===t?void 0:t.target))throw new Error("Failed to get target for created link: status ".concat(i.status,", text ").concat(i.statusText));return m.asString(i.data.target)}async getLinkPreview(e,t){const o=l.__classPrivateFieldGet(this,r).post("links/preview",JSON.stringify({target:e}),{headers:{[p.HttpHeader.ContentType]:"application/json"}}),s=t?await l.__classPrivateFieldGet(this,i).execute(o):await l.__classPrivateFieldGet(this,n).execute(o);if(204===s.status)return null;const a=s.data;if(!a)throw new Error("Failed to get link preview, no data");const c=f.mapActivityFeedResponseToDomain(a,l.__classPrivateFieldGet(this,d));if(!c)throw new Error("Failed to map link preview response");return c}async getTrending(e){let t={numItems:e.numItems};const o=f.mapDomainTitleCategoryToService(e.titleCategory);o&&(t=Object.assign(t,{titleCategory:o}));const i=f.mapFeedItemTypeArrayToActivityItemTypeArray(e.itemTypes);i&&(t=Object.assign(t,{activityTypes:i.join(";")})),e.pollingToken&&(t=Object.assign(t,{pollingToken:e.pollingToken})),e.continuationToken&&(t=Object.assign(t,{contToken:e.continuationToken}));const s=l.__classPrivateFieldGet(this,r).get("trending",{params:t}),a=(await l.__classPrivateFieldGet(this,n).execute(s)).data;return{feedItems:f.mapBatchResponseToItems(a,l.__classPrivateFieldGet(this,d)),pollingToken:m.asString(a.pollingToken),continuationToken:f.sanitizeContinuationToken(a.contToken)}}async addView(e){const t="".concat(e,"/relationships/view/me"),o=l.__classPrivateFieldGet(this,a).put(t),i=await l.__classPrivateFieldGet(this,n).execute(o);if(i.status>=300||!i.data)throw new Error("Failed to add view: status ".concat(i.status,", text ").concat(i.statusText))}async getUnsharedActivity(e){let t={numItems:e.numItems};const o=f.mapFeedItemTypeArrayToActivityItemTypeArray(e.itemTypes);o&&(t=Object.assign(t,{activityTypes:o.join(";")}));const i=l.__classPrivateFieldGet(this,r).get("users/me/activity/history/unshared",{params:t}),s=(await l.__classPrivateFieldGet(this,n).execute(i)).data;return f.mapBatchResponseToItems(s,l.__classPrivateFieldGet(this,d))}async postToTimeline(e,t){const o=f.mapNewFeedItemPayloadToPostContract(e,t),i=l.__classPrivateFieldGet(this,c).post("users/me/posts",JSON.stringify(o),{headers:{[p.HttpHeader.ContentType]:"application/json"}}),r=await l.__classPrivateFieldGet(this,n).execute(i);return m.asObjectWithSchema(r.data,{postId:m.asString,postUri:m.asString})}};n=new WeakMap,i=new WeakMap,r=new WeakMap,s=new WeakMap,a=new WeakMap,c=new WeakMap,d=new WeakMap,F=l.__decorate([u.injectable(),l.__param(0,u.inject(g.TokenProvider)),l.__param(1,u.inject(y.AcceptableLanguageProvider)),l.__param(2,u.inject(y.CorrelationVectorProvider)),l.__param(3,u.inject(y.ContentRestrictionProvider)),l.__param(4,u.inject(p.InterceptorCollection)),l.__param(5,u.inject(v.Logger)),l.__metadata("design:paramtypes",[Object,Function,Function,Function,Object,Object])],F),t.XblFeedService=F},zyTX:function(e,t,o){"use strict";o("jQ/y"),o("kYxP"),o("sZjt"),o("udXp"),o("HBCE"),o("6pI8"),o("ReG1"),o("4QA/index.html"),o("OVwY"),o("gpa9"),o("tclo"),o("m6pu"),o("MyZA"),o("3e/+"),o("jeUp"),o("JlMe"),o("dv4H"),o("uYDL"),Object.defineProperty(t,"__esModule",{value:!0}),t.feedActionCoalescer=void 0;const n=o("3roD"),i=Symbol("FeedItemByLocator");t.feedActionCoalescer={isCoalescable:function(e){const t=e;return(null===t||void 0===t?void 0:t.type)===n.FeedActionType.GetFeedItem&&"string"===typeof t.itemId&&!t.forceRefresh||(null===t||void 0===t?void 0:t.type)===n.FeedActionType.GetFeedItems&&Array.isArray(t.itemIds)},getRequestQueueKey:function(e){return i},coalesceRequests:function(e,t){if(1===t.length)return t[0];const o=t.reduce((e,t)=>{if(t.type===n.FeedActionType.GetFeedItem)e.add(t.itemId);else for(const o of t.itemIds)e.add(o);return e},new Set);return n.FeedAction.getFeedItems.start([...o])}}}}]);
//# sourceMappingURL=7.c238525b.chunk.js.map